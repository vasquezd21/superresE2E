(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{6750:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return E}});var r=n(9008),a=n(4476),i=n.n(a),c=n(6311),s=n(266),o=n(809),u=n.n(o),f=n(7294),p=[{text:"cat",value:"https://i.imgur.com/CzXTtJV.jpg"},{text:"dog",value:"https://i.imgur.com/OB0y6MR.jpg"},{text:"cheetah",value:"https://farm2.staticflickr.com/1533/26541536141_41abe98db3_z_d.jpg"},{text:"bird",value:"https://farm4.staticflickr.com/3075/3168662394_7d7103de7d_z_d.jpg"},{text:"lighthouse",value:"https://farm3.staticflickr.com/2220/1572613671_7311098b76_z_d.jpg"},{text:"sailboat",value:"https://farm7.staticflickr.com/6089/6115759179_86316c08ff_z_d.jpg"},{text:"cello",value:"https://farm2.staticflickr.com/1090/4595137268_0e3f2b9aa7_z_d.jpg"},{text:"piano",value:"https://farm4.staticflickr.com/3224/3081748027_0ee3d59fea_z_d.jpg"},{text:"apple",value:"https://farm8.staticflickr.com/7377/9359257263_81b080a039_z_d.jpg"},{text:"flower",value:"https://farm9.staticflickr.com/8295/8007075227_dc958c1fe6_z_d.jpg"}],h=n(6955),l=n.n(h),d=n(9793);function m(t){return _.apply(this,arguments)}function _(){return(_=(0,s.Z)(u().mark((function t(e){var n,r,a,i=arguments;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:[1,3,224,224],t.next=3,x(e,n[2],n[3]);case 3:return r=t.sent,a=v(r,n),t.abrupt("return",a);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function x(t){return g.apply(this,arguments)}function g(){return(g=(0,s.Z)(u().mark((function t(e){var n,r,a,i=arguments;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:224,r=i.length>2&&void 0!==i[2]?i[2]:224,t.next=4,l().read(e).then((function(t){return t.greyscale().resize(n,r)}));case 4:return a=t.sent,t.abrupt("return",a);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function v(t,e){for(var n=t.bitmap.data,r=new Array,a=0;a<n.length;a+=4)r.push(n[a]);for(var i=new Float32Array(e[1]*e[2]*e[3]),c=0;c<r.length;c++)i[c]=r[c]/255;return new d.Tensor("float32",i,e)}function w(t){return j.apply(this,arguments)}function j(){return(j=(0,s.Z)(u().mark((function t(e){var n,r,a,i,c,s,o=arguments;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=o.length>1&&void 0!==o[1]?o[1]:224,r=o.length>2&&void 0!==o[2]?o[2]:224,e.data instanceof Float32Array){t.next=4;break}throw new Error("The tensor data must be a Float32Array");case 4:for(a=Array.from(e.data,(function(t){return 255*t})),i=new Array,c=0;c<a.length;c++)i.push(a[c],a[c],a[c],255);return s=new(l())({data:Uint8Array.from(i),width:n,height:r}),t.abrupt("return",s);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var b=n(5108);function k(t){return y.apply(this,arguments)}function y(){return(y=(0,s.Z)(u().mark((function t(e){var n,r,a,i,s;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.InferenceSession.create("/chunks/pages/0_model.onnx",{executionProviders:["webgl"],graphOptimizationLevel:"all"});case 2:return n=t.sent,b.log("Inference session created"),t.next=6,N(n,e);case 6:return r=t.sent,a=(0,c.Z)(r,2),i=a[0],s=a[1],t.abrupt("return",[i,s]);case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function N(t,e){return z.apply(this,arguments)}function z(){return(z=(0,s.Z)(u().mark((function t(e,n){var r,a,i,c,s,o;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new Date,(a={})[e.inputNames[0]]=n,t.next=5,e.run(a);case 5:return i=t.sent,c=new Date,s=(c.getTime()-r.getTime())/1e3,o=i[e.outputNames[0]],t.abrupt("return",[o,s]);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Z=n(5893),H=function(t){var e=(0,f.useRef)(null),n=(0,f.useRef)(null),r=(0,f.useState)(""),a=r[0],o=r[1],h=function(){var n=(0,s.Z)(u().mark((function n(){var r,a,i,c;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=p[Math.floor(10*Math.random()+0)],(a=new Image).src=r.value,i=e.current,c=i.getContext("2d"),a.onload=(0,s.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.drawImage(a,0,0,t.width,t.height),e.next=3,l(a.src);case 3:case"end":return e.stop()}}),e)})));case 6:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),l=function(){var e=(0,s.Z)(u().mark((function e(r){var a,i,s,f,p,h,l,d;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(r);case 2:return a=e.sent,e.next=5,k(a);case 5:return i=e.sent,s=(0,c.Z)(i,2),f=s[0],p=s[1],o("Inference speed: ".concat(p," seconds")),e.next=12,w(f,t.width,t.height);case 12:h=e.sent,l=new ImageData(new Uint8ClampedArray(h.bitmap.data.buffer),t.width,t.height),d=n.current,d.getContext("2d").putImageData(l,0,0);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)("button",{className:i().grid,onClick:h,children:"Run Super Resolution"}),(0,Z.jsx)("br",{}),(0,Z.jsx)("canvas",{ref:e,width:t.width,height:t.height}),(0,Z.jsx)("canvas",{ref:n,width:t.width,height:t.height}),(0,Z.jsx)("span",{children:a})]})},E=function(){return(0,Z.jsxs)("div",{className:i().container,children:[(0,Z.jsxs)(r.default,{children:[(0,Z.jsx)("title",{children:"ORT Web Example"}),(0,Z.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,Z.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,Z.jsxs)("main",{className:i().main,children:[(0,Z.jsx)("h1",{className:i().title,children:"Use ORT Web"}),(0,Z.jsx)(H,{width:240,height:240}),(0,Z.jsx)("div",{id:"result",className:"mt-3"})]}),(0,Z.jsx)("footer",{className:i().footer,children:(0,Z.jsx)("a",{href:"https://onnxruntime.ai/docs",target:"_blank",rel:"noopener noreferrer"})})]})}},5301:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(6750)}])},4476:function(t){t.exports={container:"Home_container__1EcsU",main:"Home_main__1x8gC",footer:"Home_footer__1WdhD",title:"Home_title__3DjR7",description:"Home_description__17Z4F",code:"Home_code__axx2Y",grid:"Home_grid__2Ei2F",card:"Home_card__2SdtB",logo:"Home_logo__1YbrH"}},3180:function(){},8104:function(){},3731:function(){},2361:function(){},4616:function(){},4059:function(){}},function(t){t.O(0,[646,267,774,888,179],(function(){return e=5301,t(t.s=e);var e}));var e=t.O();_N_E=e}]);