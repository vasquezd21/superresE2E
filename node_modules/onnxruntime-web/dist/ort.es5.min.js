/*!
* ONNX Runtime Web v1.16.0-dev.20230704-d540c7da0f
* Copyright (c) Microsoft Corporation. All rights reserved.
* Licensed under the MIT License.
*/
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.ort=e():t.ort=e()}(self,(function(){return function(){var __webpack_modules__={5716:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,s)}u((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(t,i)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.onnxjsBackend=void 0;var a=n(6027),i=n(1723),s=function(){function t(){}return t.prototype.init=function(){return r(this,void 0,void 0,(function(){return o(this,(function(t){return[2]}))}))},t.prototype.createSessionHandler=function(t,e){return r(this,void 0,void 0,(function(){var n;return o(this,(function(r){switch(r.label){case 0:return n=new a.Session(e),"string"!=typeof t?[3,2]:[4,n.loadModel(t)];case 1:return r.sent(),[3,4];case 2:return[4,n.loadModel(t)];case 3:r.sent(),r.label=4;case 4:return[2,new i.OnnxjsSessionHandler(n)]}}))}))},t}();e.onnxjsBackend=new s},2818:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,s)}u((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(t,i)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.wasmBackend=e.initializeFlags=void 0;var a=n(2235),i=n(5381),s=n(9544),u=n(6640);e.initializeFlags=function(){if(("number"!=typeof a.env.wasm.initTimeout||a.env.wasm.initTimeout<0)&&(a.env.wasm.initTimeout=0),"boolean"!=typeof a.env.wasm.simd&&(a.env.wasm.simd=!0),"boolean"!=typeof a.env.wasm.proxy&&(a.env.wasm.proxy=!1),"number"!=typeof a.env.wasm.numThreads||!Number.isInteger(a.env.wasm.numThreads)||a.env.wasm.numThreads<=0){var t="undefined"==typeof navigator?(0,i.cpus)().length:navigator.hardwareConcurrency;a.env.wasm.numThreads=Math.min(4,Math.ceil((t||1)/2))}};var c=function(){function t(){}return t.prototype.init=function(){return r(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return(0,e.initializeFlags)(),[4,(0,s.initializeWebAssemblyInstance)()];case 1:return t.sent(),[2]}}))}))},t.prototype.createSessionHandler=function(t,e){return r(this,void 0,void 0,(function(){var n;return o(this,(function(r){switch(r.label){case 0:return[4,(n=new u.OnnxruntimeWebAssemblySessionHandler).loadModel(t,e)];case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))},t}();e.wasmBackend=new c},1057:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),o(n(2235),e);var a=n(2235),i=n(8408),s=n(5716).onnxjsBackend;(0,a.registerBackend)("webgl",s,-10);var u=n(2818).wasmBackend;(0,a.registerBackend)("cpu",u,10),(0,a.registerBackend)("wasm",u,10),(0,a.registerBackend)("xnnpack",u,9),(0,a.registerBackend)("webnn",u,9),a.env.versions.web=i.version},4910:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createAttributeWithCacheKey=void 0;var n=function(){function t(t){Object.assign(this,t)}return Object.defineProperty(t.prototype,"cacheKey",{get:function(){var t=this;return this._cacheKey||(this._cacheKey=Object.getOwnPropertyNames(this).sort().map((function(e){return"".concat(t[e])})).join(";")),this._cacheKey},enumerable:!1,configurable:!0}),t}();e.createAttributeWithCacheKey=function(t){return new n(t)}},6874:function(t,e,n){"use strict";var r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.Attribute=void 0;var o=n(1446),a=n(1287),i=n(9240),s=n(7273),u=a.onnxruntime.experimental.fbs,c=function(){function t(e){var n,a;if(this._attributes=new Map,null!=e){try{for(var i=r(e),s=i.next();!s.done;s=i.next()){var c=s.value;c instanceof o.onnx.AttributeProto?this._attributes.set(c.name,[t.getValue(c),t.getType(c)]):c instanceof u.Attribute&&this._attributes.set(c.name(),[t.getValue(c),t.getType(c)])}}catch(t){n={error:t}}finally{try{s&&!s.done&&(a=i.return)&&a.call(i)}finally{if(n)throw n.error}}if(this._attributes.size<e.length)throw new Error("duplicated attribute names")}}return t.prototype.set=function(t,e,n){this._attributes.set(t,[n,e])},t.prototype.delete=function(t){this._attributes.delete(t)},t.prototype.getFloat=function(t,e){return this.get(t,"float",e)},t.prototype.getInt=function(t,e){return this.get(t,"int",e)},t.prototype.getString=function(t,e){return this.get(t,"string",e)},t.prototype.getTensor=function(t,e){return this.get(t,"tensor",e)},t.prototype.getFloats=function(t,e){return this.get(t,"floats",e)},t.prototype.getInts=function(t,e){return this.get(t,"ints",e)},t.prototype.getStrings=function(t,e){return this.get(t,"strings",e)},t.prototype.getTensors=function(t,e){return this.get(t,"tensors",e)},t.prototype.get=function(t,e,n){var r=this._attributes.get(t);if(void 0===r){if(void 0!==n)return n;throw new Error("required attribute not found: ".concat(t))}if(r[1]!==e)throw new Error("type mismatch: expected ".concat(e," but got ").concat(r[1]));return r[0]},t.getType=function(t){var e=t instanceof o.onnx.AttributeProto?t.type:t.type();switch(e){case o.onnx.AttributeProto.AttributeType.FLOAT:return"float";case o.onnx.AttributeProto.AttributeType.INT:return"int";case o.onnx.AttributeProto.AttributeType.STRING:return"string";case o.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case o.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case o.onnx.AttributeProto.AttributeType.INTS:return"ints";case o.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case o.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw new Error("attribute type is not supported yet: ".concat(o.onnx.AttributeProto.AttributeType[e]))}},t.getValue=function(t){var e=t instanceof o.onnx.AttributeProto?t.type:t.type();if(e===o.onnx.AttributeProto.AttributeType.GRAPH||e===o.onnx.AttributeProto.AttributeType.GRAPHS)throw new Error("graph attribute is not supported yet");var n=this.getValueNoCheck(t);if(e===o.onnx.AttributeProto.AttributeType.INT&&s.LongUtil.isLong(n))return s.LongUtil.longToNumber(n);if(e===o.onnx.AttributeProto.AttributeType.INTS){for(var r=n,a=new Array(r.length),c=0;c<r.length;c++){var l=r[c];a[c]=s.LongUtil.longToNumber(l)}return a}if(e===o.onnx.AttributeProto.AttributeType.TENSOR)return t instanceof o.onnx.AttributeProto?i.Tensor.fromProto(n):i.Tensor.fromOrtTensor(n);if(e===o.onnx.AttributeProto.AttributeType.TENSORS){if(t instanceof o.onnx.AttributeProto)return n.map((function(t){return i.Tensor.fromProto(t)}));if(t instanceof u.Attribute)return n.map((function(t){return i.Tensor.fromOrtTensor(t)}))}if(e===o.onnx.AttributeProto.AttributeType.STRING&&t instanceof o.onnx.AttributeProto){var f=n;return(0,s.decodeUtf8String)(f)}return e===o.onnx.AttributeProto.AttributeType.STRINGS&&t instanceof o.onnx.AttributeProto?n.map(s.decodeUtf8String):n},t.getValueNoCheck=function(t){return t instanceof o.onnx.AttributeProto?this.getValueNoCheckFromOnnxFormat(t):this.getValueNoCheckFromOrtFormat(t)},t.getValueNoCheckFromOnnxFormat=function(t){switch(t.type){case o.onnx.AttributeProto.AttributeType.FLOAT:return t.f;case o.onnx.AttributeProto.AttributeType.INT:return t.i;case o.onnx.AttributeProto.AttributeType.STRING:return t.s;case o.onnx.AttributeProto.AttributeType.TENSOR:return t.t;case o.onnx.AttributeProto.AttributeType.GRAPH:return t.g;case o.onnx.AttributeProto.AttributeType.FLOATS:return t.floats;case o.onnx.AttributeProto.AttributeType.INTS:return t.ints;case o.onnx.AttributeProto.AttributeType.STRINGS:return t.strings;case o.onnx.AttributeProto.AttributeType.TENSORS:return t.tensors;case o.onnx.AttributeProto.AttributeType.GRAPHS:return t.graphs;default:throw new Error("unsupported attribute type: ".concat(o.onnx.AttributeProto.AttributeType[t.type]))}},t.getValueNoCheckFromOrtFormat=function(t){switch(t.type()){case u.AttributeType.FLOAT:return t.f();case u.AttributeType.INT:return t.i();case u.AttributeType.STRING:return t.s();case u.AttributeType.TENSOR:return t.t();case u.AttributeType.GRAPH:return t.g();case u.AttributeType.FLOATS:return t.floatsArray();case u.AttributeType.INTS:for(var e=[],n=0;n<t.intsLength();n++)e.push(t.ints(n));return e;case u.AttributeType.STRINGS:var r=[];for(n=0;n<t.stringsLength();n++)r.push(t.strings(n));return r;case u.AttributeType.TENSORS:var o=[];for(n=0;n<t.tensorsLength();n++)o.push(t.tensors(n));return o;default:throw new Error("unsupported attribute type: ".concat(u.AttributeType[t.type()]))}},t}();e.Attribute=c},1975:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,s)}u((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(t,i)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},a=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.resolveBackend=e.backend=void 0;var i=n(4418),s=new Map;function u(t){return r(this,void 0,void 0,(function(){var n,r,a;return o(this,(function(o){switch(o.label){case 0:return void 0!==(n=e.backend)[t]&&(i=n[t],"initialize"in(u=i)&&"function"==typeof u.initialize&&"createSessionHandler"in u&&"function"==typeof u.createSessionHandler&&"dispose"in u&&"function"==typeof u.dispose)?(r=n[t],"object"==typeof(a=r.initialize())&&"then"in a?[4,a]:[3,2]):[3,3];case 1:a=o.sent(),o.label=2;case 2:if(a)return s.set(t,r),[2,r];o.label=3;case 3:return[2,void 0]}var i,u}))}))}e.backend={webgl:new i.WebGLBackend},e.resolveBackend=function t(e){return r(this,void 0,void 0,(function(){var n,r,i,c,l,f,p,d,h;return o(this,(function(o){switch(o.label){case 0:return e?[3,1]:[2,t(["webgl"])];case 1:n="string"==typeof e?[e]:e,o.label=2;case 2:o.trys.push([2,7,8,9]),r=a(n),i=r.next(),o.label=3;case 3:return i.done?[3,6]:(c=i.value,(l=s.get(c))?[2,l]:[4,u(c)]);case 4:if(f=o.sent())return[2,f];o.label=5;case 5:return i=r.next(),[3,3];case 6:return[3,9];case 7:return p=o.sent(),d={error:p},[3,9];case 8:try{i&&!i.done&&(h=r.return)&&h.call(r)}finally{if(d)throw d.error}return[7];case 9:throw new Error("no available backend to use")}}))}))}},4418:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLBackend=void 0;var r=n(2235),o=n(1315),a=n(2171),i=n(3389),s=function(){function t(){}return Object.defineProperty(t.prototype,"contextId",{get:function(){return r.env.webgl.contextId},set:function(t){r.env.webgl.contextId=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"matmulMaxBatchSize",{get:function(){return r.env.webgl.matmulMaxBatchSize},set:function(t){r.env.webgl.matmulMaxBatchSize=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textureCacheMode",{get:function(){return r.env.webgl.textureCacheMode},set:function(t){r.env.webgl.textureCacheMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pack",{get:function(){return r.env.webgl.pack},set:function(t){r.env.webgl.pack=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"async",{get:function(){return r.env.webgl.async},set:function(t){r.env.webgl.async=t},enumerable:!1,configurable:!0}),t.prototype.initialize=function(){try{return this.glContext=(0,i.createWebGLContext)(this.contextId),"number"!=typeof this.matmulMaxBatchSize&&(this.matmulMaxBatchSize=16),"string"!=typeof this.textureCacheMode&&(this.textureCacheMode="full"),"boolean"!=typeof this.pack&&(this.pack=!1),"boolean"!=typeof this.async&&(this.async=!1),o.Logger.setWithEnv(r.env),o.Logger.verbose("WebGLBackend","Created WebGLContext: ".concat(typeof this.glContext," with matmulMaxBatchSize: ").concat(this.matmulMaxBatchSize,"; textureCacheMode: ").concat(this.textureCacheMode,"; pack: ").concat(this.pack,"; async: ").concat(this.async,".")),!0}catch(t){return o.Logger.warning("WebGLBackend","Unable to initialize WebGLBackend. ".concat(t)),!1}},t.prototype.createSessionHandler=function(t){return new a.WebGLSessionHandler(this,t)},t.prototype.dispose=function(){this.glContext.dispose()},t}();e.WebGLBackend=s},6859:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__assign||function(){return a=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},a.apply(this,arguments)},i=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(e,"__esModule",{value:!0}),e.CoordsGlslLib=void 0;var s=n(7273),u=n(1997),c=n(6757),l=n(7618),f=n(432),p=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.getFunctions=function(){return a(a(a(a(a(a(a({},this.offsetToCoords()),this.coordsToOffset()),this.toVec()),this.valueFrom()),this.getCommonUtilFuncs()),this.getInputsSamplingSnippets()),this.getOutputSamplingSnippet())},e.prototype.getCustomTypes=function(){return{}},e.prototype.offsetToCoords=function(){return{offsetToCoords:new u.GlslLibRoutine("\n      vec2 ".concat("offsetToCoords","(int offset, int width, int height) {\n        int t = offset / width;\n        int s = offset - t*width;\n        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);\n        return coords;\n      }\n      "))}},e.prototype.coordsToOffset=function(){return{coordsToOffset:new u.GlslLibRoutine("\n      int ".concat("coordsToOffset","(vec2 coords, int width, int height) {\n        float s = coords.s * float(width);\n        float t = coords.t * float(height);\n        int offset = int(t) * width + int(s);\n        return offset;\n      }\n      "))}},e.prototype.getOutputSamplingSnippet=function(){var t=this.context.outputTextureLayout;return t.isPacked?this.getPackedOutputSamplingSnippet(t):this.getUnpackedOutputSamplingSnippet(t)},e.prototype.getPackedOutputSamplingSnippet=function(t){var e=t.unpackedShape,n=[t.width,t.height],r={},o="getOutputCoords";switch(e.length){case 0:r[o]=this.getOutputScalarCoords();break;case 1:r[o]=this.getOutputPacked1DCoords(e,n);break;case 2:r[o]=this.getOutputPacked2DCoords(e,n);break;case 3:r[o]=this.getOutputPacked3DCoords(e,n);break;default:r[o]=this.getOutputPackedNDCoords(e,n)}var a=(0,c.getGlsl)(this.context.glContext.version),i="\n      void setOutput(vec4 val) {\n        ".concat(a.output," = val;\n      }\n    ");return r.floatTextureSetRGBA=new u.GlslLibRoutine(i),r},e.prototype.getUnpackedOutputSamplingSnippet=function(t){var e=t.unpackedShape,n=[t.width,t.height],r={},o="getOutputCoords";switch(e.length){case 0:r[o]=this.getOutputScalarCoords();break;case 1:r[o]=this.getOutputUnpacked1DCoords(e,n);break;case 2:r[o]=this.getOutputUnpacked2DCoords(e,n);break;case 3:r[o]=this.getOutputUnpacked3DCoords(e,n);break;case 4:r[o]=this.getOutputUnpacked4DCoords(e,n);break;case 5:r[o]=this.getOutputUnpacked5DCoords(e,n);break;case 6:r[o]=this.getOutputUnpacked6DCoords(e,n);break;default:throw new Error("Unsupported output dimensionality: ".concat(e.length))}var a=(0,c.getGlsl)(this.context.glContext.version),i="\n        void setOutput(float val) {\n          ".concat(a.output," = vec4(val, 0, 0, 0);\n        }\n    ");return r.floatTextureSetR=new u.GlslLibRoutine(i),r},e.prototype.getOutputScalarCoords=function(){return new u.GlslLibRoutine("\n      int getOutputCoords() {\n        return 0;\n      }\n    ")},e.prototype.getOutputPacked1DCoords=function(t,e){var n=e,r="";return 1===n[0]?(r="\n          int getOutputCoords() {\n            return 2 * int(TexCoords.y * ".concat(n[1],".0);\n          }\n        "),new u.GlslLibRoutine(r)):1===n[1]?(r="\n          int getOutputCoords() {\n            return 2 * int(TexCoords.x * ".concat(n[0],".0);\n          }\n        "),new u.GlslLibRoutine(r)):(r="\n        int getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                 vec2(".concat(n[0],", ").concat(n[1],"));\n          return 2 * (resTexRC.y * ").concat(n[0]," + resTexRC.x);\n        }\n      "),new u.GlslLibRoutine(r))},e.prototype.getOutputPacked2DCoords=function(t,e){var n="";if(s.ArrayUtil.arraysEqual(t,e))return n="\n        ivec2 getOutputCoords() {\n          return 2 * ivec2(TexCoords.xy * vec2(".concat(e[0],", ").concat(e[1],"));\n        }\n      "),new u.GlslLibRoutine(n);var r=e,o=Math.ceil(t[1]/2);return n="\n        ivec2 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(".concat(r[0],", ").concat(r[1],"));\n\n          int index = resTexRC.y * ").concat(r[0]," + resTexRC.x;\n\n          // reverse r and c order for packed texture\n          int r = imod(index, ").concat(o,") * 2;\n          int c = 2 * (index / ").concat(o,");\n\n          return ivec2(r, c);\n        }\n      "),new u.GlslLibRoutine(n)},e.prototype.getOutputPacked3DCoords=function(t,e){var n=[e[0],e[1]],r=Math.ceil(t[2]/2),o=r*Math.ceil(t[1]/2),a="\n        ivec3 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(".concat(n[0],", ").concat(n[1],"));\n          int index = resTexRC.y * ").concat(n[0]," + resTexRC.x;\n\n          int b = index / ").concat(o,";\n          index -= b * ").concat(o,";\n\n          // reverse r and c order for packed texture\n          int r = imod(index, ").concat(r,") * 2;\n          int c = 2 * (index / ").concat(r,");\n\n          return ivec3(b, r, c);\n        }\n      ");return new u.GlslLibRoutine(a)},e.prototype.getOutputPackedNDCoords=function(t,e){for(var n=[e[0],e[1]],r=Math.ceil(t[t.length-1]/2),o=r*Math.ceil(t[t.length-2]/2),a=o,i="",s="b, r, c",c=2;c<t.length-1;c++)a*=t[t.length-c-1],i="\n      int b".concat(c," = index / ").concat(a,";\n      index -= b").concat(c," * ").concat(a,";\n    ")+i,s="b".concat(c,", ")+s;var l="\n      ivec".concat(t.length," getOutputCoords() {\n        ivec2 resTexRC = ivec2(TexCoords.xy *\n                              vec2(").concat(n[0],", ").concat(n[1],"));\n        int index = resTexRC.y * ").concat(n[0]," + resTexRC.x;\n\n        ").concat(i,"\n\n        int b = index / ").concat(o,";\n        index -= b * ").concat(o,";\n\n        // reverse r and c order for packed texture\n        int r = imod(index, ").concat(r,") * 2;\n        int c = 2 * (index / ").concat(r,");\n\n        return ivec").concat(t.length,"(").concat(s,");\n      }\n    ");return new u.GlslLibRoutine(l)},e.prototype.getOutputUnpacked1DCoords=function(t,e){var n="\n        int getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(".concat(e[0],", ").concat(e[1],"));\n          return resTexRC.y * ").concat(e[0]," + resTexRC.x;\n        }\n      ");return new u.GlslLibRoutine(n)},e.prototype.getOutputUnpacked2DCoords=function(t,e){var n="\n        ivec2 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(".concat(e[0],", ").concat(e[1],"));\n          int index = resTexRC.y * ").concat(e[0]," + resTexRC.x;\n          int r = index / ").concat(t[1],";\n          int c = index - r * ").concat(t[1],";\n          return ivec2(r, c);\n        }\n      ");return new u.GlslLibRoutine(n)},e.prototype.getOutputUnpacked3DCoords=function(t,e){var n,r=t.length,o=null;r<2&&(o=[]),(o=new Array(r-1))[r-2]=t[r-1];for(var a=r-3;a>=0;--a)o[a]=o[a+1]*t[a+1];var i=["r","c","d"],s=o.map((function(t,e){var n="int ".concat(i[e]," = index / ").concat(t),r=e===o.length-1?"int ".concat(i[e+1]," = index - ").concat(i[e]," * ").concat(t):"index -= ".concat(i[e]," * ").concat(t);return"".concat(n,"; ").concat(r,";")})).join("");return n="\n        ivec3 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(".concat(e[0],", ").concat(e[1],"));\n          int index = resTexRC.y * ").concat(e[0]," + resTexRC.x;\n          ").concat(s,"\n          return ivec3(r, c, d);\n        }\n      "),new u.GlslLibRoutine(n)},e.prototype.getOutputUnpacked4DCoords=function(t,e){var n,r=t.length,o=null;r<2&&(o=[]),(o=new Array(r-1))[r-2]=t[r-1];for(var a=r-3;a>=0;--a)o[a]=o[a+1]*t[a+1];var i=["r","c","d","d2"],s=o.map((function(t,e){var n="int ".concat(i[e]," = index / ").concat(t),r=e===o.length-1?"int ".concat(i[e+1]," = index - ").concat(i[e]," * ").concat(t):"index -= ".concat(i[e]," * ").concat(t);return"".concat(n,"; ").concat(r,";")})).join("");return n="\n      ivec4 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(".concat(e[0],", ").concat(e[1],"));\n          int index = resTexRC.y * ").concat(e[0]," + resTexRC.x;\n          ").concat(s,"\n          return ivec4(r, c, d, d2);\n        }\n      "),new u.GlslLibRoutine(n)},e.prototype.getOutputUnpacked5DCoords=function(t,e){var n,r=t.length,o=null;r<2&&(o=[]),(o=new Array(r-1))[r-2]=t[r-1];for(var a=r-3;a>=0;--a)o[a]=o[a+1]*t[a+1];var i=["r","c","d","d2","d3"],s=o.map((function(t,e){var n="int ".concat(i[e]," = index / ").concat(t),r=e===o.length-1?"int ".concat(i[e+1]," = index - ").concat(i[e]," * ").concat(t):"index -= ".concat(i[e]," * ").concat(t);return"".concat(n,"; ").concat(r,";")})).join("");return n="\n      ivec5 getOutputCoords() {\n          ivec2 resTexRC = ivec2(TexCoords.xy *\n                                vec2(".concat(e[0],", ").concat(e[1],"));\n          int index = resTexRC.y * ").concat(e[0]," + resTexRC.x;\n          ").concat(s,"\n          return ivec5(r, c, d, d2, d3);\n        }\n      "),new u.GlslLibRoutine(n)},e.prototype.getOutputUnpacked6DCoords=function(t,e){var n,r=t.length,o=null;r<2&&(o=[]),(o=new Array(r-1))[r-2]=t[r-1];for(var a=r-3;a>=0;--a)o[a]=o[a+1]*t[a+1];var i=["r","c","d","d2","d3","d4"],s=o.map((function(t,e){var n="int ".concat(i[e]," = index / ").concat(t),r=e===o.length-1?"int ".concat(i[e+1]," = index - ").concat(i[e]," * ").concat(t):"index -= ".concat(i[e]," * ").concat(t);return"".concat(n,"; ").concat(r,";")})).join("");return n="\n     ivec6 getOutputCoords() {\n         ivec2 resTexRC = ivec2(TexCoords.xy *\n                               vec2(".concat(e[0],", ").concat(e[1],"));\n         int index = resTexRC.y * ").concat(e[0]," + resTexRC.x;\n         ").concat(s,"\n         return ivec6(r, c, d, d2, d3, d4);\n       }\n     "),new u.GlslLibRoutine(n)},e.prototype.getCommonUtilFuncs=function(){var t={},e="uvFromFlat";t[e]=new u.GlslLibRoutine("\n    vec2 uvFromFlat(int texNumR, int texNumC, int index) {\n      int texC = index / texNumR;\n      int texR = index - texC * texNumR;\n      // TODO: swap texR, texC order in following function so row is corresponding to u and column is corresponding to\n      //       v.\n      return (vec2(texR, texC) + halfCR) / vec2(texNumR, texNumC);\n    }\n    "),t[e="packedUVfrom1D"]=new u.GlslLibRoutine("\n      vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n        int texelIndex = index / 2;\n        int texR = texelIndex / texNumC;\n        int texC = texelIndex - texR * texNumC;\n        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n      }\n      "),t[e="packedUVfrom2D"]=new u.GlslLibRoutine("\n      vec2 packedUVfrom2D(int texNumR, int texNumC, int texelsInLogicalRow, int row, int col) {\n        int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n        int texR = texelIndex / texNumC;\n        int texC = texelIndex - texR * texNumC;\n        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n      }\n      "),t[e="packedUVfrom3D"]=new u.GlslLibRoutine("\n      vec2 packedUVfrom3D(int texNumR, int texNumC,\n          int texelsInBatch, int texelsInLogicalRow, int b,\n          int row, int col) {\n        int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n        int texR = index / texNumC;\n        int texC = index - texR * texNumC;\n        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n      }\n      "),e="sampleTexture";var n=(0,c.getGlsl)(this.context.glContext.version);return t[e]=new u.GlslLibRoutine("\n        float sampleTexture(sampler2D textureSampler, vec2 uv) {\n            return ".concat(n.texture2D,"(textureSampler, uv).r;\n        }")),t},e.prototype.getInputsSamplingSnippets=function(){var t=this,e={},n=this.context.outputTextureLayout;return this.context.programInfo.inputNames.forEach((function(r,o){var a=t.context.inputTextureLayouts[o],i=(0,f.generateShaderFuncNameFromInputSamplerName)(r);a.isPacked?e[i]=t.getPackedSamplerFromInput(i,r,a):e[i]=t.getUnpackedSamplerFromInput(i,r,a);var s=(0,f.generateShaderFuncNameFromInputSamplerNameAtOutCoords)(r);a.unpackedShape.length<=n.unpackedShape.length&&(a.isPacked?e[s]=t.getPackedSamplerAtOutputCoords(s,a,n,r):e[s]=t.getUnpackedSamplerAtOutputCoords(s,a,n,r))})),e},e.prototype.getPackedSamplerAtOutputCoords=function(t,e,n,r){var o,a=e.unpackedShape,i=n.unpackedShape,c=r,l=(0,f.generateShaderFuncNameFromInputSamplerName)(c),p=a.length,d=i.length,h=s.BroadcastUtil.getBroadcastDims(a,i),g=(0,f.getCoordsDataType)(d),m=d-p,y=(0,f.getGlChannels)();o=0===p?"":d<2&&h.length>=1?"coords = 0;":h.map((function(t){return"coords.".concat(y[t+m]," = 0;")})).join("\n");var b;b=d<2&&p>0?"coords":a.map((function(t,e){return"coords.".concat(y[e+m])})).join(", ");var v="return outputValue;",w=1===s.ShapeUtil.size(a),_=1===s.ShapeUtil.size(i);if(1!==p||w||_){if(w&&!_)v=1===d?"\n          return vec4(outputValue.x, outputValue.x, 0., 0.);\n        ":"\n          return vec4(outputValue.x);\n        ";else if(h.length){var x=p-2,T=p-1;h.indexOf(x)>-1&&h.indexOf(T)>-1?v="return vec4(outputValue.x);":h.indexOf(x)>-1?v="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":h.indexOf(T)>-1&&(v="return vec4(outputValue.xx, outputValue.zz);")}}else v="\n        return vec4(outputValue.xy, outputValue.xy);\n      ";var S="\n        int lastDim = coords.".concat(y[d-1],";\n        coords.").concat(y[d-1]," = coords.").concat(y[d-2],";\n        coords.").concat(y[d-2]," = lastDim;\n      "),A="\n      vec4 ".concat(t,"() {\n        ").concat(g," coords = getOutputCoords();\n        ").concat(S,"\n        ").concat(o,"\n        vec4 outputValue = ").concat(l,"(").concat(b,");\n        ").concat(v,"\n      }\n    ");return new u.GlslLibRoutine(A,["coordinates.getOutputCoords"])},e.prototype.getUnpackedSamplerAtOutputCoords=function(t,e,n,r){var o=[n.width,n.height],a=[e.width,e.height],i=e.unpackedShape.length,c=n.unpackedShape.length,l=e.unpackedShape,p=n.unpackedShape,d=(0,f.generateShaderFuncNameFromInputSamplerName)(r);if(i===c&&s.ArrayUtil.arraysEqual(a,o)){var h="\n          float ".concat(t,"() {\n            return sampleTexture(").concat(r,", TexCoords);\n          }\n        ");return new u.GlslLibRoutine(h,["coordinates.sampleTexture"])}var g,m=(0,f.getCoordsDataType)(c),y=s.BroadcastUtil.getBroadcastDims(l,p),b=c-i,v=(0,f.getGlChannels)();g=0===i?"":c<2&&y.length>=1?"coords = 0;":y.map((function(t){return"coords.".concat(v[t+b]," = 0;")})).join("\n");var w;w=c<2&&i>0?"coords":e.unpackedShape.map((function(t,e){return"coords.".concat(v[e+b])})).join(", ");var _="\n        float ".concat(t,"() {\n          ").concat(m," coords = getOutputCoords();\n          ").concat(g,"\n          return ").concat(d,"(").concat(w,");\n        }\n      ");return new u.GlslLibRoutine(_,["coordinates.getOutputCoords"])},e.prototype.getPackedSamplerFromInput=function(t,e,n){switch(n.unpackedShape.length){case 0:return this.getPackedSamplerScalar(t,e);case 1:return this.getPackedSampler1D(t,e,n);case 2:return this.getPackedSampler2D(t,e,n);case 3:return this.getPackedSampler3D(t,e,n);default:return this.getPackedSamplerND(t,e,n)}},e.prototype.getUnpackedSamplerFromInput=function(t,e,n){var r=n.unpackedShape;switch(r.length){case 0:return this.getUnpackedSamplerScalar(t,e,n);case 1:return this.getUnpackedSampler1D(t,e,n);case 2:return this.getUnpackedSampler2D(t,e,n);case 3:return this.getUnpackedSampler3D(t,e,n);case 4:return this.getUnpackedSampler4D(t,e,n);case 5:return this.getUnpackedSampler5D(t,e,n);case 6:return this.getUnpackedSampler6D(t,e,n);default:throw new Error("Unsupported dimension ".concat(r.length,"-D"))}},e.prototype.getPackedSamplerScalar=function(t,e){var n=(0,c.getGlsl)(this.context.glContext.version),r="\n          vec4 ".concat(t,"() {\n            return ").concat(n.texture2D,"(").concat(e,", halfCR);\n          }\n        ");return new u.GlslLibRoutine(r)},e.prototype.getPackedSampler1D=function(t,e,n){var r=[n.width,n.height],o=[r[1],r[0]],a=(0,c.getGlsl)(this.context.glContext.version),i="vec4 ".concat(t,"(int index) {\n      vec2 uv = packedUVfrom1D(\n      ").concat(o[0],", ").concat(o[1],", index);\n      return ").concat(a.texture2D,"(").concat(e,", uv);\n    }");return new u.GlslLibRoutine(i,["coordinates.packedUVfrom1D"])},e.prototype.getPackedSampler2D=function(t,e,n){var r=n.unpackedShape,o=[n.width,n.height],a=(0,c.getGlsl)(this.context.glContext.version),i=o[0],l=o[1];if(null!=o&&s.ArrayUtil.arraysEqual(r,o)){var f="vec4 ".concat(t,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(l,".0, ").concat(i,".0);\n        return ").concat(a.texture2D,"(").concat(e,", uv);\n      }");return new u.GlslLibRoutine(f)}var p=o,d=Math.ceil(r[1]/2),h="vec4 ".concat(t,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(p[1],", ").concat(p[0],", ").concat(d,", row, col);\n      return ").concat(a.texture2D,"(").concat(e,", uv);\n    }");return new u.GlslLibRoutine(h,["coordinates.packedUVfrom2D"])},e.prototype.getPackedSampler3D=function(t,e,n){var r=n.unpackedShape,o=[n.width,n.height],a=[o[0],o[1]],i=(0,c.getGlsl)(this.context.glContext.version);if(1===r[0]){var s=r.slice(1),l=(0,f.squeezeInputShape)(r,s),p=JSON.parse(JSON.stringify(n));p.unpackedShape=l;var d=this.getPackedSamplerFromInput(t,e,p),h="".concat(d.routineBody,"\n      vec4 ").concat(t,"(int b, int row, int col) {\n        return ").concat(t,"(").concat((0,f.getSqueezedParams)(["b","row","col"],[1,2]),");\n      } ");return new u.GlslLibRoutine(h,d.dependencies)}var g=a[0],m=a[1],y=Math.ceil(r[2]/2),b=y*Math.ceil(r[1]/2),v="vec4 ".concat(t,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(m,", ").concat(g,", ").concat(b,", ").concat(y,", b, row, col);\n      return ").concat(i.texture2D,"(").concat(e,", uv);}");return new u.GlslLibRoutine(v,["coordinates.packedUVfrom3D"])},e.prototype.getPackedSamplerND=function(t,e,n){for(var r=n.unpackedShape,o=r.length,a=[n.width,n.height],i=(0,c.getGlsl)(this.context.glContext.version),s=[a[0],a[1]],l=s[1],f=s[0],p=Math.ceil(r[o-1]/2),d=p*Math.ceil(r[o-2]/2),h="int b, int row, int col",g="b * ".concat(d," + (row / 2) * ").concat(p," + (col / 2)"),m=2;m<o-1;m++)h="int b".concat(m,", ")+h,d*=r[o-m-1],g="b".concat(m," * ").concat(d," + ")+g;var y="vec4 ".concat(t,"(").concat(h,") {\n      int index = ").concat(g,";\n      int texR = index / ").concat(f,";\n      int texC = index - texR * ").concat(f,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(f,", ").concat(l,");\n      return ").concat(i.texture2D,"(").concat(e,", uv);\n    }");return new u.GlslLibRoutine(y)},e.prototype.getUnpackedSamplerScalar=function(t,e,n){var r=i([n.width,n.height],2),o=r[0],a=r[1];if(1===o&&1===a){var s="\n          float ".concat(t,"() {\n            return sampleTexture(").concat(e,", halfCR);\n          }\n        ");return new u.GlslLibRoutine(s,["coordinates.sampleTexture"])}var c="\n        float ".concat(t,"() {\n          int offset_").concat(e," = coordsToOffset(TexCoords, ").concat(o,", ").concat(a,");\n          vec2 uv = uvFromFlat(").concat(o,", ").concat(a,", offset_").concat(e,");\n          return sampleTexture(").concat(e,", uv);\n        }\n      ");return new u.GlslLibRoutine(c,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])},e.prototype.getUnpackedSampler1D=function(t,e,n){var r=n.width,o=n.height;if(1===o&&1===r){var a="\n        float ".concat(t,"(int index) {\n          return sampleTexture(").concat(e,", halfCR);\n        }\n      ");return new u.GlslLibRoutine(a,["coordinates.sampleTexture"])}if(1===o){var i="\n          float ".concat(t,"(int index) {\n            vec2 uv = vec2((float(index) + 0.5) / ").concat(r,".0, 0.5);\n            return sampleTexture(").concat(e,", uv);\n          }\n        ");return new u.GlslLibRoutine(i,["coordinates.sampleTexture"])}if(1===r){var s="\n          float ".concat(t,"(int index) {\n            vec2 uv = vec2(0.5, (float(index) + 0.5) / ").concat(o,".0);\n            return sampleTexture(").concat(e,", uv);\n          }\n        ");return new u.GlslLibRoutine(s,["coordinates.sampleTexture"])}var c="\n        float ".concat(t,"(int index) {\n          vec2 uv = uvFromFlat(").concat(r,", ").concat(o,", index);\n          return sampleTexture(").concat(e,", uv);\n        }\n      ");return new u.GlslLibRoutine(c,["coordinates.uvFromFlat","coordinates.sampleTexture"])},e.prototype.getUnpackedSampler2D=function(t,e,n){var r=n.unpackedShape,o=[n.height,n.width];if(null!=o&&s.ArrayUtil.arraysEqual(r,o)){var a=o[1],i=o[0],c="\n          float ".concat(t,"(int row, int col) {\n            vec2 uv = (vec2(row, col) + halfCR) / vec2(").concat(a,".0, ").concat(i,".0);\n            return sampleTexture(").concat(e,", uv);\n          }\n        ");return new u.GlslLibRoutine(c,["coordinates.sampleTexture"])}var p=(0,l.squeezeShape)(r),d=p.newShape,h=p.keptDims,g=d;if(g.length<r.length){var m=(0,f.squeezeInputShape)(r,g),y=JSON.parse(JSON.stringify(n));y.unpackedShape=m;var b="\n          ".concat(this.getUnpackedSamplerFromInput(t,e,y).routineBody,"\n          float ").concat(t,"(int row, int col) {\n            return ").concat(t,"(").concat((0,f.getSqueezedParams)(["col","row"],h),");\n          }\n        ");return new u.GlslLibRoutine(b,["coordinates.sampleTexture"])}var v=o[1],w=o[0];if(1===w){var _="\n          float ".concat(t,"(int row, int col) {\n            int offset_").concat(e," = coordsToOffset(TexCoords, ").concat(v,", ").concat(w,");\n            float index = dot(vec3(row, col, offset_").concat(e,"), vec3(").concat(r[1],", 1, 1));\n            vec2 uv = vec2(0.5, (index + 0.5) / ").concat(v,".0);\n            return sampleTexture(").concat(e,", uv);\n          }\n        ");return new u.GlslLibRoutine(_,["coordinates.sampleTexture","coordinates.coordsToOffset"])}if(1===v){var x="\n          float ".concat(t,"(int row, int col) {\n            int offset_").concat(e," = coordsToOffset(TexCoords, ").concat(v,", ").concat(w,");\n            float index = dot(vec3(row, col, offset_").concat(e,"), vec3(").concat(r[1],", 1, 1));\n            vec2 uv = vec2((index + 0.5) / ").concat(w,".0, 0.5);\n            return sampleTexture(").concat(e,", uv);\n          }\n        ");return new u.GlslLibRoutine(x,["coordinates.sampleTexture","coordinates.coordsToOffset"])}var T="\n        float ".concat(t,"(int row, int col) {\n          int index = col * ").concat(r[1]," + row;\n          vec2 uv = uvFromFlat(").concat(v,", ").concat(w,", index);\n          return sampleTexture(").concat(e,", uv);\n        }\n      ");return new u.GlslLibRoutine(T,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])},e.prototype.getUnpackedSampler3D=function(t,e,n){var r=n.unpackedShape,o=r[1]*r[2],a=r[2],i=(0,l.squeezeShape)(r),s=i.newShape,c=i.keptDims,p=s;if(p.length<r.length){var d=(0,f.squeezeInputShape)(r,p),h=JSON.parse(JSON.stringify(n));h.unpackedShape=d;var g=this.getUnpackedSamplerFromInput(t,e,h),m=c.reverse(),y="\n          ".concat(g.routineBody,"\n          float ").concat(t,"(int batch, int row, int col) {\n            return ").concat(t,"(").concat((0,f.getSqueezedParams)(["batch","col","row"],m),");\n          }\n        ");return new u.GlslLibRoutine(y,g.dependencies)}var b=n.width,v=n.height,w="\n          float ".concat(t,"(int depth, int row, int col) {\n            // Explicitly use integer operations as dot() only works on floats.\n            int index = depth * ").concat(o," + col * ").concat(a," + row;\n            vec2 uv = uvFromFlat(").concat(b,", ").concat(v,", index);\n            return sampleTexture(").concat(e,", uv);\n          }\n      ");return new u.GlslLibRoutine(w,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])},e.prototype.getUnpackedSampler4D=function(t,e,n){var r=n.unpackedShape,o=r[3],a=r[2]*o,i=r[1]*a,s=n.width,c=n.height,l="\n        float ".concat(t,"(int row, int col, int depth, int depth2) {\n          int index = row * ").concat(i," + col * ").concat(a," +\n              depth2 * ").concat(o," + depth;\n          vec2 uv = uvFromFlat(").concat(s,", ").concat(c,", index);\n          return sampleTexture(").concat(e,", uv);\n        }\n      ");return new u.GlslLibRoutine(l,["coordinates.uvFromFlat","coordinates.sampleTexture"])},e.prototype.getUnpackedSampler5D=function(t,e,n){var r=n.unpackedShape,o=r[4],a=r[3]*o,i=r[2]*a,s=r[1]*i,c=(0,l.squeezeShape)(r),p=c.newShape,d=c.keptDims;if(p.length<r.length){var h=(0,f.squeezeInputShape)(r,p),g=JSON.parse(JSON.stringify(n));g.unpackedShape=h;var m="\n          ".concat(this.getUnpackedSamplerFromInput(t,e,g).routineBody,"\n          float ").concat(t,"(int row, int col, int depth, int depth2, int depth3) {\n            return ").concat(t,"(").concat((0,f.getSqueezedParams)(["row","col","depth","depth2","depth3"],d),");\n          }\n        ");return new u.GlslLibRoutine(m,["coordinates.sampleTexture","coordinates.uvFromFlat"])}var y=n.width,b=n.height,v="\n        float ".concat(t,"(int row, int col, int depth, int depth2, int depth3) {\n          int index = row * ").concat(s," + col * ").concat(i," + depth * ").concat(a," +\n          depth3 * ").concat(o," + depth2;\n          vec2 uv = uvFromFlat(").concat(y,", ").concat(b,", index);\n          return sampleTexture(").concat(e,", uv);\n        }\n      ");return new u.GlslLibRoutine(v,["coordinates.sampleTexture","coordinates.uvFromFlat"])},e.prototype.getUnpackedSampler6D=function(t,e,n){var r=n.unpackedShape,o=r[5],a=r[4]*o,i=r[3]*a,s=r[2]*i,c=r[1]*s,p=(0,l.squeezeShape)(r),d=p.newShape,h=p.keptDims;if(d.length<r.length){var g=(0,f.squeezeInputShape)(r,d),m=JSON.parse(JSON.stringify(n));m.unpackedShape=g;var y="\n            ".concat(this.getUnpackedSamplerFromInput(t,e,m).routineBody,"\n            float ").concat(t,"(int row, int col, int depth,\n              int depth2, int depth3, int depth4) {\n              return ").concat(t,"(").concat((0,f.getSqueezedParams)(["row","col","depth","depth2","depth3","depth4"],h),");\n            }\n          ");return new u.GlslLibRoutine(y,["coordinates.sampleTexture","coordinates.uvFromFlat"])}var b=n.width,v=n.height,w="\n          float ".concat(t,"(int row, int col, int depth,\n            int depth2, int depth3, int depth4) {\n            int index = row * ").concat(c," + col * ").concat(s," + depth * ").concat(i," +\n            depth2 * ").concat(a," + depth3 * ").concat(o," + depth4;\n            vec2 uv = uvFromFlat(").concat(b,", ").concat(v,", index);\n            return sampleTexture(").concat(e,", uv);\n          }\n        ");return new u.GlslLibRoutine(w,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])},e.prototype.toVec=function(){for(var t=this.context.outputTextureLayout,e=t.shape.length,n=t.strides,r=t.width,o=t.height,a=[],i=0;i<e-1;++i)a.push("\n        c[".concat(i,"] = offset / ").concat(n[i],";")),a.push("\n        offset -= c[".concat(i,"] * ").concat(n[i],";"));a.push("\n        c[".concat(e-1,"] = offset;"));var s="\n      void toVec(vec2 texCoords, out int c[".concat(e,"]) {\n        int offset = coordsToOffset(texCoords, ").concat(r,", ").concat(o,");\n        ").concat(a.join(""),"\n      }\n      void toVec(int offset, out int c[").concat(e,"]) {\n        ").concat(a.join(""),"\n      }\n    ");return{toVec:new u.GlslLibRoutine(s,["coordinates.coordsToOffset"])}},e.prototype.valueFrom=function(){var t=this,e={};return this.context.programInfo.inputNames.forEach((function(n,r){var o=t.context.inputTextureLayouts[r],a=(o.unpackedShape.length>0?o.unpackedShape:o.shape).length,i="_".concat(n);e[i]=new u.GlslLibRoutine(t.getValueFromSingle(n,a,o.width,o.height,!1),["shapeUtils.indicesToOffset".concat(i),"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),e[i+="_T"]=new u.GlslLibRoutine(t.getValueFromSingle(n,a,o.width,o.height,!0),["shapeUtils.indicesToOffset".concat(i),"coordinates.offsetToCoords","fragcolor.getColorAsFloat"])})),e},e.prototype.getValueFromSingle=function(t,e,n,r,o){var a="_".concat(t);o&&(a+="_T");var i=(0,c.getGlsl)(this.context.glContext.version);return"\n        float ".concat(a,"(int m[").concat(e,"]) {\n          int offset = indicesToOffset").concat(a,"(m);\n          vec2 coords = offsetToCoords(offset, ").concat(n,", ").concat(r,");\n          float value = getColorAsFloat(").concat(i.texture2D,"(").concat(t,", coords));\n          return value;\n        }\n        ")},e.prototype.getPackedValueFrom=function(t,e,n,r,o){var a="_".concat(t,"_Pack");o&&(a+="_T");var i=(0,c.getGlsl)(this.context.glContext.version);return"\n        vec4 ".concat(a,"(int m[").concat(e,"]) {\n          int offset = indicesToOffset_").concat(t,"(m);\n          vec2 coords = offsetToCoords(offset, ").concat(n,", ").concat(r,");\n          return ").concat(i.texture2D,"(").concat(t,", coords);\n        }\n        ")},e}(u.GlslLib);e.CoordsGlslLib=p},1997:function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.TopologicalSortGlslRoutines=e.GlslLibRoutineNode=e.GlslLibRoutine=e.GlslLib=e.GlslContext=e.FunctionType=void 0,(n=e.FunctionType||(e.FunctionType={}))[n.ValueBased=0]="ValueBased",n[n.Positional=1]="Positional";e.GlslContext=function(t,e,n,r){this.glContext=t,this.programInfo=e,this.inputTextureLayouts=n,this.outputTextureLayout=r};e.GlslLib=function(t){this.context=t};e.GlslLibRoutine=function(t,e){this.routineBody=t,this.dependencies=e};var r=function(){function t(t,e,n){this.name=t,this.dependencies=n||[],e&&(this.routineBody=e)}return t.prototype.addDependency=function(t){t&&this.dependencies.push(t)},t}();e.GlslLibRoutineNode=r;var o=function(){function t(){}return t.returnOrderedNodes=function(t){if(!t||0===t.length)return[];if(1===t.length)return t;var e=new Set,n=new Set,r=new Array;return this.createOrderedNodes(t,e,n,r),r},t.createOrderedNodes=function(t,e,n,r){for(var o=0;o<t.length;++o)this.dfsTraverse(t[o],e,n,r)},t.dfsTraverse=function(t,e,n,r){if(t&&!n.has(t.name)){if(e.has(t.name))throw new Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");e.add(t.name);var o=t.dependencies;if(o&&o.length>0)for(var a=0;a<o.length;++a)this.dfsTraverse(o[a],e,n,r);r.push(t),n.add(t.name),e.delete(t.name)}},t}();e.TopologicalSortGlslRoutines=o},1371:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__assign||function(){return a=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},a.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.EncodingGlslLib=void 0;var i=n(1997),s=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.getFunctions=function(){return a(a({},this.encodeFloat32()),this.decodeFloat32())},e.prototype.getCustomTypes=function(){return{}},e.prototype.encodeFloat32=function(){return{encode:new i.GlslLibRoutine("highp vec4 encode(highp float f) {\n        return vec4(f, 0.0, 0.0, 0.0);\n      }\n        ")}},e.prototype.decodeFloat32=function(){return{decode:new i.GlslLibRoutine("highp float decode(highp vec4 rgba) {\n        return rgba.r;\n      }\n        ")}},e.prototype.encodeUint8=function(){var t=e.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new i.GlslLibRoutine("\n      highp vec4 encode(highp float f) {\n        highp float F = abs(f);\n        highp float Sign = step(0.0,-f);\n        highp float Exponent = floor(log2(F));\n        highp float Mantissa = (exp2(- Exponent) * F);\n        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));\n        highp vec4 rgba;\n        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));\n        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);\n        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));\n        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));\n        ".concat(t,"\n        rgba = rgba / 255.0; // values need to be normalized to [0,1]\n        return rgba;\n    }\n        "))}},e.prototype.decodeUint8=function(){var t=e.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new i.GlslLibRoutine("\n        highp float decode(highp vec4 rgba) {\n          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]\n          ".concat(t,"\n          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;\n          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;\n          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);\n          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));\n          return Result;\n      }\n        "))}},e.isLittleEndian=function(){var t=new ArrayBuffer(4),e=new Uint32Array(t),n=new Uint8Array(t);if(e[0]=3735928559,239===n[0])return!0;if(222===n[0])return!1;throw new Error("unknown endianness")},e}(i.GlslLib);e.EncodingGlslLib=s},2691:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__assign||function(){return a=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},a.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.FragColorGlslLib=void 0;var i=n(1997),s=n(6757),u=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.getFunctions=function(){return a(a({},this.setFragColor()),this.getColorAsFloat())},e.prototype.getCustomTypes=function(){return{}},e.prototype.setFragColor=function(){var t=(0,s.getGlsl)(this.context.glContext.version);return{setFragColor:new i.GlslLibRoutine("\n        void setFragColor(float value) {\n            ".concat(t.output," = encode(value);\n        }\n        "),["encoding.encode"])}},e.prototype.getColorAsFloat=function(){return{getColorAsFloat:new i.GlslLibRoutine("\n        float getColorAsFloat(vec4 color) {\n            return decode(color);\n        }\n        ",["encoding.decode"])}},e}(i.GlslLib);e.FragColorGlslLib=u},3878:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.replaceInlines=void 0;var n=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm;e.replaceInlines=function(t){for(var e,r={};null!==(e=n.exec(t));){var o=e[3].split(",").map((function(t){var e=t.trim().split(" ");return e&&2===e.length?{type:e[0],name:e[1]}:null})).filter((function(t){return null!==t}));r[e[2]]={params:o,body:e[4]}}for(var a in r)for(var i="(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;".replace("__FUNC__",a),s=new RegExp(i,"gm"),u=function(){var n=e[1],o=e[2],i=e[3].split(","),s=n?"".concat(n," ").concat(o,";"):"",u=r[a].body,c="";r[a].params.forEach((function(t,e){t&&(c+="".concat(t.type," ").concat(t.name," = ").concat(i[e],";\n"))})),u=(u="".concat(c,"\n ").concat(u)).replace("return","".concat(o," = "));var l="\n      ".concat(s,"\n      {\n        ").concat(u,"\n      }\n      ");t=t.replace(e[0],l)};null!==(e=s.exec(t));)u();return t=t.replace(n,"")}},8897:function(t,e,n){"use strict";var r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.GlslPreprocessor=void 0;var o=n(1997),a=n(3878),i=n(1248),s=n(6757),u=function(){function t(t,e,n,r){var a=this;this.libs={},this.glslLibRoutineDependencyGraph={},this.context=new o.GlslContext(t,e,n,r),Object.keys(i.glslRegistry).forEach((function(t){var e=new i.glslRegistry[t](a.context);a.libs[t]=e}));var s=this.glslLibRoutineDependencyGraph;for(var u in this.libs){var c=this.libs[u].getFunctions();for(var l in c){var f=u+"."+l,p=void 0;s[f]?(p=s[f]).routineBody=c[l].routineBody:(p=new o.GlslLibRoutineNode(f,c[l].routineBody),s[f]=p);var d=c[l].dependencies;if(d)for(var h=0;h<d.length;++h)if(s[d[h]])p.addDependency(s[d[h]]);else{var g=new o.GlslLibRoutineNode(d[h]);s[d[h]]=g,p.addDependency(g)}}}}return t.prototype.preprocess=function(){var t=this.context.programInfo,e=t.shaderSource;return this.context.programInfo.hasMain||(e="".concat(e,"\n      ").concat((0,s.getDefaultFragShaderMain)(this.context.glContext.version,this.context.outputTextureLayout.shape.length))),e=(0,a.replaceInlines)(e),"".concat((0,s.getFragShaderPreamble)(this.context.glContext.version),"\n    ").concat(this.getUniforms(t.inputNames,t.variables),"\n    ").concat(this.getImports(e),"\n    ").concat(e)},t.prototype.getImports=function(t){var e=this.selectGlslLibRoutinesToBeIncluded(t);if(0===e.length)return"";for(var n="",r=0;r<e.length;++r){if(!e[r].routineBody)throw new Error("Missing body for the Glsl Library routine: ".concat(e[r].name));n+=e[r].routineBody+"\n"}return n},t.prototype.selectGlslLibRoutinesToBeIncluded=function(t){var e=this,n=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach((function(r){var o=r.split(".")[1];-1!==t.indexOf(o)&&n.push(e.glslLibRoutineDependencyGraph[r])})),o.TopologicalSortGlslRoutines.returnOrderedNodes(n)},t.prototype.getUniforms=function(t,e){var n,o,a,i,s=[];if(t)try{for(var u=r(t),c=u.next();!c.done;c=u.next()){var l=c.value;s.push("uniform sampler2D ".concat(l,";"))}}catch(t){n={error:t}}finally{try{c&&!c.done&&(o=u.return)&&o.call(u)}finally{if(n)throw n.error}}if(e)try{for(var f=r(e),p=f.next();!p.done;p=f.next()){var d=p.value;s.push("uniform ".concat(d.type," ").concat(d.name).concat(d.arrayLength?"[".concat(d.arrayLength,"]"):"",";"))}}catch(t){a={error:t}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(a)throw a.error}}return s.join("\n")},t}();e.GlslPreprocessor=u},1248:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.glslRegistry=void 0;var r=n(6859),o=n(1371),a=n(2691),i=n(9183),s=n(9314);e.glslRegistry={encoding:o.EncodingGlslLib,fragcolor:a.FragColorGlslLib,vec:s.VecGlslLib,shapeUtils:i.ShapeUtilsGlslLib,coordinates:r.CoordsGlslLib}},9183:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__assign||function(){return a=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},a.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.ShapeUtilsGlslLib=void 0;var i=n(1997),s=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.getFunctions=function(){return a(a(a(a(a({},this.bcastIndex()),this.bcastMatmulIndex()),this.offsetToIndices()),this.indicesToOffset()),this.incrementIndices())},e.prototype.getCustomTypes=function(){return{}},e.prototype.bcastIndex=function(){var t=this,e=this.context.outputTextureLayout.shape.length,n={};return this.context.programInfo.inputNames.forEach((function(r,o){var a=t.context.inputTextureLayouts[o].unpackedShape;if(a.length<=e){for(var s=a.length,u=e-s,c="bcastIndices_".concat(r),l="",f=0;f<s;++f)l+="\n          realIndices[".concat(f,"] = int( mod(float(bcastedIndices[").concat(u+f,"]), ").concat(a[f],".0) );\n          ");var p="\n        void ".concat(c," (int bcastedIndices[").concat(e,"], out int realIndices[").concat(s,"]) {\n          ").concat(l,"\n        }\n        ");n[c]=new i.GlslLibRoutine(p)}})),n},e.prototype.bcastMatmulIndex=function(){var t=this,e=this.context.outputTextureLayout.shape.length,n={};return this.context.programInfo.inputNames.forEach((function(r,o){var a=t.context.inputTextureLayouts[o].shape;if(!(a.length<2||a.length>e)){for(var s=a.length,u=e-s,c="bcastMatmulIndices_".concat(r),l="",f=0;f<s-2;++f)l+="\n          realIndices[".concat(f,"] = int( mod(float(bcastedIndices[").concat(u+f,"]), ").concat(a[f],".0) );\n          ");var p="\n        void ".concat(c,"(int bcastedIndices[").concat(e,"], out int realIndices[").concat(s,"]) {\n          ").concat(l,"\n          realIndices[").concat(s-1,"] = bcastedIndices[").concat(e-1,"];\n          realIndices[").concat(s-2,"] = bcastedIndices[").concat(e-2,"];\n        }\n        ");n[c]=new i.GlslLibRoutine(p)}})),n},e.prototype.indicesToOffset=function(){var t=this,n={};return this.context.programInfo.inputNames.forEach((function(r,o){var a=t.context.inputTextureLayouts[o].shape,s=t.context.inputTextureLayouts[o].strides,u=a.length,c="indicesToOffset_".concat(r);n[c]=new i.GlslLibRoutine(e.indexToOffsetSingle(c,u,s)),c="indicesToOffset_".concat(r,"_T"),n[c]=new i.GlslLibRoutine(e.indexToOffsetSingle(c,u,s.slice().reverse()))})),n},e.indexToOffsetSingle=function(t,e,n){for(var r="",o=e-1;o>=0;--o)r+="\n        offset += indices[".concat(o,"] * ").concat(n[o],";\n        ");return"\n      int ".concat(t,"(int indices[").concat(e,"]) {\n        int offset = 0;\n        ").concat(r,"\n        return offset;\n      }\n      ")},e.prototype.offsetToIndices=function(){var t=this,n={};return this.context.programInfo.inputNames.forEach((function(r,o){var a=t.context.inputTextureLayouts[o].shape,s=t.context.inputTextureLayouts[o].strides,u=a.length,c="offsetToIndices_".concat(r);n[c]=new i.GlslLibRoutine(e.offsetToIndicesSingle(c,u,s)),c="offsetToIndices_".concat(r,"_T"),n[c]=new i.GlslLibRoutine(e.offsetToIndicesSingle(c,u,s.slice().reverse()))})),n},e.offsetToIndicesSingle=function(t,e,n){for(var r=[],o=0;o<e-1;++o)r.push("\n      indices[".concat(o,"] = offset / ").concat(n[o],";")),r.push("\n        offset -= indices[".concat(o,"] * ").concat(n[o],";"));return r.push("\n      indices[".concat(e-1,"] = offset;")),"\n      void ".concat(t,"(int offset, out int indices[").concat(e,"]) {\n        ").concat(r.join(""),"\n      }\n      ")},e.prototype.incrementIndices=function(){var t=this,e={};return this.context.programInfo.inputNames.forEach((function(n,r){for(var o=t.context.inputTextureLayouts[r].shape,a=o.length,s="incrementIndices_".concat(n),u="",c=0;c<a;++c)u+="\n        shape[".concat(c,"] = ").concat(o[c],";");var l="\n        void ".concat(s,"(int axis, out int indices[").concat(a,"]) {\n          int shape[").concat(a,"];\n          ").concat(u,";\n          for(int i = ").concat(a," -1 ; i >= 0; --i) {\n            if(i > axis) continue;\n            indices[i] += 1;\n            if(indices[i] < shape[i]) {\n              break;\n            }\n            indices[i] = 0;\n          }\n        }\n        ");e[s]=new i.GlslLibRoutine(l)})),e},e}(i.GlslLib);e.ShapeUtilsGlslLib=s},6757:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getDefaultFragShaderMain=e.getFragShaderPreamble=e.getVertexShaderSource=e.getGlsl=void 0;var n={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},r={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"};function o(t){return 1===t?n:r}e.getGlsl=o,e.getVertexShaderSource=function(t){var e=o(t);return"".concat(e.version,"\n      precision highp float;\n      ").concat(e.attribute," vec3 position;\n      ").concat(e.attribute," vec2 textureCoord;\n\n      ").concat(e.varyingVertex," vec2 TexCoords;\n\n      void main()\n      {\n          gl_Position = vec4(position, 1.0);\n          TexCoords = textureCoord;\n      }")},e.getFragShaderPreamble=function(t){var e=o(t);return"".concat(e.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(e.varyingFrag," vec2 TexCoords;\n    ").concat(e.outputDeclaration,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    // Custom vector types to handle higher dimenalities.\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    ")},e.getDefaultFragShaderMain=function(t,e){var n=o(t);return"\n  void main() {\n    int indices[".concat(e,"];\n    toVec(TexCoords, indices);\n    vec4 result = vec4(process(indices));\n    ").concat(n.output," = result;\n  }\n  ")}},9314:function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__assign||function(){return a=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},a.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.VecGlslLib=void 0;var i=n(1997),s=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.getCustomTypes=function(){return{}},e.prototype.getFunctions=function(){return a(a(a(a({},this.binaryVecFunctions()),this.copyVec()),this.setVecItem()),this.getVecItem())},e.prototype.binaryVecFunctions=function(){var t=this.context.outputTextureLayout.shape.length,e={add:"+=",sub:"-=",mul:"*=",div:"/="},n={};for(var r in e){for(var o="".concat(r,"Vec"),a="",s=0;s<t;++s)a+="\n          dest[".concat(s,"] ").concat(e[r]," src[").concat(s,"];\n          ");var u="\n        void ".concat(o,"(int src[").concat(t,"], out int dest[").concat(t,"]) {\n          ").concat(a,"\n        }\n        ");n[o]=new i.GlslLibRoutine(u)}return n},e.prototype.copyVec=function(){for(var t=this.context.outputTextureLayout.shape.length,e="",n=0;n<t;++n)e+="\n        dest[".concat(n,"] = src[").concat(n,"];\n        ");var r="\n      void copyVec(int src[".concat(t,"], out int dest[").concat(t,"]) {\n        ").concat(e,"\n      }\n      ");return{copyVec:new i.GlslLibRoutine(r)}},e.prototype.setVecItem=function(){for(var t=this.context.outputTextureLayout.shape.length,e="\n        if(index < 0)\n            index =".concat(t," + index;\n        if (index == 0)\n            m[0] = value;\n        "),n=1;n<t-1;++n)e+="\n        else if (index == ".concat(n,")\n            m[").concat(n,"] = value;\n            ");e+="\n        else\n            m[".concat(t-1,"] = value;\n        ");var r="\n      void setVecItem(out int m[".concat(t,"], int index, int value) {\n        ").concat(e,"\n      }\n        ");return{setVecItem:new i.GlslLibRoutine(r)}},e.prototype.getVecItem=function(){for(var t=this.context.outputTextureLayout.shape.length,e="\n        if(index < 0)\n            index = ".concat(t," + index;\n        if (index == 0)\n            return m[0];\n      "),n=1;n<t-1;++n)e+="\n        else if (index == ".concat(n,")\n            return m[").concat(n,"];\n      ");e+="\n        else\n            return m[".concat(t-1,"];\n        ");var r="\n      int getVecItem(int m[".concat(t,"], int index) {\n        ").concat(e,"\n      }\n    ");return{getVecItem:new i.GlslLibRoutine(r)}},e}(i.GlslLib);e.VecGlslLib=s},7860:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,s)}u((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(t,i)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLInferenceHandler=void 0;var i=n(1315),s=n(9240),u=n(7273),c=n(9),l=n(7379),f=n(2488),p=n(540),d=n(3314),h=n(5639),g=function(){function t(t){this.session=t,this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map}return t.prototype.calculateTextureWidthAndHeight=function(t,e){return(0,d.calculateTextureWidthAndHeight)(this.session.layoutStrategy,t,e)},t.prototype.executeProgram=function(t,e){if(e.length<t.inputNames.length)throw new Error("Input size mustn't be less than ".concat(t.inputNames.length,"."));if(t.inputNames.length!==t.inputTypes.length)throw new Error("input names size does not match input types");for(var n=[],r=0;r<t.inputNames.length;++r)n[r]=this.getOrCreateTextureData(e[r],t.inputTypes[r]);var o=function(t,e){var n=e.map((function(t){return"".concat(t.unpackedShape.join(","),";").concat(t.width,"x").concat(t.height)})).join("_"),r=t.name;return t.cacheHint&&(r+="["+t.cacheHint+"]"),r+":"+n}(t,n),a=this.session.programManager.getArtifact(o),i=a?a.programInfo:"function"==typeof t.get?t.get():t,s=(0,d.createTextureLayoutFromTextureType)(this.session.layoutStrategy,i.output.dims,i.output.textureType),u=this.createTextureData(s,i.output.type);return a||(a=this.session.programManager.build(i,n,u),this.session.programManager.setArtifact(o,a)),this.runProgram(a,n,u),u},t.prototype.run=function(t,e){return this.executeProgram(t,e).tensor},t.prototype.runProgram=function(t,e,n){for(var r=0;r<e.length;++r)if(!!e[r].isPacked!=(t.programInfo.inputTypes[r]===h.TextureType.packed))throw new Error("input[".concat(r,"] property packed inconsistent"));if(!!n.isPacked!=(t.programInfo.output.textureType===h.TextureType.packed))throw new Error("output property packed inconsistent");this.session.programManager.run(t,e,n)},t.prototype.getOrCreateTextureData=function(t,e){var n=this.getTextureData(t.dataId,e===h.TextureType.packed);if(!n&&(n=this.getTextureData(t.dataId,e!==h.TextureType.packed)))return e===h.TextureType.packed?this.pack(n):this.unpack(n);if(!n){var r=(0,d.createTextureLayoutFromTextureType)(this.session.layoutStrategy,t.dims,e);if(e===h.TextureType.packedLastDimension){var o=t.dims;if(4===o.length){var a=[o[0],Math.ceil(o[1]*o[2]*o[3]/4)],i=(0,d.createTextureLayoutFromTextureType)(this.session.layoutStrategy,a,e),s=t.numberData;if(o[1]*o[2]*o[3]%4!=0){var u=o[0],c=o[1]*o[2]*o[3],l=4*Math.ceil(1*c/4);s=new Float32Array(u*l);for(var f=0;f<u;++f){var p=f*c,g=f*l+f%1*c;s.set(t.numberData.subarray(p,p+c),g)}}return this.createTextureData(i,t.type,s,t,1)}}if(e===h.TextureType.packed){var m=(0,d.createTextureLayoutFromShape)(this.session.layoutStrategy,t.dims,1,[],{reverseWH:!0}),y=this.createTextureData(m,t.type,t.numberData,t,1);n=this.pack(y)}else n=this.createTextureData(r,t.type,t.numberData,t,1)}return n},t.prototype.createTextureDataFromLayoutBindTensor=function(t,e,n,r){return this.createTextureData(t,e,n,r,1)},t.prototype.createTextureData=function(t,e,n,r,o){i.Logger.verbose("InferenceHandler","Creating TextureData: layout:[".concat(JSON.stringify(t),"]"));var a=this.session.textureManager.createTextureFromLayout(e,t,n,o);return this.createTextureDataFromTexture(t,e,a,r)},t.prototype.reshapeUnpacked=function(t,e){var n=this.getOrCreateTextureData(t,h.TextureType.unpacked),r={channels:n.channels,height:n.height,width:n.width,shape:0!==e.length?e:[1],strides:u.ShapeUtil.computeStrides(e),unpackedShape:e};return this.createTextureDataFromTexture(r,t.type,n.texture).tensor},t.prototype.reshapePacked=function(t,e){var n=this.getOrCreateTextureData(t,h.TextureType.packed);if((0,l.isReshapeCheap)(t.dims,e)){var r={channels:n.channels,height:n.height,width:n.width,shape:0!==e.length?e:[1],strides:u.ShapeUtil.computeStrides(e),unpackedShape:e,isPacked:!0};return this.createTextureDataFromTexture(r,t.type,n.texture).tensor}var o=(0,l.processDims3D)(t.dims),a=(0,l.processDims3D)(e),i=this.reshapePacked(t,o),s=this.run((0,l.createPackedReshape3DProgramInfoLoader)(this,i,a),[i]);return this.reshapePacked(s,e)},t.prototype.cast=function(t,e){var n=this.getOrCreateTextureData(t,h.TextureType.unpacked);return this.createTextureDataFromTexture(n,e,n.texture).tensor},t.prototype.createTextureDataFromTexture=function(t,e,n,i,u){var c=this,l=r(r({},t),{tensor:i||new s.Tensor(t.unpackedShape,e,(function(t){return c.readTexture(l)}),(function(t){return o(c,void 0,void 0,(function(){return a(this,(function(t){return[2,this.readTextureAsync(l)]}))}))}),void 0,u),texture:n});return this.setTextureData(l.tensor.dataId,l,t.isPacked),l},t.prototype.getTextureData=function(t,e){return void 0===e&&(e=!1),this.session.isInitializer(t)?this.session.getTextureData(t,e):e?this.packedTextureDataCache.get(t):this.unpackedTextureDataCache.get(t)},t.prototype.setTextureData=function(t,e,n){void 0===n&&(n=!1),this.session.isInitializer(t)?this.session.setTextureData(t,e,n):(n?this.packedTextureDataCache:this.unpackedTextureDataCache).set(t,e)},t.prototype.isTextureLayoutCached=function(t,e){return void 0===e&&(e=!1),!!this.getTextureData(t.dataId,e)},t.prototype.dispose=function(){var t=this;this.session.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach((function(e){return t.session.textureManager.releaseTexture(e)})),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach((function(e){return t.session.textureManager.releaseTexture(e)})),this.unpackedTextureDataCache=new Map},t.prototype.readTexture=function(t){return t.isPacked?this.readTexture(this.unpack(t)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTexture(t,t.tensor.type,t.channels):this.session.textureManager.readUint8TextureAsFloat((0,f.encodeAsUint8)(this,t))},t.prototype.readTextureAsync=function(t){return o(this,void 0,void 0,(function(){return a(this,(function(e){return t.isPacked?[2,this.readTextureAsync(this.unpack(t))]:this.session.backend.glContext.isFloat32DownloadSupported?[2,this.session.textureManager.readTextureAsync(t,t.tensor.type,t.channels)]:[2,this.session.textureManager.readUint8TextureAsFloat((0,f.encodeAsUint8)(this,t))]}))}))},t.prototype.pack=function(t){return this.executeProgram((0,c.createPackProgramInfoLoader)(this,t.tensor),[t.tensor])},t.prototype.unpack=function(t){return this.executeProgram((0,p.createUnpackProgramInfoLoader)(this,t.tensor),[t.tensor])},t}();e.WebGLInferenceHandler=g},4110:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return o(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.WEBGL_OP_RESOLVE_RULES=void 0;var i=n(8817),s=a(n(5194)),u=n(4752),c=n(6668),l=n(9754),f=n(5042),p=n(6742),d=n(4125),h=n(6149),g=n(5378),m=n(6981),y=n(7413),b=n(7006),v=n(8276),w=n(5565),_=n(2834),x=n(1010),T=n(8126),S=n(2801),A=n(565),O=n(2444),E=n(815),P=n(564),I=n(5416),D=n(1240),k=n(5944),C=n(5707),R=a(n(9087)),M=n(7862),L=n(3980);e.WEBGL_OP_RESOLVE_RULES=[["Abs","","6+",R.abs],["Acos","","7+",R.acos],["Add","","7+",s.add],["And","","7+",s.and],["Asin","","7+",R.asin],["Atan","","7+",R.atan],["AveragePool","","7+",_.averagePool,_.parseAveragePoolAttributes],["BatchNormalization","","7+",i.batchNormalization,i.parseBatchNormalizationAttributes],["Cast","","6+",u.cast,u.parseCastAttributes],["Ceil","","6+",R.ceil],["Clip","","6-10",R.clip,R.parseClipAttributes],["Clip","","11+",R.clipV11],["Concat","","4+",c.concat,c.parseConcatAttributes],["Conv","","1+",l.conv,l.parseConvAttributes],["ConvTranspose","","1+",f.convTranspose,f.parseConvTransposeAttributes],["Cos","","7+",R.cos],["Div","","7+",s.div],["Dropout","","7+",R.identity],["DepthToSpace","","1+",p.depthToSpace,p.parseDepthToSpaceAttributes],["Equal","","7+",s.equal],["Elu","","6+",R.elu,R.parseEluAttributes],["Exp","","6+",R.exp],["Flatten","","1+",d.flatten,d.parseFlattenAttributes],["Floor","","6+",R.floor],["FusedConv","com.microsoft","1+",l.conv,l.parseConvAttributes],["Gather","","1+",h.gather,h.parseGatherAttributes],["Gemm","","7-10",g.gemm,g.parseGemmAttributesV7],["Gemm","","11+",g.gemm,g.parseGemmAttributesV11],["GlobalAveragePool","","1+",_.globalAveragePool,_.parseGlobalAveragePoolAttributes],["GlobalMaxPool","","1+",_.globalMaxPool],["Greater","","7+",s.greater],["Identity","","1+",R.identity],["ImageScaler","","1+",m.imageScaler,m.parseImageScalerAttributes],["InstanceNormalization","","6+",y.instanceNormalization,y.parseInstanceNormalizationAttributes],["LeakyRelu","","6+",R.leakyRelu,R.parseLeakyReluAttributes],["Less","","7+",s.less],["LRN","","1+",b.lrn,b.parseLrnAttributes],["Log","","6+",R.log],["MatMul","","1+",v.matMul,v.parseMatMulAttributes],["MaxPool","","1+",_.maxPool,_.parseMaxPoolAttributes],["Mul","","7+",s.mul],["Neg","","6+",R.neg],["Not","","1+",R.not],["Or","","7+",s.or],["Pad","","2-10",w.padV2,w.parsePadAttributesV2],["Pad","","11+",w.padV11,w.parsePadAttributesV11],["Pow","","7+",s.pow],["PRelu","","7+",s.pRelu],["ReduceLogSum","","1+",x.reduceLogSum,x.parseReduceAttributes],["ReduceMax","","1+",x.reduceMax,x.parseReduceAttributes],["ReduceMean","","1+",x.reduceMean,x.parseReduceAttributes],["ReduceMin","","1+",x.reduceMin,x.parseReduceAttributes],["ReduceProd","","1+",x.reduceProd,x.parseReduceAttributes],["ReduceSum","","1-12",x.reduceSum,x.parseReduceAttributes],["ReduceSumSquare","","1+",x.reduceLogSumSquare,x.parseReduceAttributes],["Relu","","6+",R.relu],["Reshape","","5+",T.reshape],["Resize","","10",S.resize,S.parseResizeAttributesV10],["Resize","","11+",S.resize,S.parseResizeAttributesV11],["Shape","","1+",A.shape],["Sigmoid","","6+",R.sigmoid],["Sin","","7+",R.sin],["Slice","","10+",O.sliceV10],["Slice","","1-9",O.slice,O.parseSliceAttributes],["Softmax","","1-12",E.softmax,E.parseSoftmaxAttributes],["Softmax","","13+",E.softmaxV13,E.parseSoftmaxAttributesV13],["Split","","2-12",P.split,P.parseSplitAttributes],["Sqrt","","6+",R.sqrt],["Squeeze","","1-12",I.squeeze,I.parseSqueezeAttributes],["Squeeze","","13+",I.squeezeV13],["Sub","","7+",s.sub],["Sum","","6+",D.sum],["Tan","","7+",R.tan],["Tanh","","6+",R.tanh],["Tile","","6+",k.tile],["Transpose","","1+",C.transpose,C.parseTransposeAttributes],["Upsample","","7-8",L.upsample,L.parseUpsampleAttributesV7],["Upsample","","9",L.upsample,L.parseUpsampleAttributesV9],["Unsqueeze","","1-12",M.unsqueeze,M.parseUnsqueezeAttributes],["Unsqueeze","","13+",M.unsqueezeV13],["Xor","","7+",s.xor]]},8817:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(e,"__esModule",{value:!0}),e.parseBatchNormalizationAttributes=e.batchNormalization=void 0;var a=n(4910),i=n(6757),s=n(5639),u={name:"BatchNormalization",inputNames:["A","Scale","B","Mean","Variance"],inputTypes:[s.TextureType.unpacked,s.TextureType.unpacked,s.TextureType.unpacked,s.TextureType.unpacked,s.TextureType.unpacked]};e.batchNormalization=function(t,e,n){return l(e),[t.run(r(r({},u),{cacheHint:n.cacheKey,get:function(){return c(t,e,n)}}),e)]},e.parseBatchNormalizationAttributes=function(t){var e=t.attributes.getFloat("epsilon",1e-5),n=t.attributes.getFloat("momentum",.9),r=t.attributes.getInt("spatial",1);return(0,a.createAttributeWithCacheKey)({epsilon:e,momentum:n,spatial:r})};var c=function(t,e,n){var a=(0,i.getGlsl)(t.session.backend.glContext.version),c=e[0].dims.length,l=o(t.calculateTextureWidthAndHeight(e[1].dims,s.TextureType.unpacked),2),f=l[0],p=l[1],d="\n  float process(int[".concat(c,"] indices) {\n    vec2 position = offsetToCoords(indices[1], ").concat(f,", ").concat(p,");\n    float scale = getColorAsFloat(").concat(a.texture2D,"(Scale, position));\n    float mean = getColorAsFloat(").concat(a.texture2D,"(Mean, position));\n    float variance = getColorAsFloat(").concat(a.texture2D,"(Variance, position));\n    float b = getColorAsFloat(").concat(a.texture2D,"(B, position));\n\n    return scale * ( (_A(indices) - mean) / sqrt(variance + float(").concat(n.epsilon,")) ) + b;\n  }");return r(r({},u),{output:{dims:e[0].dims,type:e[0].type,textureType:s.TextureType.unpacked},shaderSource:d})},l=function(t){if(!t||5!==t.length)throw new Error("BatchNormalization requires 5 inputs.");var e=t[0],n=t[1],r=t[2],o=t[3],a=t[4];if(e.dims.length<3||1!==n.dims.length||1!==r.dims.length||1!==o.dims.length||1!==a.dims.length)throw new Error("invalid input shape.");if(n.dims[0]!==e.dims[1]||r.dims[0]!==e.dims[1]||o.dims[0]!==e.dims[1]||a.dims[0]!==e.dims[1])throw new Error("invalid input shape.");if("float32"!==e.type&&"float64"!==e.type||"float32"!==n.type&&"float64"!==n.type||"float32"!==r.type&&"float64"!==r.type||"float32"!==o.type&&"float64"!==o.type||"float32"!==a.type&&"float64"!==a.type)throw new Error("invalid input tensor types.")}},5194:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.xor=e.sub=e.pRelu=e.pow=e.or=e.mul=e.less=e.greater=e.equal=e.div=e.and=e.add=e.glslPRelu=e.glslPow=e.glslXor=e.glslOr=e.glslAnd=e.glslLess=e.glslGreater=e.glslEqual=e.glslSub=e.glslMul=e.glslDiv=e.glslAdd=void 0;var r=n(7273),o=n(1997),a=n(6757),i=n(5639);function s(){var t="add_";return{body:"\n  float ".concat(t,"(float a, float b) {\n    return a + b;\n  }\n  vec4 ").concat(t,"(vec4 v1, vec4 v2) {\n    return v1 + v2;\n  }\n  "),name:t,type:o.FunctionType.ValueBased}}function u(){var t="div_";return{body:"\n  float ".concat(t,"(float a, float b) {\n    return a / b;\n  }\n  vec4 ").concat(t,"(vec4 v1, vec4 v2) {\n    return v1 / v2;\n  }\n  "),name:t,type:o.FunctionType.ValueBased}}function c(){var t="mul_";return{body:"\n  float ".concat(t,"(float a, float b) {\n    return a * b;\n  }\n  vec4 ").concat(t,"(vec4 v1, vec4 v2) {\n    return v1 * v2;\n  }\n  "),name:t,type:o.FunctionType.ValueBased}}function l(){var t="sub_";return{body:"\n  float ".concat(t,"(float a, float b) {\n    return a - b;\n  }\n  vec4 ").concat(t,"(vec4 v1, vec4 v2) {\n    return v1 - v2;\n  }\n  "),name:t,type:o.FunctionType.ValueBased}}function f(){var t="equal_";return{body:"\n  float ".concat(t,"(float a, float b) {\n    return float(a == b);\n  }\n  vec4 ").concat(t,"(vec4 v1, vec4 v2) {\n    return vec4(equal(v1, v2));\n  }\n  "),name:t,type:o.FunctionType.ValueBased}}function p(){var t="greater_";return{body:"\n  float ".concat(t,"(float a, float b) {\n    return float(a > b);\n  }\n  vec4 ").concat(t,"(vec4 v1, vec4 v2) {\n    return vec4( v1.r > v2.r ,\n      v1.g > v2.g,\n      v1.b > v2.b,\n      v1.a > v2.a );\n  }\n  "),name:t,type:o.FunctionType.ValueBased}}function d(){var t="less_";return{body:"\n  float ".concat(t,"(float a, float b) {\n    return float(a < b);\n  }\n  vec4 ").concat(t,"(vec4 v1, vec4 v2) {\n    return vec4( v1.r < v2.r ,\n                v1.g < v2.g,\n                v1.b < v2.b,\n                v1.a < v2.a );\n  }\n  "),name:t,type:o.FunctionType.ValueBased}}function h(){var t="and_";return{body:"\n  float ".concat(t,"(float a, float b) {\n    return float( bool(a) && bool(b) );\n  }\n  vec4 ").concat(t,"(vec4 v1, vec4 v2) {\n    bvec4 b1 = bvec4(v1);\n    bvec4 b2 = bvec4(v2);\n    return vec4( b1.r && b2.r ,\n                b1.g && b2.g,\n                b1.b && b2.b,\n                b1.a && b2.a );\n  }\n  "),name:t,type:o.FunctionType.ValueBased}}function g(){var t="or_";return{body:"\n  float ".concat(t,"(float a, float b) {\n    return float( bool(a) || bool(b) );\n  }\n  vec4 ").concat(t,"(vec4 v1, vec4 v2) {\n    bvec4 b1 = bvec4(v1);\n    bvec4 b2 = bvec4(v2);\n    return vec4( b1.r || b2.r ,\n                b1.g || b2.g,\n                b1.b || b2.b,\n                b1.a || b2.a );\n  }\n  "),name:t,type:o.FunctionType.ValueBased}}function m(){var t="xor_";return{body:"\n  float ".concat(t,"(float a, float b) {\n    return float( bool(a) ^^ bool(b) );\n  }\n  vec4 ").concat(t,"(vec4 v1, vec4 v2) {\n    bvec4 b1 = bvec4(v1);\n    bvec4 b2 = bvec4(v2);\n    return vec4( b1.r ^^ b2.r ,\n                b1.g ^^ b2.g,\n                b1.b ^^ b2.b,\n                b1.a ^^ b2.a );\n  }\n  "),name:t,type:o.FunctionType.ValueBased}}function y(){return function(t){var e="".concat(t,"_");return{body:"\n  float ".concat(e,"(float a, float b) {\n    return ").concat(t,"(a, b);\n  }\n  vec4 ").concat(e,"(vec4 v1, vec4 v2) {\n    return ").concat(t,"(v1, v2);\n  }\n  "),name:e,type:o.FunctionType.ValueBased}}("pow")}function b(){var t="prelu_";return{body:"\n  float ".concat(t,"(float a, float b) {\n    return a < 0.0 ? a * b: a;\n  }\n  vec4 ").concat(t,"(vec4 v1, vec4 v2) {\n    return vec4(\n      v1.r < 0.0 ? v1.r * v2.r: v1.r,\n      v1.g < 0.0 ? v1.g * v2.g: v1.g,\n      v1.b < 0.0 ? v1.b * v2.b: v1.b,\n      v1.a < 0.0 ? v1.a * v2.a: v1.a\n      );\n  }\n  "),name:t,type:o.FunctionType.ValueBased}}e.glslAdd=s,e.glslDiv=u,e.glslMul=c,e.glslSub=l,e.glslEqual=f,e.glslGreater=p,e.glslLess=d,e.glslAnd=h,e.glslOr=g,e.glslXor=m,e.glslPow=y,e.glslPRelu=b;var v=function(t,e,n,r,o){void 0===r&&(r=e[0].type);var a=t.session.pack?i.TextureType.packed:i.TextureType.unpacked;return{name:n.name,inputNames:["A","B"],inputTypes:[a,a],cacheHint:o,get:function(){return w(t,e,n,r)}}},w=function(t,e,n,o){void 0===o&&(o=e[0].type);var s=t.session.pack?i.TextureType.packed:i.TextureType.unpacked,u=!r.ShapeUtil.areEqual(e[0].dims,e[1].dims),c=e[0].dims,l=t.session.pack;if(u){var f=r.BroadcastUtil.calcShape(e[0].dims,e[1].dims,!1);if(!f)throw new Error("Can't perform binary op on the given tensors");var p=(c=f).length,d=0!==e[0].dims.length?e[0].dims.length:1,h=0!==e[1].dims.length?e[1].dims.length:1,g=0!==e[0].dims.length?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",m=0!==e[1].dims.length?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",y=(0,a.getGlsl)(t.session.backend.glContext.version),b=l?"\n      ".concat(n.body,"\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n        vec4 result = ").concat(n.name,"(a, b);\n        ").concat(y.output," = result;\n      }"):"\n      ".concat(n.body,"\n      float process(int indices[").concat(p,"]) {\n        int aindices[").concat(d,"];\n        int bindices[").concat(h,"];\n        ").concat(g,"\n        ").concat(m,"\n        return ").concat(n.name,"(_A(aindices), _B(bindices));\n      }");return{name:n.name,inputNames:["A","B"],inputTypes:[s,s],output:{dims:c,type:o,textureType:s},shaderSource:b,hasMain:l}}var v=(0,a.getGlsl)(t.session.backend.glContext.version),w="\n    ".concat(n.body,"\n    void main() {\n      vec4 v1 = ").concat(v.texture2D,"(A, TexCoords);\n      vec4 v2 = ").concat(v.texture2D,"(B, TexCoords);\n      vec4 result = ").concat(n.name,"(v1, v2);\n      ").concat(v.output," = result;\n    }\n    ");return{name:n.name,inputNames:["A","B"],inputTypes:[s,s],output:{dims:e[0].dims,type:o,textureType:s},shaderSource:w,hasMain:!0}};e.add=function(t,e){return[t.run(v(t,e,s()),e)]},e.and=function(t,e){return[t.run(v(t,e,h(),"bool"),e)]},e.div=function(t,e){return[t.run(v(t,e,u()),e)]},e.equal=function(t,e){return[t.run(v(t,e,f(),"bool"),e)]},e.greater=function(t,e){return[t.run(v(t,e,p(),"bool"),e)]},e.less=function(t,e){return[t.run(v(t,e,d(),"bool"),e)]},e.mul=function(t,e){return[t.run(v(t,e,c()),e)]},e.or=function(t,e){return[t.run(v(t,e,g(),"bool"),e)]},e.pow=function(t,e){return[t.run(v(t,e,y()),e)]},e.pRelu=function(t,e){return[t.run(v(t,e,b()),e)]},e.sub=function(t,e){return[t.run(v(t,e,l()),e)]},e.xor=function(t,e){return[t.run(v(t,e,m(),"bool"),e)]}},4752:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseCastAttributes=e.cast=void 0;var r=n(7273);e.cast=function(t,e,n){return o(e),[t.cast(e[0],n)]},e.parseCastAttributes=function(t){return r.ProtoUtil.tensorDataTypeFromProto(t.attributes.getInt("to"))};var o=function(t){if(!t||1!==t.length)throw new Error("Cast requires 1 input.");if("string"===t[0].type)throw new Error("Invalid input type.")}},4595:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.createPackedConcatProgramInfoLoader=void 0;var o=n(6757),a=n(5639),i=n(432),s=n(5614);e.createPackedConcatProgramInfoLoader=function(t,e,n){var c,l,f=(c=e.length,l=n.cacheKey,{name:"Concat (packed)",inputNames:Array.from({length:c},(function(t,e){return"X".concat(e)})),inputTypes:Array(c).fill(a.TextureType.packed),cacheHint:l});return r(r({},f),{get:function(){return function(t,e,n,c){var l=n[0].dims.slice();if(c>=l.length||c<-1*l.length)throw new Error("axis specified for concat doesn't match input dimensionality");c<0&&(c=l.length+c);for(var f=l.slice(0),p=1;p<n.length;p++)for(var d=n[p].dims.slice(),h=0;h<l.length;h++)if(h===c)f[c]+=d[h];else if(l[h]!==d[h])throw new Error("non concat dimensions must match");var g=f.length,m=(0,s.getChannels)("coords",g),y=(0,i.getCoordsDataType)(g),b=(0,s.unpackFromChannel)(),v=n.map((function(t){return t.dims})),w=(0,i.getGlChannels)(g),_=new Array(v.length-1);for(_[0]=v[0][c],p=1;p<_.length;p++)_[p]=_[p-1]+v[p][c];var x=w[c],T=w.slice(-2),S=w.join(),A="if (".concat(x," < ").concat(_[0],") {\n        return getChannel(\n            getX0(").concat(S,"), vec2(").concat(T.join(),"));\n        }");for(p=1;p<_.length;p++){var O=_[p-1];A+="\n            if (".concat(x," < ").concat(_[p],"  && ").concat(x," >= ").concat(_[p-1],") {\n              return getChannel(\n                getX").concat(p,"(").concat(u(w,x,O),"),\n                vec2(").concat(u(T,x,O),"));\n            }")}var E=_.length,P=_[_.length-1];A+="\n            return getChannel(\n              getX".concat(E,"(").concat(u(w,x,P),"),\n              vec2(").concat(u(T,x,P),"));");var I=(0,o.getGlsl)(t.session.backend.glContext.version),D="\n          ".concat(b,"\n          float getValue(").concat(w.map((function(t){return"int "+t})),") {\n            ").concat(A,"\n          }\n\n          void main() {\n            ").concat(y," coords = getOutputCoords();\n            int lastDim = coords.").concat(w[g-1],";\n            coords.").concat(w[g-1]," = coords.").concat(w[g-2],";\n            coords.").concat(w[g-2]," = lastDim;\n\n            vec4 result = vec4(getValue(").concat(m,"), 0., 0., 0.);\n\n            ").concat(m[g-1]," = ").concat(m[g-1]," + 1;\n            if (").concat(m[g-1]," < ").concat(f[g-1],") {\n              result.g = getValue(").concat(m,");\n            }\n\n            ").concat(m[g-2]," = ").concat(m[g-2]," + 1;\n            if (").concat(m[g-2]," < ").concat(f[g-2],") {\n              result.a = getValue(").concat(m,");\n            }\n\n            ").concat(m[g-1]," = ").concat(m[g-1]," - 1;\n            if (").concat(m[g-2]," < ").concat(f[g-2]," &&\n                ").concat(m[g-1]," < ").concat(f[g-1],") {\n              result.b = getValue(").concat(m,");\n            }\n            ").concat(I.output," = result;\n          }\n        ");return r(r({},e),{output:{dims:f,type:n[0].type,textureType:a.TextureType.packed},shaderSource:D,hasMain:!0})}(t,f,e,n.axis)}})};var u=function(t,e,n){var r=t.indexOf(e);return t.map((function(t,e){return e===r?"".concat(t," - ").concat(n):t})).join()}},6668:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.parseConcatAttributes=e.concat=void 0;var a=n(4910),i=n(5639),s=n(4595);e.concat=function(t,e,n){return d(e),t.session.pack&&e[0].dims.length>1?[t.run((0,s.createPackedConcatProgramInfoLoader)(t,e,n),e)]:[t.run(u(t,e,n),e)]};var u=function(t,e,n){var o,a,s=(o=e.length,a=n.cacheKey,{name:"Concat",inputNames:Array.from({length:o},(function(t,e){return"X".concat(e)})),inputTypes:Array(o).fill(i.TextureType.unpacked),cacheHint:a});return r(r({},s),{get:function(){return function(t,e,n,o){var a=n[0].dims.slice();if(o>=a.length||o<-1*a.length)throw new Error("axis specified for concat doesn't match input dimensionality");o<0&&(o=a.length+o);for(var s=a.slice(0),u=1;u<n.length;u++)for(var d=n[u].dims.slice(),h=0;h<a.length;h++)if(h===o)s[o]+=d[h];else if(a[h]!==d[h])throw new Error("non concat dimensions must match");var g=s.length,m=new Array(n.length),y=0;for(u=0;u<m.length;++u)y+=n[u].dims[o],m[u]=y;var b;b=n.length<5?c(m):l(m);var v=f(n.length,g),w=p(m),_="\n        ".concat(v,"\n        ").concat(w,"\n        ").concat(b,"\n        float process(int indices[").concat(g,"]) {\n          int textureIndex = getTextureWhereDataResides (indices[").concat(o,"]);\n\n          if(textureIndex != 0) {\n            indices[").concat(o,"] = indices[").concat(o,"] - int(getSizeInConcatAxisValueFromIndex(textureIndex-int(1)));\n          }\n\n          return fetchDataFromCorrectTexture(textureIndex, indices);\n        }");return r(r({},e),{output:{dims:s,type:n[0].type,textureType:i.TextureType.unpacked},shaderSource:_})}(0,s,e,n.axis)}})},c=function(t){var e=t.map((function(t,e){return"if(index<".concat(t,") {return ").concat(e,";}\n")}));return"int getTextureWhereDataResides(int index) {\n      ".concat(e.join(""),"\n    }")},l=function(t){return c(t)},f=function(t,e){for(var n=["float fetchDataFromCorrectTexture(int textureIndex, int indices[".concat(e,"]) {")],r=0;r<t;++r)0===r?n.push("\t"+"if (textureIndex == ".concat(r,") { return _X").concat(r,"(indices); }")):r===t-1?n.push("\t"+"else { return _X".concat(r,"(indices); }")):n.push("\t"+"else if (textureIndex == ".concat(r,") { return _X").concat(r,"(indices); }"));return n.push("\t}"),n.join("\n")},p=function(t){for(var e=["int getSizeInConcatAxisValueFromIndex(int index) {"],n=0;n<t.length;++n)0===n?e.push("\t"+"if (index == ".concat(n,") { return ").concat(t[n],"; }")):n===t.length-1?e.push("\t"+"else { return ".concat(t[n],"; }")):e.push("\t"+"else if (index == ".concat(n,") { return ").concat(t[n],"; }"));return e.push("\t}"),e.join("\n")};e.parseConcatAttributes=function(t){return(0,a.createAttributeWithCacheKey)({axis:t.attributes.getInt("axis")})};var d=function(t){var e,n;if(!t||t.length<1)throw new Error("too few inputs");var r=t[0].type,a=t[0].dims.length;if("string"===r)throw new Error("string tensor is not supported yet");try{for(var i=o(t),s=i.next();!s.done;s=i.next()){var u=s.value;if(u.type!==r)throw new Error("input tensors should be one type");if(u.dims.length!==a)throw new Error("input tensors should have the same shape")}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},7825:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.createUnpackedGroupedConvProgramInfoLoader=void 0;var o=n(1315),a=n(6757),i=n(5639),s=n(9754),u=n(2150);e.createUnpackedGroupedConvProgramInfoLoader=function(t,e,n){var c,l,f=(c=e.length>2,l=n.cacheKey,{name:"GroupedConv",inputNames:c?["X","W","Bias"]:["X","W"],inputTypes:c?[i.TextureType.unpacked,i.TextureType.unpacked,i.TextureType.unpacked]:[i.TextureType.unpacked,i.TextureType.unpacked],cacheHint:l});return r(r({},f),{get:function(){return function(t,e,n,c){var l=e.length>2?"value += getBias(output_channel);":"",f=e[0].dims.slice(),p=e[1].dims.slice(),d=p[0]/c.group;o.Logger.verbose("GroupedConv","autpPad:".concat(c.autoPad,", dilations:").concat(c.dilations,", group:").concat(c.group,", kernelShape:").concat(c.kernelShape,", pads:").concat(c.pads,", strides:").concat(c.strides));var h=(0,s.calculateOutputShape)(f,p,c.dilations,c.pads,c.strides),g=(0,a.getGlsl)(t.session.backend.glContext.version),m=(0,u.getActivationSnippet)(c),y=m.activationFunction,b=m.applyActivation,v="\n  const ivec2 strides = ivec2(".concat(c.strides[0],", ").concat(c.strides[1],");\n  const ivec2 pads = ivec2(").concat(c.pads[0],", ").concat(c.pads[1],");\n  ").concat(y,"\n  void main() {\n    ivec4 coords = getOutputCoords();\n    int batch = coords.x;\n    int output_channel = coords.y;\n    ivec2 xRCCorner = coords.zw * strides - pads;\n    int group_id = output_channel / ").concat(d,";\n\n    float value = 0.0;\n    for (int wInChannel = 0; wInChannel < ").concat(p[1],"; wInChannel++) {\n      int input_channel = group_id * ").concat(p[1]," + wInChannel;\n      for (int wHeight = 0; wHeight < ").concat(p[2],"; wHeight++) {\n        int xHeight = xRCCorner.x + wHeight * ").concat(c.dilations[0],";\n\n        if (xHeight < 0 || xHeight >= ").concat(f[2],") {\n          continue;\n        }\n\n        for (int wWidth = 0; wWidth < ").concat(p[3],"; wWidth++) {\n          int xWidth = xRCCorner.y + wWidth * ").concat(c.dilations[1],";\n          if (xWidth < 0 || xWidth >= ").concat(f[3],") {\n            continue;\n          }\n\n          float xVal = getX(batch, input_channel, xWidth, xHeight);\n          float wVal = getW(output_channel, wInChannel, wWidth, wHeight);\n          value += xVal*wVal;\n        }\n      }\n    }\n    ").concat(l,"\n    ").concat(b,"\n    ").concat(g.output," = vec4(value, .0, .0, .0);\n  }\n");return r(r({},n),{output:{dims:h,type:e[0].type,textureType:i.TextureType.unpacked},shaderSource:v,hasMain:!0})}(t,e,f,n)}})}},7708:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.conv2DPacked=e.conv2DPackedPointwise=void 0;var r=n(9754),o=n(5950),a=n(5632);e.conv2DPackedPointwise=function(t,e,n){var o=e[0].dims,i=e[1].dims,s=(0,r.calculateOutputShape)(o,i,n.dilations,n.pads,n.strides),u=t.reshapePacked(e[0],[o[1],o[2]*o[3]]),c=t.reshapePacked(e[1],[i[0],i[1]]),l=e.length>2?[c,u,e[2]]:[c,u],f=t.run((0,a.createPackedMatmulProgramInfoLoader)(t,l,n),l);return t.reshapePacked(f,s)},e.conv2DPacked=function(t,e,n){var i=e[0].dims,s=e[1].dims,u=(0,r.calculateOutputShape)(i,s,n.dilations,n.pads,n.strides),c=t.run((0,o.createPackedIm2ColProgramInfoLoader)(t,e[0],e[1],u,n),[e[0]]),l=t.reshapePacked(e[1],[s[0],s[1]*s[2]*s[3]]),f=3===e.length?[l,c,e[2]]:[l,c],p=t.run((0,a.createPackedMatmulProgramInfoLoader)(t,f,n),f);return t.reshapePacked(p,u)}},5042:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,a=e.length;o<a;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.parseConvTransposeAttributes=e.convTranspose=void 0;var i=n(4910),s=n(6757),u=n(5639),c=n(2150),l=function(t,e,n,r,o,a){return(t-1)*e+n+(r-1)*o+1-a},f=function(t,e,n,r,o){var a=Math.floor(t/2);"SAME_UPPER"===e?(n[r]=a,n[o]=t-a):"SAME_LOWER"===e&&(n[r]=t-a,n[o]=a)};e.convTranspose=function(t,e,n){return g(e,n),p(t,e,n)};var p=function(t,e,n){var r=h(n,e);return[d(t,e,r)]},d=function(t,e,n){return t.run(function(t,e,n){var i,l,f=(i=e.length>2,l=n.cacheKey,{name:"ConvTranspose",inputNames:i?["X","W","B"]:["X","W"],inputTypes:i?[u.TextureType.unpacked,u.TextureType.unpacked,u.TextureType.unpacked]:[u.TextureType.unpacked,u.TextureType.unpacked],cacheHint:l});return r(r({},f),{get:function(){return function(t,e,n,i){var l=e.length>2?"getB(output_channel)":"0.0",f=e[0].dims,p=e[1].dims,d=p[1],h=p[0]/i.group,g=a([e[0].dims[0],e[1].dims[1]*i.group],o(i.outputShape),!1),m=(0,s.getGlsl)(t.session.backend.glContext.version),y=(0,c.getActivationSnippet)(i),b=y.activationFunction,v=y.applyActivation,w="\n  const ivec2 strides = ivec2(".concat(i.strides[0],", ").concat(i.strides[1],");\n  const ivec2 pads = ivec2(").concat(i.pads[0],", ").concat(i.pads[1],");\n  ").concat(b,"\n  void main() {\n    ivec4 coords = getOutputCoords();\n    int batch = coords.x;\n    int output_channel = coords.y;\n\n    ivec2 loc = coords.zw + pads;\n\n    int group_id = output_channel / ").concat(d,";\n    int wOutChannel = output_channel - group_id * ").concat(d,";\n\n    float value = ").concat(l,";\n    for (int inChannelOffset = 0; inChannelOffset < ").concat(h,"; inChannelOffset++) {\n      int input_channel = group_id * ").concat(h," + inChannelOffset;\n      for (int wWOff = 0; wWOff < ").concat(p[2],"; wWOff++) {\n        for (int wHOff = 0; wHOff < ").concat(p[3],"; wHOff++) {\n          ivec2 wOff = ivec2(wWOff * ").concat(i.dilations[0],", wHOff * ").concat(i.dilations[1],");\n          ivec2 wLoc = loc - wOff;\n          ivec2 wLocIn = wLoc / strides;\n          if (\n            wLocIn * strides == wLoc &&\n            wLocIn.x >= 0 && wLocIn.x < ").concat(f[2]," &&\n            wLocIn.y >= 0 && wLocIn.y < ").concat(f[3],"\n          ) {\n            float xVal = getX(batch, input_channel, wLocIn.y, wLocIn.x);\n            float wVal = getW(input_channel, wOutChannel, wHOff, wWOff);\n            value += xVal * wVal;\n          }\n        }\n      }\n    }\n    ").concat(v,"\n    ").concat(m.output," = vec4(value, .0, .0, .0);\n  }\n");return r(r({},n),{output:{dims:g,type:e[0].type,textureType:u.TextureType.unpacked},shaderSource:w,hasMain:!0})}(t,e,f,n)}})}(t,e,n),e)},h=function(t,e){var n=t.kernelShape.slice();if(0===t.kernelShape.length)for(var r=2;r<e[1].dims.length;++r)n.push(e[1].dims[r]);var o=t.pads.slice(),a=t.outputShape.slice();!function(t,e,n,r,o,a,i,s){for(var u=t.length-2,c=0===s.length,p=0;p<u;++p){var d=c?t[p+2]*a[p]:s[p],h=l(t[p+2],a[p],o[p],e[p],n[p],d);f(h,r,o,p,p+u),c&&s.push(a[p]*(t[p+2]-1)+i[p]+(e[p]-1)*n[p]+1-o[p]-o[p+u])}}(e[0].dims,n,t.dilations,t.autoPad,o,t.strides,t.outputPadding,a);var i=Object.assign({},t);return Object.assign(i,{kernelShape:n,pads:o,outputShape:a,cacheKey:t.cacheKey}),i};e.parseConvTransposeAttributes=function(t){var e=t.attributes,n=(0,c.parseInternalActivationAttributes)(e),o=e.getString("auto_pad","NOTSET"),a=e.getInts("dilations",[1,1]),s=e.getInt("group",1),u=e.getInts("kernel_shape",[]),l=e.getInts("output_padding",[0,0]),f=e.getInts("output_shape",[]),p=e.getInts("pads",[0,0,0,0]),d=e.getInts("strides",[1,1]);return(0,i.createAttributeWithCacheKey)(r({autoPad:o,dilations:a,group:s,kernelShape:u,outputPadding:l,outputShape:f,pads:p,strides:d},n))};var g=function(t,e){if(!t||2!==t.length&&3!==t.length)throw new Error("Conv requires 2 or 3 inputs");if(4!==t[0].dims.length||4!==t[1].dims.length)throw new Error("currently only support 2-dimensional conv");if(t[0].dims[1]!==t[1].dims[0])throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");var n=t[1].dims[1]*e.group;if(3===t.length&&(1!==t[2].dims.length||t[2].dims[0]!==n))throw new Error("invalid bias");var r=t[0].dims.length-2;if(e.dilations.length!==r)throw new Error("dilations should be ".concat(r,"D"));if(e.strides.length!==r)throw new Error("strides should be ".concat(r,"D"));if(e.pads.length!==2*r)throw new Error("pads should be ".concat(2*r,"D"));if(e.outputPadding.length!==r)throw new Error("output_padding should be ".concat(r,"D"));if(0!==e.kernelShape.length&&e.kernelShape.length!==t[1].dims.length-2)throw new Error("invalid kernel shape");if(0!==e.outputShape.length&&e.outputShape.length!==t[0].dims.length-2)throw new Error("invalid output shape");if("float32"!==t[0].type||"float32"!==t[1].type)throw new Error("ConvTranspose input(X,W) should be float tensor");if(3===t.length&&"float32"!==t[2].type)throw new Error("ConvTranspose input(bias) should be float tensor")}},9754:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,a=e.length;o<a;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.parseConvAttributes=e.conv=e.calculateOutputShape=void 0;var i=n(4910),s=n(7273),u=n(7825),c=n(7708),l=n(3281),f=n(2150),p=n(1625),d=n(8276);e.calculateOutputShape=function(t,e,n,r,i){var s,u=t[0],c=t.slice(2),l=c.length,f=e[0],p=e.slice(2).map((function(t,e){return t+(t-1)*(n[e]-1)})),d=c.map((function(t,e){return t+r[e]+r[e+l]})).map((function(t,e){return Math.floor((t-p[e]+i[e])/i[e])}));return(s=[u,f]).concat.apply(s,a([],o(d),!1))},e.conv=function(t,e,n){return b(e,n),h(t,e,n)};var h=function(t,e,n){var r=y(n,e),o=t.session.pack,a=1===r.kernelShape[0]&&1===r.kernelShape[1];return r.group>1?[t.run((0,u.createUnpackedGroupedConvProgramInfoLoader)(t,e,r),e)]:a&&o?[g(t,e,r)]:o&&4===e[0].dims.length&&1===e[0].dims[0]&&!a?[(0,c.conv2DPacked)(t,e,r)]:[m(t,e,r)]},g=function(t,n,r){var o=n[0].dims,a=n[1].dims,i=(0,e.calculateOutputShape)(o,a,r.dilations,r.pads,r.strides),s=t.reshapeUnpacked(n[0],[o[1],o[2]*o[3]]),u=t.reshapeUnpacked(n[1],[a[0],a[1]]),c=n.length>2?[u,s,n[2]]:[u,s],l=t.run((0,d.createMatmulProgramInfoLoader)(c,r),c);return t.reshapeUnpacked(l,i)},m=function(t,n,r){var o=n[0].dims,a=n[1].dims,i=(0,e.calculateOutputShape)(o,a,r.dilations,r.pads,r.strides),s=t.run((0,p.createIm2ColProgramInfoLoader)(t,n[0],n[1],i,r),[n[0]]),u=3===n.length?[s,n[1],n[2]]:[s,n[1]];return t.run((0,l.createDotProductProgramInfoLoader)(t,n,i,r),u)},y=function(t,e){var n=t.kernelShape.slice();if(0===t.kernelShape.length)for(var r=2;r<e[1].dims.length;++r)n.push(e[1].dims[r]);var o=t.pads.slice();s.PoolConvUtil.adjustPadsBasedOnAutoPad(e[0].dims,t.strides,t.dilations,n,o,t.autoPad);var a=Object.assign({},t);return Object.assign(a,{kernelShape:n,pads:o,cacheKey:t.cacheKey}),a};e.parseConvAttributes=function(t){var e=t.attributes,n=(0,f.parseInternalActivationAttributes)(e),o=e.getString("auto_pad","NOTSET"),a=e.getInts("dilations",[1,1]),s=e.getInt("group",1),u=e.getInts("kernel_shape",[]),c=e.getInts("pads",[0,0,0,0]),l=e.getInts("strides",[1,1]);return(0,i.createAttributeWithCacheKey)(r({autoPad:o,dilations:a,group:s,kernelShape:u,pads:c,strides:l},n))};var b=function(t,e){if(!t||2!==t.length&&3!==t.length)throw new Error("Conv requires 2 or 3 inputs");if(4!==t[0].dims.length||4!==t[1].dims.length)throw new Error("currently only support 2-dimensional conv");if(t[0].dims[1]!==t[1].dims[1]*e.group)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(3===t.length&&(1!==t[2].dims.length||t[1].dims[0]!==t[2].dims[0]))throw new Error("invalid bias");var n=t[0].dims.length-2;if(e.dilations.length!==n)throw new Error("dilations should be ".concat(n,"D"));if(e.strides.length!==n)throw new Error("strides should be ".concat(n,"D"));if(e.pads.length!==2*n)throw new Error("pads should be ".concat(2*n,"D"));if(0!==e.kernelShape.length&&e.kernelShape.length!==t[1].dims.length-2)throw new Error("invalid kernel shape");if("float32"!==t[0].type||"float32"!==t[1].type)throw new Error("Conv input(X,W) should be float tensor");if(3===t.length&&"float32"!==t[2].type)throw new Error("Conv input(bias) should be float tensor")}},6742:function(t,e,n){"use strict";var r=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(e,"__esModule",{value:!0}),e.parseDepthToSpaceAttributes=e.depthToSpace=void 0;var o=n(5707);e.depthToSpace=function(t,e,n){a(e);var i=n.blocksize,s=i*i,u="DCR"===n.mode?[0,3,4,1,5,2]:[0,1,4,2,5,3],c="DCR"===n.mode?[e[0].dims[0],i,i,e[0].dims[1]/s,e[0].dims[2],e[0].dims[3]]:[e[0].dims[0],e[0].dims[1]/s,i,i,e[0].dims[2],e[0].dims[3]],l=t.reshapeUnpacked(e[0],c),f={perm:u,cacheKey:"".concat(u)},p=r((0,o.transpose)(t,[l],f),1)[0],d=[e[0].dims[0],e[0].dims[1]/s,e[0].dims[2]*i,e[0].dims[3]*i];return[t.reshapeUnpacked(p,d)]},e.parseDepthToSpaceAttributes=function(t){var e=t.attributes.getInt("blocksize");if(e<1)throw new Error("blocksize must be >= 1, but got : ".concat(e," for DepthToSpace"));var n=t.attributes.getString("mode","DCR");if("DCR"!==n&&"CRD"!==n)throw new Error("unrecognized mode: ".concat(n," for DepthToSpace"));return{mode:n,blocksize:e}};var a=function(t){if(1!==t.length)throw new Error("DepthToSpace expect 1 inputs, but got ".concat(t.length));if("string"===t[0].type||4!==t[0].dims.length)throw new TypeError("DepthToSpace input should be a 4-D numeric tensor")}},3281:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(e,"__esModule",{value:!0}),e.createDotProductProgramInfoLoader=void 0;var a=n(7273),i=n(6757),s=n(5639),u=n(2150),c=n(1625);e.createDotProductProgramInfoLoader=function(t,e,n,l){var f=function(t,e){return{name:"ConvDotProduct",inputNames:t?["Im2Col","K","B"]:["Im2Col","K"],inputTypes:t?[s.TextureType.unpacked,s.TextureType.packedLastDimension,s.TextureType.unpacked]:[s.TextureType.unpacked,s.TextureType.packedLastDimension],cacheKey:e.activationCacheKey}}(e.length>2,l);return r(r({},f),{get:function(){return function(t,e,n,l,f){var p=n[0].dims,d=n[1].dims,h=[d[0],Math.ceil(p[1]*d[2]*d[3]/4)],g=(0,c.calculateIm2ColDims)(p,d,l),m=o(t.calculateTextureWidthAndHeight(h,s.TextureType.packedLastDimension),2),y=m[0],b=m[1],v=a.ShapeUtil.computeStrides(g),w=o(t.calculateTextureWidthAndHeight(g,s.TextureType.packedLastDimension),2),_=w[0],x=w[1],T=l.length,S=n.length<3?"0.0":"_B(b)",A=Math.ceil(p[1]*d[2]*d[3]/4),O=(0,u.getActivationSnippet)(f),E=O.activationFunction,P=O.applyActivation,I=(0,i.getGlsl)(t.session.backend.glContext.version),D="\n".concat(E,"\nfloat process(int indices[").concat(T,"]) {\n  int b[1];\n  b[0] = indices[1];\n  int im2col[4];\n  im2col[0] = indices[0];\n  im2col[1] = indices[2];\n  im2col[2] = indices[3];\n  int im2colOffset = im2col[0] * ").concat(v[0]," + im2col[1] * ").concat(v[1]," + im2col[2] * ").concat(v[2],";\n  int kernelOffset = indices[1] * ").concat(h[1],";\n  float value = ").concat(S,";\n  for (int i = 0; i < ").concat(A,"; ++i) {\n    vec2 im2colCoords = offsetToCoords(im2colOffset, ").concat(_,", ").concat(x,");\n    vec2 kernelCoords = offsetToCoords(kernelOffset, ").concat(y,", ").concat(b,");\n    value += dot(").concat(I.texture2D,"(Im2Col, im2colCoords), ").concat(I.texture2D,"(K, kernelCoords));\n    ++im2colOffset;\n    ++kernelOffset;\n  }\n  ").concat(P,"\n  return value;\n}");return r(r({},e),{output:{dims:l,type:n[0].type,textureType:s.TextureType.unpacked},shaderSource:D})}(t,f,e,n,l)}})}},4125:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseFlattenAttributes=e.flatten=void 0;var r=n(7273);e.flatten=function(t,e,n){o(e,n);var a=r.ShapeUtil.flattenShape(e[0].dims,n);return[t.reshapeUnpacked(e[0],a)]},e.parseFlattenAttributes=function(t){return t.attributes.getInt("axis",1)};var o=function(t,e){if(!t||1!==t.length)throw new Error("Flatten requires 1 input.");var n=t[0].dims.length;if(0===n)throw new Error("scalar tensor is not supported.");if(e<-n||e>n)throw new Error("Invalid axis");if("string"===t[0].type)throw new Error("string tensor is not supported.")}},2150:function(t,e,n){"use strict";var r=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(e,"__esModule",{value:!0}),e.parseInternalActivationAttributes=e.getActivationSnippet=void 0;var o=n(7273),a=n(9087);e.getActivationSnippet=function(t){var e;switch(t.activation){case"Relu":e=(0,a.glslRelu)();break;case"Sigmoid":e=(0,a.glslSigmoid)();break;case"Clip":e=(0,a.glslClip)(t.clipMin,t.clipMax);break;default:return{activationFunction:"",applyActivation:""}}var n=e.name;return{activationFunction:e.body,applyActivation:"value = ".concat(n,"_(value);")}},e.parseInternalActivationAttributes=function(t){var e=t.getString("activation","");if("Clip"===e){var n=r(t.getFloats("activation_params",[o.MIN_CLIP,o.MAX_CLIP]),2),a=n[0],i=n[1];return{activation:e,clipMax:i,clipMin:a,activationCacheKey:"".concat(e,":").concat(a,",").concat(i)}}return{activation:e,activationCacheKey:e}}},6149:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.parseGatherAttributes=e.gather=void 0;var o=n(4910),a=n(6145),i=n(7273),s=n(5639);e.gather=function(t,e,n){return l(e,n.axis),[t.run(c(t,e,n),e)]},e.parseGatherAttributes=function(t){return(0,o.createAttributeWithCacheKey)({axis:t.attributes.getInt("axis",0)})};var u={name:"Gather",inputNames:["A","B"],inputTypes:[s.TextureType.unpacked,s.TextureType.unpacked]},c=function(t,e,n){var o=r(r({},u),{cacheHint:n.cacheKey});return r(r({},o),{get:function(){return function(t,e,n,o){var a=n[0].dims.slice(),u=n[1].dims.slice(),c=new Array(a.length+u.length-1);o=i.ShapeUtil.normalizeAxis(o,a.length);for(var l=[],f=0;f<c.length;f++)f<o?(c[f]=a[f],l.push("inputIdx[".concat(f,"] = outputIdx[").concat(f,"];"))):f<o+u.length?(c[f]=u[f-o],l.push("indexDataIdx[".concat(f-o,"] = outputIdx[").concat(f,"];"))):(c[f]=a[f-u.length+1],l.push("inputIdx[".concat(f-u.length+1,"] = outputIdx[").concat(f,"];")));var p=c.length||1,d=a.length,h=u.length||1,g="\n      float process(int outputIdx[".concat(p,"]) {\n        int inputIdx[").concat(d,"];\n        int indexDataIdx[").concat(h,"];\n        indexDataIdx[0] = 0;\n        ").concat(l.join("\n        "),"\n        int idx = int(_B(indexDataIdx));\n        inputIdx[").concat(o,"] = idx < 0 ? idx + ").concat(a[o]," : idx;\n        return _A(inputIdx);\n      }");return r(r({},e),{output:{dims:c,type:n[0].type,textureType:s.TextureType.unpacked},shaderSource:g})}(0,o,e,n.axis)}})},l=function(t,e){if(!t||2!==t.length)throw new Error("Gather requires 2 inputs.");var n=t[0].dims.length;if(n<1)throw new Error("Invalid input shape.");if(e<-n||e>n-1)throw new Error("Invalid axis.");if(-1===a.NUMBER_TYPES.indexOf(t[0].type))throw new Error("Invaid input type.");if("int32"!==t[1].type&&"int16"!==t[1].type)throw new Error("Invaid input type.")}},5378:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(e,"__esModule",{value:!0}),e.parseGemmAttributesV11=e.parseGemmAttributesV7=e.gemm=void 0;var a=n(4910),i=n(7273),s=n(5639);e.gemm=function(t,e,n){return f(e,n),[t.run(c(e,n),e)]};var u=function(t,e){var n=0!==t.attributes.getInt("transA",0),r=0!==t.attributes.getInt("transB",0),o=t.attributes.getFloat("alpha",1),i=t.attributes.getFloat("beta",1);return(0,a.createAttributeWithCacheKey)({transA:n,transB:r,alpha:o,beta:i,isOptionalC:e})};e.parseGemmAttributesV7=function(t){return u(t,!1)},e.parseGemmAttributesV11=function(t){return u(t,!0)};var c=function(t,e){var n={name:"Gemm",inputNames:3===t.length?["A","B","C"]:["A","B"],inputTypes:3===t.length?[s.TextureType.unpacked,s.TextureType.unpacked,s.TextureType.unpacked]:[s.TextureType.unpacked,s.TextureType.unpacked],key:e.cacheKey};return r(r({},n),{get:function(){return l(n,t,e)}})},l=function(t,e,n){var a=e[0].dims.slice(),u=e[1].dims.slice(),c=o(i.GemmUtil.getShapeOfGemmResult(a,n.transA,u,n.transB,3===e.length?e[2].dims:void 0),2),l=[c[0],c[1]];if(!l)throw new Error("Can't use gemm on the given tensors");var f=a[a.length-1],p="";n.transA&&(f=a[0]),n.transA&&n.transB?p="value += _A_T(a) * _B_T(b);":n.transA&&!n.transB?p="value += _A_T(a) * _B(b);":!n.transA&&n.transB?p="value += _A(a) * _B_T(b);":n.transA||n.transB||(p="value += _A(a) * _B(b);");var d=l.length,h=3===e.length?"int c[".concat(e[2].dims.length,"];"):"",g=3===e.length?"bcastIndices_C(indices, c);":"",m=3===e.length?"value += beta * _C(c);":"",y="\n      float process(int indices[".concat(d,"]) {\n          int a[").concat(d,"];\n          int b[").concat(d,"];\n          ").concat(h,"\n\n          copyVec(indices, a);\n          copyVec(indices, b);\n          ").concat(g,"\n\n          float value = 0.0;\n          for (int k=0; k<").concat(f,"; ++k) {\n              a[").concat(d-1,"] = k;\n              b[").concat(d-2,"] = k;\n              ").concat(p,"\n          }\n\n          value = value * alpha;\n          ").concat(m,"\n          return value;\n      }");return r(r({},t),{output:{dims:l,type:e[0].type,textureType:s.TextureType.unpacked},variables:[{name:"alpha",type:"float",data:n.alpha},{name:"beta",type:"float",data:n.beta}],shaderSource:y})},f=function(t,e){if(!t)throw new Error("Input is missing");if(e.isOptionalC&&(t.length<2||t.length>3))throw new Error("Invaid input shape.");if(!e.isOptionalC&&3!==t.length)throw new Error("Gemm requires 3 inputs");if(3===t.length&&1!==t[2].dims.length&&2!==t[2].dims.length)throw new Error("Invalid input shape of C");if("float32"!==t[0].type&&"float64"!==t[0].type||"float32"!==t[1].type&&"float64"!==t[1].type||3===t.length&&"float32"!==t[2].type&&"float64"!==t[2].type)throw new Error("Invalid input type.");if(t[0].type!==t[1].type||3===t.length&&t[0].type!==t[2].type)throw new Error("Input types are mismatched")}},5950:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.createPackedIm2ColProgramInfoLoader=void 0;var o=n(6757),a=n(5639),i=n(5614);e.createPackedIm2ColProgramInfoLoader=function(t,e,n,s,u){var c,l=(c=u.cacheKey,{name:"Im2Col (packed)",inputNames:["A"],inputTypes:[a.TextureType.packed],cacheHint:c});return r(r({},l),{get:function(){return function(t,e,n,s,u,c){for(var l=n.dims,f=s.dims,p=u.length,d=[f[1]*f[2]*f[3],u[2]*u[3]],h=f[2]*f[3],g=(0,i.unpackFromChannel)(),m=(0,o.getGlsl)(t.session.backend.glContext.version),y="",b=0;b<=1;b++)for(var v=0;v<=1;v++)y+="\n            blockIndex = rc.x + ".concat(v,";\n            pos = rc.y + ").concat(b,";\n\n            if(blockIndex < ").concat(d[1]," && pos < ").concat(d[0],") {\n              offsetY = int(blockIndex / (").concat(u[p-1],")) * ").concat(c.strides[0]," -\n                ").concat(c.pads[0],";\n              d0 = offsetY + ").concat(c.dilations[0]," * (imod(pos, ").concat(h,") / ").concat(f[2],");\n\n              if(d0 < ").concat(l[2]," && d0 >= 0) {\n                offsetX = imod(blockIndex, ").concat(u[p-1],") * ").concat(c.strides[1]," -\n                  ").concat(c.pads[1],";\n                d1 = offsetX + ").concat(c.dilations[1]," * imod(imod(pos, ").concat(h,"), ").concat(f[2],");\n\n                if(d1 < ").concat(l[3]," && d1 >= 0) {\n\n                  ch = int(float(pos)/ ").concat(h,".);\n                    innerDims = vec2(d0, d1);\n                    result[").concat(2*b+v,"] = getChannel(\n                      getA(0, ch, int(innerDims.x),\n                      int(innerDims.y)), innerDims);\n                }\n              }\n            }\n\n          ");var w="\n      ".concat(g,"\n\n      void main() {\n        ivec2 rc = getOutputCoords();\n          vec4 result = vec4(0.0);\n          int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n          vec2 innerDims;\n          ").concat(y,"\n          ").concat(m.output," = result;\n      }\n            ");return r(r({},e),{output:{dims:d,type:n.type,textureType:a.TextureType.packed},shaderSource:w,hasMain:!0})}(t,l,e,n,s,u)}})}},1625:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.calculateIm2ColDims=e.createIm2ColProgramInfoLoader=void 0;var o=n(5639);e.createIm2ColProgramInfoLoader=function(t,n,a,i,s){var u,c=(u=s.cacheKey,{name:"Im2Col",inputNames:["X"],inputTypes:[o.TextureType.unpacked],cacheHint:u});return r(r({},c),{get:function(){return function(t,n,a,i,s,u){var c=a.dims,l=i.dims,f=s.length,p=(0,e.calculateIm2ColDims)(c,l,s,4),d="\n        const int XC = ".concat(c[1],";\n        const int XH = ").concat(c[2],";\n        const int XW = ").concat(c[3],";\n        const int KH = ").concat(u.kernelShape[0],";\n        const int KW = ").concat(u.kernelShape[1],";\n        const int dilationH = ").concat(u.dilations[0],";\n        const int dilationW = ").concat(u.dilations[1],";\n        const int strideH = ").concat(u.strides[0],";\n        const int strideW = ").concat(u.strides[1],";\n        const int padH = ").concat(u.pads[0],";\n        const int padW = ").concat(u.pads[1],";\n        const int KHKW = KH*KW;\n        const int XCKHKW = XC * KHKW;\n        const int outputChannels = 4;\n        vec4 process(int indices[").concat(f,"]) {\n          int b  = indices[0]; // batch size\n          int oh = indices[1] * strideH - padH; //output height\n          int ow = indices[2] * strideW - padW; //output width\n          int p = indices[3] * outputChannels; //patch\n          vec4 value = vec4(0.0);\n          for(int i=0; i < outputChannels; ++i) {\n            if(p < XCKHKW) {\n              int patchC = p / KHKW;\n              int patchH = (p - patchC*KHKW) / KW;\n              int patchW = (p - patchC*KHKW) - patchH * KW;\n              int xh2 = oh + patchH * dilationH;\n              int xw2 = ow + patchW * dilationW;\n              int x[").concat(c.length,"];\n              x[0] = b;\n              x[1] = patchC;\n              x[2] = xh2;\n              x[3] = xw2;\n              if(xh2 >= 0 &&\n                  xh2 < XH &&\n                  xw2 >= 0 &&\n                  xw2 < XW) {\n                value[i] = _X(x);\n              }\n            }\n            ++p;\n          }\n          return value;\n        }\n        ");return r(r({},n),{output:{dims:p,type:a.type,textureType:o.TextureType.packedLastDimension},shaderSource:d})}(0,c,n,a,i,s)}})},e.calculateIm2ColDims=function(t,e,n,r){return void 0===r&&(r=4),[n[0],n[2],n[3],Math.ceil(t[1]*e[2]*e[3]/r)]}},6981:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.parseImageScalerAttributes=e.imageScaler=void 0;var o=n(4910),a=n(5639);e.imageScaler=function(t,e,n){return c(e),[t.run(s(t,e,n),e)]},e.parseImageScalerAttributes=function(t){var e=t.attributes.getFloat("scale"),n=t.attributes.getFloats("bias");return(0,o.createAttributeWithCacheKey)({scale:e,bias:n})};var i={name:"ImageScaler",inputNames:["X"],inputTypes:[a.TextureType.unpacked]},s=function(t,e,n){var o=r(r({},i),{cacheHint:n.cacheKey});return r(r({},o),{get:function(){return function(t,e,n,o){var i=n[0].dims.slice(),s=i.length,c=u(o.bias.length),l="\n      ".concat(c,"\n      float process(int indices[").concat(s,"]) {\n        return _X(indices) * scale + getBias(bias, indices[1]);\n      }");return r(r({},e),{output:{dims:i,type:n[0].type,textureType:a.TextureType.unpacked},variables:[{name:"bias",type:"float",arrayLength:o.bias.length,data:o.bias},{name:"scale",type:"float",data:o.scale}],shaderSource:l})}(0,o,e,n)}})},u=function(t){for(var e=["float getBias(float bias[".concat(t,"], int channel) {")],n=0;n<t;++n)0===n?e.push("\t"+"if (channel == ".concat(n,") { return bias[").concat(n,"]; }")):n===t-1?e.push("\t"+"else { return bias[".concat(n,"]; }")):e.push("\t"+"else if (channel == ".concat(n,") { return bias[").concat(n,"]; }"));return e.push("\t}"),e.join("\n")},c=function(t){if(!t||1!==t.length)throw new Error("ImageScaler requires 1 input.");if(4!==t[0].dims.length)throw new Error("Invalid input shape.");if("float32"!==t[0].type&&"float64"!==t[0].type)throw new Error("Invalid input type.")}},7413:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(e,"__esModule",{value:!0}),e.parseInstanceNormalizationAttributes=e.instanceNormalization=void 0;var a=n(6757),i=n(5639);e.instanceNormalization=function(t,e,n){f(e);var r=t.run(u(e[0]),e);return[t.run(l(t,e[0],n,r.dims),[e[0],r,e[1],e[2]])]},e.parseInstanceNormalizationAttributes=function(t){return t.attributes.getFloat("epsilon",1e-5)};var s={name:"InstanceNormalization_MeanAndVariance",inputNames:["X"],inputTypes:[i.TextureType.unpacked]},u=function(t){return r(r({},s),{get:function(){return function(t,e){var n=e.dims.slice(),o=n[1],a=n[2]*n[3],s=[n[0],o],u="\n      vec4 process(int[2] indices) {\n        vec4 v = vec4(0.0);\n        int a[4];\n        a[0] = indices[0];\n        a[1] = indices[1];\n        float temp = 0.0;\n        for(int a2=0; a2<".concat(n[2],"; a2++) {\n          a[2] = a2;\n          for(int a3=0; a3<").concat(n[3],"; a3++) {\n            a[3] = a3;\n            float x = _X(a);\n            temp += x;\n          }\n        }\n        float mean = temp / float(").concat(a,");\n        temp = 0.0;\n        for(int a2=0; a2<").concat(n[2],"; a2++) {\n          a[2] = a2;\n          for(int a3=0; a3<").concat(n[3],"; a3++) {\n            a[3] = a3;\n            float x = _X(a);\n            temp += (x - mean) * (x - mean);\n          }\n        }\n        v.r = mean;\n        v.g = temp / float(").concat(a,");\n\n        return v;\n      }");return r(r({},t),{output:{dims:s,type:e.type,textureType:i.TextureType.packedLastDimension},shaderSource:u})}(s,t)}})},c={name:"InstanceNormalization_ComputeOutput",inputNames:["X","MeanAndVariance","Scale","B"],inputTypes:[i.TextureType.unpacked,i.TextureType.packedLastDimension,i.TextureType.unpacked,i.TextureType.unpacked]},l=function(t,e,n,s){var u=r(r({},c),{cacheHint:"".concat(n)});return r(r({},u),{get:function(){return function(t,e,n,s,u){var c=(0,a.getGlsl)(t.session.backend.glContext.version),l=o(t.calculateTextureWidthAndHeight(u,i.TextureType.packedLastDimension),2),f=l[0],p=l[1],d=o([f/4,p],2),h=d[0],g=d[1],m="\n      vec4 get_MeanAndVariance(int[2] mv) {\n        int offset = indicesToOffset_MeanAndVariance(mv);\n        vec2 coords = offsetToCoords(offset, ".concat(h,", ").concat(g,");\n        return ").concat(c.texture2D,"(MeanAndVariance, coords);\n      }\n\n      float process(int[4] indices) {\n        int mv[2];\n        mv[0] = indices[0];\n        mv[1] = indices[1];\n        vec4 mean_and_variance = get_MeanAndVariance(mv);\n        float mean = mean_and_variance.r;\n        float variance = mean_and_variance.g;\n\n        int sb[1];\n        sb[0] = indices[1];\n        float scale = _Scale(sb);\n        float b = _B(sb);\n\n        return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;\n      }");return r(r({},e),{output:{dims:n.dims,type:n.type,textureType:i.TextureType.unpacked},variables:[{name:"epsilon",type:"float",data:s}],shaderSource:m})}(t,u,e,n,s)}})},f=function(t){if(!t||3!==t.length)throw new Error("InstanceNormalization requires 3 inputs.");var e=t[0],n=t[1],r=t[2];if(e.dims.length<3||1!==n.dims.length||1!==r.dims.length)throw new Error("Invalid input shape.");if(n.dims[0]!==e.dims[1]||r.dims[0]!==e.dims[1])throw new Error("Input shapes are mismatched.");if("float32"!==e.type&&"float64"!==e.type||"float32"!==n.type&&"float64"!==n.type||"float32"!==r.type&&"float64"!==r.type)throw new Error("Invalid input type.");if(4!==t[0].dims.length)throw new Error("Only support 4-D input shape.")}},7006:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.createLrnProgramInfoLoader=e.parseLrnAttributes=e.lrn=void 0;var o=n(4910),a=n(5639);e.lrn=function(t,e,n){return u(e),[t.run(s(e,n),e)]},e.parseLrnAttributes=function(t){var e=t.attributes.getFloat("alpha",1e-4),n=t.attributes.getFloat("beta",.75),r=t.attributes.getFloat("bias",1),a=t.attributes.getInt("size");return(0,o.createAttributeWithCacheKey)({alpha:e,beta:n,bias:r,size:a})};var i={name:"LRN",inputNames:["X"],inputTypes:[a.TextureType.unpacked]};function s(t,e){return r(r({},i),{cacheHint:e.cacheKey,get:function(){return function(t,e){var n=t[0].dims[1],o=t[0].dims.length,s=-Math.floor((e.size-1)/2),u=Math.ceil((e.size-1)/2),c="float(".concat(e.alpha,") / float(").concat(e.size,")"),l="float(".concat(e.bias,")"),f="float(".concat(e.beta,")"),p="\n    float process(int indices[".concat(o,"]) {\n        int c = indices[1];\n        float x = _X(indices);\n        float square_sum = 0.0;\n\n        for (int i = ").concat(s,"; i <= ").concat(u,"; i++) {\n          int idx = c + i;\n          if (c >= 0 && c < ").concat(n,") {\n            indices[1] = idx;\n            float j = _X(indices);\n            square_sum += j * j;\n          }\n        }\n        return x / pow(").concat(l," + ").concat(c," * square_sum, ").concat(f,");\n    }");return r(r({},i),{cacheHint:e.cacheKey,output:{dims:t[0].dims,type:t[0].type,textureType:a.TextureType.unpacked},shaderSource:p})}(t,e)}})}e.createLrnProgramInfoLoader=s;var u=function(t){if(!t||1!==t.length)throw new Error("LRN requires 1 input.");if(4!==t[0].dims.length)throw new Error('currently only support LRN for input with "NCHW" format');if("float32"!==t[0].type)throw new Error("input should be float type")}},5632:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.createPackedMatmulProgramInfoLoader=void 0;var o=n(7273),a=n(6757),i=n(5639),s=n(432),u=n(2150),c=n(8276);e.createPackedMatmulProgramInfoLoader=function(t,e,n){var l,f,p=(l=e.length>2,f=n.activationCacheKey,{name:"MatMul (packed)",inputNames:l?["A","B","Bias"]:["A","B"],inputTypes:l?[i.TextureType.packed,i.TextureType.packed,i.TextureType.packed]:[i.TextureType.packed,i.TextureType.packed],cacheHint:f});return r(r({},p),{get:function(){return function(t,e,n,l){var f=n.length>2,p=f?"value += getBiasForMatmul();":"",d=n[0].dims,h=n[1].dims,g=o.BroadcastUtil.calcShape(d,h,!0),m=!o.ShapeUtil.areEqual(n[0].dims,n[1].dims);if(!g)throw new Error("Can't use matmul on the given tensors");var y=d[d.length-1],b=Math.ceil(y/2),v=d.length,w=h.length,_=(0,a.getGlsl)(t.session.backend.glContext.version),x=(0,s.getCoordsDataType)(g.length),T=g.length,S=(0,s.getGlChannels)(),A=(0,u.getActivationSnippet)(l),O=A.activationFunction,E=A.applyActivation,P=f?"".concat((0,c.getBiasForMatmul)(x,S,n[2].dims,g,!0)):"",I=m?"".concat(function(t,e,n,r){var a=[],i=[],s=n[0].dims,u=n[1].dims,c=s.length,l=u.length,f=r.length,p=f-c,d=f-l;(a=s.map((function(t,n){return"coords.".concat(e[n+p])})))[c-1]="i*2",a.join(", "),(i=u.map((function(t,n){return"coords.".concat(e[n+d])})))[l-2]="i*2",i.join(", ");var h=o.BroadcastUtil.getBroadcastDims(s,r),g=o.BroadcastUtil.getBroadcastDims(u,r),m=h.map((function(t){return"coords.".concat(e[t+p]," = 0;")})).join("\n"),y=g.map((function(t){return"coords.".concat(e[t+d]," = 0;")})).join("\n"),b="int lastDim = coords.".concat(e[f-1],";\n  coords.").concat(e[f-1]," = coords.").concat(e[f-2],";\n  coords.").concat(e[f-2]," = lastDim;");return"\nvec4 getAAtOutCoordsMatmul(int i) {\n  ".concat(t," coords = getOutputCoords();\n  ").concat(b,"\n  ").concat(m,"\n  vec4 outputValue = getA(").concat(a,");\n  return outputValue;\n}\n\nvec4 getBAtOutCoordsMatmul(int i) {\n  ").concat(t," coords = getOutputCoords();\n  ").concat(b,"\n  ").concat(y,"\n  vec4 outputValue = getB(").concat(i,");\n  return outputValue;\n}")}(x,S,n,g)):"",D=m?"getAAtOutCoordsMatmul(i)":"getA(".concat(function(t,e){for(var n="",r=0;r<e-2;r++)n+="rc.".concat(t[r],", ");return n+("rc.".concat(t[e-2],", ")+"i*2")}(S,v),")"),k=m?"getBAtOutCoordsMatmul(i)":"getB(".concat(function(t,e){for(var n="",r=0;r<e-2;r++)n+="rc.".concat(t[r],", ");return n+"i*2, "+"rc.".concat(t[e-1])}(S,w),")"),C=m?"":"".concat(x," rc =\n          getOutputCoords(); int lastDim = rc.").concat(S[T-1],"; rc.").concat(S[T-1]," =\n          rc.").concat(S[T-2],"; rc.").concat(S[T-2]," = lastDim;\n      "),R="\n            ".concat(I,"\n            ").concat(P,"\n            ").concat(O,"\n            void main() {\n              ").concat(C,"\n\n              vec4 value = vec4(0);\n              for (int i = 0; i < ").concat(b,"; i++) {\n                vec4 a = ").concat(D,";\n                vec4 b = ").concat(k,";\n\n                value += (a.rrbb * b.rgrg);\n                value += (a.ggaa * b.baba);\n              }\n              ").concat(p,"\n              ").concat(E,"\n              ").concat(_.output," = value;\n            }");return r(r({},e),{output:{dims:g,type:n[0].type,textureType:i.TextureType.packed},shaderSource:R,hasMain:!0})}(t,p,e,n)}})}},8276:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.getBiasForMatmul=e.createMatmulProgramInfoLoader=e.parseMatMulAttributes=e.matMul=void 0;var o=n(7273),a=n(5639),i=n(432),s=n(2150),u=n(5632);e.matMul=function(t,e,n){return f(e),t.session.pack?[t.run((0,u.createPackedMatmulProgramInfoLoader)(t,e,n),e)]:[t.run(l(e,n),e)]},e.parseMatMulAttributes=function(t){return(0,s.parseInternalActivationAttributes)(t.attributes)};var c=function(t,e){return{name:"MatMul",inputNames:t?["A","B","Bias"]:["A","B"],inputTypes:t?[a.TextureType.unpacked,a.TextureType.unpacked,a.TextureType.unpacked]:[a.TextureType.unpacked,a.TextureType.unpacked],cacheHint:e}};function l(t,e){var n=c(t.length>2,e.activationCacheKey);return r(r({},n),{get:function(){return function(t,e,n){var u=e[0].dims,c=e[1].dims,l=o.BroadcastUtil.calcShape(u,c,!0);if(!l)throw new Error("Can't use matmul on the given tensors");var f=(0,i.getCoordsDataType)(l.length),d=(0,i.getGlChannels)(),h=(0,s.getActivationSnippet)(n),g=h.activationFunction,m=h.applyActivation,y=e.length>2,b=y?"value += getBiasForMatmul();":"",v=y?"".concat(p(f,d,e[2].dims,l,!1)):"",w=l.length,_=u.length,x=c.length,T=u[u.length-1],S="\n    ".concat(g,"\n    ").concat(v,"\n    float process(int indices[").concat(w,"]) {\n        int a[").concat(_,"];\n        int b[").concat(x,"];\n        bcastMatmulIndices_A(indices, a);\n        bcastMatmulIndices_B(indices, b);\n\n        float value;\n        for (int k=0; k<").concat(T,"; ++k) {\n            a[").concat(_-1,"] = k;\n            b[").concat(x-2,"] = k;\n            value += _A(a) * _B(b);\n        }\n        ").concat(b,"\n        ").concat(m,"\n        return value;\n    }");return r(r({},t),{output:{dims:l,type:e[0].type,textureType:a.TextureType.unpacked},shaderSource:S})}(n,t,e)}})}e.createMatmulProgramInfoLoader=l;var f=function(t){if(!t||2!==t.length)throw new Error("MatMul requires 2 inputs.");if(t[0].dims[t[0].dims.length-1]!==t[1].dims[t[1].dims.length-2])throw new Error("shared dimension does not match.");if("float32"!==t[0].type&&"float64"!==t[0].type||"float32"!==t[1].type&&"float64"!==t[1].type)throw new Error("inputs should be float type");if(t[0].type!==t[1].type)throw new Error("inputs types should match")};function p(t,e,n,r,a){var i,s=n.length,u=r.length,c=u-s;i=u<2&&s>0?"coords":n.map((function(t,n){return"coords.".concat(e[n+c])})).join(", ");var l=o.BroadcastUtil.getBroadcastDims(n,r).map((function(t){return"coords.".concat(e[t+c]," = 0;")})).join("\n"),f="vec4(outputValue.xx, outputValue.yy)";return 1===o.ShapeUtil.size(n)&&(f="vec4(outputValue.x)"),a?"\nvec4 getBiasForMatmul() {\n  ".concat(t," coords = getOutputCoords();\n  ").concat(l,"\n  vec4 outputValue = getBias(").concat(i,");\n  return ").concat(f,";\n}"):"\nfloat getBiasForMatmul() {\n  ".concat(t," coords = getOutputCoords();\n  ").concat(l,"\n  return getBias(coords.x);\n}")}e.getBiasForMatmul=p},9:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.createPackProgramInfoLoader=void 0;var o=n(6757),a=n(5639),i=n(432),s=n(5614),u={name:"pack",inputNames:["A"],inputTypes:[a.TextureType.unpackedReversed]};e.createPackProgramInfoLoader=function(t,e){return r(r({},u),{get:function(){return function(t,e){var n,c,l,f,p=(0,o.getGlsl)(t.session.backend.glContext.version),d=e.dims,h=d.length,g=e.dims.length,m=(0,i.getCoordsDataType)(g),y=(0,s.getChannels)("rc",g),b=(n=g,c=y,l=d[d.length-2],f=d[d.length-1],0===n||1===n?"":"\n    int r = ".concat(c[n-2],";\n    int c = ").concat(c[n-1],";\n    int rp1 = ").concat(c[n-2]," + 1;\n    int cp1 = ").concat(c[n-1]," + 1;\n    bool rEdge = rp1 >= ").concat(f,";\n    bool cEdge = cp1 >= ").concat(l,";\n    ")),v=function(t,e,n){if(0===t)return"false";if(1===t)return"rc > ".concat(e[0]);for(var r="",o=t-2;o<t;o++)r+="".concat(n[o]," >= ").concat(e[o-t+2]),o<t-1&&(r+="||");return r}(g,0===h?[1,1]:1===h?[d[0],1]:[d[g-1],d[g-2]],y),w=function(t,e){var n=t.length;if(0===n)return"getA(), 0, 0, 0";if(1===n)return"getA(rc),\n            rc + 1 >= ".concat(t[0]," ? 0. : getA(rc + 1),\n            0, 0");var r="";if(n>2)for(var o=0;o<n-2;++o)r+="".concat(e[o],",");return"getA(".concat(r).concat("r, c","),\n          rEdge ? 0. : getA(").concat(r).concat("rp1, c","),\n          cEdge ? 0. : getA(").concat(r).concat("r, cp1","),\n          rEdge || cEdge ? 0. : getA(").concat(r).concat("rp1, cp1",")")}(d,y),_="\n        void main() {\n          ".concat(m," rc = getOutputCoords();\n\n          if(").concat(v,") {\n            ").concat(p.output," = vec4(0);\n          } else {\n            ").concat(b,"\n\n            ").concat(p.output," = vec4(").concat(w,");\n          }\n        }\n      ");return r(r({},u),{hasMain:!0,output:{dims:e.dims,type:e.type,textureType:a.TextureType.packed},shaderSource:_})}(t,e)}})}},5614:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unpackFromChannel=e.getChannels=e.getVecChannels=void 0;var r=n(432);function o(t,e){return(0,r.getGlChannels)(e).map((function(e){return"".concat(t,".").concat(e)}))}e.getVecChannels=o,e.getChannels=function(t,e){return 1===e?[t]:o(t,e)},e.unpackFromChannel=function(){return"\n    float getChannel(vec4 frag, int dim) {\n      int modCoord = imod(dim, 2);\n      return modCoord == 0 ? frag.r : frag.g;\n    }\n\n    float getChannel(vec4 frag, vec2 innerDims) {\n      vec2 modCoord = mod(innerDims, 2.);\n      return modCoord.x == 0. ?\n        (modCoord.y == 0. ? frag.r : frag.g) :\n        (modCoord.y == 0. ? frag.b : frag.a);\n    }\n  "}},5565:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(e,"__esModule",{value:!0}),e.parsePadAttributesV11=e.padV11=e.parsePadAttributesV2=e.padV2=void 0;var a=n(4910),i=n(7273),s=n(6757),u=n(5639),c={name:"Pad",inputNames:["A"],inputTypes:[u.TextureType.unpacked]};e.padV2=function(t,e,n){return p(e),[t.run(r(r({},c),{cacheHint:n.cacheKey,get:function(){return f(t,e[0],n)}}),e)]},e.parsePadAttributesV2=function(t){var e=t.attributes.getString("mode","constant"),n=t.attributes.getFloat("value",0),r=t.attributes.getInts("pads");return(0,a.createAttributeWithCacheKey)({mode:e,value:n,pads:r})},e.padV11=function(t,n,r){d(n);var o=l(t,n,r);return(0,e.padV2)(t,[n[0]],o)},e.parsePadAttributesV11=function(t){return t.attributes.getString("mode","constant")};var l=function(t,e,n){if(!t.session.isInitializer(e[1].dataId)||e.length>=3&&!t.session.isInitializer(e[2].dataId))throw new Error("dynamic pad attributes are not allowed");var r=Array.from(e[1].integerData),o=e.length>=3?e[2].floatData[0]:0;return(0,a.createAttributeWithCacheKey)({mode:n,pads:r,value:o})},f=function(t,e,n){var r=i.ShapeUtil.padShape(e.dims.slice(),n.pads),o=r.length,a=h(t,e,n),s="\n      ".concat(a,"\n      float process(int[").concat(o,"] indices) {\n          return padA(indices);\n      }");return{name:"Pad",inputNames:["A"],inputTypes:[u.TextureType.unpacked],output:{dims:r,type:e.type,textureType:u.TextureType.unpacked},shaderSource:s}},p=function(t){if(!t||1!==t.length)throw new Error("Pad requires 1 input");if("float32"!==t[0].type&&"float64"!==t[0].type)throw new Error("Invalid input type.")},d=function(t){if(!t||2!==t.length&&3!==t.length)throw new Error("Pad requires 2 or 3 inputs");if("int32"!==t[1].type)throw new Error("Invalid input type.");if(t.length>=3&&"string"===t[2].type)throw new Error("Invalid input type.")},h=function(t,e,n){var r=(0,s.getGlsl)(t.session.backend.glContext.version),a=o(t.calculateTextureWidthAndHeight(e.dims,u.TextureType.unpacked),2),c=a[0],l=a[1],f=i.ShapeUtil.computeStrides(e.dims);switch(n.mode){case"constant":return g(r,e.dims,f,c,l,n.pads,n.value);case"reflect":return m(r,e.dims,f,c,l,n.pads);case"edge":return y(r,e.dims,f,c,l,n.pads);default:throw new Error("Invalid mode")}},g=function(t,e,n,r,o,a,i){for(var s=e.length,u="",c=s-1;c>=0;--c)u+="\n        k = m[".concat(c,"] - ").concat(a[c],";\n        if (k < 0)  return constant;\n        if (k >= ").concat(e[c],") return constant;\n        offset += k * ").concat(n[c],";\n        ");return"\n      float padA(int m[".concat(s,"]) {\n        const float constant = float(").concat(i,");\n        int offset = 0;\n        int k = 0;\n        ").concat(u,"\n        vec2 coords = offsetToCoords(offset, ").concat(r,", ").concat(o,");\n        float value = getColorAsFloat(").concat(t.texture2D,"(A, coords));\n        return value;\n      }\n      ")},m=function(t,e,n,r,o,a){for(var i=e.length,s="",u=i-1;u>=0;--u)s+="\n        k = m[".concat(u,"] - ").concat(a[u],";\n        if (k < 0) { k = -k; }\n        {\n          const int _2n_1 = ").concat(2*(e[u]-1),";\n          k = int( mod( float(k), float(_2n_1) ) ) ;\n          if(k >= ").concat(e[u],") { k = _2n_1 - k; }\n        }\n        offset += k * ").concat(n[u],";\n        ");return"\n      float padA(int m[".concat(i,"]) {\n        int offset = 0;\n        int k = 0;\n        ").concat(s,"\n        vec2 coords = offsetToCoords(offset, ").concat(r,", ").concat(o,");\n        float value = getColorAsFloat(").concat(t.texture2D,"(A, coords));\n        return value;\n      }\n      ")},y=function(t,e,n,r,o,a){for(var i=e.length,s="",u=i-1;u>=0;--u)s+="\n        k = m[".concat(u,"] - ").concat(a[u],";\n        if (k < 0)  k = 0;\n        if (k >= ").concat(e[u],") k = ").concat(e[u]-1,";\n        offset += k * ").concat(n[u],";\n      ");return"\n      float padA(int m[".concat(i,"]) {\n        int offset = 0;\n        int k = 0;\n        ").concat(s,"\n        vec2 coords = offsetToCoords(offset, ").concat(r,", ").concat(o,");\n        float value = getColorAsFloat(").concat(t.texture2D,"(A, coords));\n        return value;\n      }\n      ")}},2834:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(e,"__esModule",{value:!0}),e.globalMaxPool=e.parseMaxPoolAttributes=e.maxPool=e.parseGlobalAveragePoolAttributes=e.globalAveragePool=e.parseAveragePoolAttributes=e.averagePool=void 0;var a=n(4910),i=n(7273),s=n(5639);e.averagePool=function(t,e,n){d(e);var o={name:"AveragePool",inputNames:["X"],inputTypes:[s.TextureType.unpacked],cacheHint:n.cacheKey};return[t.run(r(r({},o),{get:function(){return u(e,o,!1,n)}}),e)]},e.parseAveragePoolAttributes=function(t){var e=t.attributes.getString("auto_pad","NOTSET"),n=t.attributes.getInt("ceil_mode",0),r=0!==t.attributes.getInt("count_include_pad",0),o=t.attributes.getInts("kernel_shape"),i=t.attributes.getInts("strides",[]),s=t.attributes.getInts("pads",[]);if(0!==n)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return(0,a.createAttributeWithCacheKey)({autoPad:e,ceilMode:n,countIncludePad:r,kernelShape:o,strides:i,pads:s})};var u=function(t,e,n,a){var u=o(l(t,a,n),2),c=u[0],f=u[1],p=i.ShapeUtil.size(c.kernelShape),d="";c.countIncludePad?d+="value /= float(".concat(p,");"):d+="value /= float(".concat(p," - pad);");var g=h(t[0].dims,c,"value += _X(x);",d,"0.0"),m="\n        ".concat(g,"\n      ");return r(r({},e),{output:{dims:f,type:t[0].type,textureType:s.TextureType.unpacked},shaderSource:m})};e.globalAveragePool=function(t,e,n){d(e);var o={name:"GlobalAveragePool",inputNames:["X"],inputTypes:[s.TextureType.unpacked],cacheHint:"".concat(n.countIncludePad)};return[t.run(r(r({},o),{get:function(){return u(e,o,!0,n)}}),e)]},e.parseGlobalAveragePoolAttributes=function(t){var e=0!==t.attributes.getInt("count_include_pad",0);return(0,a.createAttributeWithCacheKey)({autoPad:"",ceilMode:0,countIncludePad:e,kernelShape:[],strides:[],pads:[]})},e.maxPool=function(t,e,n){d(e);var o={name:"MaxPool",inputNames:["X"],inputTypes:[s.TextureType.unpacked],cacheHint:n.cacheKey};return[t.run(r(r({},o),{get:function(){return c(e,o,!1,n)}}),e)]},e.parseMaxPoolAttributes=function(t){var e=t.attributes.getString("auto_pad","NOTSET"),n=t.attributes.getInt("ceil_mode",0),r=t.attributes.getInts("kernel_shape"),o=t.attributes.getInts("strides",[]),i=t.attributes.getInts("pads",[]),s=t.attributes.getInt("storage_order",0),u=t.attributes.getInts("dilations",[]);if(0!==s)throw new Error("column major storage order is not yet supported for MaxPool");if(0!==n)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return(0,a.createAttributeWithCacheKey)({autoPad:e,ceilMode:n,countIncludePad:!1,kernelShape:r,strides:o,pads:i,storageOrder:s,dilations:u})};var c=function(t,e,n,a){var i=o(l(t,a,n),2),u=i[0],c=i[1],f=h(t[0].dims,u,"\n      value = max(_X(x), value);\n    ","","-1e5"),p="\n      ".concat(f,"\n    ");return r(r({},e),{output:{dims:c,type:t[0].type,textureType:s.TextureType.unpacked},shaderSource:p})},l=function(t,e,n){var r=t[0].dims.slice(),o=Object.hasOwnProperty.call(e,"dilations"),a=e.kernelShape.slice(),s=e.strides.slice(),u=o?e.dilations.slice():[],c=e.pads.slice();i.PoolConvUtil.adjustPoolAttributes(n,r,a,s,u,c);var l=i.PoolConvUtil.computePoolOutputShape(n,r,s,u,a,c,e.autoPad),f=Object.assign({},e);return o?Object.assign(f,{kernelShape:a,strides:s,pads:c,dilations:u,cacheKey:e.cacheKey}):Object.assign(f,{kernelShape:a,strides:s,pads:c,cacheKey:e.cacheKey}),[f,l]},f={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""},p={name:"GlobalMaxPool",inputNames:["X"],inputTypes:[s.TextureType.unpacked]};e.globalMaxPool=function(t,e){return d(e),[t.run(r(r({},p),{get:function(){return c(e,p,!0,f)}}),e)]};var d=function(t){if(!t||1!==t.length)throw new Error("Pool ops requires 1 input.");if("float32"!==t[0].type&&"float64"!==t[0].type)throw new Error("Invalid input type.")},h=function(t,e,n,r,o){var a=t.length;if(e.kernelShape.length<=2){var s,u=e.kernelShape[e.kernelShape.length-1],c=e.strides[e.strides.length-1],l=e.pads[e.pads.length/2-1],f=e.pads[e.pads.length-1],p=t[a-1],d="",h="";if(s=l+f!==0?"\n          for (int i = 0; i < ".concat(u,"; i++) {\n            x[").concat(a," - 1] = indices[").concat(a," - 1] * ").concat(c," - ").concat(l," + i;\n            if (x[").concat(a," - 1] < 0 || x[").concat(a," - 1] >= ").concat(p,") {\n              pad++;\n              continue;\n            }\n            ").concat(n,"\n          }"):"\n          for (int i = 0; i < ".concat(u,"; i++) {\n            x[").concat(a," - 1] = indices[").concat(a," - 1] * ").concat(c," - ").concat(l," + i;\n            ").concat(n,"\n          }"),2===e.kernelShape.length){var y=e.kernelShape[e.kernelShape.length-2],b=e.strides[e.strides.length-2],v=e.pads[e.pads.length/2-2],w=e.pads[e.pads.length-2],_=t[a-2];d=v+w!==0?"\n            for (int j = 0; j < ".concat(y,"; j++) {\n              x[").concat(a," - 2] = indices[").concat(a," - 2] * ").concat(b," - ").concat(v," + j;\n              if (x[").concat(a," - 2] < 0 || x[").concat(a," - 2] >= ").concat(_,") {\n                pad+= ").concat(u,";\n                continue;\n              }\n          "):"\n            for (int j = 0; j < ".concat(y,"; j++) {\n              x[").concat(a," - 2] = indices[").concat(a," - 2] * ").concat(b," - ").concat(v," + j;\n            "),h="\n          }\n        "}return"\n        float process(int indices[".concat(a,"]) {\n          int x[").concat(a,"];\n          copyVec(indices, x);\n\n          float value = ").concat(o,";\n          int pad = 0;\n          ").concat(d,"\n          ").concat(s,"\n          ").concat(h,"\n          ").concat(r,"\n          return value;\n        }\n      ")}var x,T=i.ShapeUtil.size(e.kernelShape),S=i.ShapeUtil.computeStrides(e.kernelShape),A=S.length,O=e.pads.length,E=m(A),P=g(t,"inputDims"),I=g(e.pads,"pads"),D=g(S,"kernelStrides"),k=g(e.strides,"strides");return x=e.pads.reduce((function(t,e){return t+e}))?"\n            if (x[j] >= inputDims[j] || x[j] < 0) {\n              pad++;\n              isPad = true;\n              break;\n            }\n          }\n          if (!isPad) {\n            ".concat(n,"\n          }"):"\n          }\n          ".concat(n,"\n        "),"\n        ".concat(E,"\n        float process(int indices[").concat(a,"]) {\n          int x[").concat(a,"];\n          copyVec(indices, x);\n          int offset[").concat(A,"];\n          int pads[").concat(O,"];\n          int inputDims[").concat(a,"];\n          int kernelStrides[").concat(A,"];\n          int strides[").concat(A,"];\n          ").concat(I,"\n          ").concat(P,"\n          ").concat(k,"\n          ").concat(D,"\n\n          float value = ").concat(o,";\n          int pad = 0;\n          bool isPad = false;\n          for (int i = 0; i < ").concat(T,"; i++) {\n            offsetToIndices(i, kernelStrides, offset);\n            isPad = false;\n            for (int j = ").concat(a," - ").concat(A,"; j < ").concat(a,"; j++) {\n              x[j] = indices[j] * strides[j - ").concat(a," + ").concat(A,"]\n                + offset[j - ").concat(a," + ").concat(A,"] - pads[j - 2];\n              ").concat(x,"\n          }\n          ").concat(r,"\n\n          return value;\n        }\n      ")},g=function(t,e){for(var n="",r=0;r<t.length;r++)n+="\n      ".concat(e,"[").concat(r,"] = ").concat(t[r],";\n    ");return n},m=function(t){return"\n  void offsetToIndices(int offset, int[".concat(t,"] strides, out int[").concat(t,"] indices) {\n    if (").concat(t," == 0) {\n      return;\n    }\n    for (int i = 0; i < ").concat(t," - 1; ++i) {\n      indices[i] = offset / strides[i];\n      offset -= indices[i] * strides[i];\n    }\n    indices[").concat(t," - 1] = offset;\n  }")}},1010:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.reduceLogSumSquare=e.reduceLogSum=e.reduceProd=e.reduceMin=e.reduceMax=e.reduceMean=e.reduceSum=e.parseReduceAttributes=void 0;var o=n(4910),a=n(6145),i=n(7273),s=n(5639),u=function(t,e,n,o,a){l(e);var i={name:o,inputNames:["A"],inputTypes:[s.TextureType.unpacked]};return[t.run(r(r({},i),{cacheHint:n.cacheKey,get:function(){return c(t,e,n,o,a,i)}}),e)]};e.parseReduceAttributes=function(t){var e=t.attributes.getInts("axes",[]),n=1===t.attributes.getInt("keepdims",1);return(0,o.createAttributeWithCacheKey)({axes:e,keepDims:n})};var c=function(t,e,n,o,a,u){for(var c=[],l=e[0].dims.length||1,f=[],p=i.ShapeUtil.normalizeAxes(n.axes,e[0].dims.length),d=a(e,p),h=d[1],g=0;g<e[0].dims.length;g++)p.indexOf(g)>=0||0===p.length?(n.keepDims&&c.push(1),h="\n          for(int j".concat(g," = 0; j").concat(g," < ").concat(e[0].dims[g],"; j").concat(g,"++) {\n            inputIdx[").concat(g,"] = j").concat(g,";\n            ").concat(h,"\n          }")):(f.push("inputIdx[".concat(g,"] = outputIdx[").concat(c.length,"];")),c.push(e[0].dims[g]));var m=c.length||1,y="\n      float process(int outputIdx[".concat(m,"]) {\n        float value;                 // final result\n        int inputIdx[").concat(l,"];      // addressing input data\n        ").concat(f.join("\n"),"\n        ").concat(d[0],"       // init ops for reduce max/min\n        ").concat(h,"\n        ").concat(d[2],"       // final computation for reduce mean\n        return value;\n      }");return r(r({},u),{output:{dims:c,type:e[0].type,textureType:s.TextureType.unpacked},shaderSource:y})},l=function(t){if(!t||1!==t.length)throw new Error("Reduce op requires 1 input.");if(-1===a.NUMBER_TYPES.indexOf(t[0].type))throw new Error("Invalid input type.")};e.reduceSum=function(t,e,n){return u(t,e,n,"ReduceSum",(function(){return["value = 0.0;","value += _A(inputIdx);",""]}))},e.reduceMean=function(t,e,n){return u(t,e,n,"ReduceMean",(function(t,e){for(var n=1,r=0;r<t[0].dims.length;r++)(e.indexOf(r)>=0||0===e.length)&&(n*=t[0].dims[r]);return["value = 0.0;","value += _A(inputIdx);","value /= ".concat(n,".;")]}))},e.reduceMax=function(t,e,n){return u(t,e,n,"ReduceMax",(function(t,e){for(var n=[],r=0;r<t[0].dims.length;r++)(e.indexOf(r)>=0||0===e.length)&&n.push("inputIdx[".concat(r,"] = 0;"));return["".concat(n.join("\n"),"\nvalue = _A(inputIdx);"),"value = max(value, _A(inputIdx));",""]}))},e.reduceMin=function(t,e,n){return u(t,e,n,"ReduceMin",(function(t,e){for(var n=[],r=0;r<t[0].dims.length;r++)(e.indexOf(r)>=0||0===e.length)&&n.push("inputIdx[".concat(r,"] = 0;"));return["".concat(n.join("\n"),"\nvalue = _A(inputIdx);"),"value = min(value, _A(inputIdx));",""]}))},e.reduceProd=function(t,e,n){return u(t,e,n,"ReduceProd",(function(){return["value = 1.0;","value *= _A(inputIdx);",""]}))},e.reduceLogSum=function(t,e,n){return u(t,e,n,"ReduceLogSum",(function(){return["value = 0.0;","value += _A(inputIdx);","value = log(value);"]}))},e.reduceLogSumSquare=function(t,e,n){return u(t,e,n,"ReduceLogSumSquare",(function(){return["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""]}))}},7379:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.isReshapeCheap=e.processDims3D=e.createPackedReshape3DProgramInfoLoader=void 0;var o=n(7273),a=n(6757),i=n(5639),s=n(5614);e.createPackedReshape3DProgramInfoLoader=function(t,e,n){var u=function(t){return{name:"Reshape (packed)",inputTypes:[i.TextureType.packed],inputNames:["A"],cacheHint:"".concat(t)}}(n);return r(r({},u),{get:function(){return function(t,e,n,u){for(var c=e.dims,l=u,f="",p=0;p<4;p++){var d="";switch(p){case 0:d="outputCoords = rc;";break;case 1:d="outputCoords = ivec3(rc.x, rc.y+1, rc.z);";break;case 2:d="outputCoords = ivec3(rc.x, rc.y, rc.z+1);";break;case 3:d="outputCoords = ivec3(rc.x, rc.y+1, rc.z+1);";break;default:throw new Error}f+="\n        ".concat(d,"\n        ").concat(p>0?"if(outputCoords.y < rows && outputCoords.z < cols){":"","\n          int flattenedIndex = getFlattenedIndex(outputCoords);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flattenedIndex);\n          vec2 innerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(p,"] = getChannel(getA(inputRC.x, inputRC.y, inputRC.z), innerDims);\n\n        ").concat(p>0?"}":"","\n      ")}var h,g,m,y,b,v=(0,a.getGlsl)(t.session.backend.glContext.version),w="\n      ".concat((h=c,g=o.ShapeUtil.computeStrides(h),m=["b","r","c"],y="index",b=g.map((function(t,e){var n="int ".concat(m[e]," = ").concat(y," / ").concat(t),r=e===g.length-1?"int ".concat(m[e+1]," = ").concat(y," - ").concat(m[e]," * ").concat(t):"index -= ".concat(m[e]," * ").concat(t);return"".concat(n,"; ").concat(r,";")})).join(""),"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(b,"\n      return ivec3(b, r, c);\n    }\n  ")),"\n      ").concat(function(t){var e=o.ShapeUtil.computeStrides(t);return"\n  int getFlattenedIndex(ivec3 coords) {\n    // reverse y, z order\n    return coords.x * ".concat(e[0]," + coords.z * ").concat(e[1]," + coords.y;\n  }\n")}(l),"\n      ").concat((0,s.unpackFromChannel)(),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.0);\n\n        ivec3 outputCoords;\n        int rows = ").concat(l[2],";\n        int cols = ").concat(l[1],";\n\n        ").concat(f,"\n        ").concat(v.output," = result;\n      }\n    ");return r(r({},n),{output:{dims:l,type:e.type,textureType:i.TextureType.packed},shaderSource:w,hasMain:!0})}(t,e,u,n)}})},e.processDims3D=function(t){if(0===t.length)return[1,1,1];for(var e=1,n=0;n<t.length-2;++n)e*=t[n];return[e,t.length>1?t[t.length-2]:1,t[t.length-1]]},e.isReshapeCheap=function(t,e){return 0===t.length||0===e.length||(t.length<2||e.length<2?t[t.length-1]===e[e.length-1]:t[t.length-1]===e[e.length-1]&&t[t.length-2]===e[e.length-2])}},8126:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.reshape=void 0;var r=n(7273);e.reshape=function(t,e){var n=r.ShapeUtil.calculateReshapedDims(e[0].dims,e[1].integerData);return t.session.pack?[t.reshapePacked(e[0],n)]:[t.reshapeUnpacked(e[0],n)]}},2801:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(e,"__esModule",{value:!0}),e.parseResizeAttributesV11=e.parseResizeAttributesV10=e.resize=void 0;var a=n(6757),i=n(5639),s=n(432),u=n(5614),c=n(3980),l={name:"Resize",inputNames:["A"],inputTypes:[i.TextureType.packed]};e.resize=function(t,e,n){return(0,c.validateInputs)(e,n),[t.run(r(r({},l),{cacheHint:n.cacheKey,get:function(){return f(t,e,n)}}),e)]},e.parseResizeAttributesV10=function(t){return(0,c.parseUpsampleAttributes)(t,10)},e.parseResizeAttributesV11=function(t){return(0,c.parseUpsampleAttributes)(t,11)};var f=function(t,e,n){var c=(0,a.getGlsl)(t.session.backend.glContext.version),f=o(p(e,n),2),d=f[0],h=f[1];if(d.every((function(t){return 1===t}))&&"tf_crop_and_resize"!==n.coordinateTransformMode)return r(r({},l),{output:{dims:h,type:e[0].type,textureType:i.TextureType.packed},hasMain:!0,shaderSource:"void main() {\n                    vec4 v = ".concat(c.texture2D,"(X, TexCoords);\n                    ").concat(c.output," = v;\n                }")});var g=h.length;if(g<2)throw new Error("output dimension should be at least 2, but got ".concat(g));var m=h[g-2],y=h[g-1],b=e[0].dims;if(g!==b.length)throw new Error("output dimension should match input ".concat(b.length,", but got ").concat(g));var v=b[g-2],w=b[g-1],_=d[g-2],x=d[g-1],T="";if("linear"!==n.mode)throw new Error("resize (packed) does not support mode: '".concat(n.mode,"'"));switch(n.coordinateTransformMode){case"asymmetric":T="\n                    vec4 getSourceFracIndex(ivec4 coords) {\n                        return vec4(coords) / scaleWHWH;\n                    }\n                ";break;case"half_pixel":T="\n                    vec4 getSourceFracIndex(ivec4 coords) {\n                        return (vec4(coords) + 0.5) / scaleWHWH - 0.5;\n                    }\n                ";break;case"pytorch_half_pixel":T="\n                    vec4 getSourceFracIndex(ivec4 coords) {\n                        vec4 fcoords = vec4(coords);\n                        return vec4(\n                            ".concat(y,".0 > 1.0 ? (fcoords.x + 0.5) / scaleWHWH.x - 0.5 : 0.0,\n                            ").concat(m,".0 > 1.0 ? (fcoords.y + 0.5) / scaleWHWH.y - 0.5 : 0.0,\n                            ").concat(y,".0 > 1.0 ? (fcoords.z + 0.5) / scaleWHWH.z - 0.5 : 0.0,\n                            ").concat(m,".0 > 1.0 ? (fcoords.w + 0.5) / scaleWHWH.w - 0.5 : 0.0\n                          );\n                    }\n                ");break;case"align_corners":T="\n                    vec4 getSourceFracIndex(ivec4 coords) {\n                        vec4 resized = vec4(".concat(y,".0 - 1.0, ").concat(m,".0 - 1.0, ").concat(y,".0 - 1.0,\n                            ").concat(m,".0 - 1.0);\n                        vec4 original = vec4(").concat(w,".0 - 1.0, ").concat(v,".0 - 1.0, ").concat(w,".0 - 1.0,\n                            ").concat(v,".0 - 1.0);\n                        vec4 new_scale = original / resized;\n                        return vec4(coords) * new_scale;\n                    }\n                ");break;default:throw new Error("resize (packed) does not support coordinateTransformMode:                                 '".concat(n.coordinateTransformMode,"'"))}var S=(0,s.getCoordsDataType)(g),A=(0,u.unpackFromChannel)(),O="\n            const vec2 inputWH = vec2(".concat(v,".0, ").concat(w,".0);\n            const vec4 scaleWHWH = vec4(float(").concat(_,"), float(").concat(x,"), float(").concat(_,"), float(").concat(x,"));\n            ").concat(A,"\n            ").concat(T,"\n            float getAValue(int x10, int r, int c, int d) {\n                return getChannel(getA(x10, r, c, d), vec2(c, d));\n            }\n            void main() {\n                ").concat(S," rc = getOutputCoords();\n\n                int batch = rc[0];\n                int depth = rc[1];\n\n                // retrieve the 4 coordinates that is used in the 4 packed output values.\n                ivec4 coords = ivec4(rc.wz, rc.w + 1, rc.z + 1);\n\n                // calculate the source index in fraction\n                vec4 sourceFrac = getSourceFracIndex(coords);\n\n                // get the lower and upper bound of the 4 values that will be packed into one texel.\n                ivec4 x00 = ivec4(max(sourceFrac.xy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xy)));\n                ivec4 x01 = ivec4(max(sourceFrac.xw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xw)));\n                ivec4 x10 = ivec4(max(sourceFrac.zy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zy)));\n                ivec4 x11 = ivec4(max(sourceFrac.zw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zw)));\n\n                bool hasNextRow = rc.w < ").concat(m-1,";\n                bool hasNextCol = rc.z < ").concat(y-1,";\n\n                // pack x00, x01, x10, x11's top-left corner into one vec4 structure\n                vec4 topLeft = vec4(\n                    getAValue(batch, depth, x00.x, x00.y),\n                    hasNextCol ? getAValue(batch, depth, x01.x, x01.y) : 0.0,\n                    hasNextRow ? getAValue(batch, depth, x10.x, x10.y) : 0.0,\n                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.y) : 0.0);\n\n                // pack x00, x01, x10, x11's top-right corner into one vec4 structure\n                vec4 topRight = vec4(\n                    getAValue(batch, depth, x00.x, x00.w),\n                    hasNextCol ? getAValue(batch, depth, x01.x, x01.w) : 0.0,\n                    hasNextRow ? getAValue(batch, depth, x10.x, x10.w) : 0.0,\n                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.w) : 0.0);\n\n                // pack x00, x01, x10, x11's bottom-left corner into one vec4 structure\n                vec4 bottomLeft = vec4(\n                    getAValue(batch, depth, x00.z, x00.y),\n                    hasNextCol ? getAValue(batch, depth, x01.z, x01.y) : 0.0,\n                    hasNextRow ? getAValue(batch, depth, x10.z, x10.y) : 0.0,\n                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.y) : 0.0);\n\n                // pack x00, x01, x10, x11's bottom-right corner into one vec4 structure\n                vec4 bottomRight = vec4(\n                    getAValue(batch, depth, x00.z, x00.w),\n                    hasNextCol ? getAValue(batch, depth, x01.z, x01.w) : 0.0,\n                    hasNextRow ? getAValue(batch, depth, x10.z, x10.w) : 0.0,\n                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.w) : 0.0);\n\n                // calculate the interpolation fraction on u and v direction\n                vec4 frac = vec4(sourceFrac) - floor(sourceFrac);\n                vec4 clampFrac = clamp(frac, vec4(0.0), vec4(1.0));\n\n                vec4 top = mix(topLeft, topRight, clampFrac.ywyw);\n                vec4 bottom = mix(bottomLeft, bottomRight, clampFrac.ywyw);\n                vec4 newValue = mix(top, bottom, clampFrac.xxzz);\n\n                ").concat(c.output," = vec4(newValue);\n            }\n        ");return r(r({},l),{output:{dims:h,type:e[0].type,textureType:i.TextureType.packed},hasMain:!0,shaderSource:O})},p=function(t,e){var n,r=t[0].dims,o=e.scales;if(0===o.length){var a=t[e.scalesInputIdx];if(a&&0!==a.size){if(t[e.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");o=d(a,e.mode,e.isResize)}else{var i=t[e.sizesInputIdx];if(!i||0===i.size)throw new Error("Either scales or sizes MUST be provided as input.");n=Array.from(i.integerData),o=h(n,r,e.mode,e.isResize)}}else if(t[e.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");var s=n||r.map((function(t,e){return Math.floor(t*o[e])}));return[o,s]},d=function(t,e,n){var r=Array.from(t.floatData);return(0,c.scalesValidation)(r,e,n),r},h=function(t,e,n,r){for(var o=e.length,a=new Array(o),i=0,s=o;i<s;i++)if(0===e[i]){if(0!==t[i])throw new Error("Input dim is zero but required output dim is non-zero.");a[i]=1}else a[i]=t[i]/e[i];return(0,c.scalesValidation)(a,n,r),a}},565:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.shape=void 0;var r=n(9240);e.shape=function(t,e){return o(e),[new r.Tensor([e[0].dims.length],"int32",void 0,void 0,new Int32Array(e[0].dims))]};var o=function(t){if(!t||1!==t.length)throw new Error("Shape requires 1 input.")}},2444:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.sliceV10=e.parseSliceAttributes=e.slice=void 0;var o=n(4910),a=n(6145),i=n(7273),s=n(5639),u={name:"Slice",inputNames:["A"],inputTypes:[s.TextureType.unpacked]};e.slice=function(t,e,n){return l(e),[t.run(r(r({},u),{cacheHint:n.cacheKey,get:function(){return c(t,e[0],n)}}),e)]},e.parseSliceAttributes=function(t){var e=t.attributes.getInts("starts"),n=t.attributes.getInts("ends"),r=t.attributes.getInts("axes",[]);return(0,o.createAttributeWithCacheKey)({starts:e,ends:n,axes:r})};var c=function(t,e,n){for(var o=0===n.axes.length?e.dims.slice(0).map((function(t,e){return e})):n.axes,a=i.ShapeUtil.normalizeAxes(o,e.dims.length),c=n.starts.map((function(t,n){return t>e.dims[a[n]]-1?e.dims[a[n]]:i.ShapeUtil.normalizeAxis(t,e.dims[a[n]])})),l=n.ends.map((function(t,n){return t>e.dims[a[n]]-1?e.dims[a[n]]:i.ShapeUtil.normalizeAxis(t,e.dims[a[n]])})),f=e.dims.slice(),p=[],d=0;d<a.length;d++)f[a[d]]=l[d]-c[d],c[d]>0&&p.push("outputIdx[".concat(a[d],"] += ").concat(c[d],";"));var h=f.length,g="\n      float process(int outputIdx[".concat(h,"]) {\n        ").concat(p.join("\n      "),"\n        return _A(outputIdx);\n      }");return r(r({},u),{output:{dims:f,type:e.type,textureType:s.TextureType.unpacked},shaderSource:g})},l=function(t){if(!t||1!==t.length)throw new Error("Slice requires 1 input.");if(-1===a.NUMBER_TYPES.indexOf(t[0].type))throw new Error("Invalid input type.")};e.sliceV10=function(t,e){p(e);var n=f(t,e);return[t.run(r(r({},u),{cacheHint:n.cacheKey,get:function(){return c(t,e[0],n)}}),[e[0]])]};var f=function(t,e){if(!t.session.isInitializer(e[1].dataId)||!t.session.isInitializer(e[2].dataId)||e.length>=4&&!t.session.isInitializer(e[3].dataId)||e.length>=5&&!t.session.isInitializer(e[4].dataId))throw new Error("dynamic slice attributes are not allowed");if(e.length>=5&&e[4].integerData.some((function(t){return 1!==t})))throw new Error("currently non-1 steps is not supported for Slice");var n=Array.from(e[1].integerData),r=Array.from(e[2].integerData),o=e.length>=4?Array.from(e[3].integerData):[];return{starts:n,ends:r,axes:o,cacheKey:"".concat(o,";").concat(n,";").concat(r)}},p=function(t){if(!t||t.length<3||t.length>5)throw new Error("Invalid input number.");if("int32"!==t[1].type||1!==t[1].dims.length)throw new Error("Invalid input type.");if("int32"!==t[2].type||1!==t[2].dims.length)throw new Error("Invalid input type.");if(t.length>=4&&("int32"!==t[3].type||1!==t[3].dims.length))throw new Error("Invalid input type.");if(t.length>=5&&("int32"!==t[4].type||1!==t[4].dims.length))throw new Error("Invalid input type.")}},815:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(e,"__esModule",{value:!0}),e.softmaxV13=e.parseSoftmaxAttributesV13=e.parseSoftmaxAttributes=e.softmax=void 0;var a=n(4910),i=n(7273),s=n(6757),u=n(5639),c=n(5707),l={name:"SoftmaxComputeMax",inputNames:["A"],inputTypes:[u.TextureType.unpacked]},f={name:"SoftmaxComputeScale",inputNames:["A","Max"],inputTypes:[u.TextureType.unpacked,u.TextureType.unpacked]},p={name:"SoftMax",inputNames:["A","Max","Norm"],inputTypes:[u.TextureType.unpacked,u.TextureType.unpacked,u.TextureType.unpacked]};e.softmax=function(t,e,n){y(e);var r=e[0].dims.slice(),o=i.ShapeUtil.normalizeAxis(n.axis,r.length),a=i.ShapeUtil.sizeToDimension(r,o),s=i.ShapeUtil.sizeFromDimension(r,o);return d(t,e,n,a,s)},e.parseSoftmaxAttributes=function(t){return(0,a.createAttributeWithCacheKey)({axis:t.attributes.getInt("axis",1)})},e.parseSoftmaxAttributesV13=function(t){return(0,a.createAttributeWithCacheKey)({axis:t.attributes.getInt("axis",-1)})},e.softmaxV13=function(t,e,n){y(e);var r,o=e[0].dims.slice(),s=i.ShapeUtil.normalizeAxis(n.axis,o.length),u=o.length,l=s!==u-1,f=[],p=[],h=[];l&&((p=Array.from({length:u}).map((function(t,e){return e})))[s]=u-1,p[u-1]=s,p.map((function(t){return f.push(o[t])})),r=(0,a.createAttributeWithCacheKey)({perm:p}),h=(0,c.transpose)(t,e,r));var g=l?i.ShapeUtil.sizeToDimension(f,u-1):i.ShapeUtil.sizeToDimension(o,u-1),m=l?i.ShapeUtil.sizeFromDimension(f,u-1):i.ShapeUtil.sizeFromDimension(o,u-1),b=d(t,l?h:e,n,g,m);return l?(0,c.transpose)(t,b,r):b};var d=function(t,e,n,o,a){var i=h(t,e[0],o,a,[o]),s=t.run(r(r({},l),{cacheHint:n.cacheKey,get:function(){return i}}),e),u=g(t,e[0],o,a,i.output.dims,[o]),c=t.run(r(r({},f),{cacheHint:n.cacheKey,get:function(){return u}}),[e[0],s]),d=m(t,e[0],o,a,i.output.dims,u.output.dims);return[t.run(r(r({},p),{cacheHint:n.cacheKey,get:function(){return d}}),[e[0],s,c])]},h=function(t,e,n,a,i){var c=o(t.calculateTextureWidthAndHeight(e.dims,u.TextureType.unpacked),2),f=c[0],p=c[1],d=i.length;if(n<1||a<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(1!==i.length)throw new Error("Dimensionality of the output should be 1");if(i[0]!==n)throw new Error("Shape of the output should be equal to logical row count");var h=(0,s.getGlsl)(t.session.backend.glContext.version),g="\n      float process(int[".concat(d,"] indices) {\n        int logical_row_start_offset = indices[0] * ").concat(a,";\n\n        float max = getColorAsFloat(").concat(h.texture2D,"(A, offsetToCoords(logical_row_start_offset, ").concat(f,",\n        ").concat(p," )));\n        for(int i=1; i<").concat(a,"; ++i)\n        {\n          float current = getColorAsFloat(").concat(h.texture2D,"(A, offsetToCoords(logical_row_start_offset + i,\n            ").concat(f,", ").concat(p,")));\n          if(current > max)\n          max = current;\n        }\n\n        return max;\n      }");return r(r({},l),{output:{dims:i,type:e.type,textureType:u.TextureType.unpacked},shaderSource:g})},g=function(t,e,n,a,i,c){var l=o(t.calculateTextureWidthAndHeight(e.dims,u.TextureType.unpacked),2),p=l[0],d=l[1],h=c.length;if(n<1||a<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(1!==c.length)throw new Error("Dimensionality of the output should be 1");if(c[0]!==n)throw new Error("Shape of the output should be equal to logical row count");if(1!==i.length)throw new Error("Dimensionality of the intermediate results should be 1");if(i[0]!==n)throw new Error("Shape of the intermediate results should be equal to logical row count");var g=(0,s.getGlsl)(t.session.backend.glContext.version),m="\n      float process(int[".concat(h,"] indices) {\n        int logical_row_start_offset = indices[0] * ").concat(a,";\n\n        float norm_factor = 0.0;\n        float max = _Max(indices);\n        for(int i=0; i<").concat(a,"; ++i)\n        {\n          norm_factor += exp(getColorAsFloat(").concat(g.texture2D,"(A, offsetToCoords(logical_row_start_offset + i,\n            ").concat(p,", ").concat(d,"))) - max);\n        }\n\n        return norm_factor;\n      }");return r(r({},f),{output:{dims:c,type:e.type,textureType:u.TextureType.unpacked},shaderSource:m})},m=function(t,e,n,a,i,s){var c=o(t.calculateTextureWidthAndHeight(e.dims,u.TextureType.unpacked),2),l=c[0],f=c[1],d=e.dims.length;if(n<1||a<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(1!==i.length||1!==s.length)throw new Error("Dimensionality of the intermediate results should be 1");if(i[0]!==n||s[0]!==n)throw new Error("Shape of the intermediate results should be equal to logical row count");var h="\n      float process(int[".concat(d,"] indices) {\n\n      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)\n      int offset = coordsToOffset(TexCoords, ").concat(l,", ").concat(f,");\n\n      //determine the logical row for this index\n      int logical_row_index[1];\n      logical_row_index[0] = offset / ").concat(a,";\n\n      float norm_factor = _Norm(logical_row_index);\n\n      // avoid possible division by 0\n      // if norm_facor is 0, all elements are zero\n      // if so, return 0\n      if(norm_factor == 0.0)\n        return 0.0;\n\n      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;\n    }");return r(r({},p),{output:{dims:e.dims,type:e.type,textureType:u.TextureType.unpacked},shaderSource:h})},y=function(t){if(!t||1!==t.length)throw new Error("Softmax requires 1 input.");if("float32"!==t[0].type&&"float64"!==t[0].type)throw new Error("Invalid input type")}},564:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(e,"__esModule",{value:!0}),e.parseSplitAttributes=e.split=void 0;var a=n(4910),i=n(7273),s=n(5639),u={name:"Split",inputNames:["A"],inputTypes:[s.TextureType.unpacked]};e.split=function(t,e,n){f(e);for(var o=i.ShapeUtil.normalizeAxis(n.axis,e[0].dims.length),a=c(t,e,o,n),s=[],p=function(a){s.push(t.run(r(r({},u),{cacheHint:"".concat(n.cacheKey,";").concat(a),get:function(){return l(t,e[0],n,o,a)}}),e))},d=0;d<a;++d)p(d);return s},e.parseSplitAttributes=function(t){var e=t.attributes.getInt("axis",0),n=t.attributes.getInts("split",[]),r=t.outputs.length;return(0,a.createAttributeWithCacheKey)({axis:e,split:n,numOutputs:r})};var c=function(t,e,n,r){return o(i.SplitUtil.splitShape(e[0].dims,n,r.split,r.numOutputs),2)[1].length},l=function(t,e,n,a,c){var l=o(i.SplitUtil.splitShape(e.dims,a,n.split,n.numOutputs),2),f=l[0],p=l[1][c],d=f[c],h=d.length,g="\n      float process(int indices[".concat(h,"]) {\n        indices[").concat(a,"] += ").concat(p,";\n        return _A(indices);\n      }\n    ");return r(r({},u),{cacheHint:"".concat(n.cacheKey,":").concat(c),output:{dims:d,type:e.type,textureType:s.TextureType.unpacked},shaderSource:g})},f=function(t){if(!t||1!==t.length)throw new Error("Split requires one input.");if("int8"!==t[0].type&&"uint8"!==t[0].type&&"int16"!==t[0].type&&"uint16"!==t[0].type&&"int32"!==t[0].type&&"uint32"!==t[0].type&&"float32"!==t[0].type&&"float64"!==t[0].type&&"bool"!==t[0].type)throw new Error("Invalid input type.")}},5416:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseSqueezeAttributes=e.squeezeV13=e.squeeze=void 0;var r=n(7273);e.squeeze=function(t,e,n){o(e);var a=r.ShapeUtil.squeezeShape(e[0].dims,n);return[t.reshapeUnpacked(e[0],a)]},e.squeezeV13=function(t,n){return a(n),(0,e.squeeze)(t,[n[0]],Array.from(n[1].integerData))},e.parseSqueezeAttributes=function(t){return t.attributes.getInts("axes")};var o=function(t){if(!t||1!==t.length)throw new Error("Squeeze requires 1 input.");if("string"===t[0].type)throw new Error("invalid input tensor types.")},a=function(t){if(!t||2!==t.length)throw new Error("Squeeze requires 2 inputs.");if("int32"!==t[1].type)throw new Error("Invalid input type.")}},1240:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.sum=void 0;var o=n(6757),a=n(5639);e.sum=function(t,e){s(e);var n={name:"Sum",inputNames:e.map((function(t,e){return"X".concat(e)})),inputTypes:new Array(e.length).fill(a.TextureType.unpacked)};return[t.run(r(r({},n),{get:function(){return i(t,e,n)}}),e)]};var i=function(t,e,n){var i=(0,o.getGlsl)(t.session.backend.glContext.version),s=e[0].dims.slice(),u=e.map((function(t,e){return"".concat(i.texture2D,"(X").concat(e,",TexCoords)")})).join(" + "),c="\n      void main() {\n        vec4 result = ".concat(u,";\n        ").concat(i.output," = result;\n      }\n    ");return r(r({},n),{output:{dims:s,type:e[0].type,textureType:a.TextureType.unpacked},hasMain:!0,shaderSource:c})},s=function(t){if(!t||0===t.length)throw new Error("Sum requires inputs.");for(var e=t[0].dims.length,n=1;n<t.length;n++){if(e!==t[n].dims.length)throw new Error("Input shapes are mismatched.");for(var r=0;r<e;r++)if(t[0].dims[r]!==t[n].dims[r])throw new Error("Input shapes are not matched.")}if("float32"!==t[0].type&&"float64"!==t[0].type)throw new Error("Invalid input type.");for(n=1;n<t.length;n++)if(t[0].type!==t[n].type)throw new Error("Input types are not matched.")}},5944:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.tile=void 0;var o=n(6145),a=n(5639);e.tile=function(t,e){s(e);var n={name:"Tile",inputNames:["A"],inputTypes:[a.TextureType.unpacked]};return[t.run(r(r({},n),{get:function(){return i(t,e,n)}}),e)]};var i=function(t,e,n){for(var o=e[0].dims.slice(),i=new Array(o.length),s=[],u=0;u<o.length;u++)i[u]=o[u]*e[1].numberData[u],s.push("inputIdx[".concat(u,"] = int(mod(float(outputIdx[").concat(u,"]), ").concat(o[u],".));"));var c=i.length,l="\n      float process(int outputIdx[".concat(c,"]) {\n        int inputIdx[").concat(c,"];\n        ").concat(s.join("\n"),"\n        return _A(inputIdx);\n      }\n    ");return r(r({},n),{output:{dims:i,type:e[0].type,textureType:a.TextureType.unpacked},shaderSource:l})},s=function(t){if(!t||2!==t.length)throw new Error("Tile requires 2 input.");if(1!==t[1].dims.length)throw new Error("The second input shape must 1 dimension.");if(t[1].dims[0]!==t[0].dims.length)throw new Error("Invalid input shape.");if(-1===o.NUMBER_TYPES.indexOf(t[0].type))throw new Error("Invalid input type.");if("int32"!==t[1].type&&"int16"!==t[1].type)throw new Error("Invalid repeat type.")}},5707:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,a=e.length;o<a;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.parseTransposeAttributes=e.transpose=void 0;var i=n(4910),s=n(7273),u=n(5639),c={name:"Transpose",inputNames:["A"],inputTypes:[u.TextureType.unpacked]};e.transpose=function(t,e,n){return h(e),[t.run(r(r({},c),{cacheHint:n.cacheKey,get:function(){return l(t,e[0],n.perm)}}),e)]},e.parseTransposeAttributes=function(t){return(0,i.createAttributeWithCacheKey)({perm:t.attributes.getInts("perm",[])})};var l=function(t,e,n){var o=e.dims;n=f(o,n);var a=p(o,n),i=o.length,s="\n      ".concat(d("perm",n,i),"\n      float process(int indices[").concat(i,"]) {\n        int a[").concat(i,"];\n        perm(a, indices);\n        return _A(a);\n      }");return r(r({},c),{output:{dims:a,type:e.type,textureType:u.TextureType.unpacked},shaderSource:s})},f=function(t,e){return e&&e.length!==t.length&&(e=a([],o(t.keys()),!1).reverse()),e},p=function(t,e){return e=f(t,e),s.ShapeUtil.sortBasedOnPerm(t,e)},d=function(t,e,n){var r=[];r.push("void ".concat(t,"(out int a[").concat(n,"], int src[").concat(n,"]) {"));for(var o=0;o<n;++o)r.push("\ta[".concat(e[o],"]=src[").concat(o,"];"));return r.push("\t}"),r.join("\n")},h=function(t){if(!t||1!==t.length)throw new Error("Transpose requires 1 input.");if("float32"!==t[0].type&&"float64"!==t[0].type)throw new Error("input should be float tensor")}},2488:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.encodeAsUint8=void 0;var r=n(6757),o=n(5639);e.encodeAsUint8=function(t,e){var n=e.shape,a=(0,r.getGlsl)(t.session.backend.glContext.version),i="\n    const float FLOAT_MAX = 1.70141184e38;\n    const float FLOAT_MIN = 1.17549435e-38;\n\n    bool isNaN(float val) {\n      return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;\n    }\n\n    highp vec4 encodeAsUint8(highp float v) {\n      if (isNaN(v)) {\n        return vec4(255, 255, 255, 255);\n      }\n\n      highp float av = abs(v);\n\n      if(av < FLOAT_MIN) {\n        return vec4(0.0, 0.0, 0.0, 0.0);\n      } else if(v > FLOAT_MAX) {\n        return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n      } else if(v < -FLOAT_MAX) {\n        return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n      }\n\n      highp vec4 c = vec4(0,0,0,0);\n\n      highp float e = floor(log2(av));\n      highp float m = exp2(fract(log2(av))) - 1.0;\n\n      c[2] = floor(128.0 * m);\n      m -= c[2] / 128.0;\n      c[1] = floor(32768.0 * m);\n      m -= c[1] / 32768.0;\n      c[0] = floor(8388608.0 * m);\n\n      highp float ebias = e + 127.0;\n      c[3] = floor(ebias / 2.0);\n      ebias -= c[3] * 2.0;\n      c[2] += floor(ebias) * 128.0;\n\n      c[3] += 128.0 * step(0.0, -v);\n\n      return c / 255.0;\n    }\n\n    void main() {\n      float value = ".concat(a.texture2D,"(X,TexCoords).r;\n      ").concat(a.output," = encodeAsUint8(value);\n    }"),s={name:"Uint8Encode",inputTypes:[o.TextureType.unpacked],inputNames:["X"],output:{dims:n,type:e.tensor.type,textureType:o.TextureType.downloadUint8AsFloat},shaderSource:i,hasMain:!0};return t.executeProgram(s,[e.tensor])}},9087:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.tanh=e.tan=e.sqrt=e.sin=e.sigmoid=e.relu=e.not=e.neg=e.log=e.parseLeakyReluAttributes=e.leakyRelu=e.identity=e.floor=e.exp=e.parseEluAttributes=e.elu=e.cos=e.ceil=e.clipV11=e.parseClipAttributes=e.clip=e.atan=e.asin=e.acos=e.abs=e.glslTanh=e.glslTan=e.glslSqrt=e.glslSigmoid=e.glslRelu=e.glslSin=e.glslNot=e.glslNeg=e.glslLog=e.glslLeakyRelu=e.glslIdentity=e.glslClip=e.glslFloor=e.glslExp=e.glslElu=e.glslCos=e.glslCeil=e.glslAtan=e.glslAsin=e.glslAcos=e.glslAbs=void 0;var o=n(4910),a=n(7273),i=n(1997),s=n(6757),u=n(5639);function c(){return D("abs")}function l(){return D("acos")}function f(){return D("asin")}function p(){return D("atan")}function d(){return D("ceil")}function h(){return D("cos")}function g(t){var e="elu";return{body:"\n  const float alpha = float(".concat(t,");\n\n  float ").concat(e,"_(float a) {\n    return a >= 0.0 ? a: (exp(a) - 1.0) * alpha;\n  }\n  vec4 ").concat(e,"_(vec4 v) {\n    return vec4(").concat(e,"_(v.x), ").concat(e,"_(v.y), ").concat(e,"_(v.z), ").concat(e,"_(v.w));\n  }\n  "),name:e,type:i.FunctionType.ValueBased}}function m(){return D("exp")}function y(){return D("floor")}function b(t,e){var n="clip";return{body:"\n  const float min = float(".concat(t,");\n  const float max = float(").concat(e,");\n\n  float ").concat(n,"_(float a) {\n    return clamp(a, min, max);\n  }\n  vec4 ").concat(n,"_(vec4 v) {\n    return clamp(v, min, max);\n  }\n  "),name:n,type:i.FunctionType.ValueBased}}function v(){var t="indentity";return{body:"\n  float ".concat(t,"_(float a) {\n    return a;\n  }\n  vec4 ").concat(t,"_(vec4 v) {\n    return v;\n  }\n  "),name:t,type:i.FunctionType.ValueBased}}function w(t){var e="leakyRelu";return{body:"\n  const float alpha = float(".concat(t,");\n\n  float ").concat(e,"_(float a) {\n    return a < 0.0 ? a * alpha : a;\n  }\n  vec4 ").concat(e,"_(vec4 v) {\n    return vec4(").concat(e,"_(v.x), ").concat(e,"_(v.y), ").concat(e,"_(v.z), ").concat(e,"_(v.w));\n  }\n  "),name:e,type:i.FunctionType.ValueBased}}function _(){return D("log")}function x(){var t="neg";return{body:"\n  float ".concat(t,"_(float a) {\n    return -a;\n  }\n  vec4 ").concat(t,"_(vec4 v) {\n    return -v;\n  }\n  "),name:t,type:i.FunctionType.ValueBased}}function T(){var t="not";return{body:"\n  float ".concat(t,"_(float a) {\n    return float( ! bool(a) );\n  }\n  bool ").concat(t,"_(bool a) {\n    return !a;\n  }\n  vec4 ").concat(t,"_(vec4 v) {\n    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));\n  }\n  bvec4 ").concat(t,"_(bvec4 v) {\n    return bvec4(!v.x, !v.y, !v.z, !v.w);\n  }\n  "),name:t,type:i.FunctionType.ValueBased}}function S(){return D("sin")}function A(){var t="relu";return{body:"\n  float ".concat(t,"_(float a) {\n    return max( a, 0.0 );\n  }\n  vec4 ").concat(t,"_(vec4 v) {\n    return max( v, 0.0 );\n  }\n  "),name:t,type:i.FunctionType.ValueBased}}function O(){var t="sigmoid";return{body:"\n  float ".concat(t,"_(float a) {\n    return 1.0 / (1.0 + exp(-a));\n  }\n  vec4 ").concat(t,"_(vec4 v) {\n    return 1.0 / (1.0 + exp(-v));\n  }\n  "),name:t,type:i.FunctionType.ValueBased}}function E(){return D("sqrt")}function P(){return D("tan")}function I(){var t="tanh";return{body:"\n  float ".concat(t,"_(float a) {\n    a = clamp(a, -10., 10.);\n    a = exp(2.*a);\n    return (a - 1.) / (a + 1.);\n  }\n  vec4 ").concat(t,"_(vec4 v) {\n    v = clamp(v, -10., 10.);\n    v = exp(2.*v);\n    return (v - 1.) / (v + 1.);\n  }\n  "),name:t,type:i.FunctionType.ValueBased}}function D(t){return{body:"\n  float ".concat(t,"_(float a) {\n    return ").concat(t,"(a);\n  }\n  vec4 ").concat(t,"_(vec4 v) {\n    return ").concat(t,"(v);\n  }\n  "),name:t,type:i.FunctionType.ValueBased}}e.glslAbs=c,e.glslAcos=l,e.glslAsin=f,e.glslAtan=p,e.glslCeil=d,e.glslCos=h,e.glslElu=g,e.glslExp=m,e.glslFloor=y,e.glslClip=b,e.glslIdentity=v,e.glslLeakyRelu=w,e.glslLog=_,e.glslNeg=x,e.glslNot=T,e.glslSin=S,e.glslRelu=A,e.glslSigmoid=O,e.glslSqrt=E,e.glslTan=P,e.glslTanh=I;var k=function(t,e,n,o){var a=t.session.pack?u.TextureType.packed:u.TextureType.unpacked,i={name:n.name,inputTypes:[a],inputNames:["A"],cacheHint:o};return r(r({},i),{get:function(){return function(t,e,n,o){var a=t.session.pack?u.TextureType.packed:u.TextureType.unpacked,i=(0,s.getGlsl)(t.session.backend.glContext.version);return r(r({},e),{output:{dims:n.dims,type:n.type,textureType:a},shaderSource:"\n     ".concat(o.body,"\n     void main() {\n       vec4 v = ").concat(i.texture2D,"(A, TexCoords);\n       v = ").concat(o.name,"_(v);\n       ").concat(i.output," = v;\n     }\n     "),hasMain:!0})}(t,i,e,n)}})};e.abs=function(t,e){return[t.run(k(t,e[0],c()),e)]},e.acos=function(t,e){return[t.run(k(t,e[0],l()),e)]},e.asin=function(t,e){return[t.run(k(t,e[0],f()),e)]},e.atan=function(t,e){return[t.run(k(t,e[0],p()),e)]},e.clip=function(t,e,n){return[t.run(k(t,e[0],b(n.min,n.max),n.cacheKey),e)]},e.parseClipAttributes=function(t){return(0,o.createAttributeWithCacheKey)({min:t.attributes.getFloat("min",a.MIN_CLIP),max:t.attributes.getFloat("max",a.MAX_CLIP)})},e.clipV11=function(t,n){var r=C(t,n);return(0,e.clip)(t,[n[0]],r)};var C=function(t,e){if(e.length>=3&&(!t.session.isInitializer(e[1].dataId)||!t.session.isInitializer(e[2].dataId)))throw new Error("dynamic clip attributes are not allowed");var n=e.length>=3?e[1].numberData[0]:a.MIN_CLIP,r=e.length>=3?e[2].numberData[0]:a.MAX_CLIP;return(0,o.createAttributeWithCacheKey)({min:n,max:r})};e.ceil=function(t,e){return[t.run(k(t,e[0],d()),e)]},e.cos=function(t,e){return[t.run(k(t,e[0],h()),e)]},e.elu=function(t,e,n){return[t.run(k(t,e[0],g(n.alpha),n.cacheKey),e)]},e.parseEluAttributes=function(t){return(0,o.createAttributeWithCacheKey)({alpha:t.attributes.getFloat("alpha",1)})},e.exp=function(t,e){return[t.run(k(t,e[0],m()),e)]},e.floor=function(t,e){return[t.run(k(t,e[0],y()),e)]},e.identity=function(t,e){return[t.run(k(t,e[0],v()),e)]},e.leakyRelu=function(t,e,n){return[t.run(k(t,e[0],w(n.alpha),n.cacheKey),e)]},e.parseLeakyReluAttributes=function(t){return(0,o.createAttributeWithCacheKey)({alpha:t.attributes.getFloat("alpha",.01)})},e.log=function(t,e){return[t.run(k(t,e[0],_()),e)]},e.neg=function(t,e){return[t.run(k(t,e[0],x()),e)]},e.not=function(t,e){return[t.run(k(t,e[0],T()),e)]},e.relu=function(t,e){return[t.run(k(t,e[0],A()),e)]},e.sigmoid=function(t,e){return[t.run(k(t,e[0],O()),e)]},e.sin=function(t,e){return[t.run(k(t,e[0],S()),e)]},e.sqrt=function(t,e){return[t.run(k(t,e[0],E()),e)]},e.tan=function(t,e){return[t.run(k(t,e[0],P()),e)]},e.tanh=function(t,e){return[t.run(k(t,e[0],I()),e)]}},540:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.createUnpackProgramInfoLoader=e.createUnpackProgramInfo=void 0;var o=n(6757),a=n(5639),i=n(432),s=n(5614),u={name:"unpack",inputNames:["A"],inputTypes:[a.TextureType.packed]};e.createUnpackProgramInfo=function(t,e){var n=e.dims.length,c=(0,s.getChannels)("rc",n),l=c.slice(-2),f=(0,i.getCoordsDataType)(n),p=(0,s.unpackFromChannel)(),d=0===e.dims.length?"":function(t,e){if(1===t)return"rc";for(var n="",r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}(n,c),h=n<=1?"rc":"vec2(".concat(l.join(","),")"),g=(0,o.getGlsl)(t.session.backend.glContext.version),m="\n    ".concat(p,"\n    void main() {\n      ").concat(f," rc = getOutputCoords();\n\n       // Sample the texture with the coords to get the rgba channel value.\n       vec4 packedInput = getA(").concat(d,");\n\n       ").concat(g.output," = vec4(getChannel(packedInput, ").concat(h,"), 0, 0, 0);\n     }\n   ");return r(r({},u),{hasMain:!0,output:{dims:e.dims,type:e.type,textureType:a.TextureType.unpacked},shaderSource:m})},e.createUnpackProgramInfoLoader=function(t,n){return r(r({},u),{get:function(){return(0,e.createUnpackProgramInfo)(t,n)}})}},7862:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseUnsqueezeAttributes=e.unsqueezeV13=e.unsqueeze=void 0;var r=n(7273);e.unsqueeze=function(t,e,n){o(e);var a=r.ShapeUtil.unsqueezeShape(e[0].dims,n);return[t.reshapeUnpacked(e[0],a)]},e.unsqueezeV13=function(t,n){return a(n),(0,e.unsqueeze)(t,[n[0]],Array.from(n[1].integerData))},e.parseUnsqueezeAttributes=function(t){return t.attributes.getInts("axes")};var o=function(t){if(!t||1!==t.length)throw new Error("Unsqueeze requires 1 input.");if("string"===t[0].type)throw new Error("invalid input tensor types.")},a=function(t){if(!t||2!==t.length)throw new Error("Unsqueeze requires 2 inputs.");if("int32"!==t[1].type)throw new Error("Invalid input type.")}},3980:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},a=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.scalesValidation=e.validateInputs=e.parseUpsampleAttributes=e.parseUpsampleAttributesV9=e.parseUpsampleAttributesV7=e.upsample=void 0;var i=n(4910),s=n(6757),u=n(5639),c={name:"Upsample",inputNames:["X"],inputTypes:[u.TextureType.unpacked]};e.upsample=function(t,n,o){return(0,e.validateInputs)(n,o),[t.run(r(r({},c),{cacheHint:o.cacheKey,get:function(){return l(t,n,o)}}),n)]},e.parseUpsampleAttributesV7=function(t){return(0,e.parseUpsampleAttributes)(t,7)},e.parseUpsampleAttributesV9=function(t){return(0,e.parseUpsampleAttributes)(t,9)},e.parseUpsampleAttributes=function(t,n){var r=n>=10,o=t.attributes.getString("mode","nearest");if("nearest"!==o&&"linear"!==o&&(n<11||"cubic"!==o))throw new Error("unrecognized mode: ".concat(o));var a=[];n<9&&(a=t.attributes.getFloats("scales"),(0,e.scalesValidation)(a,o,r));var s=t.attributes.getFloat("extrapolation_value",0),u=n>10?t.attributes.getString("coordinate_transformation_mode","half_pixel"):"asymmetric";if(-1===["asymmetric","pytorch_half_pixel","tf_half_pixel_for_nn","align_corners","tf_crop_and_resize","half_pixel"].indexOf(u))throw new Error("coordinate_transform_mode '".concat(u,"' is not supported"));var c="tf_crop_and_resize"===u,l=c,f="nearest"===o&&n>=11?t.attributes.getString("nearest_mode","round_prefer_floor"):"";if(-1===["round_prefer_floor","round_prefer_ceil","floor","ceil",""].indexOf(f))throw new Error("nearest_mode '".concat(f,"' is not supported"));var p=t.attributes.getFloat("cubic_coeff_a",-.75),d=0!==t.attributes.getInt("exclude_outside",0);if(d&&"cubic"!==o)throw new Error("exclude_outside can be set to 1 only when mode is CUBIC.");var h=n<11||"nearest"===o&&"asymmetric"===u&&"floor"===f,g=0,m=0,y=0;return n>10?t.inputs.length>2?(g=1,m=2,y=3):(m=1,y=2):9===n&&(m=1),(0,i.createAttributeWithCacheKey)({opset:n,isResize:r,mode:o,scales:a,extrapolationValue:s,coordinateTransformMode:u,useExtrapolation:l,needRoiInput:c,nearestMode:f,cubicCoefficientA:p,excludeOutside:d,useNearest2xOptimization:h,roiInputIdx:g,scalesInputIdx:m,sizesInputIdx:y})};var l=function(t,e,n){for(var a=(0,s.getGlsl)(t.session.backend.glContext.version),i=o(t.calculateTextureWidthAndHeight(e[0].dims,u.TextureType.unpacked),2),l=i[0],f=i[1],p=e[0].dims.map((function(t,e){return Math.floor(t*n.scales[e])})),d=o(t.calculateTextureWidthAndHeight(p,u.TextureType.unpacked),2),h=d[0],g=d[1],m=p.length,y=new Array(m),b=new Array(m),v="\n      int output_pitches[".concat(m,"];\n      int input_pitches[").concat(m,"];\n      "),w=m-1;w>=0;w--)y[w]=w===m-1?1:y[w+1]*p[w+1],b[w]=w===m-1?1:b[w+1]*e[0].dims[w+1],v+="\n        output_pitches[".concat(w,"] = ").concat(y[w],";\n        input_pitches[").concat(w,"] = ").concat(b[w],";\n        ");var _="\n      float getInputFloat(int index) {\n        vec2 coords = offsetToCoords(index, ".concat(l,", ").concat(f,");\n        float value = getColorAsFloat(").concat(a.texture2D,"(X, coords));\n        return value;\n      }\n      "),x="nearest"===n.mode?"\n    ".concat(_,"\n    float process(int indices[").concat(m,"]) {\n      int input_index = 0;\n      int output_index = coordsToOffset(TexCoords, ").concat(h,", ").concat(g,");\n\n      ").concat(v,"\n\n      int d, m;\n      for (int dim = 0; dim < ").concat(m,"; ++dim) {\n        d = output_index / output_pitches[dim];\n        m = output_index - d * output_pitches[dim];\n        output_index = m;\n\n        if (scales[dim] != 1 && d > 0) {\n          int d2 = d / scales[dim];\n          m = d - d2 * scales[dim];\n          d = d2;\n        }\n        input_index += input_pitches[dim] * d;\n      }\n\n      return getInputFloat(input_index);\n    }"):4===m?"\n    ".concat(_,"\n    float process(int indices[4]) {\n      int input_index = 0;\n      int output_index = coordsToOffset(TexCoords, ").concat(h,", ").concat(g,");\n\n      ").concat(v,"\n\n      int m;\n      int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;\n      index_of_dim0 = output_index / output_pitches[0];\n      m = output_index - index_of_dim0 * output_pitches[0];\n      index_of_dim1 = m / output_pitches[1];\n      m = m - index_of_dim1 * output_pitches[1];\n      index_of_dim2 = m / output_pitches[2];\n      m = m - index_of_dim2 * output_pitches[2];\n      index_of_dim3 = m;\n\n      int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;\n      index_of_input_dim2 = index_of_dim2 / scales[2];\n      y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];\n      index_of_input_dim3 = index_of_dim3 / scales[3];\n      x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];\n\n      input_index = index_of_dim0 * input_pitches[0] +\n            index_of_dim1 * input_pitches[1] +\n            index_of_input_dim2 * input_pitches[2] +\n            index_of_input_dim3;\n\n      float x00 = getInputFloat(input_index);\n      float x10, x01, x11;\n\n      bool end_of_dim2 = false;\n      if (index_of_input_dim2 == (").concat(e[0].dims[2]," - 1)) {\n        // It's the end in dimension 2\n        x01 = x00;\n        end_of_dim2 = true;\n      } else {\n        x01 = getInputFloat(input_index + input_pitches[2]);\n      }\n\n      if (index_of_input_dim3 == (input_pitches[2] - 1)) {\n        // It's the end in dimension 3\n        x10 = x00;\n        x11 = x01;\n      }\n      else {\n        x10 = getInputFloat(input_index + 1);\n        x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);\n      }\n\n      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);\n      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);\n      return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);\n    }"):"\n    ".concat(_,"\n    float process(int indices[2]) {\n      int input_index = 0;\n      int output_index = coordsToOffset(TexCoords, ").concat(h,", ").concat(g,");\n\n      ").concat(v,"\n\n      int m;\n      int index_of_dim0, index_of_dim1;\n      index_of_dim0 = output_index / output_pitches[0];\n      m = output_index - index_of_dim0 * output_pitches[0];\n      index_of_dim1 = m;\n\n      int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;\n      index_of_input_dim0 = index_of_dim0 / scales[0];\n      y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];\n      index_of_input_dim1 = index_of_dim1 / scales[1];\n      x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];\n\n      input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;\n\n      float x00 = getInputFloat(input_index);\n      float x10, x01, x11;\n\n      bool end_of_dim0 = false;\n      if (index_of_input_dim0 == (").concat(e[0].dims[0]," - 1)) {\n        // It's the end in dimension 0\n        x01 = x00;\n        end_of_dim0 = true;\n      } else {\n        x01 = getInputFloat(input_index + input_pitches[0]);\n      }\n\n      if (index_of_input_dim1 == (input_pitches[0] - 1)) {\n        // It's the end in dimension 1\n        x10 = x00;\n        x11 = x01;\n      }\n      else {\n        x10 = getInputFloat(input_index + 1);\n        x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);\n      }\n\n      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);\n      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);\n      return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);\n    }");return r(r({},c),{output:{dims:p,type:e[0].type,textureType:u.TextureType.unpacked},shaderSource:x,variables:[{name:"scales",type:"int",arrayLength:n.scales.length,data:n.scales.map((function(t){return Math.ceil(t)}))}]})};e.validateInputs=function(t,e){if(!t||e.opset<9&&1!==t.length||e.opset>=9&&e.opset<11&&2!==t.length||e.opset>=11&&t.length<2)throw new Error("invalid inputs.");if(e.scales.length>0&&t[0].dims.length!==e.scales.length)throw new Error("Invalid input shape.");if("string"===t[0].type)throw new Error("Invalid input tensor types.")},e.scalesValidation=function(t,e,n){var r,o,i,s;if(n)try{for(var u=a(t),c=u.next();!c.done;c=u.next())if(c.value<=0)throw new Error("Scale value should be greater than 0.")}catch(t){i={error:t}}finally{try{c&&!c.done&&(s=u.return)&&s.call(u)}finally{if(i)throw i.error}}else try{for(var l=a(t),f=l.next();!f.done;f=l.next())if(f.value<1)throw new Error("Scale value should be greater than or equal to 1.")}catch(t){r={error:t}}finally{try{f&&!f.done&&(o=l.return)&&o.call(l)}finally{if(r)throw r.error}}if(!("linear"!==e&&"cubic"!==e||2===t.length||4===t.length&&1===t[0]&&1===t[1]))throw new Error("'Linear' mode and 'Cubic' mode only support 2-D inputs ('Bilinear', 'Bicubic')         or 4-D inputs with the corresponding outermost 2 scale values being 1         in the ".concat(n?"Resize":"Upsample"," opeartor."))}},2757:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.ProgramManager=void 0;var a=n(2235),i=n(1315),s=n(8897),u=n(6757),c=function(){function t(t,e,n){this.profiler=t,this.glContext=e,this.textureLayoutStrategy=n,this.repo=new Map,this.attributesBound=!1}return t.prototype.getArtifact=function(t){return this.repo.get(t)},t.prototype.setArtifact=function(t,e){this.repo.set(t,e)},t.prototype.run=function(t,e,n){var r,o=this;this.profiler.event("op","ProgramManager.run ".concat(null!==(r=t.programInfo.name)&&void 0!==r?r:"unknown kernel"),(function(){var r,a=o.glContext.gl,s=t.program;a.useProgram(s);try{o.bindOutput(n),o.attributesBound||o.bindAttributes(t.attribLocations),o.bindUniforms(t.uniformLocations,null!==(r=t.programInfo.variables)&&void 0!==r?r:[],e)}catch(e){throw i.Logger.error("ProgramManager",t.programInfo.shaderSource),e}o.profiler.event("backend","GlContext.draw()",(function(){o.glContext.draw()}))}),this.glContext)},t.prototype.dispose=function(){var t=this;this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach((function(e){return t.glContext.deleteProgram(e.program)}))},t.prototype.build=function(t,e,n){var r=this;return this.profiler.event("backend","ProgramManager.build",(function(){var o=new s.GlslPreprocessor(r.glContext,t,e,n),a=o.preprocess(),i=r.compile(a);return{programInfo:t,program:i,uniformLocations:r.getUniformLocations(i,o.context.programInfo.inputNames,o.context.programInfo.variables),attribLocations:r.getAttribLocations(i)}}))},t.prototype.compile=function(t){if(!this.vertexShader){i.Logger.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");var e=(0,u.getVertexShaderSource)(this.glContext.version);this.vertexShader=this.glContext.compileShader(e,this.glContext.gl.VERTEX_SHADER)}a.env.debug&&i.Logger.verbose("ProrgramManager","FragShader:\n".concat(t,"\n"));var n=this.glContext.compileShader(t,this.glContext.gl.FRAGMENT_SHADER),r=this.glContext.createProgram(this.vertexShader,n);return this.glContext.deleteShader(n),r},t.prototype.bindOutput=function(t){var e=t.width,n=t.height;i.Logger.verbose("ProrgramManager","Binding output texture to Framebuffer: w/h=".concat(e,"/").concat(n,", shape=").concat(t.shape,", type=").concat(t.tensor.type)),this.glContext.attachFramebuffer(t.texture,e,n)},t.prototype.bindAttributes=function(t){var e=t.position,n=t.textureCoord;this.glContext.setVertexAttributes(e,n),this.attributesBound=!0},t.prototype.bindUniforms=function(t,e,n){var r,a,i,s=this.glContext.gl,u=0,c=function(t,r,o,a){var c=null===(i=e.find((function(e){return e.name===t})))||void 0===i?void 0:i.data;if("sampler2D"!==r&&!c)throw new Error("variable '".concat(t,"' does not have data defined in program info"));switch(r){case"sampler2D":l.bindTexture(n[u],o,u),u++;break;case"float":a?s.uniform1fv(o,c):s.uniform1f(o,c);break;case"int":a?s.uniform1iv(o,c):s.uniform1i(o,c);break;default:throw new Error("Uniform not implemented: ".concat(r))}},l=this;try{for(var f=o(t),p=f.next();!p.done;p=f.next()){var d=p.value;c(d.name,d.type,d.location,d.arrayLength)}}catch(t){r={error:t}}finally{try{p&&!p.done&&(a=f.return)&&a.call(f)}finally{if(r)throw r.error}}},t.prototype.bindTexture=function(t,e,n){this.glContext.bindTextureToUniform(t.texture,n,e)},t.prototype.getAttribLocations=function(t){return{position:this.getAttribLocation(t,"position"),textureCoord:this.getAttribLocation(t,"textureCoord")}},t.prototype.getUniformLocations=function(t,e,n){var a,i,s,u,c=[];if(e)try{for(var l=o(e),f=l.next();!f.done;f=l.next()){var p=f.value;c.push({name:p,type:"sampler2D",location:this.getUniformLocation(t,p)})}}catch(t){a={error:t}}finally{try{f&&!f.done&&(i=l.return)&&i.call(l)}finally{if(a)throw a.error}}if(n)try{for(var d=o(n),h=d.next();!h.done;h=d.next()){var g=h.value;c.push(r(r({},g),{location:this.getUniformLocation(t,g.name)}))}}catch(t){s={error:t}}finally{try{h&&!h.done&&(u=d.return)&&u.call(d)}finally{if(s)throw s.error}}return c},t.prototype.getUniformLocation=function(t,e){var n=this.glContext.gl.getUniformLocation(t,e);if(null===n)throw new Error("Uniform ".concat(e," not found."));return n},t.prototype.getAttribLocation=function(t,e){return this.glContext.gl.getAttribLocation(t,e)},t}();e.ProgramManager=c},2171:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLSessionHandler=void 0;var r=n(1315),o=n(5881),a=n(7860),i=n(4110),s=n(2757),u=n(7618),c=n(5243),l=function(){function t(t,e){this.backend=t,this.context=e,this.layoutStrategy=new u.PreferLogicalStrategy(t.glContext.maxTextureSize),this.programManager=new s.ProgramManager(this.context.profiler,t.glContext,this.layoutStrategy),this.textureManager=new c.TextureManager(t.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:"full"===t.textureCacheMode}),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map,this.pack=t.pack,this.pack2unpackMap=new Map,this.unpack2packMap=new Map}return t.prototype.createInferenceHandler=function(){return new a.WebGLInferenceHandler(this)},t.prototype.onGraphInitialized=function(t){var e=t.getValues().filter((function(t){return-1===t.from&&t.tensor})).map((function(t){return t.tensor.dataId}));this.initializers=new Set(e)},t.prototype.isInitializer=function(t){return!!this.initializers&&this.initializers.has(t)},t.prototype.addInitializer=function(t){this.initializers.add(t)},t.prototype.getTextureData=function(t,e){return e?this.packedTextureDataCache.get(t):this.unpackedTextureDataCache.get(t)},t.prototype.setTextureData=function(t,e,n){void 0===n&&(n=!1),r.Logger.verbose("WebGLSessionHandler","Storing Texture data in cache"),n?this.packedTextureDataCache.set(t,e):this.unpackedTextureDataCache.set(t,e)},t.prototype.dispose=function(){var t=this;this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach((function(e){return t.textureManager.releaseTexture(e,!0)})),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach((function(e){return t.textureManager.releaseTexture(e,!0)})),this.unpackedTextureDataCache=new Map},t.prototype.resolve=function(t,e,n){var r=(0,o.resolveOperator)(t,e,i.WEBGL_OP_RESOLVE_RULES);return{impl:r.opImpl,context:r.opInit?r.opInit(t,n):t}},t}();e.WebGLSessionHandler=l},9622:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Uint8DataEncoder=e.RGBAFloatDataEncoder=e.RedFloat32DataEncoder=void 0;var r=n(1315),o=function(){function t(t,e){if(void 0===e&&(e=1),1===e)this.internalFormat=t.R32F,this.format=t.RED,this.textureType=t.FLOAT,this.channelSize=e;else{if(4!==e)throw new Error("Invalid number of channels: ".concat(e));this.internalFormat=t.RGBA32F,this.format=t.RGBA,this.textureType=t.FLOAT,this.channelSize=e}}return t.prototype.encode=function(t,e){var n,o;return t.constructor!==Float32Array&&(r.Logger.warning("Encoder","data was not of type Float32; creating new Float32Array"),o=new Float32Array(t)),e*this.channelSize>t.length?(r.Logger.warning("Encoder","Source data too small. Allocating larger array"),o=t,n=this.allocate(e*this.channelSize),o.forEach((function(t,e){return n[e]=t}))):n=o=t,n},t.prototype.allocate=function(t){return new Float32Array(4*t)},t.prototype.decode=function(t,e){return 1===this.channelSize?t.filter((function(t,e){return e%4==0})).subarray(0,e):t.subarray(0,e)},t}();e.RedFloat32DataEncoder=o;var a=function(){function t(t,e,n){if(void 0===e&&(e=1),1!==e&&4!==e)throw new Error("Invalid number of channels: ".concat(e));this.internalFormat=t.RGBA,this.format=t.RGBA,this.channelSize=e,this.textureType=n||t.FLOAT}return t.prototype.encode=function(t,e){var n=t;return 1===this.channelSize&&(r.Logger.verbose("Encoder","Exploding into a larger array"),n=this.allocate(e),t.forEach((function(t,e){return n[4*e]=t}))),n},t.prototype.allocate=function(t){return new Float32Array(4*t)},t.prototype.decode=function(t,e){return 1===this.channelSize?t.filter((function(t,e){return e%4==0})).subarray(0,e):t.subarray(0,e)},t}();e.RGBAFloatDataEncoder=a;var i=function(){function t(t,e){if(void 0===e&&(e=1),this.channelSize=4,1===e)this.internalFormat=t.ALPHA,this.format=t.ALPHA,this.textureType=t.UNSIGNED_BYTE,this.channelSize=e;else{if(4!==e)throw new Error("Invalid number of channels: ".concat(e));this.internalFormat=t.RGBA,this.format=t.RGBA,this.textureType=t.UNSIGNED_BYTE,this.channelSize=e}}return t.prototype.encode=function(t,e){return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)},t.prototype.allocate=function(t){return new Uint8Array(t*this.channelSize)},t.prototype.decode=function(t,e){if(t instanceof Uint8Array)return t.subarray(0,e);throw new Error("Invalid array type: ".concat(t.constructor))},t}();e.Uint8DataEncoder=i},7618:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getBatchDim=e.sizeToSquarishShape=e.getRowsCols=e.sizeFromShape=e.isInt=e.parseAxisParam=e.squeezeShape=e.PreferLogicalStrategy=e.AlwaysKeepOriginalSizeStrategy=void 0;var r=n(1315),o=n(7273),a=function(){function t(t){this.maxTextureSize=t}return t.prototype.computeTextureWH=function(t,e){if(0===t.length)return[1,1];var n=this.maxTextureSize;if(e&&void 0!==e.breakAxis){var o=e.breakAxis>=t.length?1:t.slice(e.breakAxis).reduce((function(t,e){return t*e})),a=e.breakAxis<=0?1:t.slice(0,e.breakAxis).reduce((function(t,e){return t*e}));if(!(o>n||a>n))return[o,a];r.Logger.verbose("TextureLayout","Given width/height preferences were unattainable: shape:".concat(t,", breakAxis:").concat(e.breakAxis))}for(var i=t.reduce((function(t,e){return t*e})),s=Math.floor(Math.sqrt(i));s<n&&s<i&&i%s!=0;s++);if(s>=n||i%s!=0)throw new Error("The given dimensions are outside this GPU's boundaries: ".concat(t));return[s,i/s]},t}();e.AlwaysKeepOriginalSizeStrategy=a;var i=function(){function t(t){this.maxTextureSize=t}return t.prototype.computeTextureWH=function(t,e){var n=this.computeTexture(t,e);return e&&e.isPacked&&(n[0]/=2,n[1]/=2),e&&e.reverseWH?[n[1],n[0]]:n},t.prototype.computeTexture=function(t,e){var n=e&&e.isPacked;if(0===t.length)return n?[2,2]:[1,1];var o=this.maxTextureSize;if(e&&void 0!==e.breakAxis){var a=e.breakAxis>=t.length?1:t.slice(e.breakAxis).reduce((function(t,e){return t*e})),i=e.breakAxis<=0?1:t.slice(0,e.breakAxis).reduce((function(t,e){return t*e}));if(!(a>o||i>o))return[a,i];r.Logger.verbose("TextureLayout","Given width/height preferences were unattainable: shape:".concat(t,", breakAxis:").concat(e.breakAxis))}var u=t.slice(0);if(n&&(o*=2,1===(u=u.map((function(t,e){return e>=u.length-2?u[e]%2==0?u[e]:u[e]+1:u[e]}))).length&&(u=[2,u[0]])),2!==u.length){var c=s(u);u=c.newShape}var p=l(u);return u.length<=1&&p<=o?[1,p]:2===u.length&&u[0]<=o&&u[1]<=o?u:3===u.length&&u[0]*u[1]<=o&&u[2]<=o?[u[0]*u[1],u[2]]:3===u.length&&u[0]<=o&&u[1]*u[2]<=o?[u[0],u[1]*u[2]]:4===u.length&&u[0]*u[1]*u[2]<=o&&u[3]<=o?[u[0]*u[1]*u[2],u[3]]:4===u.length&&u[0]<=o&&u[1]*u[2]*u[3]<=o?[u[0],u[1]*u[2]*u[3]]:n?f(p/4).map((function(t){return 2*t})):f(p)},t}();function s(t,e){for(var n=[],r=[],o=null!=e&&Array.isArray(e)&&0===e.length,a=null==e||o?null:u(e,t).sort(),i=0,s=0;s<t.length;++s){if(null!=a){if(a[i]===s&&1!==t[s])throw new Error("Can't squeeze axis ".concat(s," since its dim '").concat(t[s],"' is not 1"));(null==a[i]||a[i]>s)&&1===t[s]&&(n.push(t[s]),r.push(s)),a[i]<=s&&i++}1!==t[s]&&(n.push(t[s]),r.push(s))}return{newShape:n,keptDims:r}}function u(t,e){var n=e.length;return t=null==t?e.map((function(t,e){return e})):[].concat(t),(0,o.assert)(t.every((function(t){return t>=-n&&t<n})),(function(){return"All values in axis param must be in range [-".concat(n,", ").concat(n,") but ")+"got axis ".concat(t)})),(0,o.assert)(t.every(c),(function(){return"All values in axis param must be integers but "+"got axis ".concat(t)})),t.map((function(t){return t<0?n+t:t}))}function c(t){return t%1==0}function l(t){if(0===t.length)return 1;for(var e=t[0],n=1;n<t.length;n++)e*=t[n];return e}function f(t){var e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}e.PreferLogicalStrategy=i,e.squeezeShape=s,e.parseAxisParam=u,e.isInt=c,e.sizeFromShape=l,e.getRowsCols=function(t){if(0===t.length)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]},e.sizeToSquarishShape=f,e.getBatchDim=function(t,e){return void 0===e&&(e=2),l(t.slice(0,t.length-e))}},3314:function(t,e,n){"use strict";var r=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(e,"__esModule",{value:!0}),e.createTextureLayoutFromShape=e.calculateTextureWidthAndHeight=e.createTextureLayoutFromTextureType=void 0;var o=n(7273),a=n(5639);e.createTextureLayoutFromTextureType=function(t,n,r){var o=r===a.TextureType.unpacked||r===a.TextureType.unpackedReversed?1:4,i=r===a.TextureType.packed,s=r===a.TextureType.unpackedReversed||r===a.TextureType.packed,u=r===a.TextureType.packedLastDimension?n.length-1:void 0,c=r===a.TextureType.packedLastDimension?n.map((function(t,e){return e===n.length-1?4*t:t})):void 0;return(0,e.createTextureLayoutFromShape)(t,n,o,c,{isPacked:i,reverseWH:s,breakAxis:u})},e.calculateTextureWidthAndHeight=function(t,n,r){var o=(0,e.createTextureLayoutFromTextureType)(t,n,r);return[o.width,o.height]},e.createTextureLayoutFromShape=function(t,e,n,a,i){void 0===n&&(n=1);var s=!(!i||!i.isPacked),u=r(t.computeTextureWH(s&&a||e,i),2),c=u[0],l=u[1],f=e.length,p=e.slice(0);if(0===f&&(p=[1]),1===n)a=e;else if(s){if(4!==n)throw new Error("a packed texture must be 4-channel");a=e,f>0&&(p[f-1]=Math.ceil(p[f-1]/2)),f>1&&(p[f-2]=Math.ceil(p[f-2]/2))}else if(!a)throw new Error("Unpacked shape is needed when using channels > 1");return{width:c,height:l,channels:n,isPacked:s,shape:p,strides:o.ShapeUtil.computeStrides(p),unpackedShape:a,reversedWH:i&&i.reverseWH}}},5243:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,s)}u((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(t,i)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.TextureManager=void 0;var a=n(1315),i=function(){function t(t,e,n,r){this.glContext=t,this.layoutStrategy=e,this.profiler=n,this.config=r,this.pendingRead=new Map,r.reuseTextures&&(this.inUseTextures=new Map,this.idleTextures=new Map,this.textureLookup=new Map)}return t.prototype.createTextureFromLayout=function(t,e,n,r){var o=this.toEncoderType(t),i=this.glContext.getEncoder(o,e.channels||1,r);if(e.isPacked&&1===r)throw new Error("not implemented");var s,u,c=e.width,l=e.height;if(this.config.reuseTextures){s="".concat(c,"x").concat(l,"_").concat(i.format,"_").concat(i.internalFormat,"_").concat(i.textureType),(u=this.inUseTextures.get(s))||(u=[],this.inUseTextures.set(s,u));var f=this.idleTextures.get(s);if(f&&f.length>0){var p=f.pop();return u.push(p),1===r&&this.glContext.updateTexture(p,c,l,i,this.toTextureData(t,n)),p}}a.Logger.verbose("TextureManager","Creating new texture of size ".concat(e.width,"x").concat(e.height));var d=this.glContext.allocateTexture(c,l,i,this.toTextureData(t,n));return this.config.reuseTextures&&(u.push(d),this.textureLookup.set(d,s)),d},t.prototype.readTexture=function(t,e,n){var r=this;return n||(n=1),this.profiler.event("backend","TextureManager.readTexture",(function(){var o=t.shape.reduce((function(t,e){return t*e}))*n,a=r.glContext.readTexture(t.texture,t.width,t.height,o,r.toEncoderType(e),n);return r.toTensorData(e,a)}))},t.prototype.readTextureAsync=function(t,e,n){return r(this,void 0,void 0,(function(){var a,i,s=this;return o(this,(function(u){return a=t.tensor.dataId,n||(n=1),this.pendingRead.has(a)?(i=this.pendingRead.get(a),[2,new Promise((function(t){return null==i?void 0:i.push(t)}))]):[2,this.profiler.event("backend","TextureManager.readTextureAsync",(function(){return r(s,void 0,void 0,(function(){var r,i,s,u;return o(this,(function(o){switch(o.label){case 0:return this.pendingRead.set(a,[]),r=t.shape.reduce((function(t,e){return t*e}))*n,[4,this.glContext.createAndWaitForFence()];case 1:return o.sent(),i=this.glContext.readTexture(t.texture,t.width,t.height,r,this.toEncoderType(e),n),s=this.toTensorData(e,i),u=this.pendingRead.get(a),this.pendingRead.delete(a),null==u||u.forEach((function(t){return t(s)})),[2,s]}}))}))}))]}))}))},t.prototype.readUint8TextureAsFloat=function(t){var e=this;return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",(function(){var n=t.shape.reduce((function(t,e){return t*e})),r=e.glContext.readTexture(t.texture,t.width,t.height,4*n,"byte",4);return new Float32Array(r.buffer,r.byteOffset,n)}))},t.prototype.releaseTexture=function(t,e){var n;if(this.config.reuseTextures&&(n=this.textureLookup.get(t.texture))){e&&this.textureLookup.delete(n);var r=this.inUseTextures.get(n);if(r){var o=r.indexOf(t.texture);if(-1!==o){r.splice(o,1);var i=this.idleTextures.get(n);i||(i=[],this.idleTextures.set(n,i)),i.push(t.texture)}}}n&&!e||(a.Logger.verbose("TextureManager","Deleting texture of size ".concat(t.width,"x").concat(t.height)),this.glContext.deleteTexture(t.texture))},t.prototype.toTensorData=function(t,e){switch(t){case"int16":return e instanceof Int16Array?e:Int16Array.from(e);case"int32":return e instanceof Int32Array?e:Int32Array.from(e);case"int8":return e instanceof Int8Array?e:Int8Array.from(e);case"uint16":return e instanceof Uint16Array?e:Uint16Array.from(e);case"uint32":return e instanceof Uint32Array?e:Uint32Array.from(e);case"uint8":case"bool":return e instanceof Uint8Array?e:Uint8Array.from(e);case"float32":return e instanceof Float32Array?e:Float32Array.from(e);case"float64":return e instanceof Float64Array?e:Float64Array.from(e);default:throw new Error("TensorData type ".concat(t," is not supported"))}},t.prototype.toTextureData=function(t,e){if(e)return e instanceof Float32Array?e:new Float32Array(e)},t.prototype.toEncoderType=function(t){return"float"},t.prototype.clearActiveTextures=function(){this.glContext.clearActiveTextures()},t}();e.TextureManager=i},5639:function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.TextureType=void 0,(n=e.TextureType||(e.TextureType={}))[n.unpacked=0]="unpacked",n[n.unpackedReversed=1]="unpackedReversed",n[n.packed=2]="packed",n[n.downloadUint8AsFloat=3]="downloadUint8AsFloat",n[n.packedLastDimension=4]="packedLastDimension"},432:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,s)}u((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(t,i)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.getGlChannels=e.getCoordsDataType=e.getSqueezedParams=e.squeezeInputShape=e.generateShaderFuncNameFromInputSamplerNameAtOutCoords=e.generateShaderFuncNameFromInputSamplerName=e.repeatedTry=e.getPackedShape=void 0;var a=n(7273);e.getPackedShape=function(t){var e=t.length;return t.slice(0,e-1).concat(t[e-1]/4)},e.repeatedTry=function(t,e,n){return void 0===e&&(e=function(t){return 0}),r(this,void 0,void 0,(function(){return o(this,(function(r){return[2,new Promise((function(r,o){var a=0,i=function(){if(t())r();else{a++;var s=e(a);null!=n&&a>=n?o():setTimeout(i,s)}};i()}))]}))}))},e.generateShaderFuncNameFromInputSamplerName=function(t){return(0,a.assert)(void 0!==t&&0!==t.length,(function(){return"empty string found for sampler name"})),"get"+t.charAt(0).toUpperCase()+t.slice(1)},e.generateShaderFuncNameFromInputSamplerNameAtOutCoords=function(t){return(0,a.assert)(void 0!==t&&0!==t.length,(function(){return"empty string found for sampler name"})),"get"+t.charAt(0).toUpperCase()+t.slice(1)+"AtOutCoords"},e.squeezeInputShape=function(t,e){return JSON.parse(JSON.stringify(t)),e},e.getSqueezedParams=function(t,e){return e.map((function(e){return t[e]})).join(", ")},e.getCoordsDataType=function(t){if(t<=1)return"int";if(2===t)return"ivec2";if(3===t)return"ivec3";if(4===t)return"ivec4";if(5===t)return"ivec5";if(6===t)return"ivec6";throw Error("GPU for rank ".concat(t," is not yet supported"))},e.getGlChannels=function(t){return void 0===t&&(t=6),["x","y","z","w","u","v"].slice(0,t)}},3389:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createNewWebGLContext=e.createWebGLContext=void 0;var r=n(1315),o=n(3524),a={};function i(t,e){var n,a={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1};if((!e||"webgl2"===e)&&(n=t.getContext("webgl2",a)))try{return new o.WebGLContext(n,2)}catch(t){r.Logger.warning("GlContextFactory","failed to create WebGLContext using contextId 'webgl2'. Error: ".concat(t))}if((!e||"webgl"===e)&&(n=t.getContext("webgl",a)||t.getContext("experimental-webgl",a)))try{return new o.WebGLContext(n,1)}catch(t){r.Logger.warning("GlContextFactory","failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: ".concat(t))}throw new Error("WebGL is not supported")}e.createWebGLContext=function t(e){var n;if(e&&"webgl2"!==e||!("webgl2"in a)?e&&"webgl"!==e||!("webgl"in a)||(n=a.webgl):n=a.webgl2,!n)try{n=i(function(){if("undefined"==typeof OffscreenCanvas)throw new TypeError("failed to create offscreen canvas: OffscreenCanvas is not supported");return new OffscreenCanvas(1,1)}(),e)}catch(t){n=i(function(){if("undefined"==typeof document)throw new TypeError("failed to create canvas: document is not supported");var t=document.createElement("canvas");return t.width=1,t.height=1,t}(),e)}e=e||1===n.version?"webgl":"webgl2";var r=n.gl;return a[e]=n,r.isContextLost()?(delete a[e],t(e)):(r.disable(r.DEPTH_TEST),r.disable(r.STENCIL_TEST),r.disable(r.BLEND),r.disable(r.DITHER),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SAMPLE_COVERAGE),r.enable(r.SCISSOR_TEST),r.enable(r.CULL_FACE),r.cullFace(r.BACK),n)},e.createNewWebGLContext=i},3524:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return o(e,t),e},i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,s)}u((r=r.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(t,i)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLContext=e.linearSearchLastTrue=void 0;var u=n(2235),c=a(n(9622)),l=n(432);function f(t){for(var e=0;e<t.length&&t[e]();++e);return e-1}e.linearSearchLastTrue=f;var p=function(){function t(t,e){this.frameBufferBound=!1,this.itemsToPoll=[],this.gl=t,this.version=e,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters()}return t.prototype.allocateTexture=function(t,e,n,r){var o=this.gl,a=o.createTexture();o.bindTexture(o.TEXTURE_2D,a),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE);var i=r?n.encode(r,t*e):null;return o.texImage2D(o.TEXTURE_2D,0,n.internalFormat,t,e,0,n.format,n.textureType,i),this.checkError(),a},t.prototype.updateTexture=function(t,e,n,r,o){var a=this.gl;a.bindTexture(a.TEXTURE_2D,t);var i=r.encode(o,e*n);a.texSubImage2D(a.TEXTURE_2D,0,0,0,e,n,r.format,r.textureType,i),this.checkError()},t.prototype.attachFramebuffer=function(t,e,n){var r=this.gl;r.bindTexture(r.TEXTURE_2D,t),r.bindFramebuffer(r.FRAMEBUFFER,this.framebuffer),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,t,0),this.checkError(),r.viewport(0,0,e,n),r.scissor(0,0,e,n)},t.prototype.readTexture=function(t,e,n,r,o,a){var i=this.gl;a||(a=1),this.frameBufferBound||this.attachFramebuffer(t,e,n);var s=this.getEncoder(o,a),u=s.allocate(e*n);return i.bindTexture(i.TEXTURE_2D,t),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,t,0),i.readPixels(0,0,e,n,i.RGBA,s.textureType,u),this.checkError(),s.decode(u,r)},t.prototype.isFramebufferReady=function(){return!0},t.prototype.getActiveTexture=function(){var t=this.gl,e=t.getParameter(this.gl.ACTIVE_TEXTURE);return"TEXTURE".concat(e-t.TEXTURE0)},t.prototype.getTextureBinding=function(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D)},t.prototype.getFramebufferBinding=function(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING)},t.prototype.setVertexAttributes=function(t,e){var n=this.gl;n.vertexAttribPointer(t,3,n.FLOAT,!1,20,0),n.enableVertexAttribArray(t),-1!==e&&(n.vertexAttribPointer(e,2,n.FLOAT,!1,20,12),n.enableVertexAttribArray(e)),this.checkError()},t.prototype.createProgram=function(t,e){var n=this.gl,r=n.createProgram();return n.attachShader(r,t),n.attachShader(r,e),n.linkProgram(r),r},t.prototype.compileShader=function(t,e){var n=this.gl,r=n.createShader(e);if(!r)throw new Error("createShader() returned null with type ".concat(e));if(n.shaderSource(r,t),n.compileShader(r),!1===n.getShaderParameter(r,n.COMPILE_STATUS))throw new Error("Failed to compile shader: ".concat(n.getShaderInfoLog(r),"\nShader source:\n").concat(t));return r},t.prototype.deleteShader=function(t){this.gl.deleteShader(t)},t.prototype.bindTextureToUniform=function(t,e,n){var r=this.gl;r.activeTexture(r.TEXTURE0+e),this.checkError(),r.bindTexture(r.TEXTURE_2D,t),this.checkError(),r.uniform1i(n,e),this.checkError()},t.prototype.draw=function(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError()},t.prototype.checkError=function(){if(u.env.debug){var t=this.gl,e=t.getError(),n="";switch(e){case t.NO_ERROR:return;case t.INVALID_ENUM:n="INVALID_ENUM";break;case t.INVALID_VALUE:n="INVALID_VALUE";break;case t.INVALID_OPERATION:n="INVALID_OPERATION";break;case t.INVALID_FRAMEBUFFER_OPERATION:n="INVALID_FRAMEBUFFER_OPERATION";break;case t.OUT_OF_MEMORY:n="OUT_OF_MEMORY";break;case t.CONTEXT_LOST_WEBGL:n="CONTEXT_LOST_WEBGL";break;default:n="Unknown WebGL Error: ".concat(e.toString(16))}throw new Error(n)}},t.prototype.deleteTexture=function(t){this.gl.deleteTexture(t)},t.prototype.deleteProgram=function(t){this.gl.deleteProgram(t)},t.prototype.getEncoder=function(t,e,n){if(void 0===n&&(n=0),2===this.version)return new c.RedFloat32DataEncoder(this.gl,e);switch(t){case"float":return 1===n||this.isRenderFloat32Supported?new c.RGBAFloatDataEncoder(this.gl,e):new c.RGBAFloatDataEncoder(this.gl,e,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw new Error("not implemented");case"byte":return new c.Uint8DataEncoder(this.gl,e);default:throw new Error("Invalid dataType: ".concat(t))}},t.prototype.clearActiveTextures=function(){for(var t=this.gl,e=0;e<this.maxTextureImageUnits;++e)t.activeTexture(t.TEXTURE0+e),t.bindTexture(t.TEXTURE_2D,null)},t.prototype.dispose=function(){if(!this.disposed){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(this.framebuffer),t.bindBuffer(t.ARRAY_BUFFER,null),t.deleteBuffer(this.vertexbuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),t.finish(),this.disposed=!0}},t.prototype.createDefaultGeometry=function(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])},t.prototype.createVertexbuffer=function(){var t=this.gl,e=t.createBuffer();if(!e)throw new Error("createBuffer() returned null");var n=this.createDefaultGeometry();return t.bindBuffer(t.ARRAY_BUFFER,e),t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW),this.checkError(),e},t.prototype.createFramebuffer=function(){var t=this.gl.createFramebuffer();if(!t)throw new Error("createFramebuffer returned null");return t},t.prototype.queryVitalParameters=function(){var t=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),1===this.version&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw new Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),this.version},t.prototype.getExtensions=function(){2===this.version?(this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"),this.disjointTimerQueryWebgl2Extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"))},t.prototype.checkFloatTextureAttachableToFrameBuffer=function(){var t=this.gl,e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);var n=2===this.version?t.RGBA32F:t.RGBA;t.texImage2D(t.TEXTURE_2D,0,n,1,1,0,t.RGBA,t.FLOAT,null);var r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0);var o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(e),t.deleteFramebuffer(r),o},t.prototype.checkRenderFloat32=function(){if(2===this.version){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer},t.prototype.checkFloat32Download=function(){if(2===this.version){if(!this.colorBufferFloatExtension)return!1}else{if(!this.textureFloatExtension)return!1;if(!this.gl.getExtension("WEBGL_color_buffer_float"))return!1}return this.isFloatTextureAttachableToFrameBuffer},t.prototype.checkFloat32Blend=function(){var t,e,n,r,o,a=this.gl;try{t=a.createTexture(),e=a.createFramebuffer(),a.bindTexture(a.TEXTURE_2D,t);var i=2===this.version?a.RGBA32F:a.RGBA;return a.texImage2D(a.TEXTURE_2D,0,i,1,1,0,a.RGBA,a.FLOAT,null),a.bindFramebuffer(a.FRAMEBUFFER,e),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,t,0),a.enable(a.BLEND),!!(n=a.createShader(a.VERTEX_SHADER))&&(a.shaderSource(n,"void main(){}"),a.compileShader(n),!!(r=a.createShader(a.FRAGMENT_SHADER))&&(a.shaderSource(r,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),a.compileShader(r),!!(o=a.createProgram())&&(a.attachShader(o,n),a.attachShader(o,r),a.linkProgram(o),a.useProgram(o),a.drawArrays(a.POINTS,0,1),a.getError()===a.NO_ERROR)))}finally{a.disable(a.BLEND),o&&a.deleteProgram(o),n&&a.deleteShader(n),r&&a.deleteShader(r),e&&(a.bindFramebuffer(a.FRAMEBUFFER,null),a.deleteFramebuffer(e)),t&&(a.bindTexture(a.TEXTURE_2D,null),a.deleteTexture(t))}},t.prototype.beginTimer=function(){if(2===this.version&&this.disjointTimerQueryWebgl2Extension){var t=this.gl,e=this.disjointTimerQueryWebgl2Extension,n=t.createQuery();return t.beginQuery(e.TIME_ELAPSED_EXT,n),n}throw new Error("WebGL1 profiling currently not supported.")},t.prototype.endTimer=function(){if(2!==this.version||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");var t=this.gl,e=this.disjointTimerQueryWebgl2Extension;t.endQuery(e.TIME_ELAPSED_EXT)},t.prototype.isTimerResultAvailable=function(t){var e,n;if(2!==this.version||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");var r=this.gl,o=this.disjointTimerQueryWebgl2Extension;return e=r.getQueryParameter(t,r.QUERY_RESULT_AVAILABLE),n=r.getParameter(o.GPU_DISJOINT_EXT),e&&!n},t.prototype.getTimerResult=function(t){var e;if(2!==this.version)throw new Error("WebGL1 profiling currently not supported");var n=this.gl;return e=n.getQueryParameter(t,n.QUERY_RESULT),n.deleteQuery(t),e/1e6},t.prototype.waitForQueryAndGetTime=function(t){return i(this,void 0,void 0,(function(){var e=this;return s(this,(function(n){switch(n.label){case 0:return[4,(0,l.repeatedTry)((function(){return e.isTimerResultAvailable(t)}))];case 1:return n.sent(),[2,this.getTimerResult(t)]}}))}))},t.prototype.createAndWaitForFence=function(){return i(this,void 0,void 0,(function(){var t;return s(this,(function(e){return t=this.createFence(this.gl),[2,this.pollFence(t)]}))}))},t.prototype.createFence=function(t){var e=t,n=e.fenceSync(e.SYNC_GPU_COMMANDS_COMPLETE,0);return t.flush(),{query:n,isFencePassed:null===n?function(){return!0}:function(){var t=e.clientWaitSync(n,0,0);return t===e.ALREADY_SIGNALED||t===e.CONDITION_SATISFIED}}},t.prototype.pollFence=function(t){return i(this,void 0,void 0,(function(){var e=this;return s(this,(function(n){return[2,new Promise((function(n){e.addItemToPoll((function(){return t.isFencePassed()}),(function(){return n()}))}))]}))}))},t.prototype.pollItems=function(){for(var t=f(this.itemsToPoll.map((function(t){return t.isDoneFn}))),e=0;e<=t;++e)(0,this.itemsToPoll[e].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(t+1)},t.prototype.addItemToPoll=function(t,e){return i(this,void 0,void 0,(function(){var n=this;return s(this,(function(r){switch(r.label){case 0:return this.itemsToPoll.push({isDoneFn:t,resolveFn:e}),this.itemsToPoll.length>1?[2]:[4,(0,l.repeatedTry)((function(){return n.pollItems(),0===n.itemsToPoll.length}))];case 1:return r.sent(),[2]}}))}))},t}();e.WebGLContext=p},6496:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,s)}u((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(t,i)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},a=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},s=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,a=e.length;o<a;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.ExecutionPlan=void 0;var u=n(1315),c=function(t,e){this.op=t,this.node=e},l=function(){function t(t,e,n){this.graph=t,this.profiler=n,this.initialize(e)}return t.prototype.initialize=function(t){var e=this;this.profiler.event("session","ExecutionPlan.initialize",(function(){var n=e.graph.getNodes();if(n.length!==t.length)throw new Error("The size of nodes and OPs do not match.");e._ops=t.map((function(t,e){return new c(t,n[e])})),e.reset(),e._starter=[],e._ops.forEach((function(t,n){var r,o,i=!0;try{for(var s=a(t.node.inputs),u=s.next();!u.done;u=s.next()){var c=u.value;if(!e._values[c]&&-1===e.graph.getInputIndices().indexOf(c)){i=!1;break}}}catch(t){r={error:t}}finally{try{u&&!u.done&&(o=s.return)&&o.call(s)}finally{if(r)throw r.error}}i&&e._starter.push(n)}))}))},t.prototype.reset=function(){this._values=this.graph.getValues().map((function(t){return t.tensor}))},t.prototype.execute=function(t,e){return r(this,void 0,void 0,(function(){var n=this;return o(this,(function(c){return[2,this.profiler.event("session","ExecutionPlan.execute",(function(){return r(n,void 0,void 0,(function(){var n,c,l,f,p,d,h,g,m,y,b,v,w=this;return o(this,(function(_){switch(_.label){case 0:if(this.reset(),n=t.createInferenceHandler(),c=this.graph.getInputIndices(),e.length!==c.length)throw new Error("number of input tensors don't match the number of inputs to the model: actual: ".concat(e.length," expected: ").concat(c.length));e.forEach((function(t,e){var n=c[e];w._values[n]=t})),l=this._starter.slice(0),f=this.graph.getValues(),p=this.graph.getNodes(),d=0,h=function(){var t,e,c,h,m,y;return o(this,(function(b){switch(b.label){case 0:if(t=l[d++],e=g._ops[t],c=e.node.inputs.map((function(t){return w._values[t]})),-1!==c.indexOf(void 0))throw new Error("unresolved input detected: op: ".concat(e.node));return h=c,u.Logger.verbose("ExecPlan","Runing op:".concat(e.node.name," (").concat(h.map((function(t,n){return"'".concat(e.node.inputs[n],"': ").concat(t.type,"[").concat(t.dims.join(","),"]")})).join(", "),")")),[4,g.profiler.event("node",e.node.name,(function(){return r(w,void 0,void 0,(function(){return o(this,(function(t){return[2,e.op.impl(n,h,e.op.context)]}))}))}))];case 1:if((m=b.sent()).length!==e.node.outputs.length)throw new Error("the size of output does not match model definition.");return m.forEach((function(t,n){var r=e.node.outputs[n];if(w._values[r])throw new Error("output [".concat(r,"] already has value: op:").concat(e.node.name));w._values[r]=t})),y=new Set,m.forEach((function(t,n){var r,o,i,s,u=e.node.outputs[n];try{for(var c=(r=void 0,a(f[u].to)),l=c.next();!l.done;l=c.next()){var d=l.value,h=p[d],g=!0;try{for(var m=(i=void 0,a(h.inputs)),b=m.next();!b.done;b=m.next()){var v=b.value;if(!w._values[v]){g=!1;break}}}catch(t){i={error:t}}finally{try{b&&!b.done&&(s=m.return)&&s.call(m)}finally{if(i)throw i.error}}g&&y.add(d)}}catch(t){r={error:t}}finally{try{l&&!l.done&&(o=c.return)&&o.call(c)}finally{if(r)throw r.error}}})),l.push.apply(l,s([],i(y),!1)),[2]}}))},g=this,_.label=1;case 1:return d<l.length?[5,h()]:[3,3];case 2:return _.sent(),[3,1];case 3:m=[],y=0,_.label=4;case 4:if(!(y<this.graph.getOutputIndices().length))return[3,9];if(b=this.graph.getOutputIndices()[y],void 0===(v=this._values[b]))throw new Error("required output [".concat(b,"] does not have value"));return 0!==b?[3,6]:[4,v.getData()];case 5:return _.sent(),[3,7];case 6:v.data,_.label=7;case 7:m.push(v),_.label=8;case 8:return y++,[3,4];case 9:return u.Logger.verbose("ExecPlan","disposing of inferenceHandler"),n.dispose(),[2,m]}}))}))}))]}))}))},t}();e.ExecutionPlan=l},4662:function(t,e,n){"use strict";var r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.Graph=void 0;var o=n(1446),a=n(6874),i=n(1287),s=n(9240),u=n(7273),c=i.onnxruntime.experimental.fbs;e.Graph={from:function(t,e){return new p(t,e)}};var l=function(){function t(t){this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,t&&(this.type=u.ProtoUtil.tensorValueTypeFromProto(t.type.tensorType))}return Object.defineProperty(t.prototype,"from",{get:function(){return this._from},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"to",{get:function(){return this._to},enumerable:!1,configurable:!0}),t}(),f=function(t,e){t instanceof o.onnx.NodeProto?(this.name=t.name,this.opType=t.opType,this.attributes=new a.Attribute(t.attribute)):t instanceof c.Node&&(this.name=null!=e?e:t.name(),this.opType=t.opType(),this.attributes=new a.Attribute(u.ProtoUtil.tensorAttributesFromORTFormat(t))),this.inputs=[],this.outputs=[],this.executeNode=!0},p=function(){function t(t,e){if(!t)throw new TypeError("graph is empty");this.buildGraph(t),this.transformGraph(e),this.checkIsAcyclic()}return t.prototype.getInputIndices=function(){return this._allInputIndices},t.prototype.getInputNames=function(){return this._allInputNames},t.prototype.getOutputIndices=function(){return this._allOutputIndices},t.prototype.getOutputNames=function(){return this._allOutputNames},t.prototype.getValues=function(){return this._allData},t.prototype.getNodes=function(){return this._nodes},t.prototype.buildGraph=function(t){if(t instanceof o.onnx.GraphProto)this.buildGraphFromOnnxFormat(t);else{if(!(t instanceof c.Graph))throw new TypeError("Graph type is not supported.");this.buildGraphFromOrtFormat(t)}},t.prototype.buildGraphFromOnnxFormat=function(t){var e,n,o,a,i,c,p,d,h,g,m,y,b=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];var v=new Map;if(!t.input)throw new Error("missing information in graph: input");var w=[];try{for(var _=r(t.input),x=_.next();!x.done;x=_.next()){var T=x.value;if(b.has(T.name))throw new Error("duplicated input name: ".concat(T.name));var S=this._allData.push(new l(T))-1;b.set(T.name,S),w.push(T.name)}}catch(t){e={error:t}}finally{try{x&&!x.done&&(n=_.return)&&n.call(_)}finally{if(e)throw e.error}}if(!t.initializer)throw new Error("missing information in graph: initializer");try{for(var A=r(t.initializer),O=A.next();!O.done;O=A.next()){T=O.value;var E=b.get(T.name);if(void 0===E){var P=new l;P.type={shape:{dims:u.ProtoUtil.tensorDimsFromProto(T.dims)},tensorType:u.ProtoUtil.tensorDataTypeFromProto(T.dataType)},E=this._allData.push(P)-1,b.set(T.name,E)}this._allData[E]._from=-1,this._allData[E].tensor=s.Tensor.fromProto(T)}}catch(t){o={error:t}}finally{try{O&&!O.done&&(a=A.return)&&a.call(A)}finally{if(o)throw o.error}}for(T=0;T<this._allData.length;T++)this._allData[T].tensor||(this._allInputIndices.push(T),this._allInputNames.push(w[T]));if(!t.output)throw new Error("missing information in graph: output");try{for(var I=r(t.output),D=I.next();!D.done;D=I.next()){if(T=D.value,b.has(T.name))throw new Error("duplicated output name: ".concat(T.name));S=this._allData.push(new l(T))-1,b.set(T.name,S),this._allOutputIndices.push(S),this._allOutputNames.push(T.name)}}catch(t){i={error:t}}finally{try{D&&!D.done&&(c=I.return)&&c.call(I)}finally{if(i)throw i.error}}if(!t.node)throw new Error("missing information in graph: node");try{for(var k=r(t.node),C=k.next();!C.done;C=k.next()){if(!(U=C.value).name)for(var R=0;;R++){var M="unnamed_".concat(U.opType,"_").concat(R);if(!v.has(M)){U.name=M;break}}if(v.has(U.name))throw new Error("duplicated node name: ".concat(U.name));S=this._nodes.push(new f(U))-1,v.set(U.name,S)}}catch(t){p={error:t}}finally{try{C&&!C.done&&(d=k.return)&&d.call(k)}finally{if(p)throw p.error}}for(T=0;T<this._nodes.length;T++){var L=this._nodes[T];if(!(U=t.node[T]).output)throw new Error("missing output for node: ".concat(U.name));try{for(var F=(h=void 0,r(U.output)),N=F.next();!N.done;N=F.next()){var j=N.value;if(void 0===(z=b.get(j))&&(z=this._allData.push(new l)-1,b.set(j,z)),L.outputs.push(z),void 0!==this._allData[z]._from)throw new Error("multiple nodes output to one data value: ".concat(z));if(this._allData[z]._from=T,"Constant"===U.opType){if(!U.attribute||1!==U.attribute.length||!U.attribute[0].t)throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!U.output||1!==U.output.length)throw new Error("missing output or incorrect number of outputs for this Constant operator");L.outputs.pop(),L.executeNode=!1,this._allData[z]._from=-1,this._allData[z].tensor=s.Tensor.fromProto(U.attribute[0].t)}}}catch(t){h={error:t}}finally{try{N&&!N.done&&(g=F.return)&&g.call(F)}finally{if(h)throw h.error}}}for(T=0;T<this._nodes.length;T++){var U;if(L=this._nodes[T],!(U=t.node[T]).input)throw new Error("missing input for node: ".concat(U.name));try{for(var B=(m=void 0,r(U.input)),G=B.next();!G.done;G=B.next()){var z,V=G.value;if(void 0===(z=b.get(V))){if(""===V&&3===U.input.length&&"Resize"===U.opType)continue;throw new Error("unrecognized input '".concat(V,"' for node: ").concat(U.name))}L.inputs.push(z),this._allData[z]._to.push(T)}}catch(t){m={error:t}}finally{try{G&&!G.done&&(y=B.return)&&y.call(B)}finally{if(m)throw m.error}}}return!0},t.prototype.buildGraphFromOrtFormat=function(t){var e,n,r,o=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];for(var a=new Map,i=[],p=0;p<t.inputsLength();p++){var d=t.inputs(p);if(o.has(d))throw new Error("duplicated input name: ".concat(d));for(var h=0;h<t.nodeArgsLength();h++)if((null===(e=t.nodeArgs(h))||void 0===e?void 0:e.name())===d){var g=new l;if((null===(r=null===(n=t.nodeArgs(h))||void 0===n?void 0:n.type())||void 0===r?void 0:r.valueType())!==c.TypeInfoValue.tensor_type)throw new Error("Unexpected value type for the nodeArg.");for(var m=t.nodeArgs(h).type().value(new c.TensorTypeAndShape),y=u.ProtoUtil.tensorDataTypeFromProto(m.elemType()),b=m.shape(),v=[],w=0;w<b.dimLength();w++)v.push(u.LongUtil.longToNumber(b.dim(w).value().dimValue()));g.type={shape:{dims:v},tensorType:y};var _=this._allData.push(g)-1;o.set(d,_),i.push(d)}}for(p=0;p<t.initializersLength();p++){var x=t.initializers(p),T=o.get(x.name());void 0===T&&(g=new l,v=u.ProtoUtil.tensorDimsFromORTFormat(x),y=u.ProtoUtil.tensorDataTypeFromProto(x.dataType()),g.type={shape:{dims:v},tensorType:y},T=this._allData.push(g)-1,o.set(x.name(),T)),this._allData[T]._from=-1,this._allData[T].tensor=s.Tensor.fromOrtTensor(x)}for(p=0;p<this._allData.length;p++)this._allData[p].tensor||(this._allInputIndices.push(p),this._allInputNames.push(i[p]));for(p=0;p<t.outputsLength();p++){var S=t.outputs(p);if(o.has(S))throw new Error("duplicated output name: ".concat(S));_=this._allData.push(new l)-1,o.set(S,_),this._allOutputIndices.push(_),this._allOutputNames.push(S)}if(!t.nodes)throw new Error("missing information in graph: node");for(p=0;p<t.nodesLength();p++){var A=(I=t.nodes(p)).name();if(!A)for(var O=0;A="unnamed_".concat(I.opType(),"_").concat(O),a.has(A);O++);if(a.has(A))throw new Error("duplicated node name: ".concat(A));_=this._nodes.push(new f(I,A))-1,a.set(A,_)}for(p=0;p<this._nodes.length;p++){var E=this._nodes[p];if(null==(I=t.nodes(p)))throw new Error("No node exists at index ".concat(p));if(0===(null==I?void 0:I.outputsLength()))throw new Error("missing output for node: ".concat(I.name));for(h=0;h<(null==I?void 0:I.outputsLength());h++){var P=null==I?void 0:I.outputs(h);if(void 0===(D=o.get(P))&&(D=this._allData.push(new l)-1,o.set(P,D)),E.outputs.push(D),void 0!==this._allData[D]._from)throw new Error("multiple nodes output to one data value: ".concat(D));if(this._allData[D]._from=p,"Constant"===I.opType()){if(1!==I.attributesLength()||!I.attributes(0).t())throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(1!==I.outputsLength())throw new Error("missing output or incorrect number of outputs for this Constant operator");E.outputs.pop(),E.executeNode=!1,this._allData[D]._from=-1,this._allData[D].tensor=s.Tensor.fromOrtTensor(I.attributes(0).t())}}}for(p=0;p<this._nodes.length;p++){var I;if(E=this._nodes[p],0===(I=t.nodes(p)).inputsLength())throw new Error("missing input for node: ".concat(I.name));for(h=0;h<I.inputsLength();h++){var D,k=I.inputs(h);if(void 0===(D=o.get(k)))throw new Error("unrecognized input '".concat(k,"' for node: ").concat(I.name()));E.inputs.push(D),this._allData[D]._to.push(p)}}},t.prototype.checkIsAcyclic=function(){var t=this,e=new Set;this._allInputIndices.forEach((function(n){t._allData[n]._to.forEach((function(t){e.add(t)}))}));for(var n=Array.from(e),r=new Array(this._nodes.length).fill("white"),o=function(){var e=n.pop();"gray"===r[e]?r[e]="black":(n.push(e),r[e]="gray",a._nodes[e].outputs.forEach((function(o){var a=t._allData[o];if(void 0!==a.tensor)throw new Error("node outputs should not be initialized");if(a._from!==e)throw new Error("from property of the Value object doesn't match index of Node being processed");a._to.forEach((function(t){if("gray"===r[t])throw new Error("model graph is cyclic");"white"===r[t]&&n.push(t)}))})))},a=this;n.length>0;)o()},t.prototype.transformGraph=function(t){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),this.fuseConvActivationNodes(),t&&t.transformGraph(this),this.finalizeGraph()},t.prototype.finalizeGraph=function(){for(var t=this,e=0,n=new Array(this._nodes.length,0),r=0,o=0;o<this._nodes.length;o++)n[o]=r,this._nodes[o].executeNode?(r!==o&&(this._nodes[r]=this._nodes[o]),r++):this._nodes[o].outputs.forEach((function(e){t._allData[e]._from=-2}));for(this._nodes.splice(r,this._nodes.length-r),o=0;o<this._allData.length;o++){var a=this._allData[o];void 0!==a._from&&-1!==a._from&&-2!==a._from&&(a._from=n[a._from]);for(var i=0;i<a._to.length;i++){if(!(a._to[i]>=0))throw new Error("Trying to update a removed node");a._to[i]=n[a._to[i]]}}e=0;var s,u=function(n){if(-2===c._allData[n].from&&-1===c._allOutputIndices.indexOf(n+e))return e++,c._allData.splice(n,1),n--,s=n,"continue";if(e>0){var r=-1;void 0!==c._allData[n].from&&-1!==c._allData[n].from?-1!==(r=c._nodes[c._allData[n].from].outputs.indexOf(n+e))&&(c._nodes[c._allData[n].from].outputs[r]=n):-1!==(r=c._allInputIndices.indexOf(n+e))&&(c._allInputIndices[r]=n),c._allData[n].to.forEach((function(o){-1!==(r=t._nodes[o].inputs.indexOf(n+e))&&(t._nodes[o].inputs[r]=n)})),0===c._allData[n].to.length&&-1!==(r=c._allOutputIndices.indexOf(n+e))&&(c._allOutputIndices[r]=n)}s=n},c=this;for(o=0;o<this._allData.length;o++)u(o),o=s},t.prototype.deleteNode=function(t){var e,n,o=this._nodes[t];if(o.outputs.length>1)for(var a=1;a<o.outputs.length;a++)if(this._allData[o.outputs[a]].to.length>0)throw new Error("Node deletion with more than one output connected to other nodes is not supported. ");o.executeNode=!1;var i=o.inputs[0],s=o.outputs[0],u=this._allData[s].to;for(a=0;a<o.inputs.length;a++){var c=this._allData[o.inputs[a]].to.indexOf(t);if(-1===c)throw new Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[o.inputs[a]].to.splice(c,1)}this._allData[s]._to=[];var l=this._allOutputIndices.indexOf(s);if(-1!==l&&(this._allOutputIndices[l]=i),u&&u.length>0)try{for(var f=r(u),p=f.next();!p.done;p=f.next()){var d=p.value,h=this._nodes[d].inputs.indexOf(s);if(-1===h)throw new Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[d].inputs[h]=i,this._allData[i].to.push(d)}}catch(t){e={error:t}}finally{try{p&&!p.done&&(n=f.return)&&n.call(f)}finally{if(e)throw e.error}}},t.prototype.removeAllDropoutNodes=function(){var t,e,n=0;try{for(var o=r(this._nodes),a=o.next();!a.done;a=o.next()){var i=a.value;if("Dropout"===i.opType){if(1!==i.inputs.length)throw new Error("Dropout nodes should only contain one input. ");if(1!==i.outputs.length&&2!==i.outputs.length)throw new Error("Dropout nodes should contain either 1 or 2 output(s)");if(2===i.outputs.length&&0!==this._allData[i.outputs[1]]._to.length)throw new Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(n)}n++}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.removeAllIdentityNodes=function(){var t,e,n=0;try{for(var o=r(this._nodes),a=o.next();!a.done;a=o.next())"Identity"===a.value.opType&&this.deleteNode(n),n++}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.isActivation=function(t){switch(t.opType){case"Relu":case"Sigmoid":case"Clip":return!0;default:return!1}},t.prototype.fuseConvActivationNodes=function(){var t,e;try{for(var n=r(this._nodes),o=n.next();!o.done;o=n.next()){var a=o.value;if("Conv"===a.opType){var i=this._allData[a.outputs[0]]._to;if(1===i.length&&this.isActivation(this._nodes[i[0]])){var s=this._nodes[i[0]];if("Clip"===s.opType)if(1===s.inputs.length)try{a.attributes.set("activation_params","floats",[s.attributes.getFloat("min"),s.attributes.getFloat("max")])}catch(t){a.attributes.set("activation_params","floats",[u.MIN_CLIP,u.MAX_CLIP])}else{if(!(s.inputs.length>=3&&void 0!==this._allData[s.inputs[1]].tensor&&void 0!==this._allData[s.inputs[2]].tensor))continue;a.attributes.set("activation_params","floats",[this._allData[s.inputs[1]].tensor.floatData[0],this._allData[s.inputs[2]].tensor.floatData[0]])}a.attributes.set("activation","string",s.opType),this.deleteNode(i[0])}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}},t}()},1315:function(t,e){"use strict";var n,r,o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,s)}u((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(t,i)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.now=e.Profiler=e.Logger=void 0;var i=function(){function t(){}return t.prototype.log=function(t,e,n){},t}(),s=function(){function t(){}return t.prototype.log=function(t,e,n){console.log("".concat(this.color(t)," ").concat(n?"[35m"+n+"[0m ":"").concat(e))},t.prototype.color=function(t){switch(t){case"verbose":return"[34;40mv[0m";case"info":return"[32mi[0m";case"warning":return"[30;43mw[0m";case"error":return"[31;40me[0m";case"fatal":return"[101mf[0m";default:throw new Error("unsupported severity: ".concat(t))}},t}(),u={verbose:1e3,info:2e3,warning:4e3,error:5e3,fatal:6e3},c=((n={}).none=new i,n.console=new s,n),l={provider:"console",minimalSeverity:"warning",logDateTime:!0,logSourceLocation:!1},f=((r={})[""]=l,r);function p(t,e,n,r){if(void 0===e)return o=t,{verbose:p.verbose.bind(null,o),info:p.info.bind(null,o),warning:p.warning.bind(null,o),error:p.error.bind(null,o),fatal:p.fatal.bind(null,o)};if(void 0===n)d(t,e);else if("number"==typeof n&&void 0===r)d(t,e);else if("string"==typeof n&&void 0===r)d(t,n,0,e);else{if("string"!=typeof n||"number"!=typeof r)throw new TypeError("input is valid");d(t,n,0,e)}var o}function d(t,e,n,r){var o=f[r||""]||f[""];u[t]<u[o.minimalSeverity]||(o.logDateTime&&(e="".concat((new Date).toISOString(),"|").concat(e)),o.logSourceLocation,c[o.provider].log(t,e,r))}!function(t){function e(t){f={},n("",t||{})}function n(t,n){if("*"===t)e(n);else{var r=f[t]||l;f[t]={provider:n.provider||r.provider,minimalSeverity:n.minimalSeverity||r.minimalSeverity,logDateTime:void 0===n.logDateTime?r.logDateTime:n.logDateTime,logSourceLocation:void 0===n.logSourceLocation?r.logSourceLocation:n.logSourceLocation}}}t.verbose=function(e,n){t("verbose",e,n)},t.info=function(e,n){t("info",e,n)},t.warning=function(e,n){t("warning",e,n)},t.error=function(e,n){t("error",e,n)},t.fatal=function(e,n){t("fatal",e,n)},t.reset=e,t.set=n,t.setWithEnv=function(t){var e={};t.logLevel&&(e.minimalSeverity=t.logLevel),n("",e)}}(p||(p={})),e.Logger=p;var h=function(){function t(t,e,n,r,o,a){this.category=t,this.name=e,this.startTime=n,this.endCallback=r,this.timer=o,this.ctx=a}return t.prototype.end=function(){return o(this,void 0,void 0,(function(){return a(this,(function(t){return[2,this.endCallback(this)]}))}))},t.prototype.checkTimer=function(){return o(this,void 0,void 0,(function(){return a(this,(function(t){if(void 0===this.ctx||void 0===this.timer)throw new Error("No webgl timer found");return this.ctx.endTimer(),[2,this.ctx.waitForQueryAndGetTime(this.timer)]}))}))},t}(),g=function(t,e,n,r){this.category=t,this.name=e,this.startTime=n,this.endTime=r},m=function(){function t(t,e,n){this._started=!1,this._flushPointer=0,this._started=!1,this._maxNumberEvents=void 0===t?1e4:t,this._flushBatchSize=void 0===e?10:e,this._flushIntervalInMilliseconds=void 0===n?5e3:n}return t.create=function(t){return void 0===t?new this:new this(t.maxNumberEvents,t.flushBatchSize,t.flushIntervalInMilliseconds)},t.prototype.start=function(){this._started=!0,this._timingEvents=[],this._flushTime=(0,e.now)(),this._flushPointer=0},t.prototype.stop=function(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer])},t.prototype.event=function(t,e,n,r){var i=this,s=this._started?this.begin(t,e,r):void 0,u=!1,c=n();if(c&&"function"==typeof c.then)return u=!0,new Promise((function(t,e){c.then((function(e){return o(i,void 0,void 0,(function(){return a(this,(function(n){switch(n.label){case 0:return s?[4,s.end()]:[3,2];case 1:n.sent(),n.label=2;case 2:return t(e),[2]}}))}))}),(function(t){return o(i,void 0,void 0,(function(){return a(this,(function(n){switch(n.label){case 0:return s?[4,s.end()]:[3,2];case 1:n.sent(),n.label=2;case 2:return e(t),[2]}}))}))}))}));if(!u&&s){var l=s.end();if(l&&"function"==typeof l.then)return new Promise((function(t,e){l.then((function(){t(c)}),(function(t){e(t)}))}))}return c},t.prototype.begin=function(t,n,r){var i=this;if(!this._started)throw new Error("profiler is not started yet");if(void 0===r){var s=(0,e.now)();return this.flush(s),new h(t,n,s,(function(t){return i.endSync(t)}))}var u=r.beginTimer();return new h(t,n,0,(function(t){return o(i,void 0,void 0,(function(){return a(this,(function(e){return[2,this.end(t)]}))}))}),u,r)},t.prototype.end=function(t){return o(this,void 0,void 0,(function(){var e;return a(this,(function(n){switch(n.label){case 0:return[4,t.checkTimer()];case 1:return e=n.sent(),this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new g(t.category,t.name,t.startTime,e)),this.flush(e)),[2]}}))}))},t.prototype.endSync=function(t){var n=(0,e.now)();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new g(t.category,t.name,t.startTime,n)),this.flush(n))},t.prototype.logOneEvent=function(t){e.Logger.verbose("Profiler.".concat(t.category),"".concat((t.endTime-t.startTime).toFixed(2),"ms on event '").concat(t.name,"' at ").concat(t.endTime.toFixed(2)))},t.prototype.flush=function(t){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||t-this._flushTime>=this._flushIntervalInMilliseconds){for(var n=this._flushPointer;this._flushPointer<n+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=(0,e.now)()}},Object.defineProperty(t.prototype,"started",{get:function(){return this._started},enumerable:!1,configurable:!0}),t}();e.Profiler=m,e.now="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:Date.now},1745:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Model=void 0;var r=n(5686),o=n(1446),a=n(4662),i=n(1287),s=n(7273),u=i.onnxruntime.experimental.fbs,c=function(){function t(){}return t.prototype.load=function(t,e,n){if(!n)try{return void this.loadFromOnnxFormat(t,e)}catch(t){if(void 0!==n)throw t}this.loadFromOrtFormat(t,e)},t.prototype.loadFromOnnxFormat=function(t,e){var n=o.onnx.ModelProto.decode(t);if(s.LongUtil.longToNumber(n.irVersion)<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=n.opsetImport.map((function(t){return{domain:t.domain,version:s.LongUtil.longToNumber(t.version)}})),this._graph=a.Graph.from(n.graph,e)},t.prototype.loadFromOrtFormat=function(t,e){var n=new r.flatbuffers.ByteBuffer(t),o=u.InferenceSession.getRootAsInferenceSession(n).model();if(s.LongUtil.longToNumber(o.irVersion())<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=[];for(var i=0;i<o.opsetImportLength();i++){var c=o.opsetImport(i);this._opsets.push({domain:null==c?void 0:c.domain(),version:s.LongUtil.longToNumber(c.version())})}this._graph=a.Graph.from(o.graph(),e)},Object.defineProperty(t.prototype,"graph",{get:function(){return this._graph},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"opsets",{get:function(){return this._opsets},enumerable:!1,configurable:!0}),t}();e.Model=c},6145:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FLOAT_TYPES=e.INT_TYPES=e.NUMBER_TYPES=void 0,e.NUMBER_TYPES=["float32","float64","int32","int16","int8","uint16","uint32","uint8"],e.INT_TYPES=["int32","int16","int8","uint16","uint32","uint8"],e.FLOAT_TYPES=["float32","float64"]},5881:function(t,e){"use strict";var n=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function r(t,e){if(e.endsWith("+")){var n=Number.parseInt(e.substring(0,e.length-1),10);return!isNaN(n)&&n<=t}if(2===e.split("-").length){var r=e.split("-"),o=(n=Number.parseInt(r[0],10),Number.parseInt(r[1],10));return!isNaN(n)&&!isNaN(o)&&n<=t&&t<=o}return Number.parseInt(e,10)===t}Object.defineProperty(e,"__esModule",{value:!0}),e.resolveOperator=void 0,e.resolveOperator=function(t,e,o){var a,i,s,u;try{for(var c=n(o),l=c.next();!l.done;l=c.next()){var f=l.value,p=f[0],d=f[1],h=f[2],g=f[3],m=f[4];if(t.opType===p)try{for(var y=(s=void 0,n(e)),b=y.next();!b.done;b=y.next()){var v=b.value;if((v.domain===d||"ai.onnx"===v.domain&&""===d)&&r(v.version,h))return{opImpl:g,opInit:m}}}catch(t){s={error:t}}finally{try{b&&!b.done&&(u=y.return)&&u.call(y)}finally{if(s)throw s.error}}}}catch(t){a={error:t}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(a)throw a.error}}throw new TypeError("cannot resolve operator '".concat(t.opType,"' with opsets: ").concat(e.map((function(t){return"".concat(t.domain||"ai.onnx"," v").concat(t.version)})).join(", ")))}},1287:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.onnxruntime=void 0;var r,o,a,i,s=n(5686);r=e.onnxruntime||(e.onnxruntime={}),o=r.experimental||(r.experimental={}),a=o.fbs||(o.fbs={}),(i=a.AttributeType||(a.AttributeType={}))[i.UNDEFINED=0]="UNDEFINED",i[i.FLOAT=1]="FLOAT",i[i.INT=2]="INT",i[i.STRING=3]="STRING",i[i.TENSOR=4]="TENSOR",i[i.GRAPH=5]="GRAPH",i[i.FLOATS=6]="FLOATS",i[i.INTS=7]="INTS",i[i.STRINGS=8]="STRINGS",i[i.TENSORS=9]="TENSORS",i[i.GRAPHS=10]="GRAPHS",i[i.SPARSE_TENSOR=11]="SPARSE_TENSOR",i[i.SPARSE_TENSORS=12]="SPARSE_TENSORS",function(t){!function(t){!function(t){var e;(e=t.DimensionValueType||(t.DimensionValueType={}))[e.UNKNOWN=0]="UNKNOWN",e[e.VALUE=1]="VALUE",e[e.PARAM=2]="PARAM"}(t.fbs||(t.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(t){!function(t){var e;(e=t.TensorDataType||(t.TensorDataType={}))[e.UNDEFINED=0]="UNDEFINED",e[e.FLOAT=1]="FLOAT",e[e.UINT8=2]="UINT8",e[e.INT8=3]="INT8",e[e.UINT16=4]="UINT16",e[e.INT16=5]="INT16",e[e.INT32=6]="INT32",e[e.INT64=7]="INT64",e[e.STRING=8]="STRING",e[e.BOOL=9]="BOOL",e[e.FLOAT16=10]="FLOAT16",e[e.DOUBLE=11]="DOUBLE",e[e.UINT32=12]="UINT32",e[e.UINT64=13]="UINT64",e[e.COMPLEX64=14]="COMPLEX64",e[e.COMPLEX128=15]="COMPLEX128",e[e.BFLOAT16=16]="BFLOAT16",e[e.FLOAT8E4M3FN=17]="FLOAT8E4M3FN",e[e.FLOAT8E4M3FNUZ=18]="FLOAT8E4M3FNUZ",e[e.FLOAT8E5M2=19]="FLOAT8E5M2",e[e.FLOAT8E5M2FNUZ=20]="FLOAT8E5M2FNUZ"}(t.fbs||(t.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(t){!function(t){var e;(e=t.NodeType||(t.NodeType={}))[e.Primitive=0]="Primitive",e[e.Fused=1]="Fused"}(t.fbs||(t.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(t){!function(t){var e;(e=t.TypeInfoValue||(t.TypeInfoValue={}))[e.NONE=0]="NONE",e[e.tensor_type=1]="tensor_type",e[e.sequence_type=2]="sequence_type",e[e.map_type=3]="map_type"}(t.fbs||(t.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsShape=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.getSizePrefixedRootAsShape=function(t,n){return t.setPosition(t.position()+s.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.dim=function(e,n){var r=this.bb.__offset(this.bb_pos,4);return r?(n||new t.experimental.fbs.Dimension).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null},e.prototype.dimLength=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0},e.startShape=function(t){t.startObject(1)},e.addDim=function(t,e){t.addFieldOffset(0,e,0)},e.createDimVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startDimVector=function(t,e){t.startVector(4,e,4)},e.endShape=function(t){return t.endObject()},e.createShape=function(t,n){return e.startShape(t),e.addDim(t,n),e.endShape(t)},e}();e.Shape=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsDimension=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.getSizePrefixedRootAsDimension=function(t,n){return t.setPosition(t.position()+s.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.value=function(e){var n=this.bb.__offset(this.bb_pos,4);return n?(e||new t.experimental.fbs.DimensionValue).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.prototype.denotation=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null},e.startDimension=function(t){t.startObject(2)},e.addValue=function(t,e){t.addFieldOffset(0,e,0)},e.addDenotation=function(t,e){t.addFieldOffset(1,e,0)},e.endDimension=function(t){return t.endObject()},e.createDimension=function(t,n,r){return e.startDimension(t),e.addValue(t,n),e.addDenotation(t,r),e.endDimension(t)},e}();e.Dimension=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsDimensionValue=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.getSizePrefixedRootAsDimensionValue=function(t,n){return t.setPosition(t.position()+s.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.dimType=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt8(this.bb_pos+e):t.experimental.fbs.DimensionValueType.UNKNOWN},e.prototype.dimValue=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)},e.prototype.dimParam=function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null},e.startDimensionValue=function(t){t.startObject(3)},e.addDimType=function(e,n){e.addFieldInt8(0,n,t.experimental.fbs.DimensionValueType.UNKNOWN)},e.addDimValue=function(t,e){t.addFieldInt64(1,e,t.createLong(0,0))},e.addDimParam=function(t,e){t.addFieldOffset(2,e,0)},e.endDimensionValue=function(t){return t.endObject()},e.createDimensionValue=function(t,n,r,o){return e.startDimensionValue(t),e.addDimType(t,n),e.addDimValue(t,r),e.addDimParam(t,o),e.endDimensionValue(t)},e}();e.DimensionValue=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsTensorTypeAndShape=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.getSizePrefixedRootAsTensorTypeAndShape=function(t,n){return t.setPosition(t.position()+s.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.elemType=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):t.experimental.fbs.TensorDataType.UNDEFINED},e.prototype.shape=function(e){var n=this.bb.__offset(this.bb_pos,6);return n?(e||new t.experimental.fbs.Shape).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.startTensorTypeAndShape=function(t){t.startObject(2)},e.addElemType=function(e,n){e.addFieldInt32(0,n,t.experimental.fbs.TensorDataType.UNDEFINED)},e.addShape=function(t,e){t.addFieldOffset(1,e,0)},e.endTensorTypeAndShape=function(t){return t.endObject()},e.createTensorTypeAndShape=function(t,n,r){return e.startTensorTypeAndShape(t),e.addElemType(t,n),e.addShape(t,r),e.endTensorTypeAndShape(t)},e}();e.TensorTypeAndShape=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsMapType=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.getSizePrefixedRootAsMapType=function(t,n){return t.setPosition(t.position()+s.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.keyType=function(){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):t.experimental.fbs.TensorDataType.UNDEFINED},e.prototype.valueType=function(e){var n=this.bb.__offset(this.bb_pos,6);return n?(e||new t.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.startMapType=function(t){t.startObject(2)},e.addKeyType=function(e,n){e.addFieldInt32(0,n,t.experimental.fbs.TensorDataType.UNDEFINED)},e.addValueType=function(t,e){t.addFieldOffset(1,e,0)},e.endMapType=function(t){return t.endObject()},e.createMapType=function(t,n,r){return e.startMapType(t),e.addKeyType(t,n),e.addValueType(t,r),e.endMapType(t)},e}();e.MapType=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsSequenceType=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.getSizePrefixedRootAsSequenceType=function(t,n){return t.setPosition(t.position()+s.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.elemType=function(e){var n=this.bb.__offset(this.bb_pos,4);return n?(e||new t.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.startSequenceType=function(t){t.startObject(1)},e.addElemType=function(t,e){t.addFieldOffset(0,e,0)},e.endSequenceType=function(t){return t.endObject()},e.createSequenceType=function(t,n){return e.startSequenceType(t),e.addElemType(t,n),e.endSequenceType(t)},e}();e.SequenceType=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(t){!function(t){var e=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.prototype.nodeIndex=function(){return this.bb.readUint32(this.bb_pos)},t.prototype.srcArgIndex=function(){return this.bb.readInt32(this.bb_pos+4)},t.prototype.dstArgIndex=function(){return this.bb.readInt32(this.bb_pos+8)},t.createEdgeEnd=function(t,e,n,r){return t.prep(4,12),t.writeInt32(r),t.writeInt32(n),t.writeInt32(e),t.offset()},t}();t.EdgeEnd=e}(t.fbs||(t.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsNodeEdge=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.getSizePrefixedRootAsNodeEdge=function(t,n){return t.setPosition(t.position()+s.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.nodeIndex=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readUint32(this.bb_pos+t):0},e.prototype.inputEdges=function(e,n){var r=this.bb.__offset(this.bb_pos,6);return r?(n||new t.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+r)+12*e,this.bb):null},e.prototype.inputEdgesLength=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.outputEdges=function(e,n){var r=this.bb.__offset(this.bb_pos,8);return r?(n||new t.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+r)+12*e,this.bb):null},e.prototype.outputEdgesLength=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0},e.startNodeEdge=function(t){t.startObject(3)},e.addNodeIndex=function(t,e){t.addFieldInt32(0,e,0)},e.addInputEdges=function(t,e){t.addFieldOffset(1,e,0)},e.startInputEdgesVector=function(t,e){t.startVector(12,e,4)},e.addOutputEdges=function(t,e){t.addFieldOffset(2,e,0)},e.startOutputEdgesVector=function(t,e){t.startVector(12,e,4)},e.endNodeEdge=function(t){return t.endObject()},e.createNodeEdge=function(t,n,r,o){return e.startNodeEdge(t),e.addNodeIndex(t,n),e.addInputEdges(t,r),e.addOutputEdges(t,o),e.endNodeEdge(t)},e}();e.NodeEdge=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsNode=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.getSizePrefixedRootAsNode=function(t,n){return t.setPosition(t.position()+s.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.name=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.docString=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.domain=function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.sinceVersion=function(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt32(this.bb_pos+t):0},e.prototype.index=function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readUint32(this.bb_pos+t):0},e.prototype.opType=function(t){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.type=function(){var e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readInt32(this.bb_pos+e):t.experimental.fbs.NodeType.Primitive},e.prototype.executionProviderType=function(t){var e=this.bb.__offset(this.bb_pos,18);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.inputs=function(t,e){var n=this.bb.__offset(this.bb_pos,20);return n?this.bb.__string(this.bb.__vector(this.bb_pos+n)+4*t,e):null},e.prototype.inputsLength=function(){var t=this.bb.__offset(this.bb_pos,20);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.outputs=function(t,e){var n=this.bb.__offset(this.bb_pos,22);return n?this.bb.__string(this.bb.__vector(this.bb_pos+n)+4*t,e):null},e.prototype.outputsLength=function(){var t=this.bb.__offset(this.bb_pos,22);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.attributes=function(e,n){var r=this.bb.__offset(this.bb_pos,24);return r?(n||new t.experimental.fbs.Attribute).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null},e.prototype.attributesLength=function(){var t=this.bb.__offset(this.bb_pos,24);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.inputArgCounts=function(t){var e=this.bb.__offset(this.bb_pos,26);return e?this.bb.readInt32(this.bb.__vector(this.bb_pos+e)+4*t):0},e.prototype.inputArgCountsLength=function(){var t=this.bb.__offset(this.bb_pos,26);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.inputArgCountsArray=function(){var t=this.bb.__offset(this.bb_pos,26);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null},e.prototype.implicitInputs=function(t,e){var n=this.bb.__offset(this.bb_pos,28);return n?this.bb.__string(this.bb.__vector(this.bb_pos+n)+4*t,e):null},e.prototype.implicitInputsLength=function(){var t=this.bb.__offset(this.bb_pos,28);return t?this.bb.__vector_len(this.bb_pos+t):0},e.startNode=function(t){t.startObject(13)},e.addName=function(t,e){t.addFieldOffset(0,e,0)},e.addDocString=function(t,e){t.addFieldOffset(1,e,0)},e.addDomain=function(t,e){t.addFieldOffset(2,e,0)},e.addSinceVersion=function(t,e){t.addFieldInt32(3,e,0)},e.addIndex=function(t,e){t.addFieldInt32(4,e,0)},e.addOpType=function(t,e){t.addFieldOffset(5,e,0)},e.addType=function(e,n){e.addFieldInt32(6,n,t.experimental.fbs.NodeType.Primitive)},e.addExecutionProviderType=function(t,e){t.addFieldOffset(7,e,0)},e.addInputs=function(t,e){t.addFieldOffset(8,e,0)},e.createInputsVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startInputsVector=function(t,e){t.startVector(4,e,4)},e.addOutputs=function(t,e){t.addFieldOffset(9,e,0)},e.createOutputsVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startOutputsVector=function(t,e){t.startVector(4,e,4)},e.addAttributes=function(t,e){t.addFieldOffset(10,e,0)},e.createAttributesVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startAttributesVector=function(t,e){t.startVector(4,e,4)},e.addInputArgCounts=function(t,e){t.addFieldOffset(11,e,0)},e.createInputArgCountsVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addInt32(e[n]);return t.endVector()},e.startInputArgCountsVector=function(t,e){t.startVector(4,e,4)},e.addImplicitInputs=function(t,e){t.addFieldOffset(12,e,0)},e.createImplicitInputsVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startImplicitInputsVector=function(t,e){t.startVector(4,e,4)},e.endNode=function(t){return t.endObject()},e.createNode=function(t,n,r,o,a,i,s,u,c,l,f,p,d,h){return e.startNode(t),e.addName(t,n),e.addDocString(t,r),e.addDomain(t,o),e.addSinceVersion(t,a),e.addIndex(t,i),e.addOpType(t,s),e.addType(t,u),e.addExecutionProviderType(t,c),e.addInputs(t,l),e.addOutputs(t,f),e.addAttributes(t,p),e.addInputArgCounts(t,d),e.addImplicitInputs(t,h),e.endNode(t)},e}();e.Node=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsValueInfo=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.getSizePrefixedRootAsValueInfo=function(t,n){return t.setPosition(t.position()+s.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.name=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.docString=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.type=function(e){var n=this.bb.__offset(this.bb_pos,8);return n?(e||new t.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.startValueInfo=function(t){t.startObject(3)},e.addName=function(t,e){t.addFieldOffset(0,e,0)},e.addDocString=function(t,e){t.addFieldOffset(1,e,0)},e.addType=function(t,e){t.addFieldOffset(2,e,0)},e.endValueInfo=function(t){return t.endObject()},e.createValueInfo=function(t,n,r,o){return e.startValueInfo(t),e.addName(t,n),e.addDocString(t,r),e.addType(t,o),e.endValueInfo(t)},e}();e.ValueInfo=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsTypeInfo=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.getSizePrefixedRootAsTypeInfo=function(t,n){return t.setPosition(t.position()+s.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.denotation=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.valueType=function(){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):t.experimental.fbs.TypeInfoValue.NONE},e.prototype.value=function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__union(t,this.bb_pos+e):null},e.startTypeInfo=function(t){t.startObject(3)},e.addDenotation=function(t,e){t.addFieldOffset(0,e,0)},e.addValueType=function(e,n){e.addFieldInt8(1,n,t.experimental.fbs.TypeInfoValue.NONE)},e.addValue=function(t,e){t.addFieldOffset(2,e,0)},e.endTypeInfo=function(t){return t.endObject()},e.createTypeInfo=function(t,n,r,o){return e.startTypeInfo(t),e.addDenotation(t,n),e.addValueType(t,r),e.addValue(t,o),e.endTypeInfo(t)},e}();e.TypeInfo=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(t){!function(t){var e=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsOperatorSetId=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsOperatorSetId=function(e,n){return e.setPosition(e.position()+s.flatbuffers.SIZE_PREFIX_LENGTH),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.domain=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},t.prototype.version=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)},t.startOperatorSetId=function(t){t.startObject(2)},t.addDomain=function(t,e){t.addFieldOffset(0,e,0)},t.addVersion=function(t,e){t.addFieldInt64(1,e,t.createLong(0,0))},t.endOperatorSetId=function(t){return t.endObject()},t.createOperatorSetId=function(e,n,r){return t.startOperatorSetId(e),t.addDomain(e,n),t.addVersion(e,r),t.endOperatorSetId(e)},t}();t.OperatorSetId=e}(t.fbs||(t.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsTensor=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.getSizePrefixedRootAsTensor=function(t,n){return t.setPosition(t.position()+s.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.name=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.docString=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.dims=function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt64(this.bb.__vector(this.bb_pos+e)+8*t):this.bb.createLong(0,0)},e.prototype.dimsLength=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.dataType=function(){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt32(this.bb_pos+e):t.experimental.fbs.TensorDataType.UNDEFINED},e.prototype.rawData=function(t){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readUint8(this.bb.__vector(this.bb_pos+e)+t):0},e.prototype.rawDataLength=function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.rawDataArray=function(){var t=this.bb.__offset(this.bb_pos,12);return t?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null},e.prototype.stringData=function(t,e){var n=this.bb.__offset(this.bb_pos,14);return n?this.bb.__string(this.bb.__vector(this.bb_pos+n)+4*t,e):null},e.prototype.stringDataLength=function(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0},e.startTensor=function(t){t.startObject(6)},e.addName=function(t,e){t.addFieldOffset(0,e,0)},e.addDocString=function(t,e){t.addFieldOffset(1,e,0)},e.addDims=function(t,e){t.addFieldOffset(2,e,0)},e.createDimsVector=function(t,e){t.startVector(8,e.length,8);for(var n=e.length-1;n>=0;n--)t.addInt64(e[n]);return t.endVector()},e.startDimsVector=function(t,e){t.startVector(8,e,8)},e.addDataType=function(e,n){e.addFieldInt32(3,n,t.experimental.fbs.TensorDataType.UNDEFINED)},e.addRawData=function(t,e){t.addFieldOffset(4,e,0)},e.createRawDataVector=function(t,e){t.startVector(1,e.length,1);for(var n=e.length-1;n>=0;n--)t.addInt8(e[n]);return t.endVector()},e.startRawDataVector=function(t,e){t.startVector(1,e,1)},e.addStringData=function(t,e){t.addFieldOffset(5,e,0)},e.createStringDataVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startStringDataVector=function(t,e){t.startVector(4,e,4)},e.endTensor=function(t){return t.endObject()},e.createTensor=function(t,n,r,o,a,i,s){return e.startTensor(t),e.addName(t,n),e.addDocString(t,r),e.addDims(t,o),e.addDataType(t,a),e.addRawData(t,i),e.addStringData(t,s),e.endTensor(t)},e}();e.Tensor=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsSparseTensor=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.getSizePrefixedRootAsSparseTensor=function(t,n){return t.setPosition(t.position()+s.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.values=function(e){var n=this.bb.__offset(this.bb_pos,4);return n?(e||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.prototype.indices=function(e){var n=this.bb.__offset(this.bb_pos,6);return n?(e||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.prototype.dims=function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt64(this.bb.__vector(this.bb_pos+e)+8*t):this.bb.createLong(0,0)},e.prototype.dimsLength=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0},e.startSparseTensor=function(t){t.startObject(3)},e.addValues=function(t,e){t.addFieldOffset(0,e,0)},e.addIndices=function(t,e){t.addFieldOffset(1,e,0)},e.addDims=function(t,e){t.addFieldOffset(2,e,0)},e.createDimsVector=function(t,e){t.startVector(8,e.length,8);for(var n=e.length-1;n>=0;n--)t.addInt64(e[n]);return t.endVector()},e.startDimsVector=function(t,e){t.startVector(8,e,8)},e.endSparseTensor=function(t){return t.endObject()},e.createSparseTensor=function(t,n,r,o){return e.startSparseTensor(t),e.addValues(t,n),e.addIndices(t,r),e.addDims(t,o),e.endSparseTensor(t)},e}();e.SparseTensor=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsAttribute=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.getSizePrefixedRootAsAttribute=function(t,n){return t.setPosition(t.position()+s.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.name=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.docString=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.type=function(){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt32(this.bb_pos+e):t.experimental.fbs.AttributeType.UNDEFINED},e.prototype.f=function(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readFloat32(this.bb_pos+t):0},e.prototype.i=function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)},e.prototype.s=function(t){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.t=function(e){var n=this.bb.__offset(this.bb_pos,16);return n?(e||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.prototype.g=function(e){var n=this.bb.__offset(this.bb_pos,18);return n?(e||new t.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.prototype.floats=function(t){var e=this.bb.__offset(this.bb_pos,20);return e?this.bb.readFloat32(this.bb.__vector(this.bb_pos+e)+4*t):0},e.prototype.floatsLength=function(){var t=this.bb.__offset(this.bb_pos,20);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.floatsArray=function(){var t=this.bb.__offset(this.bb_pos,20);return t?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null},e.prototype.ints=function(t){var e=this.bb.__offset(this.bb_pos,22);return e?this.bb.readInt64(this.bb.__vector(this.bb_pos+e)+8*t):this.bb.createLong(0,0)},e.prototype.intsLength=function(){var t=this.bb.__offset(this.bb_pos,22);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.strings=function(t,e){var n=this.bb.__offset(this.bb_pos,24);return n?this.bb.__string(this.bb.__vector(this.bb_pos+n)+4*t,e):null},e.prototype.stringsLength=function(){var t=this.bb.__offset(this.bb_pos,24);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.tensors=function(e,n){var r=this.bb.__offset(this.bb_pos,26);return r?(n||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null},e.prototype.tensorsLength=function(){var t=this.bb.__offset(this.bb_pos,26);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.graphs=function(e,n){var r=this.bb.__offset(this.bb_pos,28);return r?(n||new t.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null},e.prototype.graphsLength=function(){var t=this.bb.__offset(this.bb_pos,28);return t?this.bb.__vector_len(this.bb_pos+t):0},e.startAttribute=function(t){t.startObject(13)},e.addName=function(t,e){t.addFieldOffset(0,e,0)},e.addDocString=function(t,e){t.addFieldOffset(1,e,0)},e.addType=function(e,n){e.addFieldInt32(2,n,t.experimental.fbs.AttributeType.UNDEFINED)},e.addF=function(t,e){t.addFieldFloat32(3,e,0)},e.addI=function(t,e){t.addFieldInt64(4,e,t.createLong(0,0))},e.addS=function(t,e){t.addFieldOffset(5,e,0)},e.addT=function(t,e){t.addFieldOffset(6,e,0)},e.addG=function(t,e){t.addFieldOffset(7,e,0)},e.addFloats=function(t,e){t.addFieldOffset(8,e,0)},e.createFloatsVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addFloat32(e[n]);return t.endVector()},e.startFloatsVector=function(t,e){t.startVector(4,e,4)},e.addInts=function(t,e){t.addFieldOffset(9,e,0)},e.createIntsVector=function(t,e){t.startVector(8,e.length,8);for(var n=e.length-1;n>=0;n--)t.addInt64(e[n]);return t.endVector()},e.startIntsVector=function(t,e){t.startVector(8,e,8)},e.addStrings=function(t,e){t.addFieldOffset(10,e,0)},e.createStringsVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startStringsVector=function(t,e){t.startVector(4,e,4)},e.addTensors=function(t,e){t.addFieldOffset(11,e,0)},e.createTensorsVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startTensorsVector=function(t,e){t.startVector(4,e,4)},e.addGraphs=function(t,e){t.addFieldOffset(12,e,0)},e.createGraphsVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startGraphsVector=function(t,e){t.startVector(4,e,4)},e.endAttribute=function(t){return t.endObject()},e.createAttribute=function(t,n,r,o,a,i,s,u,c,l,f,p,d,h){return e.startAttribute(t),e.addName(t,n),e.addDocString(t,r),e.addType(t,o),e.addF(t,a),e.addI(t,i),e.addS(t,s),e.addT(t,u),e.addG(t,c),e.addFloats(t,l),e.addInts(t,f),e.addStrings(t,p),e.addTensors(t,d),e.addGraphs(t,h),e.endAttribute(t)},e}();e.Attribute=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsGraph=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.getSizePrefixedRootAsGraph=function(t,n){return t.setPosition(t.position()+s.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.initializers=function(e,n){var r=this.bb.__offset(this.bb_pos,4);return r?(n||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null},e.prototype.initializersLength=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.nodeArgs=function(e,n){var r=this.bb.__offset(this.bb_pos,6);return r?(n||new t.experimental.fbs.ValueInfo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null},e.prototype.nodeArgsLength=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.nodes=function(e,n){var r=this.bb.__offset(this.bb_pos,8);return r?(n||new t.experimental.fbs.Node).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null},e.prototype.nodesLength=function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.maxNodeIndex=function(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readUint32(this.bb_pos+t):0},e.prototype.nodeEdges=function(e,n){var r=this.bb.__offset(this.bb_pos,12);return r?(n||new t.experimental.fbs.NodeEdge).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null},e.prototype.nodeEdgesLength=function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.inputs=function(t,e){var n=this.bb.__offset(this.bb_pos,14);return n?this.bb.__string(this.bb.__vector(this.bb_pos+n)+4*t,e):null},e.prototype.inputsLength=function(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.outputs=function(t,e){var n=this.bb.__offset(this.bb_pos,16);return n?this.bb.__string(this.bb.__vector(this.bb_pos+n)+4*t,e):null},e.prototype.outputsLength=function(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.sparseInitializers=function(e,n){var r=this.bb.__offset(this.bb_pos,18);return r?(n||new t.experimental.fbs.SparseTensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null},e.prototype.sparseInitializersLength=function(){var t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__vector_len(this.bb_pos+t):0},e.startGraph=function(t){t.startObject(8)},e.addInitializers=function(t,e){t.addFieldOffset(0,e,0)},e.createInitializersVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startInitializersVector=function(t,e){t.startVector(4,e,4)},e.addNodeArgs=function(t,e){t.addFieldOffset(1,e,0)},e.createNodeArgsVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startNodeArgsVector=function(t,e){t.startVector(4,e,4)},e.addNodes=function(t,e){t.addFieldOffset(2,e,0)},e.createNodesVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startNodesVector=function(t,e){t.startVector(4,e,4)},e.addMaxNodeIndex=function(t,e){t.addFieldInt32(3,e,0)},e.addNodeEdges=function(t,e){t.addFieldOffset(4,e,0)},e.createNodeEdgesVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startNodeEdgesVector=function(t,e){t.startVector(4,e,4)},e.addInputs=function(t,e){t.addFieldOffset(5,e,0)},e.createInputsVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startInputsVector=function(t,e){t.startVector(4,e,4)},e.addOutputs=function(t,e){t.addFieldOffset(6,e,0)},e.createOutputsVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startOutputsVector=function(t,e){t.startVector(4,e,4)},e.addSparseInitializers=function(t,e){t.addFieldOffset(7,e,0)},e.createSparseInitializersVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startSparseInitializersVector=function(t,e){t.startVector(4,e,4)},e.endGraph=function(t){return t.endObject()},e.createGraph=function(t,n,r,o,a,i,s,u,c){return e.startGraph(t),e.addInitializers(t,n),e.addNodeArgs(t,r),e.addNodes(t,o),e.addMaxNodeIndex(t,a),e.addNodeEdges(t,i),e.addInputs(t,s),e.addOutputs(t,u),e.addSparseInitializers(t,c),e.endGraph(t)},e}();e.Graph=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsModel=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.getSizePrefixedRootAsModel=function(t,n){return t.setPosition(t.position()+s.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.irVersion=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)},e.prototype.opsetImport=function(e,n){var r=this.bb.__offset(this.bb_pos,6);return r?(n||new t.experimental.fbs.OperatorSetId).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null},e.prototype.opsetImportLength=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0},e.prototype.producerName=function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.producerVersion=function(t){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.domain=function(t){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.modelVersion=function(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)},e.prototype.docString=function(t){var e=this.bb.__offset(this.bb_pos,16);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.graph=function(e){var n=this.bb.__offset(this.bb_pos,18);return n?(e||new t.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.prototype.graphDocString=function(t){var e=this.bb.__offset(this.bb_pos,20);return e?this.bb.__string(this.bb_pos+e,t):null},e.startModel=function(t){t.startObject(9)},e.addIrVersion=function(t,e){t.addFieldInt64(0,e,t.createLong(0,0))},e.addOpsetImport=function(t,e){t.addFieldOffset(1,e,0)},e.createOpsetImportVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startOpsetImportVector=function(t,e){t.startVector(4,e,4)},e.addProducerName=function(t,e){t.addFieldOffset(2,e,0)},e.addProducerVersion=function(t,e){t.addFieldOffset(3,e,0)},e.addDomain=function(t,e){t.addFieldOffset(4,e,0)},e.addModelVersion=function(t,e){t.addFieldInt64(5,e,t.createLong(0,0))},e.addDocString=function(t,e){t.addFieldOffset(6,e,0)},e.addGraph=function(t,e){t.addFieldOffset(7,e,0)},e.addGraphDocString=function(t,e){t.addFieldOffset(8,e,0)},e.endModel=function(t){return t.endObject()},e.createModel=function(t,n,r,o,a,i,s,u,c,l){return e.startModel(t),e.addIrVersion(t,n),e.addOpsetImport(t,r),e.addProducerName(t,o),e.addProducerVersion(t,a),e.addDomain(t,i),e.addModelVersion(t,s),e.addDocString(t,u),e.addGraph(t,c),e.addGraphDocString(t,l),e.endModel(t)},e}();e.Model=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(t){!function(t){var e=function(){function t(){this.bb=null,this.bb_pos=0}return t.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},t.getRootAsKernelCreateInfos=function(e,n){return(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.getSizePrefixedRootAsKernelCreateInfos=function(e,n){return e.setPosition(e.position()+s.flatbuffers.SIZE_PREFIX_LENGTH),(n||new t).__init(e.readInt32(e.position())+e.position(),e)},t.prototype.nodeIndices=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint32(this.bb.__vector(this.bb_pos+e)+4*t):0},t.prototype.nodeIndicesLength=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0},t.prototype.nodeIndicesArray=function(){var t=this.bb.__offset(this.bb_pos,4);return t?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null},t.prototype.kernelDefHashes=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint64(this.bb.__vector(this.bb_pos+e)+8*t):this.bb.createLong(0,0)},t.prototype.kernelDefHashesLength=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0},t.startKernelCreateInfos=function(t){t.startObject(2)},t.addNodeIndices=function(t,e){t.addFieldOffset(0,e,0)},t.createNodeIndicesVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addInt32(e[n]);return t.endVector()},t.startNodeIndicesVector=function(t,e){t.startVector(4,e,4)},t.addKernelDefHashes=function(t,e){t.addFieldOffset(1,e,0)},t.createKernelDefHashesVector=function(t,e){t.startVector(8,e.length,8);for(var n=e.length-1;n>=0;n--)t.addInt64(e[n]);return t.endVector()},t.startKernelDefHashesVector=function(t,e){t.startVector(8,e,8)},t.endKernelCreateInfos=function(t){return t.endObject()},t.createKernelCreateInfos=function(e,n,r){return t.startKernelCreateInfos(e),t.addNodeIndices(e,n),t.addKernelDefHashes(e,r),t.endKernelCreateInfos(e)},t}();t.KernelCreateInfos=e}(t.fbs||(t.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsSubGraphSessionState=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.getSizePrefixedRootAsSubGraphSessionState=function(t,n){return t.setPosition(t.position()+s.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.graphId=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.sessionState=function(e){var n=this.bb.__offset(this.bb_pos,6);return n?(e||new t.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.startSubGraphSessionState=function(t){t.startObject(2)},e.addGraphId=function(t,e){t.addFieldOffset(0,e,0)},e.addSessionState=function(t,e){t.addFieldOffset(1,e,0)},e.endSubGraphSessionState=function(t){var e=t.endObject();return t.requiredField(e,4),e},e.createSubGraphSessionState=function(t,n,r){return e.startSubGraphSessionState(t),e.addGraphId(t,n),e.addSessionState(t,r),e.endSubGraphSessionState(t)},e}();e.SubGraphSessionState=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsSessionState=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.getSizePrefixedRootAsSessionState=function(t,n){return t.setPosition(t.position()+s.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.prototype.kernels=function(e){var n=this.bb.__offset(this.bb_pos,4);return n?(e||new t.experimental.fbs.KernelCreateInfos).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.prototype.subGraphSessionStates=function(e,n){var r=this.bb.__offset(this.bb_pos,6);return r?(n||new t.experimental.fbs.SubGraphSessionState).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null},e.prototype.subGraphSessionStatesLength=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0},e.startSessionState=function(t){t.startObject(2)},e.addKernels=function(t,e){t.addFieldOffset(0,e,0)},e.addSubGraphSessionStates=function(t,e){t.addFieldOffset(1,e,0)},e.createSubGraphSessionStatesVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},e.startSubGraphSessionStatesVector=function(t,e){t.startVector(4,e,4)},e.endSessionState=function(t){return t.endObject()},e.createSessionState=function(t,n,r){return e.startSessionState(t),e.addKernels(t,n),e.addSubGraphSessionStates(t,r),e.endSessionState(t)},e}();e.SessionState=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(t){!function(e){!function(e){var n=function(){function e(){this.bb=null,this.bb_pos=0}return e.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},e.getRootAsInferenceSession=function(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.getSizePrefixedRootAsInferenceSession=function(t,n){return t.setPosition(t.position()+s.flatbuffers.SIZE_PREFIX_LENGTH),(n||new e).__init(t.readInt32(t.position())+t.position(),t)},e.bufferHasIdentifier=function(t){return t.__has_identifier("ORTM")},e.prototype.ortVersion=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},e.prototype.model=function(e){var n=this.bb.__offset(this.bb_pos,6);return n?(e||new t.experimental.fbs.Model).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.prototype.sessionState=function(e){var n=this.bb.__offset(this.bb_pos,8);return n?(e||new t.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null},e.startInferenceSession=function(t){t.startObject(3)},e.addOrtVersion=function(t,e){t.addFieldOffset(0,e,0)},e.addModel=function(t,e){t.addFieldOffset(1,e,0)},e.addSessionState=function(t,e){t.addFieldOffset(2,e,0)},e.endInferenceSession=function(t){return t.endObject()},e.finishInferenceSessionBuffer=function(t,e){t.finish(e,"ORTM")},e.finishSizePrefixedInferenceSessionBuffer=function(t,e){t.finish(e,"ORTM",!0)},e.createInferenceSession=function(t,n,r,o){return e.startInferenceSession(t),e.addOrtVersion(t,n),e.addModel(t,r),e.addSessionState(t,o),e.endInferenceSession(t)},e}();e.InferenceSession=n}(e.fbs||(e.fbs={}))}(t.experimental||(t.experimental={}))}(e.onnxruntime||(e.onnxruntime={}))},1723:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,s)}u((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(t,i)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.OnnxjsSessionHandler=void 0;var a=n(2235),i=n(9240),s=function(){function t(t){this.session=t,this.inputNames=this.session.inputNames,this.outputNames=this.session.outputNames}return t.prototype.dispose=function(){return r(this,void 0,void 0,(function(){return o(this,(function(t){return[2]}))}))},t.prototype.run=function(t,e,n){return r(this,void 0,void 0,(function(){var e,n,r,s,u;return o(this,(function(o){switch(o.label){case 0:for(n in e=new Map,t)Object.hasOwnProperty.call(t,n)&&(r=t[n],e.set(n,new i.Tensor(r.dims,r.type,void 0,void 0,r.data)));return[4,this.session.run(e)];case 1:return s=o.sent(),u={},s.forEach((function(t,e){u[e]=new a.Tensor(t.type,t.data,t.dims)})),[2,u]}}))}))},t.prototype.startProfiling=function(){this.session.startProfiling()},t.prototype.endProfiling=function(){this.session.endProfiling()},t}();e.OnnxjsSessionHandler=s},6027:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,s)}u((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(t,i)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Session=void 0;var a=n(7067),i=n(1296),s=n(1975),u=n(6496),c=n(1315),l=n(1745),f=function(){function t(t){void 0===t&&(t={}),this._initialized=!1,this.backendHint=t.backendHint,this.profiler=c.Profiler.create(t.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]}}return Object.defineProperty(t.prototype,"inputNames",{get:function(){return this._model.graph.getInputNames()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"outputNames",{get:function(){return this._model.graph.getOutputNames()},enumerable:!1,configurable:!0}),t.prototype.startProfiling=function(){this.profiler.start()},t.prototype.endProfiling=function(){this.profiler.stop()},t.prototype.loadModel=function(t,e,n){return r(this,void 0,void 0,(function(){var u=this;return o(this,(function(c){switch(c.label){case 0:return[4,this.profiler.event("session","Session.loadModel",(function(){return r(u,void 0,void 0,(function(){var r,u,c,f;return o(this,(function(o){switch(o.label){case 0:return[4,(0,s.resolveBackend)(this.backendHint)];case 1:return r=o.sent(),this.sessionHandler=r.createSessionHandler(this.context),this._model=new l.Model,"string"!=typeof t?[3,7]:(u=t.endsWith(".ort"),"undefined"!=typeof process&&process.versions&&process.versions.node?[4,(0,i.promisify)(a.readFile)(t)]:[3,3]);case 2:return c=o.sent(),this.initialize(c,u),[3,6];case 3:return[4,fetch(t)];case 4:return[4,o.sent().arrayBuffer()];case 5:c=o.sent(),this.initialize(new Uint8Array(c),u),o.label=6;case 6:return[3,8];case 7:ArrayBuffer.isView(t)?this.initialize(t):(f=new Uint8Array(t,e||0,n||t.byteLength),this.initialize(f)),o.label=8;case 8:return[2]}}))}))}))];case 1:return c.sent(),[2]}}))}))},t.prototype.initialize=function(t,e){var n=this;if(this._initialized)throw new Error("already initialized");this.profiler.event("session","Session.initialize",(function(){var r=n.sessionHandler.transformGraph?n.sessionHandler:void 0;n._model.load(t,r,e),n.sessionHandler.onGraphInitialized&&n.sessionHandler.onGraphInitialized(n._model.graph),n.initializeOps(n._model.graph),n._executionPlan=new u.ExecutionPlan(n._model.graph,n._ops,n.profiler)})),this._initialized=!0},t.prototype.run=function(t){return r(this,void 0,void 0,(function(){var e=this;return o(this,(function(n){if(!this._initialized)throw new Error("session not initialized yet");return[2,this.profiler.event("session","Session.run",(function(){return r(e,void 0,void 0,(function(){var e,n;return o(this,(function(r){switch(r.label){case 0:return e=this.normalizeAndValidateInputs(t),[4,this._executionPlan.execute(this.sessionHandler,e)];case 1:return n=r.sent(),[2,this.createOutput(n)]}}))}))}))]}))}))},t.prototype.normalizeAndValidateInputs=function(t){var e=this._model.graph.getInputNames();if(Array.isArray(t)){if(t.length!==e.length)throw new Error("incorrect input array length: expected ".concat(e.length," but got ").concat(t.length))}else{if(t.size!==e.length)throw new Error("incorrect input map size: expected ".concat(e.length," but got ").concat(t.size));for(var n=new Array(t.size),r=0,o=0;o<e.length;++o){var a=t.get(e[o]);if(!a)throw new Error("missing input tensor for: '".concat(name,"'"));n[r++]=a}t=n}if(this.context.graphInputTypes&&0!==this.context.graphInputTypes.length&&this.context.graphInputDims&&0!==this.context.graphInputDims.length)this.validateInputTensorDims(this.context.graphInputDims,t,!1);else{var i=this._model.graph.getInputIndices(),s=this._model.graph.getValues(),u=new Array(i.length);for(o=0;o<i.length;++o){var c=s[i[o]];u[o]=c.type.shape.dims,this.context.graphInputTypes.push(c.type.tensorType),this.context.graphInputDims.push(t[o].dims)}this.validateInputTensorDims(u,t,!0)}return this.validateInputTensorTypes(this.context.graphInputTypes,t),t},t.prototype.validateInputTensorTypes=function(t,e){for(var n=0;n<e.length;n++){var r=t[n],o=e[n].type;if(r!==o)throw new Error("input tensor[".concat(n,"] check failed: expected type '").concat(r,"' but got ").concat(o))}},t.prototype.validateInputTensorDims=function(t,e,n){for(var r=0;r<e.length;r++){var o=t[r],a=e[r].dims;if(!this.compareTensorDims(o,a,n))throw new Error("input tensor[".concat(r,"] check failed: expected shape '[").concat(o.join(","),"]' but got [").concat(a.join(","),"]"))}},t.prototype.compareTensorDims=function(t,e,n){if(t.length!==e.length)return!1;for(var r=0;r<t.length;++r)if(t[r]!==e[r]&&(!n||0!==t[r]))return!1;return!0},t.prototype.createOutput=function(t){var e=this._model.graph.getOutputNames();if(t.length!==e.length)throw new Error("expected number of outputs do not match number of generated outputs");for(var n=new Map,r=0;r<e.length;++r)n.set(e[r],t[r]);return n},t.prototype.initializeOps=function(t){var e=t.getNodes();this._ops=new Array(e.length);for(var n=0;n<e.length;n++)this._ops[n]=this.sessionHandler.resolve(e[n],this._model.opsets,t)},t}();e.Session=f},9240:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,s)}u((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(t,i)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Tensor=void 0;var i=n(3442),s=a(n(3720)),u=n(1446),c=n(1287),l=n(7273),f=c.onnxruntime.experimental.fbs,p=function(){function t(t,e,n,r,o,a){void 0===a&&(a=i.Guid.create()),this.dims=t,this.type=e,this.dataProvider=n,this.asyncDataProvider=r,this.cache=o,this.dataId=a,this.size=l.ShapeUtil.validateDimsAndCalcSize(t);var s=this.size,u=void 0===n&&void 0===r&&void 0===o;if(void 0!==o&&o.length!==s)throw new RangeError("Input dims doesn't match data length.");if("string"===e){if(!(void 0===o||Array.isArray(o)&&o.every((function(t){return"string"==typeof t}))))throw new TypeError("cache should be a string array");u&&(this.cache=new Array(s))}else{if(void 0!==o){var c=h(e);if(!(o instanceof c))throw new TypeError("cache should be type ".concat(c.name))}if(u){var f=new ArrayBuffer(s*function(t){switch(t){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw new Error("cannot calculate sizeof() on type ".concat(t))}}(e));this.cache=function(t,e){return new(h(e))(t)}(f,e)}}}return Object.defineProperty(t.prototype,"data",{get:function(){if(void 0===this.cache){var t=this.dataProvider(this.dataId);if(t.length!==this.size)throw new Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=t}return this.cache},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stringData",{get:function(){if("string"!==this.type)throw new TypeError("data type is not string");return this.data},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"integerData",{get:function(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw new TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)")}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"floatData",{get:function(){switch(this.type){case"float32":case"float64":return this.data;default:throw new TypeError("data type is not float (float32, float64)")}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"numberData",{get:function(){if("string"!==this.type)return this.data;throw new TypeError("type cannot be non-number (string)")},enumerable:!1,configurable:!0}),t.prototype.get=function(t){return this.data[l.ShapeUtil.indicesToOffset(t,this.strides)]},t.prototype.set=function(t,e){this.data[l.ShapeUtil.indicesToOffset(t,this.strides)]=e},t.prototype.getData=function(){return r(this,void 0,void 0,(function(){var t;return o(this,(function(e){switch(e.label){case 0:return void 0!==this.cache?[3,2]:(t=this,[4,this.asyncDataProvider(this.dataId)]);case 1:t.cache=e.sent(),e.label=2;case 2:return[2,this.cache]}}))}))},Object.defineProperty(t.prototype,"strides",{get:function(){return this._strides||(this._strides=l.ShapeUtil.computeStrides(this.dims)),this._strides},enumerable:!1,configurable:!0}),t.fromProto=function(e){if(!e)throw new Error("cannot construct Value from an empty tensor");var n=l.ProtoUtil.tensorDataTypeFromProto(e.dataType),r=new t(l.ProtoUtil.tensorDimsFromProto(e.dims),n);if("string"===n)e.stringData.forEach((function(t,e){r.data[e]=(0,l.decodeUtf8String)(t)}));else if(e.rawData&&"number"==typeof e.rawData.byteLength&&e.rawData.byteLength>0){var o=r.data,a=new DataView(e.rawData.buffer,e.rawData.byteOffset,e.rawData.byteLength),i=d(e.dataType),c=e.rawData.byteLength/i;if(e.rawData.byteLength%i!=0)throw new Error("invalid buffer length");if(o.length!==c)throw new Error("buffer length mismatch");for(var f=0;f<c;f++){var p=m(a,e.dataType,f*i);o[f]=p}}else{var h=void 0;switch(e.dataType){case u.onnx.TensorProto.DataType.FLOAT:h=e.floatData;break;case u.onnx.TensorProto.DataType.INT32:case u.onnx.TensorProto.DataType.INT16:case u.onnx.TensorProto.DataType.UINT16:case u.onnx.TensorProto.DataType.INT8:case u.onnx.TensorProto.DataType.UINT8:case u.onnx.TensorProto.DataType.BOOL:h=e.int32Data;break;case u.onnx.TensorProto.DataType.INT64:h=e.int64Data;break;case u.onnx.TensorProto.DataType.DOUBLE:h=e.doubleData;break;case u.onnx.TensorProto.DataType.UINT32:case u.onnx.TensorProto.DataType.UINT64:h=e.uint64Data;break;default:throw new Error("unspecific error")}if(null==h)throw new Error("failed to populate data from a tensorproto value");var y=r.data;if(y.length!==h.length)throw new Error("array length mismatch");for(f=0;f<h.length;f++){var b=h[f];s.default.isLong(b)?y[f]=g(b,e.dataType):y[f]=b}}return r},t.fromData=function(e,n,r){return new t(n,r,void 0,void 0,e)},t.fromOrtTensor=function(e){if(!e)throw new Error("cannot construct Value from an empty tensor");var n=l.ProtoUtil.tensorDimsFromORTFormat(e),r=l.ProtoUtil.tensorDataTypeFromProto(e.dataType()),o=new t(n,r);if("string"===r)for(var a=0;a<e.stringDataLength();a++)o.data[a]=e.stringData(a);else if(e.rawDataArray()&&"number"==typeof e.rawDataLength()&&e.rawDataLength()>0){var i=o.data,s=new DataView(e.rawDataArray().buffer,e.rawDataArray().byteOffset,e.rawDataLength()),u=d(e.dataType()),c=e.rawDataLength()/u;if(e.rawDataLength()%u!=0)throw new Error("invalid buffer length");if(i.length!==c)throw new Error("buffer length mismatch");for(a=0;a<c;a++){var f=m(s,e.dataType(),a*u);i[a]=f}}return o},t}();function d(t){switch(t){case u.onnx.TensorProto.DataType.UINT8:case u.onnx.TensorProto.DataType.INT8:case u.onnx.TensorProto.DataType.BOOL:return 1;case u.onnx.TensorProto.DataType.UINT16:case u.onnx.TensorProto.DataType.INT16:return 2;case u.onnx.TensorProto.DataType.FLOAT:case u.onnx.TensorProto.DataType.INT32:case u.onnx.TensorProto.DataType.UINT32:return 4;case u.onnx.TensorProto.DataType.INT64:case u.onnx.TensorProto.DataType.DOUBLE:case u.onnx.TensorProto.DataType.UINT64:return 8;default:throw new Error("cannot calculate sizeof() on type ".concat(u.onnx.TensorProto.DataType[t]))}}function h(t){switch(t){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw new Error("unspecified error")}}function g(t,e){if(e===u.onnx.TensorProto.DataType.INT64||e===f.TensorDataType.INT64){if(t.greaterThanOrEqual(2147483648)||t.lessThan(-2147483648))throw new TypeError("int64 is not supported")}else{if(e!==u.onnx.TensorProto.DataType.UINT32&&e!==f.TensorDataType.UINT32&&e!==u.onnx.TensorProto.DataType.UINT64&&e!==f.TensorDataType.UINT64)throw new TypeError("not a LONG type: ".concat(u.onnx.TensorProto.DataType[e]));if(t.greaterThanOrEqual(4294967296)||t.lessThan(0))throw new TypeError("uint64 is not supported")}return t.toNumber()}function m(t,e,n){switch(e){case u.onnx.TensorProto.DataType.BOOL:case u.onnx.TensorProto.DataType.UINT8:return t.getUint8(n);case u.onnx.TensorProto.DataType.INT8:return t.getInt8(n);case u.onnx.TensorProto.DataType.UINT16:return t.getUint16(n,!0);case u.onnx.TensorProto.DataType.INT16:return t.getInt16(n,!0);case u.onnx.TensorProto.DataType.FLOAT:return t.getFloat32(n,!0);case u.onnx.TensorProto.DataType.INT32:return t.getInt32(n,!0);case u.onnx.TensorProto.DataType.UINT32:return t.getUint32(n,!0);case u.onnx.TensorProto.DataType.INT64:return g(s.default.fromBits(t.getUint32(n,!0),t.getUint32(n+4,!0),!1),e);case u.onnx.TensorProto.DataType.DOUBLE:return t.getFloat64(n,!0);case u.onnx.TensorProto.DataType.UINT64:return g(s.default.fromBits(t.getUint32(n,!0),t.getUint32(n+4,!0),!0),e);default:throw new Error("cannot read from DataView for type ".concat(u.onnx.TensorProto.DataType[e]))}}e.Tensor=p},7273:function(t,e,n){"use strict";var r=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},o=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.decodeUtf8String=e.MAX_CLIP=e.MIN_CLIP=e.PoolConvUtil=e.ReduceUtil=e.SplitUtil=e.MathUtil=e.ShapeUtil=e.LongUtil=e.ProtoUtil=e.GemmUtil=e.arrayCopyHelper=e.BroadcastUtil=e.MatMulUtil=e.ArrayUtil=e.assert=e.checkInputsShape=void 0;var i=n(5686),s=a(n(3720)),u=n(1446),c=n(9240);e.checkInputsShape=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!t||t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!t[r].dims||t[r].dims.length!==e[r])return!1;return!0},e.assert=function(t,e){if(!t)throw new Error("string"==typeof e?e:e())};var l=function(){function t(){}return t.arraysEqual=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0},t}();e.ArrayUtil=l;var f=function(){function t(){}return t.preprocessInputShapes=function(t,e){return[1===t.length?[1,t[0]]:t,1===e.length?[e[0],1]:e]},t.postprocessOutputShape=function(t,e,n){1===e&&t.splice(t.length-2,1),1===n&&t.pop()},t.calcMatMulShape=function(t,e){return t[1]!==e[0]?void 0:[t[0],e[1]]},t}();e.MatMulUtil=f;var p=function(){function t(){}return t.calcShape=function(t,e,n){var o;void 0===n&&(n=!1);var a=t.length,i=e.length;if(0===a)return e;if(0===i)return t;var s=Math.max(t.length,e.length),u=new Array(s);if(n){if(a<2||i<2)return;var c=f.calcMatMulShape([t[a-2],t[a-1]],[e[i-2],e[i-1]]);if(void 0===c)return;o=r(c,2),u[s-2]=o[0],u[s-1]=o[1]}for(var l=n?3:1;l<=s;l++){var p=a-l<0?1:t[a-l],d=i-l<0?1:e[i-l];if(p!==d&&p>1&&d>1)return;u[s-l]=Math.max(p,d)}return u},t.index=function(e,n){var r=new Array(n.length);return t.fillIndex(e,n,r),r},t.fillIndex=function(t,e,n){for(var r=t.length-e.length,o=0;o<e.length;o++)n[o]=t[r+o]%e[o]},t.calc=function(e,n,r,o,a){var i=t.calcShape(e.dims,n.dims);if(i){if(o&&!m.areEqual(i,e.dims))return;var s=m.size(i),u=o?e:new c.Tensor(i,a||e.type);if(0===i.length)u.set([],r(e.get([]),n.get([])));else{var l=new Array(i.length),f=new Array(e.dims.length),p=new Array(n.dims.length),d=0,h=0,g=!1,y=!1;0===e.dims.length&&(d=e.get([]),g=!0),0===n.dims.length&&(h=n.get([]),y=!0);for(var b=void 0,v=0;v<s;v++){b=v;for(var w=i.length-1;w>=0;w--)l[w]=b%i[w],b=Math.floor(b/i[w]);g||(t.fillIndex(l,e.dims,f),d=e.get(f)),y||(t.fillIndex(l,n.dims,p),h=n.get(p)),u.set(l,r(d,h))}}return u}},t.isValidBroadcast=function(t,e){var n=t.length,r=e.length;if(n>r)return!1;for(var o=1;o<=n;o++)if(1!==t[n-o]&&t[n-o]!==e[r-o])return!1;return!0},t.getBroadcastDims=function(t,e){for(var n=t.length,r=[],o=0;o<n;o++){var a=n-1-o,i=t[a]||1;(e[e.length-1-o]||1)>1&&1===i&&r.unshift(a)}return r},t}();e.BroadcastUtil=p,e.arrayCopyHelper=function(t,e,n,r,o){if(r<0||r>=e.length)throw new Error("sourceIndex out of bounds");if(n<0||n>=t.length)throw new Error("targetIndex out of bounds");if(r+o>e.length)throw new Error("source indices to be copied are outside bounds");if(n+o>t.length)throw new Error("target array is too small to hold result");for(var a=0;a<o;a++)t[n+a]=e[r+a]};var d=function(){function t(){}return t.getShapeOfGemmResult=function(t,e,n,r,o){if(2!==t.length||2!==n.length)throw new Error("shape need to be of size 2");var a,i,s;e?(a=t[1],i=t[0]):(a=t[0],i=t[1]);var u=-1;if(r?(s=n[0],u=1):(s=n[1],u=0),n[u]!==i)throw new Error("dimension mismatch");if(a<=0||s<=0||i<=0)throw new Error("invalid shape specified");if(o&&!p.isValidBroadcast(o,[a,s]))throw new Error("gemm: invalid bias shape for broadcast");return[a,s,i]},t}();e.GemmUtil=d;var h=function(){function t(){}return t.tensorDataTypeFromProto=function(t){switch(t){case u.onnx.TensorProto.DataType.INT8:return"int8";case u.onnx.TensorProto.DataType.UINT8:return"uint8";case u.onnx.TensorProto.DataType.BOOL:return"bool";case u.onnx.TensorProto.DataType.INT16:return"int16";case u.onnx.TensorProto.DataType.UINT16:return"uint16";case u.onnx.TensorProto.DataType.INT32:return"int32";case u.onnx.TensorProto.DataType.UINT32:return"uint32";case u.onnx.TensorProto.DataType.FLOAT:return"float32";case u.onnx.TensorProto.DataType.DOUBLE:return"float64";case u.onnx.TensorProto.DataType.STRING:return"string";case u.onnx.TensorProto.DataType.INT64:return"int32";case u.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw new Error("unsupported data type: ".concat(u.onnx.TensorProto.DataType[t]))}},t.tensorDataTypeStringToEnum=function(t){switch(t){case"int8":return u.onnx.TensorProto.DataType.INT8;case"uint8":return u.onnx.TensorProto.DataType.UINT8;case"bool":return u.onnx.TensorProto.DataType.BOOL;case"int16":return u.onnx.TensorProto.DataType.INT16;case"uint16":return u.onnx.TensorProto.DataType.UINT16;case"int32":return u.onnx.TensorProto.DataType.INT32;case"uint32":return u.onnx.TensorProto.DataType.UINT32;case"float32":return u.onnx.TensorProto.DataType.FLOAT;case"float64":return u.onnx.TensorProto.DataType.DOUBLE;case"string":return u.onnx.TensorProto.DataType.STRING;case"int64":return u.onnx.TensorProto.DataType.INT64;case"uint64":return u.onnx.TensorProto.DataType.UINT64;default:throw new Error("unsupported data type: ".concat(t))}},t.tensorDimsFromProto=function(t){return t.map((function(t){return s.default.isLong(t)?t.toNumber():t}))},t.tensorValueTypeFromProto=function(e){return{tensorType:t.tensorDataTypeFromProto(e.elemType),shape:{dims:t.tensorDimsFromProto(e.shape.dim.map((function(t){return t.dimValue})))}}},t.tensorDimsFromORTFormat=function(t){for(var e=[],n=0;n<t.dimsLength();n++)e.push(g.longToNumber(t.dims(n)));return e},t.tensorAttributesFromORTFormat=function(t){for(var e=[],n=0;n<t.attributesLength();n++)e.push(t.attributes(n));return e},t}();e.ProtoUtil=h;var g=function(){function t(){}return t.longToNumber=function(t,e){return s.default.isLong(t)?t.toNumber():t instanceof i.flatbuffers.Long?s.default.fromValue({low:t.low,high:t.high,unsigned:null!=e&&e}).toNumber():t},t.isLong=function(t){return s.default.isLong(t)||t instanceof i.flatbuffers.Long},t}();e.LongUtil=g;var m=function(){function t(){}return t.size=function(e){return t.getSizeFromDimensionRange(e,0,e.length)},t.sizeFromDimension=function(e,n){if(n<0||n>e.length)throw new Error("invalid dimension of ".concat(n," for sizeFromDimension as Tensor has ").concat(e.length," dimensions."));return t.getSizeFromDimensionRange(e,n,e.length)},t.sizeToDimension=function(e,n){if(n<0||n>e.length)throw new Error("invalid dimension of ".concat(n," for sizeToDimension as Tensor has ").concat(e.length," dimensions."));return t.getSizeFromDimensionRange(e,0,n)},t.getSizeFromDimensionRange=function(t,e,n){for(var r=1,o=e;o<n;o++){if(t[o]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");r*=t[o]}return r},t.computeStrides=function(t){var e=t.length;if(0===e)return[];if(1===e)return[1];var n=new Array(e);n[e-1]=1,n[e-2]=t[e-1];for(var r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n},t.transpose=function(t){return t.slice().reverse()},t.indicesToOffset=function(t,e,n){void 0===n&&(n=t.length);for(var r=0,o=0;o<n;++o)r+=e[o]*t[o];return r},t.offsetToIndices=function(t,e){var n=e.length;if(0===n)return[];if(1===n)return[t*e[0]];for(var r=new Array(e.length),o=0;o<r.length-1;++o)r[o]=Math.floor(t/e[o]),t-=r[o]*e[o];return r[r.length-1]=t,r},t.normalizeAxis=function(t,e){if(t<-e&&t>=e)throw new Error("unsupported axis for this operation.");return t<0?t+e:t},t.normalizeAxes=function(t,e){var n=this;return t.map((function(t){return n.normalizeAxis(t,e)}))},t.incrementIndex=function(t,e,n){if(0===e.length||0===t.length)throw new Error("Index incrementing unsupported for scalar Tensor");if(void 0===n)n=e.length;else if(n<=0||n>e.length)throw new Error("Incorrect axis to increment on");for(var r=n-1;r>=0&&(t[r]++,!(t[r]<e[r]));--r)t[r]=0},t.calculateReshapedDims=function(e,n){if(0===n.length){if(0===e.length||1===t.size(e))return[];throw new Error("cannot reshape to a scalar Tensor")}for(var r=n.length,o=new Array(r),a=-1,i=1,s=0;s<r;s++){if(n[s]<-1)throw new Error("a dimension in shape hints cannot be less than -1");if(-1===n[s]){if(-1!==a)throw new Error("at most one dimension in shape hints can be -1");a=s}else{if(0===n[s]){if(s>=e.length)throw new Error("the dimension with value zero exceeds the dimension size of the input tensor");o[s]=e[s]}else o[s]=n[s];i*=o[s]}}var u=t.size(e);if(-1!==a){if(u%i!=0)throw new Error("the input tensor cannot be reshaped to the requested shape. Input shape: [".concat(e,"] Output shape: [").concat(n,"]"));o[a]=u/i}else if(i!==u)throw new Error("reshapedDims and originalDims don't have matching sizes");return o},t.sortBasedOnPerm=function(t,e){return e?e.map((function(e){return t[e]})):t.slice().reverse()},t.padShape=function(t,e){var n=t.length;return t.map((function(t,r){return t+e[r]+e[r+n]}))},t.areEqual=function(t,e){return t.length===e.length&&t.every((function(t,n){return t===e[n]}))},t.validateDimsAndCalcSize=function(t){var e,n;if(t.length>6)throw new TypeError("Only rank 0 to 6 is supported for tensor shape.");var r=1;try{for(var a=o(t),i=a.next();!i.done;i=a.next()){var s=i.value;if(!Number.isInteger(s))throw new TypeError("Invalid shape: ".concat(s," is not an integer"));if(s<0||s>2147483647)throw new TypeError("Invalid shape: length ".concat(s," is not allowed"));r*=s}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return r},t.flattenShape=function(t,e){e<0&&(e+=t.length);var n=t.reduce((function(t,e){return t*e}),1),r=t.slice(e).reduce((function(t,e){return t*e}),1);return[n/r,r]},t.squeezeShape=function(e,n){var r=new Array;n=t.normalizeAxes(n,e.length);for(var o=0;o<e.length;o++){var a=n.indexOf(o)>=0;if(a&&1!==e[o])throw new Error("squeeze an axis of size different than 1");(0===n.length&&e[o]>1||n.length>0&&!a)&&r.push(e[o])}return r},t.unsqueezeShape=function(e,n){var r=new Array(e.length+n.length);r.fill(0);for(var o=0;o<n.length;o++){var a=t.normalizeAxis(n[o],r.length);if(a>=r.length)throw new Error("'axes' has an out of range axis");if(0!==r[a])throw new Error("'axes' has a duplicate axis");r[a]=1}var i=0;for(o=0;o<r.length;o++)0===r[o]&&(r[o]=e[i++]);if(i!==e.length)throw new Error("the unsqueezed dimension could not be established");return r},t}();e.ShapeUtil=m;var y=function(){function t(){}return t.sqr=function(t,e,n,r,o){if(r<0||r>=e.length)throw new Error("sourceIndex out of bounds");if(n<0||n>=t.length)throw new Error("targetIndex out of bounds");if(r+o>e.length)throw new Error("source indices to be copied are outside bounds");if(n+o>t.length)throw new Error("target array is too small to hold result");for(var a=0;a<o;a++)t[n+a]+=Math.pow(e[r+a],2)},t.axpy=function(t,e,n,r,o,a){if(r<0||r>=e.length)throw new Error("sourceIndex out of bounds");if(n<0||n>=t.length)throw new Error("targetIndex out of bounds");if(r+o>e.length)throw new Error("source indices to be copied are outside bounds");if(n+o>t.length)throw new Error("target array is too small to hold result");for(var i=0;i<o;i++)t[n+i]+=a*e[r+i]},t.powx=function(t,e,n,r,o,a){if(r<0||r>=e.length)throw new Error("sourceIndex out of bounds");if(n<0||n>=t.length)throw new Error("targetIndex out of bounds");if(r+o>e.length)throw new Error("source indices to be copied are outside bounds");if(n+o>t.length)throw new Error("target array is too small to hold result");for(var i=0;i<o;i++)t[n+i]=Math.pow(e[r+i],a)},t.mul=function(t,e,n,r,o){if(r<0||r>=e.length)throw new Error("sourceIndex out of bounds");if(n<0||n>=t.length)throw new Error("targetIndex out of bounds");if(r+o>e.length)throw new Error("source indices to be copied are outside bounds");if(n+o>t.length)throw new Error("target array is too small to hold result");for(var a=0;a<o;a++)t[n+a]=e[r+a]*t[n+a]},t}();e.MathUtil=y;var b=function(){function t(){}return t.splitShape=function(e,n,r,o){if(0===r.length){if(!o)throw new Error("need to know number of outputs when the 'split' attribute is not specified");t.determineSplit(e[n],o,r)}for(var a=[],i=[0],s=0;s<r.length;++s){0!==s&&i.push(i[s-1]+r[s-1]);var u=e.slice();u[n]=r[s],a.push(u)}return[a,i]},t.determineSplit=function(t,e,n){if(t%e!=0)throw new Error("cannot split tensor to equal sized parts");for(var r=0;r<e;++r)n.push(t/e)},t}();e.SplitUtil=b;var v=function(){function t(){}return t.calcReduce=function(e,n,r,o,a){var i=e.dims.slice(0);0===n.length&&i.forEach((function(t,e){return n.push(e)}));for(var s=t.calcReduceShape(i,n,!0),u=m.size(s),l=new c.Tensor(s,e.type),f=m.computeStrides(s),d=m.computeStrides(i),h=new Array(i.length),g=0;g<u;g++){var y=m.offsetToIndices(g,f);p.fillIndex(y,i,h),l.set(y,t.calcReduceByAxis(e.numberData,n,i,0,m.indicesToOffset(h,d),o,a))}return r?l:new c.Tensor(t.calcReduceShape(i,n,r),l.type,void 0,void 0,l.data,l.dataId)},t.calcReduceByAxis=function(e,n,r,o,a,i,s){var u=0;if(o>=n.length)return i(e[a]);for(var c=n[o],l=c>=r.length?1:m.size(r.slice(c+1)),f=0;f<r[c];f++)u=0===f?t.calcReduceByAxis(e,n,r,o+1,a,i,s):s(u,t.calcReduceByAxis(e,n,r,o+1,a,i,s)),a+=l;return u},t.calcReduceShape=function(t,e,n){for(var r=t.slice(),o=0;o<e.length;o++)r[e[o]]=n?1:0;return r.filter((function(t){return 0!==t}))},t}();e.ReduceUtil=v;var w=function(){function t(){}return t.adjustPoolAttributes=function(t,e,n,r,o,a){if(!t&&n.length!==e.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(t)for(var i=0;i<e.length-2;i++)i>=n.length?n.push(e[i+2]):n[i]=e[i+2];for(i=0;i<n.length;i++)if(i<r.length){if(r[i]<0)throw new Error("strides should be greater than or equal to 1")}else r.push(1);for(i=0;i<n.length;i++)if(i<o.length){if(o[i]<0)throw new Error("dilations should be greater than or equal to 1")}else o.push(1);for(i=0;i<2*n.length;i++)if(i<a.length){if(a[i]<0)throw new Error("pad should be greater than or equal to 1")}else a.push(0);for(i=0;i<n.length;i++){if(n[i]<=0)throw new Error("kernel shapes need to be greater than 0");if(a[i]>=n[i]||a[i+n.length]>=n[i])throw new Error("pads should be smaller than kernel")}},t.adjustPadsBasedOnAutoPad=function(e,n,r,o,a,i){if(i){if(a.length!==2*(e.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(n.length!==e.length-2)throw new Error("length of strides should be the length of data dimensions");if(o.length!==e.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(var s=0;s<e.length-2;s++)t.adjustPadAndReturnShape(e[s+2],n[s],r[s],o[s],a,s,s+e.length-2,i)}},t.computePoolOutputShape=function(e,n,r,o,a,i,s){if(n.length<=0)throw new Error("input shape must be of size greater than 0");var u=[n[0],n[1]];return t.computeShapeHelper(e,n,u,r,o,a,i,s),u},t.computeConvOutputShape=function(e,n,r,o,a,i,s){if(e.length<=0||n.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");var u=[e[0],n[0]];return t.computeShapeHelper(!1,e,u,r,o,a,i,s),u},t.computeShapeHelper=function(e,n,r,o,a,i,s,u){if(e)for(var c=0;c<n.length-2;c++)r.push(1);else for(c=0;c<n.length-2;c++)r.push(t.adjustPadAndReturnShape(n[c+2],o[c],a[c],i[c],s,c,c+n.length-2,u))},t.adjustPadAndReturnShape=function(t,e,n,r,o,a,i,s){var u=n*(r-1)+1;if(!s||"NOTSET"===s)return Math.floor((t+o[a]+o[i]-u)/e+1);switch(s){case"VALID":return o[a]=0,o[i]=0,Math.floor((t-u)/e+1);case"SAME_LOWER":case"SAME_UPPER":if(1!==n)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");var c=((t+e-1)/e-1)*e+r-t;return o[a]="SAME_LOWER"===s?Math.floor((c+1)/2):Math.floor(c/2),o[i]=c-o[a],Math.floor((t+c-r)/e+1);default:throw new Error("Unsupported AutoPad type")}},t}();e.PoolConvUtil=w,e.MIN_CLIP=-34028234663852886e22,e.MAX_CLIP=34028234663852886e22,e.decodeUtf8String=function(t){return(new TextDecoder).decode(t)}},8408:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.version=void 0,e.version="1.16.0-dev.20230704-d540c7da0f"},3838:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,s)}u((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(t,i)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},a=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(e,"__esModule",{value:!0}),e.WebGpuBackend=void 0;var s=n(4955),u=n(7771),c=n(8510),l=n(8305),f=function(){function t(){this.currentKernelId=null,this.commandEncoder=null,this.computePassEncoder=null,this.pendingDispatchNumber=0,this.profilingEnabled=!1}return Object.defineProperty(t.prototype,"currentKernelCustomData",{get:function(){if(null===this.currentKernelId)throw new Error("currentKernelCustomData(): currentKernelId is null. (should not happen)");var t=this.kernelCustomData.get(this.currentKernelId);return t||(t={},this.kernelCustomData.set(this.currentKernelId,t)),t},enumerable:!1,configurable:!0}),t.prototype.initialize=function(t){return r(this,void 0,void 0,(function(){var e,n,r;return o(this,(function(o){switch(o.label){case 0:if(!navigator.gpu)throw new Error("WebGpuBackend: WebGPU is not available.");return[4,navigator.gpu.requestAdapter()];case 1:if(!(e=o.sent()))throw new Error("WebGpuBackend: Failed to get GPU adapter.");return n={requiredLimits:{maxComputeWorkgroupStorageSize:e.limits.maxComputeWorkgroupStorageSize,maxComputeWorkgroupsPerDimension:e.limits.maxComputeWorkgroupsPerDimension,maxStorageBufferBindingSize:e.limits.maxStorageBufferBindingSize}},e.features.has("timestamp-query-inside-passes")&&"default"===t.webgpu.profilingMode&&(this.profilingEnabled=!0,n.requiredFeatures=["timestamp-query-inside-passes"]),r=this,[4,e.requestDevice(n)];case 2:return r.device=o.sent(),this.gpuDataManager=(0,u.createGpuDataManager)(this),this.programManager=new l.ProgramManager(this),this.kernels=new Map,this.kernelPersistentData=new Map,this.kernelCustomData=new Map,(0,s.configureLogger)(t.logLevel,!!t.debug),this.device.onuncapturederror=function(t){t.error instanceof GPUValidationError&&console.error("An uncaught WebGPU validation error was raised: ".concat(t.error.message))},this.profilingEnabled&&(this.profilingQuerySet=this.device.createQuerySet({type:"timestamp",count:2})),[2]}}))}))},t.prototype.dispose=function(){},t.prototype.getCommandEncoder=function(){return this.commandEncoder||(this.commandEncoder=this.device.createCommandEncoder()),this.commandEncoder},t.prototype.getComputePassEncoder=function(){return this.computePassEncoder||(this.computePassEncoder=this.getCommandEncoder().beginComputePass()),this.computePassEncoder},t.prototype.endComputePass=function(){this.computePassEncoder&&(this.computePassEncoder.end(),this.computePassEncoder=null)},t.prototype.flush=function(){this.endComputePass(),this.device.queue.submit([this.getCommandEncoder().finish()]),this.gpuDataManager.refreshPendingBuffers(),this.commandEncoder=null,this.pendingDispatchNumber=0},t.prototype.run=function(t,e,n,r,o){if(e.length!==t.inputTypes.length)throw new Error("Input size must be equal to ".concat(t.inputTypes.length,"."));for(var a=[],i=0;i<e.length;++i){if(!(h=this.gpuDataManager.get(e[i].data)))throw new Error("no GPU data for input: ".concat(e[i].data));a[i]=h}var u=function(t,e,n){var r=e.map((function(t){return"".concat(t.join(","))})).join("_"),o=n.join("_"),a=t.name;return t.cacheHint&&(a+="["+t.cacheHint+"]"),a+":"+r+";"+o}(t,e.map((function(t){return t.dims})),a.map((function(t){return t.type}))),c=this.programManager.getArtifact(u),l=c?c.programInfo:"function"==typeof t.get?t.get():t,f=0===n.length?l.outputs.map((function(t,e){return e})):n;if(f.length!==l.outputs.length)throw new Error("Output size ".concat(f.length," must be equal to ").concat(l.outputs.length,"."));var p=[],d=[];for(i=0;i<l.outputs.length;++i){if(!Number.isInteger(f[i])||f[i]<-2||f[i]>=l.outputs.length)throw new Error("Invalid output index: ".concat(f[i]));var h,g=-1===f[i],m=-2===f[i],y=g||m?o(l.outputs[i].dataType,l.outputs[i].dims):r(f[i],l.outputs[i].dataType,l.outputs[i].dims);if(!(h=this.gpuDataManager.get(y.data)))throw new Error("no GPU data for output: ".concat(y.data));if(g&&this.temporaryData.push(h),m){var b=this.kernelPersistentData.get(this.currentKernelId);b||(b=[],this.kernelPersistentData.set(this.currentKernelId,b)),b.push(h)}p.push(y),d.push(h)}var v=this.programManager.normalizeDispatchGroupSize(l.dispatchGroup(e));return c||(c=this.programManager.build(l,v),this.programManager.setArtifact(u,c)),(0,s.LOG_DEBUG)("info",(function(){return'[ProgramManager] run "'.concat(l.name,'" (key=').concat(u,") with ").concat(v[0],"x").concat(v[1],"x").concat(v[2])})),this.programManager.run(c,a,d,v),p},t.prototype.upload=function(t,e){this.gpuDataManager.upload(t,e)},t.prototype.memcpy=function(t,e){this.gpuDataManager.memcpy(t,e)},t.prototype.download=function(t,e){return r(this,void 0,void 0,(function(){var n,r;return o(this,(function(o){switch(o.label){case 0:return[4,this.gpuDataManager.download(t)];case 1:return n=o.sent(),(r=e()).set(new Uint8Array(n,0,r.byteLength)),[2]}}))}))},t.prototype.alloc=function(t){return this.gpuDataManager.create(t).id},t.prototype.free=function(t){return this.gpuDataManager.release(t)},t.prototype.createKernel=function(t,e,n){var r=c.WEBGPU_OP_RESOLVE_RULES.get(t);if(!r)throw new Error("kernel not implemented: ".concat(t));this.kernels.set(e,[t,r[0],[r[1],n]])},t.prototype.releaseKernel=function(t){var e,n,r=this.kernelPersistentData.get(t);if(r){try{for(var o=a(r),i=o.next();!i.done;i=o.next()){var s=i.value;this.gpuDataManager.release(s.id)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}this.kernelPersistentData.delete(t)}this.kernelCustomData.delete(t),this.kernels.delete(t)},t.prototype.computeKernel=function(t,e){var n,r,o=this.kernels.get(t);if(!o)throw new Error("kernel not created: ".concat(t));var u=i(o,3),c=u[0],l=u[1],f=u[2];if(null!==this.currentKernelId)throw new Error('kernel "'.concat(c,'" is not allowed to be called recursively'));this.currentKernelId=t,f[0]&&(f[1]=f[0](f[1]),f[0]=void 0),(0,s.LOG_DEBUG)("info",(function(){return'[WebGPU] Start to run kernel "'.concat(c,'"...')})),this.temporaryData=[];try{return l(e,f[1]),0}catch(t){return(0,s.LOG_DEBUG)("warning",'[WebGPU] Kernel "'.concat(c,'" failed. Error: ').concat(t)),1}finally{try{for(var p=a(this.temporaryData),d=p.next();!d.done;d=p.next()){var h=d.value;this.gpuDataManager.release(h.id)}}catch(t){n={error:t}}finally{try{d&&!d.done&&(r=p.return)&&r.call(p)}finally{if(n)throw n.error}}this.temporaryData=[],this.currentKernelId=null}},t}();e.WebGpuBackend=f},7675:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,s)}u((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(t,i)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.init=void 0;var a=n(7917),i=n(3838),s=n(4955),u=n(6952),c=function(){function t(t,e,n,r){this.module=t,this.dataType=e,this.data=n,this.dims=r}return t.prototype.getFloat32Array=function(){if(1!==this.dataType)throw new Error("Invalid data type");var t=u.ShapeUtil.size(this.dims);return 0===t?new Float32Array:new Float32Array(this.module.HEAP8.buffer,this.data,t)},t.prototype.getBigInt64Array=function(){if(7!==this.dataType)throw new Error("Invalid data type");var t=u.ShapeUtil.size(this.dims);return 0===t?new BigInt64Array:new BigInt64Array(this.module.HEAP8.buffer,this.data,t)},t.prototype.reshape=function(e){if(u.ShapeUtil.size(e)!==u.ShapeUtil.size(this.dims))throw new Error("Invalid new shape");return new t(this.module,this.dataType,this.data,e)},t}(),l=function(){function t(t,e,n){this.module=t,this.backend=e;var r=t.HEAPU32,o=n>>2;this.opKernelContext=r[o++];for(var a=r[o++],i=[],s=0;s<a;s++){for(var u=r[o++],l=r[o++],f=r[o++],p=[],d=0;d<f;d++)p.push(r[o++]);i.push(new c(t,u,l,p))}this.inputs=i}return Object.defineProperty(t.prototype,"customData",{get:function(){return this.backend.currentKernelCustomData},enumerable:!1,configurable:!0}),t.prototype.compute=function(t,e){var n,r,o,i=this,s=null!==(r=null===(n=null==e?void 0:e.inputs)||void 0===n?void 0:n.map((function(t){return"number"==typeof t?i.inputs[t]:t})))&&void 0!==r?r:this.inputs,l=null!==(o=null==e?void 0:e.outputs)&&void 0!==o?o:[];return this.backend.run(t,s,l,(function(t,e,n){return new c(i.module,e,i.output(t,n),n)}),(function(t,e){var n=(0,a.getTensorElementSize)(t);if(!n)throw new Error("Unsupported data type: ".concat(t));var r=n*u.ShapeUtil.size(e);return new c(i.module,t,i.backend.gpuDataManager.create(r).id,e)}))},t.prototype.output=function(t,e){var n=this.module.stackSave();try{var r=this.module.stackAlloc(4*(1+e.length)),o=r>>2;this.module.HEAPU32[o++]=e.length;for(var a=0;a<e.length;a++)this.module.HEAPU32[o++]=e[a];return this.module._JsepOutput(this.opKernelContext,t,r)}finally{this.module.stackRestore(n)}},t}();e.init=function(t,e){return r(void 0,void 0,void 0,(function(){var n,a;return o(this,(function(u){switch(u.label){case 0:if(!(n=t.jsepInit)||!navigator.gpu)return[3,2];if(!e.wasm.simd)throw new Error("Not supported for WebGPU=ON and SIMD=OFF. Please set `env.wasm.simd` to true when using WebGPU EP");return[4,(a=new i.WebGpuBackend).initialize(e)];case 1:u.sent(),n({backend:a},(function(t){return a.alloc(t)}),(function(t){return a.free(t)}),(function(e,n,r,o){if(void 0===o&&(o=!1),o)(0,s.LOG_DEBUG)("verbose",(function(){return"[WebGPU] jsepCopyGpuToGpu: src=".concat(e,", dst=").concat(n,", size=").concat(r)})),a.memcpy(e,n);else{(0,s.LOG_DEBUG)("verbose",(function(){return"[WebGPU] jsepCopyCpuToGpu: dataOffset=".concat(e,", gpuDataId=").concat(n,", size=").concat(r)}));var i=t.HEAPU8.subarray(e,e+r);a.upload(n,i)}}),(function(e,n,i){return r(void 0,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:return(0,s.LOG_DEBUG)("verbose",(function(){return"[WebGPU] jsepCopyGpuToCpu: gpuDataId=".concat(e,", dataOffset=").concat(n,", size=").concat(i)})),[4,a.download(e,(function(){return t.HEAPU8.subarray(n,n+i)}))];case 1:return r.sent(),[2]}}))}))}),(function(t,e,n){return a.createKernel(t,e,n)}),(function(t){return a.releaseKernel(t)}),(function(e,n){(0,s.LOG_DEBUG)("verbose",(function(){return"[WebGPU] jsepRun: kernel=".concat(e,", contextDataOffset=").concat(n)}));var r=new l(t,a,n);return a.computeKernel(e,r)})),u.label=2;case 2:return[2]}}))}))}},4955:function(t,e,n){"use strict";var r=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},o=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,a=e.length;o<a;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.LOG_DEBUG=e.LOG=e.configureLogger=void 0;var a,i,s=n(7917),u=["V","I","W","E","F"];e.configureLogger=function(t,e){a=t,i=e},e.LOG=function(t,e){var n,r,o=(0,s.logLevelStringToEnum)(t);o>=(0,s.logLevelStringToEnum)(a)&&(n=o,r="function"==typeof e?e():e,console.log("[".concat(u[n],",").concat((new Date).toISOString(),"]").concat(r)))},e.LOG_DEBUG=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];i&&e.LOG.apply(void 0,o([],r(t),!1))}},6952:function(t,e){"use strict";var n=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(e,"__esModule",{value:!0}),e.MAX_CLIP=e.MIN_CLIP=e.GemmUtil=e.PoolConvUtil=e.ShapeUtil=e.BroadcastUtil=e.MatMulUtil=void 0;var r=function(){function t(){}return t.calcMatMulShape=function(t,e){return t[1]!==e[0]?void 0:[t[0],e[1]]},t}();e.MatMulUtil=r;var o=function(){function t(){}return t.calcShape=function(t,e,o){var a;void 0===o&&(o=!1);var i=t.length,s=e.length;if(0===i)return e;if(0===s)return t;var u=Math.max(t.length,e.length),c=new Array(u);if(o){if(i<2||s<2)return;var l=r.calcMatMulShape([t[i-2],t[i-1]],[e[s-2],e[s-1]]);if(void 0===l)return;a=n(l,2),c[u-2]=a[0],c[u-1]=a[1]}for(var f=o?3:1;f<=u;f++){var p=i-f<0?1:t[i-f],d=s-f<0?1:e[s-f];if(p!==d&&p>1&&d>1)return;c[u-f]=Math.max(p,d)}return c},t.isValidBroadcast=function(t,e){var n=t.length,r=e.length;if(n>r)return!1;for(var o=1;o<=n;o++)if(1!==t[n-o]&&t[n-o]!==e[r-o])return!1;return!0},t}();e.BroadcastUtil=o;var a=function(){function t(){}return t.size=function(e){return t.getSizeFromDimensionRange(e,0,e.length)},t.sizeFromDimension=function(e,n){if(n<0||n>e.length)throw new Error("invalid dimension of ".concat(n," for sizeFromDimension as Tensor has ").concat(e.length," dimensions."));return t.getSizeFromDimensionRange(e,n,e.length)},t.sizeToDimension=function(e,n){if(n<0||n>e.length)throw new Error("invalid dimension of ".concat(n," for sizeToDimension as Tensor has ").concat(e.length," dimensions."));return t.getSizeFromDimensionRange(e,0,n)},t.getSizeFromDimensionRange=function(t,e,n){for(var r=1,o=e;o<n;o++){if(t[o]<0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains negative values in them.");r*=t[o]}return r},t.computeStrides=function(t){var e=t.length;if(0===e)return[];if(1===e)return[1];var n=new Array(e);n[e-1]=1,n[e-2]=t[e-1];for(var r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n},t.normalizeAxis=function(t,e){if(t<-e&&t>=e)throw new Error("unsupported axis for this operation.");return t<0?t+e:t},t.normalizeAxes=function(t,e){var n=this;return t.map((function(r){return n.normalizeAxis(r,null!=e?e:t.length)}))},t.sortBasedOnPerm=function(t,e){return e?e.map((function(e){return t[e]})):t.slice().reverse()},t.padShape=function(t,e){var n=t.length;return t.map((function(t,r){return t+e[r]+e[r+n]}))},t.areEqual=function(t,e){return t.length===e.length&&t.every((function(t,n){return t===e[n]}))},t}();e.ShapeUtil=a;var i=function(){function t(){}return t.adjustPoolAttributes=function(t,e,n,r,o,a){if(!t&&n.length!==e.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(t)for(var i=0;i<e.length-2;i++)i>=n.length?n.push(e[i+2]):n[i]=e[i+2];for(i=0;i<n.length;i++)if(i<r.length){if(r[i]<0)throw new Error("strides should be greater than or equal to 1")}else r.push(1);for(i=0;i<n.length;i++)if(i<o.length){if(o[i]<0)throw new Error("dilations should be greater than or equal to 1")}else o.push(1);for(i=0;i<2*n.length;i++)if(i<a.length){if(a[i]<0)throw new Error("pad should be greater than or equal to 1")}else a.push(0);for(i=0;i<n.length;i++){if(n[i]<=0)throw new Error("kernel shapes need to be greater than 0");if(a[i]>=n[i]||a[i+n.length]>=n[i])throw new Error("pads should be smaller than kernel")}},t.adjustPadsBasedOnAutoPad=function(e,n,r,o,a,i,s){if(s){if(a.length!==2*(e.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(n.length!==e.length-2)throw new Error("length of strides should be the length of data dimensions");if(o.length!==e.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(var u=0;u<e.length-2;u++)t.adjustPadAndReturnShape(e[u+(i?1:2)],n[u],r[u],o[u],a,u,u+e.length-2,s)}},t.computePoolOutputShape=function(e,n,r,o,a,i,s){if(n.length<=0)throw new Error("input shape must be of size greater than 0");var u=[n[0],n[1]];return t.computeShapeHelper(e,n,u,r,o,a,i,s),u},t.computeConvOutputShape=function(e,n,r,o,a,i,s){if(e.length<=0||n.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");var u=[e[0],n[0]];return t.computeShapeHelper(!1,e,u,r,o,a,i,s),u},t.computeShapeHelper=function(e,n,r,o,a,i,s,u){if(e)for(var c=0;c<n.length-2;c++)r.push(1);else for(c=0;c<n.length-2;c++)r.push(t.adjustPadAndReturnShape(n[c+2],o[c],a[c],i[c],s,c,c+n.length-2,u))},t.adjustPadAndReturnShape=function(t,e,n,r,o,a,i,s){var u=n*(r-1)+1;if(!s||"NOTSET"===s)return Math.floor((t+o[a]+o[i]-u)/e+1);switch(s){case"VALID":return o[a]=0,o[i]=0,Math.floor((t-u)/e+1);case"SAME_LOWER":case"SAME_UPPER":if(1!==n)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");var c=((t+e-1)/e-1)*e+r-t;return o[a]="SAME_LOWER"===s?Math.floor((c+1)/2):Math.floor(c/2),o[i]=c-o[a],Math.floor((t+c-r)/e+1);default:throw new Error("Unsupported AutoPad type")}},t}();e.PoolConvUtil=i;var s=function(){function t(){}return t.getShapeOfGemmResult=function(t,e,n,r,a){if(2!==t.length||2!==n.length)throw new Error("shape need to be of size 2");var i,s,u;e?(i=t[1],s=t[0]):(i=t[0],s=t[1]);var c=-1;if(r?(u=n[0],c=1):(u=n[1],c=0),n[c]!==s)throw new Error("dimension mismatch");if(i<=0||u<=0||s<=0)throw new Error("invalid shape specified");if(a&&!o.isValidBroadcast(a,[i,u]))throw new Error("gemm: invalid bias shape for broadcast");return[i,u,s]},t}();e.GemmUtil=s,e.MIN_CLIP=-34028234663852886e22,e.MAX_CLIP=34028234663852886e22},387:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createAttributeWithCacheKey=void 0;var n=function(){function t(t){Object.assign(this,t)}return Object.defineProperty(t.prototype,"cacheKey",{get:function(){var t=this;return this._cacheKey||(this._cacheKey=Object.getOwnPropertyNames(this).sort().map((function(e){return"".concat(t[e])})).join(";")),this._cacheKey},enumerable:!1,configurable:!0}),t}();e.createAttributeWithCacheKey=function(t){return new n(t)}},7771:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,s)}u((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(t,i)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},a=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},s=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,a=e.length;o<a;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.createGpuDataManager=void 0;var u=n(4955),c=n(1163),l=function(t){return 16*Math.ceil(t/16)},f=0,p=function(){function t(t){this.backend=t,this.storageCache=new Map,this.downloadCache=new Map,this.buffersForUploadingPending=[],this.buffersPending=[]}return t.prototype.upload=function(t,e){var n=e.buffer,r=e.byteOffset,o=e.byteLength,a=l(o),i=this.storageCache.get(t);if(!i)throw new Error("gpu data for uploading does not exist");if(i.originalSize!==o)throw new Error("inconsistent data size. gpu data size=".concat(i.originalSize,", data size=").concat(o));var s=this.backend.device.createBuffer({mappedAtCreation:!0,size:a,usage:GPUBufferUsage.MAP_WRITE|GPUBufferUsage.COPY_SRC}),c=s.getMappedRange();new Uint8Array(c).set(new Uint8Array(n,r,o)),s.unmap();var f=this.backend.getCommandEncoder();this.backend.endComputePass(),f.copyBufferToBuffer(s,0,i.gpuData.buffer,0,a),(0,u.LOG_DEBUG)("verbose",(function(){return"[WebGPU] GpuDataManager.upload(id=".concat(t,")")})),this.buffersForUploadingPending.push(s)},t.prototype.memcpy=function(t,e){var n=this.storageCache.get(t);if(!n)throw new Error("source gpu data for memcpy does not exist");var r=this.storageCache.get(e);if(!r)throw new Error("destination gpu data for memcpy does not exist");if(n.originalSize!==r.originalSize)throw new Error("inconsistent source and destination gpu data size");var o=l(n.originalSize),a=this.backend.getCommandEncoder();this.backend.endComputePass(),a.copyBufferToBuffer(n.gpuData.buffer,0,r.gpuData.buffer,0,o)},t.prototype.create=function(t,e){void 0===e&&(e=GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST);var n=l(t),r=this.backend.device.createBuffer({size:n,usage:e}),o={id:f++,type:c.GpuDataType.default,buffer:r};return this.storageCache.set(o.id,{gpuData:o,originalSize:t}),(0,u.LOG_DEBUG)("verbose",(function(){return"[WebGPU] GpuDataManager.create(size=".concat(t,") => id=").concat(o.id)})),o},t.prototype.get=function(t){var e;return null===(e=this.storageCache.get(t))||void 0===e?void 0:e.gpuData},t.prototype.release=function(t){var e=this.storageCache.get(t);if(!e)throw new Error("releasing data does not exist");return(0,u.LOG_DEBUG)("verbose",(function(){return"[WebGPU] GpuDataManager.release(id=".concat(t,"), gpuDataId=").concat(e.gpuData.id)})),this.storageCache.delete(t),this.buffersPending.push(e.gpuData.buffer),this.downloadCache.get(t)&&this.downloadCache.delete(t),e.originalSize},t.prototype.download=function(t){return r(this,void 0,void 0,(function(){var e,n,r,a,i,s;return o(this,(function(o){if(e=this.downloadCache.get(t))return[2,e.data];if(!(n=this.storageCache.get(t)))throw new Error("data does not exist");return r=this.backend.getCommandEncoder(),this.backend.endComputePass(),a=l(n.originalSize),i=this.backend.device.createBuffer({size:a,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),r.copyBufferToBuffer(n.gpuData.buffer,0,i,0,a),this.backend.flush(),s=new Promise((function(t){i.mapAsync(GPUMapMode.READ).then((function(){var e=i.getMappedRange().slice(0);i.destroy(),t(e)}))})),this.downloadCache.set(t,{data:s}),[2,s]}))}))},t.prototype.refreshPendingBuffers=function(){var t,e,n,r;try{for(var o=a(this.buffersForUploadingPending),i=o.next();!i.done;i=o.next())i.value.destroy()}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}try{for(var s=a(this.buffersPending),u=s.next();!u.done;u=s.next())u.value.destroy()}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}},t}();e.createGpuDataManager=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new(p.bind.apply(p,s([void 0],i(t),!1)))}},8510:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return o(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.WEBGPU_OP_RESOLVE_RULES=void 0;var i=a(n(504)),s=n(9770),u=n(4271),c=n(1522),l=a(n(5262)),f=n(6031),p=n(2625),d=a(n(9302));e.WEBGPU_OP_RESOLVE_RULES=new Map([["Abs",[d.abs]],["Acos",[d.acos]],["Acosh",[d.acosh]],["Add",[i.add]],["Asin",[d.asin]],["Asinh",[d.asinh]],["Atan",[d.atan]],["Atanh",[d.atanh]],["AveragePool",[l.averagePool,l.parseAveragePoolAttributes]],["Ceil",[d.ceil]],["ClipV10",[d.clipV10]],["Clip",[d.clip]],["Conv",[s.conv,s.parseConvAttributes]],["Cos",[d.cos]],["Cosh",[d.cosh]],["Div",[i.div]],["Elu",[d.elu,d.parseAlphaAttributes]],["Erf",[d.erf]],["Exp",[d.exp]],["Floor",[d.floor]],["Gemm",[u.gemm,u.parseGemmAttributes]],["GlobalAveragePool",[l.globalAveragePool,l.parseGlobalAveragePoolAttributes]],["GlobalMaxPool",[l.globalMaxPool,l.parseGlobalMaxPoolAttributes]],["LeakyRelu",[d.leakyRelu,d.parseAlphaAttributes]],["MatMul",[c.matMul]],["MaxPool",[l.maxPool,l.parseMaxPoolAttributes]],["Mul",[i.mul]],["Neg",[d.neg]],["Pow",[i.pow]],["Reciprocal",[d.reciprocal]],["ReduceMin",[f.reduceMin,f.parseReduceAttributes]],["ReduceMean",[f.reduceMean,f.parseReduceAttributes]],["ReduceMax",[f.reduceMax,f.parseReduceAttributes]],["ReduceSum",[f.reduceSum,f.parseReduceAttributes]],["ReduceProd",[f.reduceProd,f.parseReduceAttributes]],["ReduceL1",[f.reduceL1,f.parseReduceAttributes]],["ReduceL2",[f.reduceL2,f.parseReduceAttributes]],["ReduceLogSum",[f.reduceLogSum,f.parseReduceAttributes]],["ReduceLogSumExp",[f.reduceLogSumExp,f.parseReduceAttributes]],["ReduceSumSquare",[f.reduceSumSquare,f.parseReduceAttributes]],["Relu",[d.relu]],["Sigmoid",[d.sigmoid]],["Sin",[d.sin]],["Sinh",[d.sinh]],["Sqrt",[d.sqrt]],["Sub",[i.sub]],["Tan",[d.tan]],["Tanh",[d.tanh]],["ThresholdedRelu",[d.thresholdedRelu,d.parseAlphaAttributes]],["Transpose",[p.transpose,p.parseTransposeAttributes]]])},1427:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.biasActivationSnippet=e.activationFnSnippet=e.typeSnippet=void 0,e.typeSnippet=function(t){switch(t){case 1:return"f32";case 2:return"vec2<f32>";case 3:return"vec3<f32>";case 4:return"vec4<f32>";default:throw new Error("".concat(t,"-component is not supported."))}},e.activationFnSnippet=function(t,e,n,r){return void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===r&&(r=3),""},e.biasActivationSnippet=function(t,e){return"\n      ".concat(t?"value = value + getBiasByOutputCoords(coords);":"","\n      ").concat(e?"value = activation(value, coords);":"","\n      ")}},9456:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.createConv2DMatMulProgramInfo=void 0;var o=n(4955),a=n(6952),i=n(1163),s=n(1427),u=n(4085),c=n(158);e.createConv2DMatMulProgramInfo=function(t,e,n,l,f,p,d,h,g){var m="NHWC"===n.format,y=m?t[0].dims[3]:t[0].dims[1],b=l[0],v=m?l[2]:l[3],w=m?l[1]:l[2],_=m?l[3]:l[1],x=((y%4==0||y%3==0)&&m||v%4==0&&!m)&&_%4==0,T=m?_:v*w,S=m?v*w:_,A=x?[8,8,1]:[T<=4?4:16,T>4&&S<=4?4:16,1],O=x?[4,4,1]:[T<=4?1:2,T>4&&S<=4?1:2,1],E=[Math.ceil(T/A[0]/O[0]),Math.ceil(S/A[1]/O[1]),Math.ceil(b/A[2]/O[1])];(0,o.LOG_DEBUG)("verbose",(function(){return"[conv2d_mm_webgpu] dispatch = ".concat(E)}));var P=x?m&&y%4!=0?3:4:O[0],I=A[1]*O[1],D=A[0]*O[0],k=Math.max(A[0]*P,A[1]),C=f%I==0,R=p%D==0,M=d%k==0,L=x?[P,4,4]:[1,1,1],F=["@group(0) @binding(0) var<storage, read> x: array<".concat(x&&4===P?"vec4<f32>":"f32",">;"),"@group(0) @binding(1) var<storage, read> w: array<".concat(x?"vec4<f32>":"f32",">;")],N="\n      fn setOutputAtIndex(flatIndex : i32, value : ".concat(x?"vec4<f32>":"f32",") {\n        result[flatIndex] = ").concat(x?"vec4<f32>":"f32","(value);\n      }\n      fn setOutputAtCoords(d0 : i32, d1 : i32, d2 : i32, d3 : i32, value : ").concat(x?"vec4<f32>":"f32",") {\n        let flatIndex = getOutputIndexFromCoords(vec4<i32>(d0, d1, d2, d3));\n        setOutputAtIndex(flatIndex ").concat(x?"/ 4":"",", value);\n      }");return h&&(F.push("@group(0) @binding(2) var<storage, read> bias: array<".concat(x?"vec4<f32>":"f32",">;")),N+="\n        fn getBiasByOutputCoords(coords : vec4<i32>) -> ".concat(x?"vec4<f32>":"f32"," {\n          return bias[coords.").concat(m?"w":"y").concat(x?"/ 4":"","];\n        }")),r(r({},e),{outputs:[{dims:l,dataType:t[0].dataType,gpuDataType:i.GpuDataType.default}],dispatchGroup:function(){return{x:E[0],y:E[1],z:E[2]}},getShaderSource:function(){return"\n        ".concat(u.utilFunctions,"\n        //struct Uniforms { xShape : vec4<i32>, wShape : vec4<i32>, outShape : vec4<i32>,\n        //  outShapeStrides: vec3<i32>, filterDims : vec2<i32>, pad : vec2<i32>, stride : vec2<i32>,\n        //  dilation : vec2<i32>, dimAOuter : i32, dimBOuter : i32, dimInner : i32 };\n        ").concat(F.join(""),"\n        @group(0) @binding(").concat(F.length,") var<storage, read_write> result: array<").concat(x?"vec4<f32>":"f32",">;\n        //@group(0) @binding(").concat(F.length+1,") var<uniform> uniforms: Uniforms;\n\n        const xShape : vec4<i32> = vec4<i32>(").concat(t[0].dims.join(","),");\n        const wShape : vec4<i32> = vec4<i32>(").concat(t[1].dims.join(","),");\n        const outShape : vec4<i32> = vec4<i32>(").concat(l.join(","),");\n        const outShapeStrides : vec3<i32> = vec3<i32>(").concat(a.ShapeUtil.computeStrides(l).slice(0,3).join(","),");\n        const filterDims : vec2<i32> = vec2<i32>(").concat(n.kernelShape[0],", ").concat(n.kernelShape[1],");\n        const pad : vec2<i32> = vec2<i32>(").concat(n.pads[0],", ").concat(n.pads[1],");\n        const stride : vec2<i32> = vec2<i32>(").concat(n.strides[0],", ").concat(n.strides[1],");\n        const dilation : vec2<i32> = vec2<i32>(").concat(n.dilations[0],", ").concat(n.dilations[1],");\n        const dimAOuter : i32 = ").concat(f,";\n        const dimBOuter : i32 = ").concat(p,";\n        const dimInner : i32 = ").concat(d,";\n        ").concat(N,"\n        ").concat(function(t,e,n,r,o,a,i,u,c,l){void 0===o&&(o=!1),void 0===i&&(i=!1),void 0===u&&(u=4),void 0===c&&(c=4),void 0===l&&(l=4);var f=t?"\n    let coord = vec4<i32>(batch, xRow, xCol, xCh);\n    ":"\n    let coord = vec4<i32>(batch, xCh, xRow, xCol);\n    ",p=t?"\n    let coords = vec4<i32>(\n      batch,\n      row / outWidth,\n      row % outWidth,\n      col);\n    ":"\n    let coords = vec4<i32>(\n      batch,\n      row,\n      col / outWidth,\n      col % outWidth);\n    ",d=t?"xShape[1]":"xShape[2]",h=t?"xShape[2]":"xShape[3]",g=t?"row":"col",m=t?"col":"row",y="\n    let inChannels = wShape[2];\n    let outWidth = ".concat(t?"outShape[2]":"outShape[3]",";\n    let outRow = ").concat(g," / outWidth;\n    let outCol = ").concat(g," % outWidth;\n\n    let WRow = ").concat(m," / (filterDims[1] * inChannels);\n    let WCol = ").concat(m," / inChannels % filterDims[1];\n    let xRow = outRow * stride[0] + dilation[0] * WRow - pad[0];\n    let xCol = outCol * stride[1] + dilation[1] * WCol - pad[1];\n    let xCh = ").concat(m," % inChannels;\n    var resData = ").concat((0,s.typeSnippet)(u),"(0.0);\n    // The bounds checking is always needed since we use it to pad zero for\n    // the 'same' padding type.\n    if (xRow >= 0 && xRow < ").concat(d," && xCol >= 0 && xCol < ").concat(h,") {\n      ").concat(f,"\n      let xIndex = getIndexFromCoords4D(coord, xShape);\n      ").concat(function(t){switch(t){case 1:return"resData = x[xIndex];";case 3:return"resData = vec3<f32>(x[xIndex], x[xIndex + 1], x[xIndex + 2]);";case 4:return"resData = x[xIndex / 4];";default:throw new Error("innerElementSize ".concat(t," is not supported."))}}(u),"\n    }\n    return resData;"),b=t?e&&r?"\n    let col = colIn * ".concat(u,";\n    ").concat(y):"\n    let col = colIn * ".concat(u,";\n    if (row < dimAOuter && col < dimInner) {\n      ").concat(y,"\n    }\n    return ").concat((0,s.typeSnippet)(u),"(0.0);"):r&&n?"\n    let col = colIn * ".concat(u,";\n    ").concat(y):"\n    let col = colIn * ".concat(u,";\n    if (row < dimInner && col < dimBOuter) {\n      ").concat(y,"\n    }\n    return ").concat((0,s.typeSnippet)(u),"(0.0);"),v="".concat(function(t){switch(t){case 1:return"return w[row * wShape[3] + colIn];";case 4:return"return w[row * wShape[3] / 4 + colIn];";default:throw new Error("innerElementSize ".concat(t," is not supported."))}}(c)),w=(0,s.typeSnippet)(l),_=t?(0,s.typeSnippet)(u):(0,s.typeSnippet)(c),x=t?(0,s.typeSnippet)(c):(0,s.typeSnippet)(u);return"\n    ".concat((0,s.activationFnSnippet)(a,i,4===l,4),"\n    fn mm_readA(batch: i32, row : i32, colIn : i32) -> ").concat(_," {\n      ").concat(t?b:v,"\n    }\n\n    fn mm_readB(batch: i32, row : i32, colIn : i32) -> ").concat(x," {\n      ").concat(t?v:b,"\n    }\n\n    fn mm_write(batch: i32, row : i32, colIn : i32, valueIn : ").concat(w,") {\n      let col = colIn * ").concat(l,";\n      if (row < dimAOuter && col < dimBOuter)\n      {\n      var value = valueIn;\n      let outWidth = ").concat(t?"outShape[2]":"outShape[3]",";\n      ").concat(p,"\n      ").concat((0,s.biasActivationSnippet)(o,a),"\n      setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);\n      }\n    }")}(m,C,R,M,h,void 0,!1,L[0],L[1],L[2]),"\n            ").concat(x?(0,c.makeMatMulPackedVec4Source)(O,A,!m,k):(0,c.makeMatMulPackedSource)(O,A,!m,k,!1,void 0,g))}})}},4085:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.utilFunctions=void 0,e.utilFunctions="\nfn getIndexFromCoords4D(coords : vec4<i32>, shape : vec4<i32>) -> i32 {\n  return dot(coords, vec4<i32>(\n      shape.y * shape.z * shape.w, shape.z * shape.w, shape.w, 1));\n}\nfn getOutputIndexFromCoords(coords : vec4<i32>) -> i32 {\n  return dot(coords, vec4<i32>(\n    outShapeStrides.x, outShapeStrides.y, outShapeStrides.z, 1));\n}\n"},158:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.makeMatMulPackedSource=e.makeMatMulPackedVec4Source=void 0,e.makeMatMulPackedVec4Source=function(t,e,n,r,o,a,i){void 0===n&&(n=!1),void 0===r&&(r=32),void 0===o&&(o=!1),void 0===a&&(a=32),void 0===i&&(i=!1);var s,u=e[1]*t[1],c=e[0]*t[0],l=n?u:r,f=n?r:u,p=l/e[0],d=r/e[1];if((!n||4!==p||4!==t[1])&&(n||3!==p&&4!==p)||l%e[0]!=0||r%e[1]!=0||4!==t[0])throw new Error("If transposeA ".concat(n," is true, innerElementSize ").concat(p," and workPerThread[1] ").concat(t[1]," must be 4.\n      Otherwise, innerElementSize ").concat(p," must be 3 or 4.\n  tileAWidth ").concat(l," must be divisible by workgroupSize[0]").concat(e[0],". tileInner ").concat(r," must be divisible by workgroupSize[1] ").concat(e[1],". colPerThread ").concat(t[0]," must be 4."));return"\nvar<workgroup> mm_Asub : array<array<vec".concat(p,"<f32>, ").concat(l/p,">, ").concat(f,">;\nvar<workgroup> mm_Bsub : array<array<vec4<f32>, ").concat(c/t[0],">, ").concat(r,">;\n\nconst rowPerThread = ").concat(t[1],";\nconst colPerThread = ").concat(t[0],";\nconst innerElementSize = ").concat(p,";\nconst tileInner = ").concat(r,";\n\n@compute @workgroup_size(").concat(e[0],", ").concat(e[1],", ").concat(e[2],")\nfn main(@builtin(local_invocation_id) localId : vec3<u32>,\n        @builtin(global_invocation_id) globalId : vec3<u32>,\n        @builtin(workgroup_id) workgroupId : vec3<u32>) {\n  let localRow = i32(localId.y);\n  let tileRow = ").concat(i?"0":"localRow * rowPerThread",";\n  let tileCol = i32(localId.x);\n\n  let globalRow = ").concat(i?"0":"i32(globalId.y) * rowPerThread",";\n  let globalCol = i32(globalId.x);\n  let batch = ").concat(o?"0":"i32(globalId.z)",";\n  let globalRowStart = i32(workgroupId.y) * ").concat(u,";\n\n  let numTiles = ").concat(o?"".concat(Math.ceil(a/r)):"(dimInner - 1) / tileInner + 1",";\n  var kStart = ").concat(o?"i32(globalId.z) * ".concat(a):"0",";\n\n  var acc: array<vec4<f32>, rowPerThread>;\n\n  // Loop over shared dimension.\n  let tileRowB = localRow * ").concat(d,";\n  for (var t = 0; t < numTiles; t = t + 1) {\n      // Load one tile of A into local memory.\n      for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n          let inputRow = tileRow + innerRow;\n          let inputCol = tileCol;\n          ").concat((s=n,s?"\n        mm_Asub[inputRow][inputCol] = mm_readA(batch,\n          kStart + inputRow,\n          globalRowStart / innerElementSize + inputCol);\n        ":"\n        mm_Asub[inputRow][inputCol] = mm_readA(batch,\n          globalRow + innerRow,\n          kStart / innerElementSize + inputCol);\n        "),"\n      }\n\n      // Load one tile of B into local memory.\n      for (var innerRow = 0; innerRow < ").concat(d,"; innerRow = innerRow + 1) {\n          let inputRow = tileRowB + innerRow;\n          let inputCol = tileCol;\n          mm_Bsub[inputRow][inputCol] = mm_readB(batch, kStart + inputRow, globalCol);\n      }\n      kStart = kStart + tileInner;\n      workgroupBarrier();\n\n      // Compute acc values for a single thread.\n      for (var k = 0; k < tileInner / innerElementSize; k = k + 1) {\n          let BCached0 = mm_Bsub[k * innerElementSize][tileCol];\n          let BCached1 = mm_Bsub[k * innerElementSize + 1][tileCol];\n          let BCached2 = mm_Bsub[k * innerElementSize + 2][tileCol];\n          ").concat(3===p?"":"let BCached3 = mm_Bsub[k * innerElementSize + 3][tileCol];","\n\n          ").concat(function(t,e){return t?"\n        let ACached0 = mm_Asub[k * innerElementSize][localRow];\n        let ACached1 = mm_Asub[k * innerElementSize + 1][localRow];\n        let ACached2 = mm_Asub[k * innerElementSize + 2][localRow];\n        ".concat(3===e?"":"let ACached3 = mm_Asub[k * innerElementSize + 3][localRow];","\n        for (var i = 0; i < rowPerThread; i = i + 1) {\n          acc[i] = BCached0 * ACached0[i] + acc[i];\n          acc[i] = BCached1 * ACached1[i] + acc[i];\n          acc[i] = BCached2 * ACached2[i] + acc[i];\n          ").concat(3===e?"":"acc[i] = BCached3 * ACached3[i] + acc[i];","\n        }"):"\n        for (var i = 0; i < rowPerThread; i = i + 1) {\n          let ACached = mm_Asub[tileRow + i][k];\n          acc[i] = BCached0 * ACached.x + acc[i];\n          acc[i] = BCached1 * ACached.y + acc[i];\n          acc[i] = BCached2 * ACached.z + acc[i];\n          ".concat(3===e?"":"acc[i] = BCached3 * ACached.w + acc[i];","\n        }")}(n,p),"\n      }\n\n      workgroupBarrier();\n  }\n\n  for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n      mm_write(batch, globalRow + innerRow, globalCol, acc[innerRow]);\n  }\n}")};var n=function(t){return t?"\n            mm_Asub[inputRow][inputCol] = mm_readA(batch,\n              kStart + inputRow,\n              globalRowStart + inputCol);\n            ":"\n            mm_Asub[inputRow][inputCol] = mm_readA(batch,\n              globalRowStart + inputRow,\n              kStart + inputCol);\n            "};e.makeMatMulPackedSource=function(t,e,r,o,a,i,s){void 0===r&&(r=!1),void 0===o&&(o=32),void 0===a&&(a=!1),void 0===i&&(i=32),void 0===s&&(s=!1);var u=t[1]*e[1],c=t[0]*e[0],l=r?u:o,f=r?o:u;if(f%e[1]!=0||l%e[0]!=0||o%e[1]!=0)throw new Error("tileAHight ".concat(f," must be divisible by workgroupSize[1]").concat(e[1],", tileAWidth ").concat(l," must be divisible by workgroupSize[0]").concat(e[0],", tileInner ").concat(o," must be divisible by workgroupSize[1]").concat(e[1]));var p=f/e[1],d=l/e[0],h=o/e[1],g=s?"\n    let localRow = i32(localId.y);\n    let localCol = i32(localId.x);\n    let globalRowStart = i32(workgroupId.y) * ".concat(u,";\n    let globalColStart = i32(workgroupId.x) * ").concat(c,";\n\n    // Loop over shared dimension.\n    for (var t = 0; t < numTiles; t = t + 1) {\n      // Load one tile of A into local memory.\n      for (var inputRow = localRow; inputRow < ").concat(f,"; inputRow = inputRow + ").concat(e[1],") {\n        for (var inputCol = localCol; inputCol < ").concat(l,"; inputCol = inputCol + ").concat(e[0],") {\n          ").concat(n(r),"\n        }\n      }\n      // Load one tile of B into local memory.\n      for (var inputRow = localRow; inputRow < ").concat(o,"; inputRow = inputRow + ").concat(e[1],") {\n            for (var inputCol = localCol; inputCol < ").concat(c,"; inputCol = inputCol + ").concat(e[0],") {\n          mm_Bsub[inputRow][inputCol] = mm_readB(batch,\n            kStart + inputRow,\n            globalColStart + inputCol);\n        }\n      }\n      kStart = kStart + tileInner;\n      workgroupBarrier();\n\n      // Compute acc values for a single thread.\n      var BCached : array<f32, colPerThread>;\n      for (var k = 0; k < tileInner; k = k + 1) {\n        for (var inner = 0; inner < colPerThread; inner = inner + 1) {\n          BCached[inner] = mm_Bsub[k][localCol + inner * ").concat(e[0],"];\n        }\n        for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n          let ACached = ").concat(r?"mm_Asub[k][localRow + innerRow * ".concat(e[1],"];"):"mm_Asub[localRow + innerRow * ".concat(e[1],"][k];"),"\n          for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n            acc[innerRow][innerCol] = acc[innerRow][innerCol] +\n                ACached * BCached[innerCol];\n          }\n        }\n      }\n      workgroupBarrier();\n    }\n    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n      let gRow = globalRowStart + localRow + innerRow * ").concat(e[1],";\n      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n        let gCol = globalColStart + localCol + innerCol * ").concat(e[0],";\n        mm_write(batch, gRow, gCol, acc[innerRow][innerCol]);\n      }\n    }\n    "):"\nlet tileRow = i32(localId.y) * rowPerThread;\nlet tileCol = i32(localId.x) * colPerThread;\n\nlet globalRow = i32(globalId.y) * rowPerThread;\nlet globalCol = i32(globalId.x) * colPerThread;\nlet globalRowStart = i32(workgroupId.y) * ".concat(u,";\n\nlet tileRowA = i32(localId.y) * ").concat(p,";\nlet tileColA = i32(localId.x) * ").concat(d,";\nlet tileRowB = i32(localId.y) * ").concat(h,";\n// Loop over shared dimension.\nfor (var t = 0; t < numTiles; t = t + 1) {\n  // Load one tile of A into local memory.\n  for (var innerRow = 0; innerRow < ").concat(p,"; innerRow = innerRow + 1) {\n    for (var innerCol = 0; innerCol < ").concat(d,"; innerCol = innerCol + 1) {\n      let inputRow = tileRowA + innerRow;\n      let inputCol = tileColA + innerCol;\n      ").concat(n(r),"\n    }\n  }\n\n  // Load one tile of B into local memory.\n  for (var innerRow = 0; innerRow < ").concat(h,"; innerRow = innerRow + 1) {\n    for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n      let inputRow = tileRowB + innerRow;\n      let inputCol = tileCol + innerCol;\n      mm_Bsub[inputRow][inputCol] = mm_readB(batch,\n        kStart + inputRow,\n        globalCol + innerCol);\n    }\n  }\n  kStart = kStart + tileInner;\n  workgroupBarrier();\n\n  // Compute acc values for a single thread.\n  var BCached : array<f32, colPerThread>;\n  for (var k = 0; k < tileInner; k = k + 1) {\n    for (var inner = 0; inner < colPerThread; inner = inner + 1) {\n      BCached[inner] = mm_Bsub[k][tileCol + inner];\n    }\n\n    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n      ").concat(function(t){return t?"let ACached = mm_Asub[k][tileRow + innerRow];":"let ACached = mm_Asub[tileRow + innerRow][k];"}(r),"\n      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n        acc[innerRow][innerCol] = acc[innerRow][innerCol] + ACached * BCached[innerCol];\n      }\n    }\n  }\n\n  workgroupBarrier();\n}\n\nfor (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n  for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n    mm_write(batch, globalRow + innerRow, globalCol + innerCol,\n        acc[innerRow][innerCol]);\n  }\n}\n");return"\n  var<workgroup> mm_Asub : array<array<f32, ".concat(l,">, ").concat(f,">;\n  var<workgroup> mm_Bsub : array<array<f32, ").concat(c,">, ").concat(o,">;\n  const rowPerThread = ").concat(t[1],";\n  const colPerThread = ").concat(t[0],";\n  const tileInner = ").concat(o,";\n\n@compute @workgroup_size(").concat(e[0],", ").concat(e[1],", ").concat(e[2],")\nfn main(@builtin(local_invocation_id) localId : vec3<u32>,\n        @builtin(global_invocation_id) globalId : vec3<u32>,\n        @builtin(workgroup_id) workgroupId : vec3<u32>) {\n    let batch = ").concat(a?"0":"i32(globalId.z)",";\n    let numTiles = ").concat(a?"".concat(Math.ceil(i/o)):"(dimInner - 1) / tileInner + 1",";\n    var kStart = ").concat(a?"i32(globalId.z) * ".concat(i):"0",";\n\n    var acc : array<array<f32, colPerThread>, rowPerThread>;\n\n    // Without this initialization strange values show up in acc.\n    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n        acc[innerRow][innerCol] = 0.0;\n      }\n    }\n    ").concat(g,"\n  }\n")}},504:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.pow=e.mul=e.div=e.add=void 0;var o=n(6952),a=n(1163),i=n(2075),s=function(t,e,n,s,u){var c={name:e,inputTypes:[a.GpuDataType.default,a.GpuDataType.default],cacheHint:u};return r(r({},c),{get:function(){return function(t,e,n,s,u,c){var l,f;void 0===c&&(c=e.dataType);var p=!o.ShapeUtil.areEqual(e.dims,n.dims),d=e.dims,h=o.ShapeUtil.size(e.dims),g=!1;if(p){var m=o.BroadcastUtil.calcShape(e.dims,n.dims,!1);if(!m)throw new Error("Can't perform binary op on the given tensors");d=m,h=o.ShapeUtil.size(d);for(var y=1,b=0;b<d.length;b++){var v=null!==(l=e.dims[e.dims.length-b])&&void 0!==l?l:1;if(v!==(null!==(f=n.dims[n.dims.length-b])&&void 0!==f?f:1))break;y*=v}y%4==0&&(g=!0)}else g=!0;return r(r({},t),{getShaderSource:function(t){return function(t,e,n,r,a,s,u,c,l,f,p){void 0===l&&(l="f32"),void 0===f&&(f="f32"),void 0===p&&(p="f32");var d,h,g=o.ShapeUtil.size(r),m=Math.ceil(g/4);"string"==typeof u?d=h=function(t,e){return"".concat(u,"((").concat(t,"),(").concat(e,"))")}:"function"==typeof u?d=h=u:(d=u.scalar,h=u.vector);var y,b="",v=(0,i.createIndicesHelper)("output",r);if(s){var w=function(t){for(var e=o.ShapeUtil.computeStrides(t),n=[],a=t.length-1;a>=0;a--){var i=0===r.length?"0u":1===r.length?"(*outputIndices)":"(*outputIndices)[".concat(a+r.length-t.length,"]");n.push("".concat(e[a],"u * (").concat(i," % ").concat(t[a],"u)"))}return n.length>0?n.join("+"):"0u"};b="\n  ".concat(v.o2iImpl,"\n\n  fn calcOffsetA(outputIndices: ptr<function, ").concat(v.iType,">) -> u32 {\n    return ").concat(w(e),";\n  }\n\n  fn calcOffsetB(outputIndices: ptr<function, ").concat(v.iType,">) -> u32 {\n    return ").concat(w(n),";\n  }\n  ")}if(a)y=s?"\n      ".concat(v.indicesVariableDeclaration("outputIndices"),"\n      ").concat(v.o2iCall("global_idx * 4u","outputIndices"),"\n      let offsetA = calcOffsetA(&outputIndices);\n      let offsetB = calcOffsetB(&outputIndices);\n      outputData[global_idx] = ").concat(h("aData[offsetA / 4u]","bData[offsetB / 4u]"),";"):"outputData[global_idx] = ".concat(h("aData[global_idx]","bData[global_idx]"),";");else{if(!s)throw new Error("no necessary to use scalar implementation for element-wise binary op implementation.");var _=function(t){var e="aData[indexA".concat(t,"][componentA").concat(t,"]"),n="bData[indexB".concat(t,"][componentB").concat(t,"]");return"\n      ".concat(v.o2iCall("global_idx * 4u + ".concat(t,"u"),"outputIndices"),"\n      let offsetA").concat(t," = calcOffsetA(&outputIndices);\n      let offsetB").concat(t," = calcOffsetB(&outputIndices);\n      let indexA").concat(t," = offsetA").concat(t," / 4u;\n      let indexB").concat(t," = offsetB").concat(t," / 4u;\n      let componentA").concat(t," = offsetA").concat(t," % 4u;\n      let componentB").concat(t," = offsetB").concat(t," % 4u;\n      outputData[global_idx][").concat(t,"] = ").concat(d(e,n),";")};y="\n      ".concat(v.indicesVariableDeclaration("outputIndices"),"\n      ").concat(_(0),"\n      ").concat(_(1),"\n      ").concat(_(2),"\n      ").concat(_(3))}return"\n  @group(0) @binding(0) var<storage, read> aData : array<vec4<".concat(l,">>;\n  @group(0) @binding(1) var<storage, read> bData : array<vec4<").concat(f,">>;\n  @group(0) @binding(2) var<storage, read_write> outputData : array<vec4<").concat(p,">>;\n\n  ").concat(null!=c?c:"","\n  ").concat(b,"\n\n  ").concat(t.mainStart(),"\n    ").concat(t.guardAgainstOutOfBoundsWorkgroupSizes(m),"\n    ").concat(y,"\n  }")}(t,e.dims,n.dims,d,g,p,s,u)},outputs:[{dims:d,dataType:c,gpuDataType:a.GpuDataType.default}],dispatchGroup:function(){return{x:Math.ceil(h/64/(g?4:1))}}})}(c,t[0],t[1],n,s)}})};e.add=function(t){t.compute(s(t.inputs,"Add",(function(t,e){return"".concat(t,"+").concat(e)})))},e.div=function(t){t.compute(s(t.inputs,"Div",(function(t,e){return"".concat(t,"/").concat(e)})))},e.mul=function(t){t.compute(s(t.inputs,"Mul",(function(t,e){return"".concat(t,"*").concat(e)})))},e.pow=function(t){t.compute(s(t.inputs,"Pow",{scalar:function(t,e){return"pow_f32(".concat(t,",").concat(e,")")},vector:function(t,e){return"pow_vf32(".concat(t,",").concat(e,")")}},"\n    fn pow_f32(a : f32, b : f32) -> f32 {\n      if (b == 0.0) {\n        return 1.0;\n      } else if (a < 0.0 && b != floor(b)) {\n        return pow(a, b); // NaN\n      }\n      return select(sign(a), 1.0, round(abs(b) % 2.0) != 1.0) * pow(abs(a), b);\n    }\n    fn pow_vf32(a : vec4<f32>, b : vec4<f32>) -> vec4<f32> {\n      // TODO: implement vectorized pow\n      return vec4<f32>(pow_f32(a.x, b.x), pow_f32(a.y, b.y), pow_f32(a.z, b.z), pow_f32(a.w, b.w));\n    }\n      "))},e.sub=function(t){t.compute(s(t.inputs,"Sub",(function(t,e){return"".concat(t,"-").concat(e)})))}},2075:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createShaderHelper=e.createIndicesHelper=e.WORKGROUP_SIZE=void 0;var r=n(6952);e.WORKGROUP_SIZE=64,e.createIndicesHelper=function(t,e){for(var n=e.length<2?"u32":"array<u32, ".concat(e.length,">"),o=r.ShapeUtil.computeStrides(e),a="",i=0;i<e.length-1;i++)a+="\n    let dim".concat(i," = current / ").concat(o[i],"u;\n    let rest").concat(i," = current % ").concat(o[i],"u;\n    (*indices)[").concat(i,"] = dim").concat(i,";\n    current = rest").concat(i,";\n    ");a+="(*indices)[".concat(e.length-1,"] = current;");var s=e.length<2?"":"\n  fn ih_o2i_".concat(t,"(offset: u32, indices: ptr<function, ").concat(n,">) {\n    var current = offset;\n    ").concat(a,"\n  }"),u=[];if(0===e.length)u.push("0u");else if(e.length<2)u.push("(*indices)");else for(i=e.length-1;i>=0;i--)u.push("".concat(o[i],"u * ((*indices)[").concat(i,"])"));return{o2iImpl:s,o2iCall:function(n,r){return e.length<2?"".concat(r,"=").concat(n,";"):"ih_o2i_".concat(t,"(").concat(n,", &").concat(r,");")},i2oImpl:e.length<2?"":"\n  fn ih_i2o_".concat(t,"(indices: ptr<function, ").concat(n,">) -> u32 {\n    return ").concat(u.join("+"),";\n  }"),i2oExpression:function(n,r){return e.length<2?"(".concat(r?"*":"").concat(n,")"):"ih_i2o_".concat(t,"(").concat(r?"":"&").concat(n,")")},indicesVariableDeclaration:function(t,e){return"var ".concat(t,":").concat(n).concat(e?"=".concat(n,"(").concat(e.join(","),")"):"",";")},iType:n}};var o=function(){function t(t){this.normalizedDispatchGroup=t}return t.prototype.guardAgainstOutOfBoundsWorkgroupSizes=function(t){var e="number"==typeof t?"".concat(t,"u"):t;return"if (global_idx >= ".concat(e,") { return; }")},t.prototype.mainStart=function(t){void 0===t&&(t=e.WORKGROUP_SIZE);var n="number"==typeof t?t:t[0],r="number"==typeof t?1:t[1],o="number"==typeof t?1:t[2],a=1===this.normalizedDispatchGroup[1]&&1===this.normalizedDispatchGroup[2],i=a?"@builtin(global_invocation_id) global_id : vec3<u32>":"@builtin(local_invocation_index) local_index : u32,\n    @builtin(workgroup_id) workgroup_id : vec3<u32>",s=a?"let global_idx = global_id.x;":"let global_idx = (workgroup_id.z * ".concat(this.normalizedDispatchGroup[0]*this.normalizedDispatchGroup[1],"u +\n          workgroup_id.y * ").concat(this.normalizedDispatchGroup[0],"u + workgroup_id.x) * ").concat(n*r*o,"u + local_index;");return"@compute @workgroup_size(".concat(n,", ").concat(r,", ").concat(o,")\n  fn main(").concat(i,") {\n    ").concat(s,"\n  ")},t}();e.createShaderHelper=function(t){return new o(t)}},9192:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.createGroupedConvProgramInfoLoader=void 0;var o=n(6952),a=n(1163),i=n(2075),s=n(9770),u=n(3997);e.createGroupedConvProgramInfoLoader=function(t,e,n){var c,l,f=(c=t.length>2,l=e.cacheKey,{name:"GroupedConv",inputTypes:c?[a.GpuDataType.default,a.GpuDataType.default,a.GpuDataType.default]:[a.GpuDataType.default,a.GpuDataType.default],cacheHint:l});return r(r({},f),{get:function(){return function(t,e,n,c){var l=t.length>2,f=l?"value += b[output_channel];":"",p=t[0].dims,d=t[1].dims,h=d[0]/n.group,g="f32",m=(0,u.getActicationSnippet)(n),y=m.activationFunction,b=m.applyActivation,v=["@group(0) @binding(0) var<storage, read> x : array<".concat(g,">;"),"@group(0) @binding(1) var<storage, read> w : array<".concat(g,">;")];l&&v.push("@group(0) @binding(2) var<storage, read> b : array<".concat(g,">;"));var w="NHWC"===n.format,_=(0,s.calculateOutputShape)(p,d,n.dilations,n.pads,n.strides,w),x=o.ShapeUtil.size(_),T=(0,i.createIndicesHelper)("output",_),S=(0,i.createIndicesHelper)("x",p),A=(0,i.createIndicesHelper)("w",d);return r(r({},e),{outputs:[{dims:c?c(_):_,dataType:t[0].dataType,gpuDataType:a.GpuDataType.default}],getShaderSource:function(t){return"\n  const strides: vec2<u32> = vec2(".concat(n.strides[0],"u, ").concat(n.strides[1],"u);\n  const pads: vec2<u32> = vec2(").concat(n.pads[0],"u, ").concat(n.pads[1],"u);\n\n  ").concat(v.join("\n"),"\n  @group(0) @binding(").concat(v.length,") var<storage, read_write> output : array<").concat(g,">;\n\n  ").concat(y,"\n  ").concat(T.o2iImpl,"\n  ").concat(S.i2oImpl,"\n  ").concat(A.i2oImpl,"\n\n  ").concat(t.mainStart(),"\n    ").concat(t.guardAgainstOutOfBoundsWorkgroupSizes(x),"\n\n    ").concat(T.indicesVariableDeclaration("outputIndices"),"\n    ").concat(T.o2iCall("global_idx","outputIndices"),"\n    let batch: u32 = outputIndices[0];\n    let output_channel: u32 = outputIndices[").concat(w?3:1,"];\n    let xRCCorner: vec2<u32> = vec2<u32>(outputIndices[").concat(w?1:2,"], outputIndices[").concat(w?2:3,"]) * strides - pads;\n    let group_id: u32 = output_channel / ").concat(h,"u;\n\n    var value: ").concat(g," = ").concat(g,"(0);\n    for (var wInChannel: u32 = 0u; wInChannel < ").concat(d[1],"u; wInChannel++) {\n      let input_channel = group_id * ").concat(d[1],"u + wInChannel;\n      for (var wHeight: u32 = 0u; wHeight < ").concat(d[2],"u; wHeight++) {\n        let xHeight = xRCCorner.x + wHeight * ").concat(n.dilations[0],"u;\n\n        if (xHeight < 0u || xHeight >= ").concat(p[w?1:2],"u) {\n          continue;\n        }\n\n        for (var wWidth: u32 = 0u; wWidth < ").concat(d[3],"u; wWidth++) {\n          let xWidth = xRCCorner.y + wWidth * ").concat(n.dilations[1],"u;\n          if (xWidth < 0u || xWidth >= ").concat(p[w?2:3],"u) {\n            continue;\n          }\n\n          ").concat(S.indicesVariableDeclaration("xIndices",w?["batch","xHeight","xWidth","input_channel"]:["batch","input_channel","xHeight","xWidth"]),"\n          let xVal = x[").concat(S.i2oExpression("xIndices"),"];\n          ").concat(A.indicesVariableDeclaration("wIndices",["output_channel","wInChannel","wHeight","wWidth"]),"\n          let wVal = w[").concat(A.i2oExpression("wIndices"),"];\n          value += xVal*wVal;\n        }\n      }\n    }\n    ").concat(f,"\n    ").concat(b,"\n    output[global_idx] = value;\n  }")},dispatchGroup:function(){return{x:Math.ceil(x/64)}}})}(t,f,e,n)}})}},9770:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.conv=e.parseConvAttributes=e.calculateOutputShape=void 0;var o=n(6952),a=n(387),i=n(9192),s=n(3822),u=n(3997),c=n(2625);e.calculateOutputShape=function(t,e,n,r,o,a){var i=t[0],s=t.slice(a?1:2,a?3:4),u=s.length,c=e[0],l=e.slice(2).map((function(t,e){return t+(t-1)*(n[e]-1)})),f=s.map((function(t,e){return t+r[e]+r[e+u]})).map((function(t,e){return Math.floor((t-l[e]+o[e])/o[e])}));return f.splice(0,0,i),f.splice(a?3:1,0,c),f};var l=(0,a.createAttributeWithCacheKey)({perm:[2,3,1,0]}),f=function(t,e){for(var n=t.kernelShape.slice(),r=2;r<e[1].dims.length;++r)0===n[r-2]&&(n[r-2]=e[1].dims[r]);var a=t.pads.slice();o.PoolConvUtil.adjustPadsBasedOnAutoPad(e[0].dims,t.strides,t.dilations,n,a,"NHWC"===t.format,t.autoPad);var i=Object.assign({},t);return Object.assign(i,{kernelShape:n,pads:a,cacheKey:t.cacheKey}),i};e.parseConvAttributes=function(t){var e=(0,u.parseInternalActivationAttributes)(t),n=t.format,o=["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][t.auto_pad],i=t.dilations,s=t.group,c=t.kernel_shape,l=t.pads,f=t.strides,p=t.w_is_const();return(0,a.createAttributeWithCacheKey)(r({autoPad:o,format:n,dilations:i,group:s,kernelShape:c,pads:l,strides:f,wIsConst:p},e))},e.conv=function(t,n){!function(t,e){if(!t||2!==t.length&&3!==t.length)throw new Error("Conv requires 2 or 3 inputs");if(4!==t[0].dims.length&&3!==t[0].dims.length)throw new Error("currently only support conv 1D and 2D");if(t[0].dims.length!==t[1].dims.length)throw new Error("filter does not have same dimension as input");if(t[0].dims["NHWC"===e.format?t[0].dims.length-1:1]!==t[1].dims[1]*e.group)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(3===t.length&&(1!==t[2].dims.length||t[1].dims[0]!==t[2].dims[0]))throw new Error("invalid bias");var n=t[0].dims.length-2;if(e.dilations.length!==n)throw new Error("dilations should be ".concat(n,"D"));if(e.strides.length!==n)throw new Error("strides should be ".concat(n,"D"));if(e.pads.length!==2*n)throw new Error("pads should be ".concat(2*n,"D"));if(0!==e.kernelShape.length&&e.kernelShape.length!==t[1].dims.length-2)throw new Error("invalid kernel shape");if(1!==t[0].dataType||1!==t[1].dataType)throw new Error("Conv input(X,W) should be float tensor");if(3===t.length&&1!==t[2].dataType)throw new Error("Conv input(bias) should be float tensor")}(t.inputs,n),3===t.inputs[0].dims.length?function(t,e){var n="NHWC"===e.format,o=[t.inputs[0].reshape(n?[t.inputs[0].dims[0],1,t.inputs[0].dims[1],t.inputs[0].dims[2]]:[t.inputs[0].dims[0],t.inputs[0].dims[1],1,t.inputs[0].dims[2]]),t.inputs[1].reshape([t.inputs[1].dims[0],t.inputs[1].dims[1],1,t.inputs[1].dims[2]])];3===t.inputs.length&&o.push(t.inputs[2]);var a=[0,e.pads[0],0,e.pads[1]],s=[1].concat(e.strides),u=[1].concat(e.dilations),c=[1].concat(e.kernelShape),l=f(r(r({},e),{pads:a,strides:s,dilations:u,kernelShape:c}),o);t.compute((0,i.createGroupedConvProgramInfoLoader)(o,l,(function(t){return n?[t[0],t[2],t[3]]:[]})))}(t,n):function(t,n,o){var a,u=f(o,n),p=3===n.length,d="NHWC"===o.format,h=n[0].dims[d?1:2],g=n[0].dims[d?2:3],m=n[0].dims[d?3:1],y=n[1].dims[2],b=n[1].dims[3],v=(0,e.calculateOutputShape)(n[0].dims,n[1].dims,o.dilations,u.pads,o.strides,d),w=v[d?1:2],_=v[d?2:3],x=v[d?3:1];if(d&&y===h&&b===g&&"VALID"===o.autoPad||1===y&&1===b&&1===o.dilations[0]&&1===o.dilations[1]&&1===o.strides[0]&&1===o.strides[1]&&("SAME_UPPER"===o.autoPad||"SAME_LOWER"===o.autoPad||"VALID"===o.autoPad))t.compute((0,i.createGroupedConvProgramInfoLoader)(n,u));else if(d&&1===o.group){var T=d?w*_:x,S=d?x:w*_,A=y*b*m,O=null!==(a=t.customData.wT)&&void 0!==a?a:t.compute(r(r({},c.transposeProgramMetadata),{cacheHint:l.cacheKey,get:function(){return(0,c.createTransposeProgramInfo)(n[1],l.perm)}}),{inputs:[1],outputs:[o.wIsConst?-2:-1]})[0];o.wIsConst&&!t.customData.wT&&(t.customData.wT=O);var E=[n[0],O];p&&(d||1!==n[2].dims.length?E.push(n[2]):E.push(n[2].reshape([n[2].dims[0],1,1]))),t.compute((0,s.createConv2DMatMulProgramInfoLoader)(E,u,v,T,S,A,p,!0),{inputs:E})}else t.compute((0,i.createGroupedConvProgramInfoLoader)(n,u))}(t,t.inputs,n)}},3822:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.createConv2DMatMulProgramInfoLoader=void 0;var o=n(1163),a=n(9456);e.createConv2DMatMulProgramInfoLoader=function(t,e,n,i,s,u,c,l){var f=function(t,e){return{name:"Conv2DMatMul",inputTypes:t?[o.GpuDataType.default,o.GpuDataType.default,o.GpuDataType.default]:[o.GpuDataType.default,o.GpuDataType.default],cacheHint:e}}(c,e.cacheKey);return r(r({},f),{get:function(){return(0,a.createConv2DMatMulProgramInfo)(t,f,e,n,i,s,u,c,l)}})}},3997:function(t,e,n){"use strict";var r=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(e,"__esModule",{value:!0}),e.parseInternalActivationAttributes=e.getActicationSnippet=void 0;var o=n(6952);e.getActicationSnippet=function(t){switch(t.activation){case"Relu":return{activationFunction:"",applyActivation:"value = max(value, 0.0);"};case"Sigmoid":return{activationFunction:"",applyActivation:"value = (1.0 / (1.0 + exp(-value)));"};case"Clip":return{activationFunction:"const clip_min_=f32(".concat(t.clipMin,");const clip_max_=f32(").concat(t.clipMax,");"),applyActivation:"value = clamp(value, clip_min_, clip_max_);"};default:return{activationFunction:"",applyActivation:""}}},e.parseInternalActivationAttributes=function(t){var e=(null==t?void 0:t.activation)||"";if("Clip"===e){var n=r((null==t?void 0:t.activation_params)||[o.MIN_CLIP,o.MAX_CLIP],2),a=n[0],i=n[1];return{activation:e,clipMax:i,clipMin:a,activationCacheKey:"".concat(e,":").concat(a,",").concat(i)}}return{activation:e,activationCacheKey:e}}},4271:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(e,"__esModule",{value:!0}),e.parseGemmAttributes=e.gemm=void 0;var a=n(6952),i=n(387),s=n(1163);e.gemm=function(t,e){!function(t){if(!t)throw new Error("Input is missing");if(t.length<2||t.length>3)throw new Error("Invaid input number.");if(3===t.length&&t[2].dims.length>2)throw new Error("Invalid input shape of C");if(1!==t[0].dataType||1!==t[1].dataType||3===t.length&&1!==t[2].dataType)throw new Error("Invalid input type.");if(t[0].dataType!==t[1].dataType||3===t.length&&t[0].dataType!==t[2].dataType)throw new Error("Input types are mismatched")}(t.inputs),t.compute(function(t,e){var n={name:"Gemm",inputTypes:3===t.length?[s.GpuDataType.default,s.GpuDataType.default,s.GpuDataType.default]:[s.GpuDataType.default,s.GpuDataType.default],cacheHint:e.cacheKey};return r(r({},n),{get:function(){return function(t,e,n){var i=e[0].dims.slice(),u=e[1].dims.slice(),c=o(a.GemmUtil.getShapeOfGemmResult(i,n.transA,u,n.transB,3===e.length?e[2].dims:void 0),3),l=c[0],f=c[1],p=c[2],d=[l,f];if(!d)throw new Error("Can't use gemm on the given tensors");var h=a.ShapeUtil.size(d),g="";n.transA&&n.transB?g="value += a[k * M + m] * b[n * K + k];":n.transA&&!n.transB?g="value += a[k * M + m] * b[k * N + n];":!n.transA&&n.transB?g="value += a[m * K + k] * b[n * K + k];":n.transA||n.transB||(g="value += a[m * K + k] * b[k * N + n];");var m="f32",y=1===n.alpha?"":"value *= alpha;",b=3===e.length?"value += beta * c[".concat(function(t,e,n){if(0===n.length)return"0u";var r=1===n.length&&1!==t||2===n.length&&n[0]!==t,o=n[n.length-1]!==e,a="0u";return r||(a+="+ m * ".concat(n[n.length-1],"u")),o||(a+="+n"),a}(l,f,e[2].dims),"];"):"",v=["@group(0) @binding(0) var<storage, read> a : array<".concat(m,">;"),"@group(0) @binding(1) var<storage, read> b : array<".concat(m,">;")];return 3===e.length&&v.push("@group(0) @binding(2) var<storage, read> c : array<".concat(m,">;")),r(r({},t),{outputs:[{dims:d,dataType:e[0].dataType,gpuDataType:s.GpuDataType.default}],getShaderSource:function(t){return"\n  const M: u32 = ".concat(l,"u;\n  const N: u32 = ").concat(f,"u;\n  const K: u32 = ").concat(p,"u;\n  const alpha = ").concat(m,"(").concat(n.alpha,");\n  const beta = ").concat(m,"(").concat(n.beta,");\n\n  ").concat(v.join("\n"),"\n  @group(0) @binding(").concat(e.length,") var<storage, read_write> output : array<").concat(m,">;\n\n  ").concat(t.mainStart(),"\n    ").concat(t.guardAgainstOutOfBoundsWorkgroupSizes(h),"\n\n    let m = global_id.x / N;\n    let n = global_id.x % N;\n\n    var value = ").concat(m,"(0);\n    for (var k: u32 = 0u; k<").concat(p,"u; k++) {\n      ").concat(g,"\n    }\n\n    ").concat(y,"\n    ").concat(b,"\n    output[global_id.x] = value;\n\n  }")},dispatchGroup:function(){return{x:Math.ceil(h/64)}}})}(n,t,e)}})}(t.inputs,e))},e.parseGemmAttributes=function(t){return(0,i.createAttributeWithCacheKey)(t)}},1522:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.matMul=e.createMatmulProgramInfoLoader=void 0;var o=n(6952),a=n(1163),i=n(3997);e.createMatmulProgramInfoLoader=function(t,e){var n,s,u=(n=t.length>2,s=e.activationCacheKey,{name:"MatMul",inputTypes:n?[a.GpuDataType.default,a.GpuDataType.default,a.GpuDataType.default]:[a.GpuDataType.default,a.GpuDataType.default],cacheHint:s});return r(r({},u),{get:function(){return function(t,e,n){var s=e[0].dims,u=e[1].dims,c=o.BroadcastUtil.calcShape(s,u,!0);if(!c)throw new Error("Can't use matmul on the given tensors");var l=o.ShapeUtil.size(c),f="f32",p=(0,i.getActicationSnippet)(n),d=p.activationFunction,h=p.applyActivation,g=c[c.length-2],m=s[s.length-1],y=c[c.length-1];return r(r({},t),{outputs:[{dims:c,dataType:e[0].dataType,gpuDataType:a.GpuDataType.default}],getShaderSource:function(t){return"\n  const M: u32 = ".concat(g,"u;\n  const N: u32 = ").concat(y,"u;\n  const K: u32 = ").concat(m,"u;\n\n  @group(0) @binding(0) var<storage, read> a : array<").concat(f,">;\n  @group(0) @binding(1) var<storage, read> b : array<").concat(f,">;\n  @group(0) @binding(2) var<storage, read_write> output : array<").concat(f,">;\n\n  ").concat(d,"\n\n  ").concat(t.mainStart(),"\n    ").concat(t.guardAgainstOutOfBoundsWorkgroupSizes(l),"\n\n    let stack = global_idx / (M * N);\n    let mn = global_idx % (M * N);\n    let n = global_idx % N;\n    let m = mn / N;\n\n    let offsetA = stack * (M * K);\n    let offsetB = stack * (K * N);\n\n    var value = ").concat(f,"(0);\n    for (var k: u32 = 0u; k<").concat(m,"u; k++) {\n      value += a[offsetA + m * K + k] * b[offsetB + k * N + n];\n    }\n    ").concat(h,"\n    output[global_idx] = value;\n  }")},dispatchGroup:function(){return{x:Math.ceil(l/64)}}})}(u,t,e)}})},e.matMul=function(t){!function(t){if(!t||2!==t.length)throw new Error("MatMul requires 2 inputs.");if(t[0].dims[t[0].dims.length-1]!==t[1].dims[t[1].dims.length-2])throw new Error("shared dimension does not match.");if(1!==t[0].dataType||1!==t[1].dataType)throw new Error("inputs should be float type")}(t.inputs),t.compute((0,e.createMatmulProgramInfoLoader)(t.inputs,{activation:"",activationCacheKey:""}))}},5262:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(e,"__esModule",{value:!0}),e.globalMaxPool=e.parseGlobalMaxPoolAttributes=e.parseMaxPoolAttributes=e.maxPool=e.globalAveragePool=e.parseGlobalAveragePoolAttributes=e.averagePool=e.parseAveragePoolAttributes=void 0;var a=n(6952),i=n(387),s=n(1163),u=n(2075),c=function(t){if(!t||1!==t.length)throw new Error("Pool ops requires 1 input.");if(4!==t[0].dims.length)throw new Error("Pool ops supports 2-D inputs only for now.");if(1!==t[0].dataType)throw new Error("Invalid input type.")},l=function(t,e,n){var r="NHWC"===e.format,o=r?[t[0].dims[0],t[0].dims[3],t[0].dims[1],t[0].dims[2]]:t[0].dims.slice(),i=Object.hasOwnProperty.call(e,"dilations"),s=e.kernelShape.slice(),u=e.strides.slice(),c=i?e.dilations.slice():[],l=e.pads.slice();a.PoolConvUtil.adjustPoolAttributes(n,o,s,u,c,l);var f=a.PoolConvUtil.computePoolOutputShape(n,o,u,c,s,l,e.autoPad),p=Object.assign({},e);return i?Object.assign(p,{kernelShape:s,strides:u,pads:l,dilations:c,cacheKey:e.cacheKey}):Object.assign(p,{kernelShape:s,strides:u,pads:l,cacheKey:e.cacheKey}),[p,r?[f[0],f[2],f[3],f[1]]:f]},f=function(t,e,n,r,o,i,s,c){var l="NHWC"===r.format,f=e.length,p=a.ShapeUtil.size(n),d=(0,u.createIndicesHelper)("output",n),h=(0,u.createIndicesHelper)("x",e);if(r.kernelShape.length<=2){var g,m=r.kernelShape[r.kernelShape.length-1],y=r.strides[r.strides.length-1],b=r.pads[r.pads.length/2-1],v=f-(l?2:1),w="",_="";if(g=b+r.pads[r.pads.length-1]!==0?"\n              for (var i: u32 = 0u; i < ".concat(m,"u; i++) {\n                xIndices[").concat(v,"] = indices[").concat(v,"] * ").concat(y," - ").concat(b," + i;\n                if (xIndices[").concat(v,"] < 0 || xIndices[").concat(v,"] >= ").concat(e[v],") {\n                  pad++;\n                  continue;\n                }\n                let x_val = x[").concat(h.i2oExpression("xIndices"),"];\n                ").concat(o,"\n              }"):"\n              for (var i: u32 = 0u; i < ".concat(m,"u; i++) {\n                xIndices[").concat(v,"] = indices[").concat(v,"] * ").concat(y," - ").concat(b," + i;\n                let x_val = x[").concat(h.i2oExpression("xIndices"),"];\n                ").concat(o,"\n              }"),2===r.kernelShape.length){var x=r.kernelShape[r.kernelShape.length-2],T=r.strides[r.strides.length-2],S=r.pads[r.pads.length/2-2],A=r.pads[r.pads.length-2],O=f-(l?3:2),E=e[O];w=S+A!==0?"\n                for (var j: u32 = 0u; j < ".concat(x,"u; j++) {\n                  xIndices[").concat(O,"] = indices[").concat(O,"] * ").concat(T," - ").concat(S," + j;\n                  if (xIndices[").concat(O,"] < 0 || xIndices[").concat(O,"] >= ").concat(E,") {\n                    pad+= ").concat(m,";\n                    continue;\n                  }\n              "):"\n                for (var j: u32 = 0u; j < ".concat(x,"u; j++) {\n                  xIndices[").concat(O,"] = indices[").concat(O,"] * ").concat(T," - ").concat(S," + j;\n                "),_="\n              }\n            "}return"\n            @group(0) @binding(0) var<storage, read> x : array<".concat(s,">;\n            @group(0) @binding(1) var<storage, read_write> output : array<").concat(s,">;\n\n            ").concat(d.o2iImpl,"\n            ").concat(h.i2oImpl,"\n\n            ").concat(t.mainStart(),"\n              ").concat(t.guardAgainstOutOfBoundsWorkgroupSizes(p),"\n\n              ").concat(d.indicesVariableDeclaration("indices"),"\n              ").concat(d.o2iCall("global_idx","indices"),"\n              ").concat(d.indicesVariableDeclaration("xIndices"),"\n              ").concat(d.o2iCall("global_idx","xIndices"),"\n\n              var value: ").concat(s," = ").concat(s,"(").concat(c,");\n              var pad = 0;\n              ").concat(w,"\n              ").concat(g,"\n              ").concat(_,"\n              ").concat(i,"\n\n              output[global_idx] = value;\n            }")}if(l)throw new Error("Pooling with kernelShape.length > 2 is not supported for NHWC format.");var P,I=a.ShapeUtil.size(r.kernelShape),D=a.ShapeUtil.computeStrides(r.kernelShape),k=D.length,C=r.pads.length;return P=r.pads.reduce((function(t,e){return t+e}))?"\n                if (xIndices[j] >= inputDims[j]) {\n                  pad++;\n                  isPad = true;\n                  break;\n                }\n              }\n              if (!isPad) {\n                let x_val = x[".concat(h.i2oExpression("xIndices"),"];\n                ").concat(o,"\n              }"):"\n              }\n              let x_val = x[".concat(h.i2oExpression("xIndices"),"];\n              ").concat(o,"\n            "),"\n            @group(0) @binding(0) var<storage, read> x : array<".concat(s,">;\n            @group(0) @binding(1) var<storage, read_write> output : array<").concat(s,">;\n\n            ").concat(d.o2iImpl,"\n            ").concat(h.i2oImpl,"\n\n            const pads = array<u32, ").concat(C,">(").concat(r.pads.map((function(t){return"".concat(t,"u")})).join(","),");\n            const inputDims = array<u32, ").concat(f,">(").concat(e.map((function(t){return"".concat(t,"u")})).join(","),");\n            const kernelStrides = array<u32, ").concat(k,">(").concat(D.map((function(t){return"".concat(t,"u")})).join(","),");\n            const strides = array<u32, ").concat(k,">(").concat(r.strides.map((function(t){return"".concat(t,"u")})).join(","),");\n\n            ").concat(t.mainStart(),"\n              ").concat(t.guardAgainstOutOfBoundsWorkgroupSizes(p),"\n\n              ").concat(d.indicesVariableDeclaration("indices"),"\n              ").concat(d.o2iCall("global_idx","indices"),"\n              ").concat(d.indicesVariableDeclaration("xIndices"),"\n              ").concat(d.o2iCall("global_idx","xIndices"),"\n\n              var offsets: array<u32, ").concat(k,">;\n\n              var value = ").concat(s,"(").concat(c,");\n              var pad = 0;\n              var isPad = false;\n\n              for (var i: u32 = 0u; i < ").concat(I,"u; i++) {\n                var offset = i;\n                for (var j = 0u; j < ").concat(k-1,"u; j++) {\n                  offsets[j] = offset / kernelStrides[j];\n                  offset -= offsets[j] * kernelStrides[j];\n                }\n                offsets[").concat(k-1,"] = offset;\n\n                isPad = false;\n                for (var j = ").concat(f-k,"u; j < ").concat(f,"u; j++) {\n                  xIndices[j] = indices[j] * strides[j - ").concat(f-k,"u]\n                    + offsets[j - ").concat(f-k,"u] - pads[j - 2u];\n                  ").concat(P,"\n              }\n              ").concat(i,"\n\n              output[global_idx] = value;\n            }")},p=function(t){return{format:t.format,autoPad:["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][t.auto_pad],ceilMode:t.ceil_mode,kernelShape:t.kernel_shape,strides:t.strides,pads:t.pads}},d=function(t,e,n,i){var u=o(l(t,i,n),2),c=u[0],p=u[1],d=a.ShapeUtil.size(c.kernelShape),h="f32",g="";return c.countIncludePad?g+="value /= ".concat(h,"(").concat(d,");"):g+="value /= ".concat(h,"(").concat(d," - pad);"),r(r({},e),{outputs:[{dims:p,dataType:t[0].dataType,gpuDataType:s.GpuDataType.default}],getShaderSource:function(e){return f(e,t[0].dims,p,c,"value += x_val;",g,h,"0.0")},dispatchGroup:function(){return{x:Math.ceil(a.ShapeUtil.size(p)/64)}}})};e.parseAveragePoolAttributes=function(t){var e=0!==t.count_include_pad,n=p(t);if(0!==n.ceilMode)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return(0,i.createAttributeWithCacheKey)(r({countIncludePad:e},n))},e.averagePool=function(t,e){c(t.inputs);var n={name:"AveragePool",inputTypes:[s.GpuDataType.default],cacheHint:e.cacheKey};t.compute(r(r({},n),{get:function(){return d(t.inputs,n,!1,e)}}))};var h={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""};e.parseGlobalAveragePoolAttributes=function(t){var e=t.format;return r(r({format:e},h),{cacheKey:e})},e.globalAveragePool=function(t,e){c(t.inputs);var n={name:"GlobalAveragePool",inputTypes:[s.GpuDataType.default],cacheHint:e.cacheKey};t.compute(r(r({},n),{get:function(){return d(t.inputs,n,!0,e)}}))};var g=function(t,e,n,i){var u=o(l(t,i,n),2),c=u[0],p=u[1];return r(r({},e),{outputs:[{dims:p,dataType:t[0].dataType,gpuDataType:s.GpuDataType.default}],getShaderSource:function(e){return f(e,t[0].dims,p,c,"\n      value = max(x_val, value);\n    ","","f32","-1e5")},dispatchGroup:function(){return{x:Math.ceil(a.ShapeUtil.size(p)/64)}}})};e.maxPool=function(t,e){c(t.inputs);var n={name:"MaxPool",inputTypes:[s.GpuDataType.default],cacheHint:e.cacheKey};t.compute(r(r({},n),{get:function(){return g(t.inputs,n,!1,e)}}))},e.parseMaxPoolAttributes=function(t){var e=t.storage_order,n=t.dilations,o=p(t);if(0!==e)throw new Error("column major storage order is not yet supported for MaxPool");if(0!==o.ceilMode)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return(0,i.createAttributeWithCacheKey)(r({storageOrder:e,dilations:n},o))},e.parseGlobalMaxPoolAttributes=function(t){var e=t.format;return r(r({format:e},h),{cacheKey:e})},e.globalMaxPool=function(t,e){c(t.inputs);var n={name:"GlobalMaxPool",inputTypes:[s.GpuDataType.default],cacheHint:e.cacheKey};t.compute(r(r({},n),{get:function(){return g(t.inputs,n,!0,e)}}))}},6031:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.parseReduceAttributes=e.reduceSumSquare=e.reduceSum=e.reduceProd=e.reduceMin=e.reduceMean=e.reduceMax=e.reduceLogSumExp=e.reduceL2=e.reduceL1=e.reduceLogSum=void 0;var o=n(6952),a=n(387),i=n(1163),s=n(2075),u=function(t){if(!t||0===t.length||t.length>2)throw new Error("Reduce op requires 1 or 2 inputs.");if(2===t.length&&1!==t[1].dims.length)throw new Error("Invalid axes input dims.");if(1!==t[0].dataType)throw new Error("Invalid input type.")},c=function(){return["","","value = _A[inputIdx];",""]},l=function(t,e,n,u){var l=1===t.length?n:function(t,e){var n=[];return t[1].dims[0]>0&&t[1].getBigInt64Array().forEach((function(t){return n.push(Number(t))})),(0,a.createAttributeWithCacheKey)({axes:n,keepDims:e.keepDims,noopWithEmptyAxes:e.noopWithEmptyAxes})}(t,n),f={name:e,inputTypes:[i.GpuDataType.default],cacheHint:l.cacheKey};return r(r({},f),{get:function(){return function(t,e,n,a){for(var u=[],c=e[0].dims,l=[],f=o.ShapeUtil.normalizeAxes(n.axes,e[0].dims.length),p=e[0].dims.length-(n.keepDims?0:f.length),d=a(e,f),h=(0,s.createIndicesHelper)("input",c),g=""===d[1]?"":"let inputIdx = ".concat(h.i2oExpression("inputIndices"),";"),m="\n          let inputIdx = ".concat(h.i2oExpression("inputIndices"),";\n          ").concat(d[2],";"),y=!n.noopWithEmptyAxes&&0===n.axes.length,b=0;b<e[0].dims.length;b++)y||f.indexOf(b)>=0?(n.keepDims&&u.push(1),m="for(var j".concat(b,": u32 = 0; j").concat(b," < ").concat(e[0].dims[b],"; j").concat(b,"++) {\n                            inputIndices[").concat(b,"] = j").concat(b,";\n                            ").concat(m,"\n                          }")):(p>1?l.push("inputIndices[".concat(b,"] = outputIndices[").concat(u.length,"];")):l.push("inputIndices[".concat(b,"] = outputIndices;")),u.push(e[0].dims[b]));var v=(0,s.createIndicesHelper)("output",u),w=o.ShapeUtil.size(u),_="f32";return r(r({},t),{getShaderSource:function(t){return"\n          @group(0) @binding(0) var<storage, read> _A : array<".concat(_,">;\n          @group(0) @binding(1) var<storage, read_write> output : array<").concat(_,">;\n\n          ").concat(v.o2iImpl,"\n          ").concat(h.i2oImpl,"\n\n          ").concat(t.mainStart(),"\n          ").concat(t.guardAgainstOutOfBoundsWorkgroupSizes(w),"\n          ").concat(h.indicesVariableDeclaration("inputIndices"),"\n          ").concat(v.indicesVariableDeclaration("outputIndices"),"\n          ").concat(v.o2iCall("global_idx","outputIndices"),"\n\n          var value = ").concat(_,"(0);\n\n          ").concat(l.join("\n"),"\n          ").concat(d[0],"       // init ops for reduce max/min\n          ").concat(g,"\n          ").concat(d[1],"\n          ").concat(m,"\n          ").concat(d[3],"       // final computation for reduce mean\n          output[global_idx] = value;\n        }")},outputs:[{dims:u,dataType:e[0].dataType,gpuDataType:i.GpuDataType.default}],dispatchGroup:function(){return{x:Math.ceil(w/64)}}})}(f,[t[0]],l,l.noopWithEmptyAxes&&0===l.axes.length?c:u)}})};e.reduceLogSum=function(t,e){u(t.inputs),t.compute(l(t.inputs,"ReduceLogSum",e,(function(){return["value = 0.0;","","value += _A[inputIdx];","value = log(value);"]})),{inputs:[0]})},e.reduceL1=function(t,e){u(t.inputs),t.compute(l(t.inputs,"ReduceL1",e,(function(){return["value = 0.0;","","value += abs(_A[inputIdx]);",""]})),{inputs:[0]})},e.reduceL2=function(t,e){u(t.inputs),t.compute(l(t.inputs,"ReduceL2",e,(function(){return["var t = f32(0); value = 0.0;","","t = _A[inputIdx]; value += (t * t);","value = sqrt(value);"]})),{inputs:[0]})},e.reduceLogSumExp=function(t,e){u(t.inputs),t.compute(l(t.inputs,"ReduceLogSumExp",e,(function(){return["value = 0.0;","","value += exp(_A[inputIdx]);","value = log(value);"]})),{inputs:[0]})},e.reduceMax=function(t,e){u(t.inputs),t.compute(l(t.inputs,"ReduceMax",e,(function(t,e){for(var n=[],r=0;r<t[0].dims.length;r++)(e.indexOf(r)>=0||0===e.length)&&n.push("inputIndices[".concat(r,"] = 0;"));return["".concat(n.join("\n")),"value = _A[inputIdx];","value = max(value, _A[inputIdx]);",""]})),{inputs:[0]})},e.reduceMean=function(t,e){u(t.inputs),t.compute(l(t.inputs,"ReduceMean",e,(function(t,e){for(var n=1,r=0;r<t[0].dims.length;r++)(e.indexOf(r)>=0||0===e.length)&&(n*=t[0].dims[r]);return["value = 0.0;","","value += _A[inputIdx];","value = value / ".concat(n,".;")]})),{inputs:[0]})},e.reduceMin=function(t,e){u(t.inputs),t.compute(l(t.inputs,"ReduceMin",e,(function(t,e){for(var n=[],r=0;r<t[0].dims.length;r++)(e.indexOf(r)>=0||0===e.length)&&n.push("inputIndices[".concat(r,"] = 0;"));return["".concat(n.join("\n")),"value = _A[inputIdx];","value = min(value, _A[inputIdx]);",""]})),{inputs:[0]})},e.reduceProd=function(t,e){u(t.inputs),t.compute(l(t.inputs,"ReduceProd",e,(function(){return["value = 1.0;","","value *= _A[inputIdx];",""]})),{inputs:[0]})},e.reduceSum=function(t,e){u(t.inputs),t.compute(l(t.inputs,"ReduceSum",e,(function(){return["value = 0.0;","","value += _A[inputIdx];",""]})),{inputs:[0]})},e.reduceSumSquare=function(t,e){u(t.inputs),t.compute(l(t.inputs,"ReduceSumSquare",e,(function(){return["var t = f32(0); value = 0.0;","","t = _A[inputIdx]; value += t * t;",""]})),{inputs:[0]})},e.parseReduceAttributes=function(t){return(0,a.createAttributeWithCacheKey)(t)}},2625:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,a=e.length;o<a;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.parseTransposeAttributes=e.transpose=e.createTransposeProgramInfo=e.transposeProgramMetadata=void 0;var i=n(6952),s=n(387),u=n(1163),c=n(2075);e.transposeProgramMetadata={name:"Transpose",inputTypes:[u.GpuDataType.default]};var l=function(t,e){return e&&e.length!==t.length?a([],o(t.keys()),!1).reverse():e};e.createTransposeProgramInfo=function(t,n){var o=t.dims,a=l(o,n),s=function(t,e){return i.ShapeUtil.sortBasedOnPerm(t,l(t,e))}(o,a),f=o.length,p=i.ShapeUtil.size(s),d=(0,c.createIndicesHelper)("output",s),h=(0,c.createIndicesHelper)("a",o);return r(r({},e.transposeProgramMetadata),{outputs:[{dims:s,dataType:t.dataType,gpuDataType:u.GpuDataType.default}],getShaderSource:function(t){return"\n  @group(0) @binding(0) var<storage, read> a : array<".concat("f32",">;\n  @group(0) @binding(1) var<storage, read_write> output : array<").concat("f32",">;\n\n  ").concat(function(t,e){var n=[];n.push("fn perm(a: ptr<function, array<u32, ".concat(e,">>, i: ptr<function, array<u32, ").concat(e,">>) {"));for(var r=0;r<e;++r)n.push("\t(*a)[".concat(t[r],"]=(*i)[").concat(r,"];"));return n.push("\t}"),n.join("\n")}(a,f),"\n  ").concat(d.o2iImpl,"\n  ").concat(h.i2oImpl,"\n\n  ").concat(t.mainStart(),"\n    ").concat(t.guardAgainstOutOfBoundsWorkgroupSizes(p),"\n\n    ").concat(d.indicesVariableDeclaration("indices"),"\n    ").concat(d.o2iCall("global_idx","indices"),"\n    ").concat(h.indicesVariableDeclaration("aIndices"),"\n    perm(&aIndices, &indices);\n\n    output[global_idx] = a[").concat(h.i2oExpression("aIndices"),"];\n  }")},dispatchGroup:function(){return{x:Math.ceil(p/64)}}})},e.transpose=function(t,n){!function(t){if(!t||1!==t.length)throw new Error("Transpose requires 1 input.");if(1!==t[0].dataType)throw new Error("input should be float tensor")}(t.inputs),t.compute(r(r({},e.transposeProgramMetadata),{cacheHint:n.cacheKey,get:function(){return(0,e.createTransposeProgramInfo)(t.inputs[0],n.perm)}}))},e.parseTransposeAttributes=function(t){return(0,s.createAttributeWithCacheKey)({perm:t.perm})}},9302:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.thresholdedRelu=e.tanh=e.tan=e.sqrt=e.sinh=e.sin=e.sigmoid=e.relu=e.reciprocal=e.neg=e.leakyRelu=e.floor=e.exp=e.erf=e.elu=e.parseAlphaAttributes=e.cosh=e.cos=e.ceil=e.clip=e.clipV10=e.atanh=e.atan=e.asinh=e.asin=e.acosh=e.acos=e.abs=void 0;var o=n(6952),a=n(387),i=n(1163),s=function(t,e,n,a,s){var u={name:e,inputTypes:[i.GpuDataType.default],cacheHint:s};return r(r({},u),{get:function(){return function(t,e,n,a){return r(r({},t),{getShaderSource:function(t){return function(t,e,n,r){var o,a=Math.ceil(e/4);return o="string"==typeof n?"".concat(n,"(a)"):n("a"),"\n  @group(0) @binding(0) var<storage, read> inputData : array<vec4<f32>>;\n  @group(0) @binding(1) var<storage, read_write> outputData : array<vec4<f32>>;\n\n  ".concat(null!=r?r:"","\n\n  ").concat(t.mainStart(),"\n    ").concat(t.guardAgainstOutOfBoundsWorkgroupSizes(a),"\n\n    let a = inputData[global_idx];\n    outputData[global_idx] = ").concat(o,";\n  }")}(t,o.ShapeUtil.size(e.dims),n,a)},outputs:[{dims:e.dims,dataType:e.dataType,gpuDataType:i.GpuDataType.default}],dispatchGroup:function(t){return{x:Math.ceil(o.ShapeUtil.size(t[0].dims)/64/4)}}})}(u,t,n,a)}})};e.abs=function(t){t.compute(s(t.inputs[0],"Abs","abs"))},e.acos=function(t){t.compute(s(t.inputs[0],"Acos","acos"))},e.acosh=function(t){t.compute(s(t.inputs[0],"Acosh","acosh"))},e.asin=function(t){t.compute(s(t.inputs[0],"Asin","asin"))},e.asinh=function(t){t.compute(s(t.inputs[0],"Asinh","asinh"))},e.atan=function(t){t.compute(s(t.inputs[0],"Atan","atan"))},e.atanh=function(t){t.compute(s(t.inputs[0],"Atanh","atanh"))},e.clipV10=function(t,e){t.compute(s(t.inputs[0],"Clip",(function(t){return"clamp(".concat(t,", clip_min_, clip_max_)")}),"\n    const clip_min_: vec4<f32> = vec4(f32(".concat(e.min,"));\n    const clip_max_: vec4<f32> = vec4(f32(").concat(e.max,"));\n"),e.cacheKey),{inputs:[0]})},e.clip=function(t){var n,r,i,s=(r=(n=t.inputs).length>=2?n[1].getFloat32Array()[0]:o.MIN_CLIP,i=n.length>=3?n[2].getFloat32Array()[0]:o.MAX_CLIP,(0,a.createAttributeWithCacheKey)({min:r,max:i}));(0,e.clipV10)(t,s)},e.ceil=function(t){t.compute(s(t.inputs[0],"Ceil","ceil"))},e.cos=function(t){t.compute(s(t.inputs[0],"Cos","cos"))},e.cosh=function(t){t.compute(s(t.inputs[0],"Cosh","cosh"))},e.parseAlphaAttributes=function(t){return(0,a.createAttributeWithCacheKey)(t)},e.elu=function(t,e){t.compute(s(t.inputs[0],"Elu",(function(t){return"elu_vf32(".concat(t,")")}),"\n  const elu_alpha_: f32 = f32(".concat(e.alpha,");\n\n  fn elu_f32(a: f32) -> f32 {\n  return select((exp(a) - 1.0) * elu_alpha_, a, a >= 0.0);\n  }\n\n  fn elu_vf32(v: vec4<f32>) -> vec4<f32> {\n  return vec4(elu_f32(v.x), elu_f32(v.y), elu_f32(v.z), elu_f32(v.w));\n  }"),e.cacheKey))},e.erf=function(t){t.compute(s(t.inputs[0],"Erf",(function(t){return"erf_vf32(".concat(t,")")}),"\n  const r0: f32 = 0.3275911;\n  const r1: f32 = 0.254829592;\n  const r2: f32 = -0.284496736;\n  const r3: f32 = 1.421413741;\n  const r4: f32 = -1.453152027;\n  const r5: f32 = 1.061405429;\n\n  fn erf_vf32(v: vec4<f32>) -> vec4<f32> {\n    let absv = abs(v);\n    let x = 1.0 / (1.0 + r0 * absv);\n    return sign(v) * (1.0 - ((((r5 * x + r4) * x + r3) * x + r2) * x + r1) * x * exp(-absv * absv));\n  }"))},e.exp=function(t){t.compute(s(t.inputs[0],"Exp","exp"))},e.floor=function(t){t.compute(s(t.inputs[0],"Floor","floor"))},e.leakyRelu=function(t,e){t.compute(s(t.inputs[0],"LeakyRelu",(function(t){return"select(leaky_relu_alpha_ * ".concat(t,", ").concat(t,", ").concat(t," >= vec4<f32>(0.0))")}),"const leaky_relu_alpha_: f32 = f32(".concat(e.alpha,");"),e.cacheKey))},e.neg=function(t){t.compute(s(t.inputs[0],"Neg",(function(t){return"-".concat(t)})))},e.reciprocal=function(t){t.compute(s(t.inputs[0],"Reciprocal",(function(t){return"1.0/".concat(t)})))},e.relu=function(t){t.compute(s(t.inputs[0],"Relu",(function(t){return"select(vec4<f32>(0.0), ".concat(t,", ").concat(t," > vec4<f32>(0.0))")})))},e.sigmoid=function(t){t.compute(s(t.inputs[0],"Sigmoid",(function(t){return"(1.0 / (1.0 + exp(-".concat(t,")))")})))},e.sin=function(t){t.compute(s(t.inputs[0],"Sin","sin"))},e.sinh=function(t){t.compute(s(t.inputs[0],"Sinh","sinh"))},e.sqrt=function(t){t.compute(s(t.inputs[0],"Sqrt","sqrt"))},e.tan=function(t){t.compute(s(t.inputs[0],"Tan","tan"))},e.tanh=function(t){t.compute(s(t.inputs[0],"Tanh","tanh"))},e.thresholdedRelu=function(t,e){return t.compute(s(t.inputs[0],"ThresholdedRelu",(function(t){return"select(vec4<f32>(0.0), ".concat(t,", ").concat(t," > thresholded_relu_alpha_)")}),"const thresholded_relu_alpha_: vec4<f32> = vec4<f32>(".concat(e.alpha,");"),e.cacheKey)),0}},8305:function(t,e,n){"use strict";var r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,o=0,a=e.length;o<a;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.ProgramManager=void 0;var i=n(4955),s=n(2075),u=function(){function t(t){this.backend=t,this.repo=new Map,this.attributesBound=!1}return t.prototype.getArtifact=function(t){return this.repo.get(t)},t.prototype.setArtifact=function(t,e){this.repo.set(t,e)},t.prototype.run=function(t,e,n,i){var s,u,c,l,f=this,p=this.backend.device,d=this.backend.getComputePassEncoder();this.backend.profilingEnabled&&d.writeTimestamp(this.backend.profilingQuerySet,0),d.setPipeline(t.computePipeline);var h=[];try{for(var g=r(e),m=g.next();!m.done;m=g.next()){var y=m.value;h.push({binding:h.length,resource:{buffer:y.buffer}})}}catch(t){s={error:t}}finally{try{m&&!m.done&&(u=g.return)&&u.call(g)}finally{if(s)throw s.error}}try{for(var b=r(n),v=b.next();!v.done;v=b.next()){var w=v.value;h.push({binding:h.length,resource:{buffer:w.buffer}})}}catch(t){c={error:t}}finally{try{v&&!v.done&&(l=b.return)&&l.call(b)}finally{if(c)throw c.error}}var _=p.createBindGroup({layout:t.computePipeline.getBindGroupLayout(0),entries:h});if(d.setBindGroup(0,_),d.dispatchWorkgroups.apply(d,a([],o(i),!1)),this.backend.pendingDispatchNumber++,this.backend.profilingEnabled){d.writeTimestamp(this.backend.profilingQuerySet,1);var x=this.backend.gpuDataManager.create(16,GPUBufferUsage.COPY_SRC|GPUBufferUsage.QUERY_RESOLVE),T=this.backend.gpuDataManager.create(16,GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST);this.backend.endComputePass(),this.backend.getCommandEncoder().resolveQuerySet(this.backend.profilingQuerySet,0,2,x.buffer,0),this.backend.getCommandEncoder().copyBufferToBuffer(x.buffer,0,T.buffer,0,16),this.backend.flush();var S=this.backend.currentKernelId,A=this.backend.kernels.get(S)[0];T.buffer.mapAsync(GPUMapMode.READ).then((function(){var t=new BigUint64Array(T.buffer.getMappedRange()),e=t[0],n=t[1];T.buffer.unmap(),void 0===f.backend.profilingTimeBase&&(f.backend.profilingTimeBase=e);var r=Number(e-f.backend.profilingTimeBase),o=Number(n-f.backend.profilingTimeBase);if(!Number.isSafeInteger(r)||!Number.isSafeInteger(o))throw new RangeError("incorrect timestamp range");f.backend.gpuDataManager.release(x.id),f.backend.gpuDataManager.release(T.id),console.log('[profiling] kernel "'.concat(S,"|").concat(A,'" execution time: ').concat(o-r," ns"))}))}this.backend.pendingDispatchNumber>=16&&this.backend.flush()},t.prototype.dispose=function(){},t.prototype.build=function(t,e){var n=this.backend.device,r=t.getShaderSource((0,s.createShaderHelper)(e)),o=n.createShaderModule({code:r});return(0,i.LOG_DEBUG)("verbose",(function(){return"[WebGPU] shader code: ".concat(r)})),{programInfo:t,computePipeline:n.createComputePipeline({compute:{module:o,entryPoint:"main"},layout:"auto"})}},t.prototype.normalizeDispatchGroupSize=function(t){var e="number"==typeof t?t:t.x,n="number"==typeof t?1:t.y||1,r="number"==typeof t?1:t.z||1,o=this.backend.device.limits.maxComputeWorkgroupsPerDimension;if(e<=o&&n<=o&&r<=o)return[e,n,r];var a=e*n*r,i=Math.ceil(Math.sqrt(a));if(i>o){if((i=Math.ceil(Math.cbrt(a)))>o)throw new Error("Total dispatch size exceeds WebGPU maximum.");return[i,i,i]}return[i,i,1]},t}();e.ProgramManager=u},1163:function(t,e){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.GpuDataType=void 0,(n=e.GpuDataType||(e.GpuDataType={}))[n.default=0]="default",n[n.upload=1]="upload",n[n.profile=2]="profile"},9544:function(t,e,n){"use strict";var r,o=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&o(e,t,n);return a(e,t),e},s=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,s)}u((r=r.apply(t,e||[])).next())}))},u=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(t,i)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initializeRuntime=e.initializeWebAssemblyInstance=void 0;var c,l,f,p=n(2235),d=i(n(1259)),h=n(263),g=function(){return!!p.env.wasm.proxy&&"undefined"!=typeof document},m=!1,y=!1,b=!1,v=[],w=[],_=[],x=[],T=[],S=[],A=function(){if(m||!y||b||!c)throw new Error("worker not ready")},O=function(t){switch(t.data.type){case"init-wasm":m=!1,t.data.err?(b=!0,l[1](t.data.err)):(y=!0,l[0]());break;case"init-ort":t.data.err?f[1](t.data.err):f[0]();break;case"create_allocate":t.data.err?v.shift()[1](t.data.err):v.shift()[0](t.data.out);break;case"create_finalize":t.data.err?w.shift()[1](t.data.err):w.shift()[0](t.data.out);break;case"create":t.data.err?_.shift()[1](t.data.err):_.shift()[0](t.data.out);break;case"release":t.data.err?x.shift()[1](t.data.err):x.shift()[0]();break;case"run":t.data.err?T.shift()[1](t.data.err):T.shift()[0](t.data.out);break;case"end-profiling":t.data.err?S.shift()[1](t.data.err):S.shift()[0]()}},E="undefined"!=typeof document?null===(r=null===document||void 0===document?void 0:document.currentScript)||void 0===r?void 0:r.src:void 0;e.initializeWebAssemblyInstance=function(){return s(void 0,void 0,void 0,(function(){return u(this,(function(t){if(g()){if(y)return[2];if(m)throw new Error("multiple calls to 'initWasm()' detected.");if(b)throw new Error("previous call to 'initWasm()' failed.");return m=!0,void 0===p.env.wasm.wasmPaths&&E&&0!==E.indexOf("blob:")&&(p.env.wasm.wasmPaths=E.substr(0,+E.lastIndexOf("/")+1)),[2,new Promise((function(t,e){null==c||c.terminate(),(c=n(8050).Z()).onmessage=O,l=[t,e];var r={type:"init-wasm",in:p.env.wasm};c.postMessage(r)}))]}return[2,(0,h.initializeWebAssembly)(p.env.wasm)]}))}))},e.initializeRuntime=function(t){return s(void 0,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return g()?(A(),[2,new Promise((function(e,n){f=[e,n];var r={type:"init-ort",in:t};c.postMessage(r)}))]):[3,1];case 1:return[4,d.initRuntime(t)];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))},e.createSessionAllocate=function(t){return s(void 0,void 0,void 0,(function(){return u(this,(function(e){return g()?(A(),[2,new Promise((function(e,n){v.push([e,n]);var r={type:"create_allocate",in:{model:t}};c.postMessage(r,[t.buffer])}))]):[2,d.createSessionAllocate(t)]}))}))},e.createSessionFinalize=function(t,e){return s(void 0,void 0,void 0,(function(){return u(this,(function(n){return g()?(A(),[2,new Promise((function(n,r){w.push([n,r]);var o={type:"create_finalize",in:{modeldata:t,options:e}};c.postMessage(o)}))]):[2,d.createSessionFinalize(t,e)]}))}))},e.createSession=function(t,e){return s(void 0,void 0,void 0,(function(){return u(this,(function(n){return g()?(A(),[2,new Promise((function(n,r){_.push([n,r]);var o={type:"create",in:{model:t,options:e}};c.postMessage(o,[t.buffer])}))]):[2,d.createSession(t,e)]}))}))},e.releaseSession=function(t){return s(void 0,void 0,void 0,(function(){return u(this,(function(e){return g()?(A(),[2,new Promise((function(e,n){x.push([e,n]);var r={type:"release",in:t};c.postMessage(r)}))]):(d.releaseSession(t),[2])}))}))},e.run=function(t,e,n,r,o){return s(void 0,void 0,void 0,(function(){return u(this,(function(a){return g()?(A(),[2,new Promise((function(a,i){T.push([a,i]);var s={type:"run",in:{sessionId:t,inputIndices:e,inputs:n,outputIndices:r,options:o}};c.postMessage(s,d.extractTransferableBuffers(n))}))]):[2,d.run(t,e,n,r,o)]}))}))},e.endProfiling=function(t){return s(void 0,void 0,void 0,(function(){return u(this,(function(e){return g()?(A(),[2,new Promise((function(e,n){S.push([e,n]);var r={type:"end-profiling",in:t};c.postMessage(r)}))]):(d.endProfiling(t),[2])}))}))}},7918:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setRunOptions=void 0;var r=n(263),o=n(1497);e.setRunOptions=function(t){var e=(0,r.getInstance)(),n=0,a=[],i=t||{};try{if(void 0===(null==t?void 0:t.logSeverityLevel))i.logSeverityLevel=2;else if("number"!=typeof t.logSeverityLevel||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error("log serverity level is not valid: ".concat(t.logSeverityLevel));if(void 0===(null==t?void 0:t.logVerbosityLevel))i.logVerbosityLevel=0;else if("number"!=typeof t.logVerbosityLevel||!Number.isInteger(t.logVerbosityLevel))throw new Error("log verbosity level is not valid: ".concat(t.logVerbosityLevel));void 0===(null==t?void 0:t.terminate)&&(i.terminate=!1);var s=0;return void 0!==(null==t?void 0:t.tag)&&(s=(0,o.allocWasmString)(t.tag,a)),0===(n=e._OrtCreateRunOptions(i.logSeverityLevel,i.logVerbosityLevel,!!i.terminate,s))&&(0,o.checkLastError)("Can't create run options."),void 0!==(null==t?void 0:t.extra)&&(0,o.iterateExtraOptions)(t.extra,"",new WeakSet,(function(t,r){var i=(0,o.allocWasmString)(t,a),s=(0,o.allocWasmString)(r,a);0!==e._OrtAddRunConfigEntry(n,i,s)&&(0,o.checkLastError)("Can't set a run config entry: ".concat(t," - ").concat(r,"."))})),[n,a]}catch(t){throw 0!==n&&e._OrtReleaseRunOptions(n),a.forEach((function(t){return e._free(t)})),t}}},6640:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,s)}u((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(t,i)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},a=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(e,"__esModule",{value:!0}),e.OnnxruntimeWebAssemblySessionHandler=void 0;var i,s=n(2806),u=n(2235),c=n(2850),l=n(9544),f=function(){function t(){}return t.prototype.createSessionAllocate=function(t){return r(this,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return[4,fetch(t)];case 1:return[4,n.sent().arrayBuffer()];case 2:return e=n.sent(),[2,(0,l.createSessionAllocate)(new Uint8Array(e))]}}))}))},t.prototype.loadModel=function(t,e){return r(this,void 0,void 0,(function(){var n,r,f,p,d;return o(this,(function(o){switch(o.label){case 0:return i?[3,2]:[4,(0,l.initializeRuntime)(u.env)];case 1:o.sent(),i=!0,o.label=2;case 2:return"string"!=typeof t?[3,9]:"undefined"!=typeof process&&process.versions&&process.versions.node?[4,(0,c.promisify)(s.readFile)(t)]:[3,5];case 3:return n=o.sent(),[4,(0,l.createSession)(n,e)];case 4:return f=a.apply(void 0,[o.sent(),3]),this.sessionId=f[0],this.inputNames=f[1],this.outputNames=f[2],[3,8];case 5:return[4,this.createSessionAllocate(t)];case 6:return r=o.sent(),[4,(0,l.createSessionFinalize)(r,e)];case 7:p=a.apply(void 0,[o.sent(),3]),this.sessionId=p[0],this.inputNames=p[1],this.outputNames=p[2],o.label=8;case 8:return[3,11];case 9:return[4,(0,l.createSession)(t,e)];case 10:d=a.apply(void 0,[o.sent(),3]),this.sessionId=d[0],this.inputNames=d[1],this.outputNames=d[2],o.label=11;case 11:return[2]}}))}))},t.prototype.dispose=function(){return r(this,void 0,void 0,(function(){return o(this,(function(t){return[2,(0,l.releaseSession)(this.sessionId)]}))}))},t.prototype.run=function(t,e,n){return r(this,void 0,void 0,(function(){var r,a,i,s,c,f,p=this;return o(this,(function(o){switch(o.label){case 0:return r=[],a=[],Object.entries(t).forEach((function(t){var e=t[0],n=t[1],o=p.inputNames.indexOf(e);if(-1===o)throw new Error("invalid input '".concat(e,"'"));r.push(n),a.push(o)})),i=[],Object.entries(e).forEach((function(t){var e=t[0],n=p.outputNames.indexOf(e);if(-1===n)throw new Error("invalid output '".concat(e,"'"));i.push(n)})),[4,(0,l.run)(this.sessionId,a,r.map((function(t){return[t.type,t.dims,t.data]})),i,n)];case 1:for(s=o.sent(),c={},f=0;f<s.length;f++)c[this.outputNames[i[f]]]=new u.Tensor(s[f][0],s[f][2],s[f][1]);return[2,c]}}))}))},t.prototype.startProfiling=function(){},t.prototype.endProfiling=function(){(0,l.endProfiling)(this.sessionId)},t}();e.OnnxruntimeWebAssemblySessionHandler=f},7622:function(t,e,n){"use strict";var r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.setSessionOptions=void 0;var o=n(263),a=n(1497);e.setSessionOptions=function(t){var e,n,i,s,u=(0,o.getInstance)(),c=0,l=[],f=t||{};!function(t){t.extra||(t.extra={}),t.extra.session||(t.extra.session={});var e=t.extra.session;e.use_ort_model_bytes_directly||(e.use_ort_model_bytes_directly="1"),t.executionProviders&&t.executionProviders.some((function(t){return"webgpu"===("string"==typeof t?t:t.name)}))&&(t.enableMemPattern=!1)}(f);try{var p=function(t){switch(t){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error("unsupported graph optimization level: ".concat(t))}}(null!==(e=f.graphOptimizationLevel)&&void 0!==e?e:"all"),d=function(t){switch(t){case"sequential":return 0;case"parallel":return 1;default:throw new Error("unsupported execution mode: ".concat(t))}}(null!==(n=f.executionMode)&&void 0!==n?n:"sequential"),h="string"==typeof f.logId?(0,a.allocWasmString)(f.logId,l):0,g=null!==(i=f.logSeverityLevel)&&void 0!==i?i:2;if(!Number.isInteger(g)||g<0||g>4)throw new Error("log serverity level is not valid: ".concat(g));var m=null!==(s=f.logVerbosityLevel)&&void 0!==s?s:0;if(!Number.isInteger(m)||m<0||m>4)throw new Error("log verbosity level is not valid: ".concat(m));var y="string"==typeof f.optimizedModelFilePath?(0,a.allocWasmString)(f.optimizedModelFilePath,l):0;return 0===(c=u._OrtCreateSessionOptions(p,!!f.enableCpuMemArena,!!f.enableMemPattern,d,!!f.enableProfiling,0,h,g,m,y))&&(0,a.checkLastError)("Can't create session options."),f.executionProviders&&function(t,e,n){var i,s;try{for(var u=r(e),c=u.next();!c.done;c=u.next()){var l=c.value,f="string"==typeof l?l:l.name;switch(f){case"xnnpack":f="XNNPACK";break;case"webnn":if(f="WEBNN","string"!=typeof l){var p=l;if(null==p?void 0:p.deviceType){var d=(0,a.allocWasmString)("deviceType",n),h=(0,a.allocWasmString)(p.deviceType,n);0!==(0,o.getInstance)()._OrtAddSessionConfigEntry(t,d,h)&&(0,a.checkLastError)("Can't set a session config entry: 'deviceType' - ".concat(p.deviceType,"."))}(null==p?void 0:p.powerPreference)&&(d=(0,a.allocWasmString)("powerPreference",n),h=(0,a.allocWasmString)(p.powerPreference,n),0!==(0,o.getInstance)()._OrtAddSessionConfigEntry(t,d,h)&&(0,a.checkLastError)("Can't set a session config entry: 'powerPreference' - ".concat(p.powerPreference,".")))}break;case"webgpu":f="JS";break;case"wasm":case"cpu":continue;default:throw new Error("not supported execution provider: ".concat(f))}var g=(0,a.allocWasmString)(f,n);0!==(0,o.getInstance)()._OrtAppendExecutionProvider(t,g)&&(0,a.checkLastError)("Can't append execution provider: ".concat(f,"."))}}catch(t){i={error:t}}finally{try{c&&!c.done&&(s=u.return)&&s.call(u)}finally{if(i)throw i.error}}}(c,f.executionProviders,l),void 0!==f.extra&&(0,a.iterateExtraOptions)(f.extra,"",new WeakSet,(function(t,e){var n=(0,a.allocWasmString)(t,l),r=(0,a.allocWasmString)(e,l);0!==u._OrtAddSessionConfigEntry(c,n,r)&&(0,a.checkLastError)("Can't set a session config entry: ".concat(t," - ").concat(e,"."))})),[c,l]}catch(t){throw 0!==c&&u._OrtReleaseSessionOptions(c),l.forEach((function(t){return u._free(t)})),t}}},7917:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.logLevelStringToEnum=e.tensorTypeToTypedArrayConstructor=e.getTensorElementSize=e.tensorDataTypeEnumToString=e.tensorDataTypeStringToEnum=void 0,e.tensorDataTypeStringToEnum=function(t){switch(t){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error("unsupported data type: ".concat(t))}},e.tensorDataTypeEnumToString=function(t){switch(t){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error("unsupported data type: ".concat(t))}},e.getTensorElementSize=function(t){return[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][t]},e.tensorTypeToTypedArrayConstructor=function(t){switch(t){case"float16":case"uint16":return Uint16Array;case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error("unsupported type: ".concat(t))}},e.logLevelStringToEnum=function(t){switch(t){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error("unsupported logging level: ".concat(t))}}},1259:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,s)}u((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(t,i)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},a=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.extractTransferableBuffers=e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initRuntime=void 0;var s=n(7675),u=n(7918),c=n(7622),l=n(7917),f=n(263),p=n(1497);e.initRuntime=function(t){return r(void 0,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return n=t.wasm.numThreads,r=(0,l.logLevelStringToEnum)(t.logLevel),0!==(0,f.getInstance)()._OrtInit(n,r)&&(0,p.checkLastError)("Can't initialize onnxruntime."),[4,(0,s.init)((0,f.getInstance)(),t)];case 1:return e.sent(),[2]}var n,r}))}))};var d=new Map;e.createSessionAllocate=function(t){var e=(0,f.getInstance)(),n=e._malloc(t.byteLength);if(0===n)throw new Error("Can't create a session. failed to allocate a buffer of size ".concat(t.byteLength,"."));return e.HEAPU8.set(t,n),[n,t.byteLength]},e.createSessionFinalize=function(t,e){var n,r=(0,f.getInstance)(),o=0,i=0,s=[],u=[],l=[];try{i=(n=a((0,c.setSessionOptions)(e),2))[0],s=n[1],0===(o=r._OrtCreateSession(t[0],t[1],i))&&(0,p.checkLastError)("Can't create a session.");for(var h=a(function(t){var e=(0,f.getInstance)(),n=e.stackSave();try{var r=e.stackAlloc(8);return 0!==e._OrtGetInputOutputCount(t,r,r+4)&&(0,p.checkLastError)("Can't get session input/output count."),[e.HEAP32[r/4],e.HEAP32[r/4+1]]}finally{e.stackRestore(n)}}(o),2),g=h[0],m=h[1],y=[],b=[],v=0;v<g;v++){var w=r._OrtGetInputName(o,v);0===w&&(0,p.checkLastError)("Can't get an input name."),u.push(w),y.push(r.UTF8ToString(w))}for(v=0;v<m;v++){var _=r._OrtGetOutputName(o,v);0===_&&(0,p.checkLastError)("Can't get an output name."),l.push(_),b.push(r.UTF8ToString(_))}return d.set(o,[o,u,l]),[o,y,b]}catch(t){throw u.forEach((function(t){return r._OrtFree(t)})),l.forEach((function(t){return r._OrtFree(t)})),0!==o&&r._OrtReleaseSession(o),t}finally{r._free(t[0]),0!==i&&r._OrtReleaseSessionOptions(i),s.forEach((function(t){return r._free(t)}))}},e.createSession=function(t,n){var r=(0,e.createSessionAllocate)(t);return(0,e.createSessionFinalize)(r,n)},e.releaseSession=function(t){var e=(0,f.getInstance)(),n=d.get(t);if(!n)throw new Error("cannot release session. invalid session id: ".concat(t));var r=a(n,3),o=r[0],i=r[1],s=r[2];i.forEach((function(t){return e._OrtFree(t)})),s.forEach((function(t){return e._OrtFree(t)})),e._OrtReleaseSession(o),d.delete(t)},e.run=function(t,e,n,i,s){return r(void 0,void 0,void 0,(function(){var r,c,h,g,m,y,b,v,w,_,x,T,S,A,O,E,P,I,D,k,C,R,M,L,F,N,j,U,B,G,z,V,W,H,q,K,Y,X,Z,J,Q,$,tt,et,nt,rt;return o(this,(function(o){switch(o.label){case 0:if(r=(0,f.getInstance)(),!(c=d.get(t)))throw new Error("cannot run inference. invalid session id: ".concat(t));h=a(c,3),g=h[0],m=h[1],y=h[2],b=e.length,v=i.length,w=0,_=[],x=[],T=[],o.label=1;case 1:for(o.trys.push([1,,7,8]),rt=a((0,u.setRunOptions)(s),2),w=rt[0],_=rt[1],S=function(t){var e=n[t][0],o=n[t][1],a=n[t][2],i=void 0,s=void 0;if(Array.isArray(a)){s=4*a.length,i=r._malloc(s),T.push(i);for(var u=i/4,c=0;c<a.length;c++){if("string"!=typeof a[c])throw new TypeError("tensor data at index ".concat(c," is not a string"));r.HEAPU32[u++]=(0,p.allocWasmString)(a[c],T)}}else s=a.byteLength,i=r._malloc(s),T.push(i),r.HEAPU8.set(new Uint8Array(a.buffer,a.byteOffset,s),i);var f=r.stackSave(),d=r.stackAlloc(4*o.length);try{var h=d/4;o.forEach((function(t){return r.HEAP32[h++]=t}));var g=r._OrtCreateTensor((0,l.tensorDataTypeStringToEnum)(e),i,s,d,o.length);0===g&&(0,p.checkLastError)("Can't create tensor for input[".concat(t,"].")),x.push(g)}finally{r.stackRestore(f)}},N=0;N<b;N++)S(N);A=r.stackSave(),O=r.stackAlloc(4*b),E=r.stackAlloc(4*b),P=r.stackAlloc(4*v),I=r.stackAlloc(4*v),o.label=2;case 2:for(o.trys.push([2,,5,6]),D=O/4,k=E/4,C=P/4,R=I/4,N=0;N<b;N++)r.HEAPU32[D++]=x[N],r.HEAPU32[k++]=m[e[N]];for(N=0;N<v;N++)r.HEAPU32[C++]=0,r.HEAPU32[R++]=y[i[N]];return M=r._OrtRun(g,E,O,b,I,v,P,w),(L=r.jsepRunPromise)&&void 0!==L.then?[4,L]:[3,4];case 3:M=o.sent(),o.label=4;case 4:for(F=[],0!==M&&(0,p.checkLastError)("failed to call OrtRun()."),N=0;N<v;N++){j=r.HEAPU32[P/4+N],U=r.stackSave(),B=r.stackAlloc(16),G=void 0,z=0;try{for(0!==(M=r._OrtGetTensorData(j,B,B+4,B+8,B+12))&&(0,p.checkLastError)("Can't access output tensor data on index ".concat(N,".")),V=B/4,W=r.HEAPU32[V++],z=r.HEAPU32[V++],H=r.HEAPU32[V++],q=r.HEAPU32[V++],K=[],Y=0;Y<q;Y++)K.push(r.HEAPU32[H/4+Y]);if(r._OrtFree(H),X=0===K.length?1:K.reduce((function(t,e){return t*e})),"string"===(G=(0,l.tensorDataTypeEnumToString)(W))){for(Z=[],J=z/4,Q=0;Q<X;Q++)$=r.HEAPU32[J++],tt=Q===X-1?void 0:r.HEAPU32[J]-$,Z.push(r.UTF8ToString($,tt));F.push([G,K,Z])}else et=(0,l.tensorTypeToTypedArrayConstructor)(G),nt=new et(X),new Uint8Array(nt.buffer,nt.byteOffset,nt.byteLength).set(r.HEAPU8.subarray(z,z+nt.byteLength)),F.push([G,K,nt])}finally{r.stackRestore(U),"string"===G&&z&&r._free(z),r._OrtReleaseTensor(j)}}return[2,F];case 5:return r.stackRestore(A),[7];case 6:return[3,8];case 7:return x.forEach((function(t){return r._OrtReleaseTensor(t)})),T.forEach((function(t){return r._free(t)})),0!==w&&r._OrtReleaseRunOptions(w),_.forEach((function(t){return r._free(t)})),[7];case 8:return[2]}}))}))},e.endProfiling=function(t){var e=(0,f.getInstance)(),n=d.get(t);if(!n)throw new Error("invalid session id");var r=n[0],o=e._OrtEndProfiling(r);0===o&&(0,p.checkLastError)("Can't get an profile file name."),e._OrtFree(o)},e.extractTransferableBuffers=function(t){var e,n,r=[];try{for(var o=i(t),a=o.next();!a.done;a=o.next()){var s=a.value[2];!Array.isArray(s)&&s.buffer&&r.push(s.buffer)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}},263:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return o(e,t),e},i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,s)}u((r=r.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(t,i)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.getInstance=e.initializeWebAssembly=void 0;var u,c=a(n(6449)),l=n(932),f=n(3474),p=!1,d=!1,h=!1;e.initializeWebAssembly=function(t){return i(void 0,void 0,void 0,(function(){var e,r,o,a,i,g,m,y,b,v,w;return s(this,(function(s){switch(s.label){case 0:if(p)return[2,Promise.resolve()];if(d)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(h)throw new Error("previous call to 'initializeWebAssembly()' failed.");return d=!0,e=t.initTimeout,r=t.numThreads,o=t.simd,a=r>1&&function(){try{return"undefined"!=typeof SharedArrayBuffer&&("undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch(t){return!1}}(),i=o&&function(){try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch(t){return!1}}(),g=t.wasmPaths,m="string"==typeof g?g:void 0,y=function(t,e){return e?t?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":t?"ort-wasm-simd.wasm":"ort-wasm.wasm"}(i,a),b="object"==typeof g?g[y]:void 0,v=!1,w=[],e>0&&w.push(new Promise((function(t){setTimeout((function(){v=!0,t()}),e)}))),w.push(new Promise((function(t,e){var r=a?f:l,o={locateFile:function(t,e){return a&&t.endsWith(".worker.js")&&"undefined"!=typeof Blob?URL.createObjectURL(new Blob([n(4154)],{type:"text/javascript"})):t.endsWith(".wasm")?b||(null!=m?m:e)+y:e+t}};if(a)if("undefined"==typeof Blob)o.mainScriptUrlOrBlob=c.join(__dirname,"ort-wasm-threaded.js");else{var i="var ortWasmThreaded=(function(){var _scriptDir;return ".concat(r.toString(),"})();");o.mainScriptUrlOrBlob=new Blob([i],{type:"text/javascript"})}r(o).then((function(e){d=!1,p=!0,u=e,t()}),(function(t){d=!1,h=!0,e(t)}))}))),[4,Promise.race(w)];case 1:if(s.sent(),v)throw new Error("WebAssembly backend initializing failed due to timeout: ".concat(e,"ms"));return[2]}}))}))},e.getInstance=function(){if(p&&u)return u;throw new Error("WebAssembly is not initialized yet.")},e.dispose=function(){var t;!p||d||h||(d=!0,null===(t=u.PThread)||void 0===t||t.terminateAllThreads(),u=void 0,d=!1,p=!1,h=!0)}},1497:function(t,e,n){"use strict";var r=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(e,"__esModule",{value:!0}),e.checkLastError=e.iterateExtraOptions=e.allocWasmString=void 0;var o=n(263);e.allocWasmString=function(t,e){var n=(0,o.getInstance)(),r=n.lengthBytesUTF8(t)+1,a=n._malloc(r);return n.stringToUTF8(t,a,r),e.push(a),a},e.iterateExtraOptions=function(t,n,o,a){if("object"==typeof t&&null!==t){if(o.has(t))throw new Error("Circular reference in options");o.add(t)}Object.entries(t).forEach((function(t){var i=r(t,2),s=i[0],u=i[1],c=n?n+s:s;if("object"==typeof u)(0,e.iterateExtraOptions)(u,c+".",o,a);else if("string"==typeof u||"number"==typeof u)a(c,u.toString());else{if("boolean"!=typeof u)throw new Error("Can't handle extra config type: ".concat(typeof u));a(c,u?"1":"0")}}))},e.checkLastError=function(t){var e=(0,o.getInstance)(),n=e.stackSave();try{var r=e.stackAlloc(8);e._OrtGetLastError(r,r+4);var a=e.HEAP32[r/4],i=e.HEAPU32[r/4+1],s=i?e.UTF8ToString(i):"";throw new Error("".concat(t," ERROR_CODE: ").concat(a,", ERROR_MESSAGE: ").concat(s))}finally{e.stackRestore(n)}}},8050:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(6614),o=n.n(r);function a(){return o()('/*!\n* ONNX Runtime Web v1.16.0-dev.20230704-d540c7da0f\n* Copyright (c) Microsoft Corporation. All rights reserved.\n* Licensed under the MIT License.\n*/\n!function(){var e={838:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function c(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}u((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(c){return function(u){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&c[0]?r.return:c[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,c[1])).done)return a;switch(r=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){i.label=c[1];break}if(6===c[0]&&i.label<a[1]){i.label=a[1],a=c;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(c);break}a[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],r=0}finally{n=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,u])}}},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i};Object.defineProperty(t,"__esModule",{value:!0}),t.WebGpuBackend=void 0;var c=n(955),u=n(771),s=n(510),l=n(305),f=function(){function e(){this.currentKernelId=null,this.commandEncoder=null,this.computePassEncoder=null,this.pendingDispatchNumber=0,this.profilingEnabled=!1}return Object.defineProperty(e.prototype,"currentKernelCustomData",{get:function(){if(null===this.currentKernelId)throw new Error("currentKernelCustomData(): currentKernelId is null. (should not happen)");var e=this.kernelCustomData.get(this.currentKernelId);return e||(e={},this.kernelCustomData.set(this.currentKernelId,e)),e},enumerable:!1,configurable:!0}),e.prototype.initialize=function(e){return r(this,void 0,void 0,(function(){var t,n,r;return a(this,(function(a){switch(a.label){case 0:if(!navigator.gpu)throw new Error("WebGpuBackend: WebGPU is not available.");return[4,navigator.gpu.requestAdapter()];case 1:if(!(t=a.sent()))throw new Error("WebGpuBackend: Failed to get GPU adapter.");return n={requiredLimits:{maxComputeWorkgroupStorageSize:t.limits.maxComputeWorkgroupStorageSize,maxComputeWorkgroupsPerDimension:t.limits.maxComputeWorkgroupsPerDimension,maxStorageBufferBindingSize:t.limits.maxStorageBufferBindingSize}},t.features.has("timestamp-query-inside-passes")&&"default"===e.webgpu.profilingMode&&(this.profilingEnabled=!0,n.requiredFeatures=["timestamp-query-inside-passes"]),r=this,[4,t.requestDevice(n)];case 2:return r.device=a.sent(),this.gpuDataManager=(0,u.createGpuDataManager)(this),this.programManager=new l.ProgramManager(this),this.kernels=new Map,this.kernelPersistentData=new Map,this.kernelCustomData=new Map,(0,c.configureLogger)(e.logLevel,!!e.debug),this.device.onuncapturederror=function(e){e.error instanceof GPUValidationError&&console.error("An uncaught WebGPU validation error was raised: ".concat(e.error.message))},this.profilingEnabled&&(this.profilingQuerySet=this.device.createQuerySet({type:"timestamp",count:2})),[2]}}))}))},e.prototype.dispose=function(){},e.prototype.getCommandEncoder=function(){return this.commandEncoder||(this.commandEncoder=this.device.createCommandEncoder()),this.commandEncoder},e.prototype.getComputePassEncoder=function(){return this.computePassEncoder||(this.computePassEncoder=this.getCommandEncoder().beginComputePass()),this.computePassEncoder},e.prototype.endComputePass=function(){this.computePassEncoder&&(this.computePassEncoder.end(),this.computePassEncoder=null)},e.prototype.flush=function(){this.endComputePass(),this.device.queue.submit([this.getCommandEncoder().finish()]),this.gpuDataManager.refreshPendingBuffers(),this.commandEncoder=null,this.pendingDispatchNumber=0},e.prototype.run=function(e,t,n,r,a){if(t.length!==e.inputTypes.length)throw new Error("Input size must be equal to ".concat(e.inputTypes.length,"."));for(var o=[],i=0;i<t.length;++i){if(!(h=this.gpuDataManager.get(t[i].data)))throw new Error("no GPU data for input: ".concat(t[i].data));o[i]=h}var u=function(e,t,n){var r=t.map((function(e){return"".concat(e.join(","))})).join("_"),a=n.join("_"),o=e.name;return e.cacheHint&&(o+="["+e.cacheHint+"]"),o+":"+r+";"+a}(e,t.map((function(e){return e.dims})),o.map((function(e){return e.type}))),s=this.programManager.getArtifact(u),l=s?s.programInfo:"function"==typeof e.get?e.get():e,f=0===n.length?l.outputs.map((function(e,t){return t})):n;if(f.length!==l.outputs.length)throw new Error("Output size ".concat(f.length," must be equal to ").concat(l.outputs.length,"."));var p=[],d=[];for(i=0;i<l.outputs.length;++i){if(!Number.isInteger(f[i])||f[i]<-2||f[i]>=l.outputs.length)throw new Error("Invalid output index: ".concat(f[i]));var h,g=-1===f[i],m=-2===f[i],v=g||m?a(l.outputs[i].dataType,l.outputs[i].dims):r(f[i],l.outputs[i].dataType,l.outputs[i].dims);if(!(h=this.gpuDataManager.get(v.data)))throw new Error("no GPU data for output: ".concat(v.data));if(g&&this.temporaryData.push(h),m){var y=this.kernelPersistentData.get(this.currentKernelId);y||(y=[],this.kernelPersistentData.set(this.currentKernelId,y)),y.push(h)}p.push(v),d.push(h)}var b=this.programManager.normalizeDispatchGroupSize(l.dispatchGroup(t));return s||(s=this.programManager.build(l,b),this.programManager.setArtifact(u,s)),(0,c.LOG_DEBUG)("info",(function(){return\'[ProgramManager] run "\'.concat(l.name,\'" (key=\').concat(u,") with ").concat(b[0],"x").concat(b[1],"x").concat(b[2])})),this.programManager.run(s,o,d,b),p},e.prototype.upload=function(e,t){this.gpuDataManager.upload(e,t)},e.prototype.memcpy=function(e,t){this.gpuDataManager.memcpy(e,t)},e.prototype.download=function(e,t){return r(this,void 0,void 0,(function(){var n,r;return a(this,(function(a){switch(a.label){case 0:return[4,this.gpuDataManager.download(e)];case 1:return n=a.sent(),(r=t()).set(new Uint8Array(n,0,r.byteLength)),[2]}}))}))},e.prototype.alloc=function(e){return this.gpuDataManager.create(e).id},e.prototype.free=function(e){return this.gpuDataManager.release(e)},e.prototype.createKernel=function(e,t,n){var r=s.WEBGPU_OP_RESOLVE_RULES.get(e);if(!r)throw new Error("kernel not implemented: ".concat(e));this.kernels.set(t,[e,r[0],[r[1],n]])},e.prototype.releaseKernel=function(e){var t,n,r=this.kernelPersistentData.get(e);if(r){try{for(var a=o(r),i=a.next();!i.done;i=a.next()){var c=i.value;this.gpuDataManager.release(c.id)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}this.kernelPersistentData.delete(e)}this.kernelCustomData.delete(e),this.kernels.delete(e)},e.prototype.computeKernel=function(e,t){var n,r,a=this.kernels.get(e);if(!a)throw new Error("kernel not created: ".concat(e));var u=i(a,3),s=u[0],l=u[1],f=u[2];if(null!==this.currentKernelId)throw new Error(\'kernel "\'.concat(s,\'" is not allowed to be called recursively\'));this.currentKernelId=e,f[0]&&(f[1]=f[0](f[1]),f[0]=void 0),(0,c.LOG_DEBUG)("info",(function(){return\'[WebGPU] Start to run kernel "\'.concat(s,\'"...\')})),this.temporaryData=[];try{return l(t,f[1]),0}catch(e){return(0,c.LOG_DEBUG)("warning",\'[WebGPU] Kernel "\'.concat(s,\'" failed. Error: \').concat(e)),1}finally{try{for(var p=o(this.temporaryData),d=p.next();!d.done;d=p.next()){var h=d.value;this.gpuDataManager.release(h.id)}}catch(e){n={error:e}}finally{try{d&&!d.done&&(r=p.return)&&r.call(p)}finally{if(n)throw n.error}}this.temporaryData=[],this.currentKernelId=null}},e}();t.WebGpuBackend=f},675:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function c(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}u((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(c){return function(u){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&c[0]?r.return:c[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,c[1])).done)return a;switch(r=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){i.label=c[1];break}if(6===c[0]&&i.label<a[1]){i.label=a[1],a=c;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(c);break}a[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],r=0}finally{n=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.init=void 0;var o=n(917),i=n(838),c=n(955),u=n(952),s=function(){function e(e,t,n,r){this.module=e,this.dataType=t,this.data=n,this.dims=r}return e.prototype.getFloat32Array=function(){if(1!==this.dataType)throw new Error("Invalid data type");var e=u.ShapeUtil.size(this.dims);return 0===e?new Float32Array:new Float32Array(this.module.HEAP8.buffer,this.data,e)},e.prototype.getBigInt64Array=function(){if(7!==this.dataType)throw new Error("Invalid data type");var e=u.ShapeUtil.size(this.dims);return 0===e?new BigInt64Array:new BigInt64Array(this.module.HEAP8.buffer,this.data,e)},e.prototype.reshape=function(t){if(u.ShapeUtil.size(t)!==u.ShapeUtil.size(this.dims))throw new Error("Invalid new shape");return new e(this.module,this.dataType,this.data,t)},e}(),l=function(){function e(e,t,n){this.module=e,this.backend=t;var r=e.HEAPU32,a=n>>2;this.opKernelContext=r[a++];for(var o=r[a++],i=[],c=0;c<o;c++){for(var u=r[a++],l=r[a++],f=r[a++],p=[],d=0;d<f;d++)p.push(r[a++]);i.push(new s(e,u,l,p))}this.inputs=i}return Object.defineProperty(e.prototype,"customData",{get:function(){return this.backend.currentKernelCustomData},enumerable:!1,configurable:!0}),e.prototype.compute=function(e,t){var n,r,a,i=this,c=null!==(r=null===(n=null==t?void 0:t.inputs)||void 0===n?void 0:n.map((function(e){return"number"==typeof e?i.inputs[e]:e})))&&void 0!==r?r:this.inputs,l=null!==(a=null==t?void 0:t.outputs)&&void 0!==a?a:[];return this.backend.run(e,c,l,(function(e,t,n){return new s(i.module,t,i.output(e,n),n)}),(function(e,t){var n=(0,o.getTensorElementSize)(e);if(!n)throw new Error("Unsupported data type: ".concat(e));var r=n*u.ShapeUtil.size(t);return new s(i.module,e,i.backend.gpuDataManager.create(r).id,t)}))},e.prototype.output=function(e,t){var n=this.module.stackSave();try{var r=this.module.stackAlloc(4*(1+t.length)),a=r>>2;this.module.HEAPU32[a++]=t.length;for(var o=0;o<t.length;o++)this.module.HEAPU32[a++]=t[o];return this.module._JsepOutput(this.opKernelContext,e,r)}finally{this.module.stackRestore(n)}},e}();t.init=function(e,t){return r(void 0,void 0,void 0,(function(){var n,o;return a(this,(function(u){switch(u.label){case 0:if(!(n=e.jsepInit)||!navigator.gpu)return[3,2];if(!t.wasm.simd)throw new Error("Not supported for WebGPU=ON and SIMD=OFF. Please set `env.wasm.simd` to true when using WebGPU EP");return[4,(o=new i.WebGpuBackend).initialize(t)];case 1:u.sent(),n({backend:o},(function(e){return o.alloc(e)}),(function(e){return o.free(e)}),(function(t,n,r,a){if(void 0===a&&(a=!1),a)(0,c.LOG_DEBUG)("verbose",(function(){return"[WebGPU] jsepCopyGpuToGpu: src=".concat(t,", dst=").concat(n,", size=").concat(r)})),o.memcpy(t,n);else{(0,c.LOG_DEBUG)("verbose",(function(){return"[WebGPU] jsepCopyCpuToGpu: dataOffset=".concat(t,", gpuDataId=").concat(n,", size=").concat(r)}));var i=e.HEAPU8.subarray(t,t+r);o.upload(n,i)}}),(function(t,n,i){return r(void 0,void 0,void 0,(function(){return a(this,(function(r){switch(r.label){case 0:return(0,c.LOG_DEBUG)("verbose",(function(){return"[WebGPU] jsepCopyGpuToCpu: gpuDataId=".concat(t,", dataOffset=").concat(n,", size=").concat(i)})),[4,o.download(t,(function(){return e.HEAPU8.subarray(n,n+i)}))];case 1:return r.sent(),[2]}}))}))}),(function(e,t,n){return o.createKernel(e,t,n)}),(function(e){return o.releaseKernel(e)}),(function(t,n){(0,c.LOG_DEBUG)("verbose",(function(){return"[WebGPU] jsepRun: kernel=".concat(t,", contextDataOffset=").concat(n)}));var r=new l(e,o,n);return o.computeKernel(t,r)})),u.label=2;case 2:return[2]}}))}))}},955:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i},a=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,a=0,o=t.length;a<o;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.LOG_DEBUG=t.LOG=t.configureLogger=void 0;var o,i,c=n(917),u=["V","I","W","E","F"];t.configureLogger=function(e,t){o=e,i=t},t.LOG=function(e,t){var n,r,a=(0,c.logLevelStringToEnum)(e);a>=(0,c.logLevelStringToEnum)(o)&&(n=a,r="function"==typeof t?t():t,console.log("[".concat(u[n],",").concat((new Date).toISOString(),"]").concat(r)))},t.LOG_DEBUG=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];i&&t.LOG.apply(void 0,a([],r(e),!1))}},952:function(e,t){"use strict";var n=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i};Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_CLIP=t.MIN_CLIP=t.GemmUtil=t.PoolConvUtil=t.ShapeUtil=t.BroadcastUtil=t.MatMulUtil=void 0;var r=function(){function e(){}return e.calcMatMulShape=function(e,t){return e[1]!==t[0]?void 0:[e[0],t[1]]},e}();t.MatMulUtil=r;var a=function(){function e(){}return e.calcShape=function(e,t,a){var o;void 0===a&&(a=!1);var i=e.length,c=t.length;if(0===i)return t;if(0===c)return e;var u=Math.max(e.length,t.length),s=new Array(u);if(a){if(i<2||c<2)return;var l=r.calcMatMulShape([e[i-2],e[i-1]],[t[c-2],t[c-1]]);if(void 0===l)return;o=n(l,2),s[u-2]=o[0],s[u-1]=o[1]}for(var f=a?3:1;f<=u;f++){var p=i-f<0?1:e[i-f],d=c-f<0?1:t[c-f];if(p!==d&&p>1&&d>1)return;s[u-f]=Math.max(p,d)}return s},e.isValidBroadcast=function(e,t){var n=e.length,r=t.length;if(n>r)return!1;for(var a=1;a<=n;a++)if(1!==e[n-a]&&e[n-a]!==t[r-a])return!1;return!0},e}();t.BroadcastUtil=a;var o=function(){function e(){}return e.size=function(t){return e.getSizeFromDimensionRange(t,0,t.length)},e.sizeFromDimension=function(t,n){if(n<0||n>t.length)throw new Error("invalid dimension of ".concat(n," for sizeFromDimension as Tensor has ").concat(t.length," dimensions."));return e.getSizeFromDimensionRange(t,n,t.length)},e.sizeToDimension=function(t,n){if(n<0||n>t.length)throw new Error("invalid dimension of ".concat(n," for sizeToDimension as Tensor has ").concat(t.length," dimensions."));return e.getSizeFromDimensionRange(t,0,n)},e.getSizeFromDimensionRange=function(e,t,n){for(var r=1,a=t;a<n;a++){if(e[a]<0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains negative values in them.");r*=e[a]}return r},e.computeStrides=function(e){var t=e.length;if(0===t)return[];if(1===t)return[1];var n=new Array(t);n[t-1]=1,n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n},e.normalizeAxis=function(e,t){if(e<-t&&e>=t)throw new Error("unsupported axis for this operation.");return e<0?e+t:e},e.normalizeAxes=function(e,t){var n=this;return e.map((function(r){return n.normalizeAxis(r,null!=t?t:e.length)}))},e.sortBasedOnPerm=function(e,t){return t?t.map((function(t){return e[t]})):e.slice().reverse()},e.padShape=function(e,t){var n=e.length;return e.map((function(e,r){return e+t[r]+t[r+n]}))},e.areEqual=function(e,t){return e.length===t.length&&e.every((function(e,n){return e===t[n]}))},e}();t.ShapeUtil=o;var i=function(){function e(){}return e.adjustPoolAttributes=function(e,t,n,r,a,o){if(!e&&n.length!==t.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(e)for(var i=0;i<t.length-2;i++)i>=n.length?n.push(t[i+2]):n[i]=t[i+2];for(i=0;i<n.length;i++)if(i<r.length){if(r[i]<0)throw new Error("strides should be greater than or equal to 1")}else r.push(1);for(i=0;i<n.length;i++)if(i<a.length){if(a[i]<0)throw new Error("dilations should be greater than or equal to 1")}else a.push(1);for(i=0;i<2*n.length;i++)if(i<o.length){if(o[i]<0)throw new Error("pad should be greater than or equal to 1")}else o.push(0);for(i=0;i<n.length;i++){if(n[i]<=0)throw new Error("kernel shapes need to be greater than 0");if(o[i]>=n[i]||o[i+n.length]>=n[i])throw new Error("pads should be smaller than kernel")}},e.adjustPadsBasedOnAutoPad=function(t,n,r,a,o,i,c){if(c){if(o.length!==2*(t.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(n.length!==t.length-2)throw new Error("length of strides should be the length of data dimensions");if(a.length!==t.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(var u=0;u<t.length-2;u++)e.adjustPadAndReturnShape(t[u+(i?1:2)],n[u],r[u],a[u],o,u,u+t.length-2,c)}},e.computePoolOutputShape=function(t,n,r,a,o,i,c){if(n.length<=0)throw new Error("input shape must be of size greater than 0");var u=[n[0],n[1]];return e.computeShapeHelper(t,n,u,r,a,o,i,c),u},e.computeConvOutputShape=function(t,n,r,a,o,i,c){if(t.length<=0||n.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");var u=[t[0],n[0]];return e.computeShapeHelper(!1,t,u,r,a,o,i,c),u},e.computeShapeHelper=function(t,n,r,a,o,i,c,u){if(t)for(var s=0;s<n.length-2;s++)r.push(1);else for(s=0;s<n.length-2;s++)r.push(e.adjustPadAndReturnShape(n[s+2],a[s],o[s],i[s],c,s,s+n.length-2,u))},e.adjustPadAndReturnShape=function(e,t,n,r,a,o,i,c){var u=n*(r-1)+1;if(!c||"NOTSET"===c)return Math.floor((e+a[o]+a[i]-u)/t+1);switch(c){case"VALID":return a[o]=0,a[i]=0,Math.floor((e-u)/t+1);case"SAME_LOWER":case"SAME_UPPER":if(1!==n)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");var s=((e+t-1)/t-1)*t+r-e;return a[o]="SAME_LOWER"===c?Math.floor((s+1)/2):Math.floor(s/2),a[i]=s-a[o],Math.floor((e+s-r)/t+1);default:throw new Error("Unsupported AutoPad type")}},e}();t.PoolConvUtil=i;var c=function(){function e(){}return e.getShapeOfGemmResult=function(e,t,n,r,o){if(2!==e.length||2!==n.length)throw new Error("shape need to be of size 2");var i,c,u;t?(i=e[1],c=e[0]):(i=e[0],c=e[1]);var s=-1;if(r?(u=n[0],s=1):(u=n[1],s=0),n[s]!==c)throw new Error("dimension mismatch");if(i<=0||u<=0||c<=0)throw new Error("invalid shape specified");if(o&&!a.isValidBroadcast(o,[i,u]))throw new Error("gemm: invalid bias shape for broadcast");return[i,u,c]},e}();t.GemmUtil=c,t.MIN_CLIP=-34028234663852886e22,t.MAX_CLIP=34028234663852886e22},387:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAttributeWithCacheKey=void 0;var n=function(){function e(e){Object.assign(this,e)}return Object.defineProperty(e.prototype,"cacheKey",{get:function(){var e=this;return this._cacheKey||(this._cacheKey=Object.getOwnPropertyNames(this).sort().map((function(t){return"".concat(e[t])})).join(";")),this._cacheKey},enumerable:!1,configurable:!0}),e}();t.createAttributeWithCacheKey=function(e){return new n(e)}},771:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function c(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}u((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(c){return function(u){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&c[0]?r.return:c[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,c[1])).done)return a;switch(r=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){i.label=c[1];break}if(6===c[0]&&i.label<a[1]){i.label=a[1],a=c;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(c);break}a[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],r=0}finally{n=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,u])}}},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i},c=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,a=0,o=t.length;a<o;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.createGpuDataManager=void 0;var u=n(955),s=n(163),l=function(e){return 16*Math.ceil(e/16)},f=0,p=function(){function e(e){this.backend=e,this.storageCache=new Map,this.downloadCache=new Map,this.buffersForUploadingPending=[],this.buffersPending=[]}return e.prototype.upload=function(e,t){var n=t.buffer,r=t.byteOffset,a=t.byteLength,o=l(a),i=this.storageCache.get(e);if(!i)throw new Error("gpu data for uploading does not exist");if(i.originalSize!==a)throw new Error("inconsistent data size. gpu data size=".concat(i.originalSize,", data size=").concat(a));var c=this.backend.device.createBuffer({mappedAtCreation:!0,size:o,usage:GPUBufferUsage.MAP_WRITE|GPUBufferUsage.COPY_SRC}),s=c.getMappedRange();new Uint8Array(s).set(new Uint8Array(n,r,a)),c.unmap();var f=this.backend.getCommandEncoder();this.backend.endComputePass(),f.copyBufferToBuffer(c,0,i.gpuData.buffer,0,o),(0,u.LOG_DEBUG)("verbose",(function(){return"[WebGPU] GpuDataManager.upload(id=".concat(e,")")})),this.buffersForUploadingPending.push(c)},e.prototype.memcpy=function(e,t){var n=this.storageCache.get(e);if(!n)throw new Error("source gpu data for memcpy does not exist");var r=this.storageCache.get(t);if(!r)throw new Error("destination gpu data for memcpy does not exist");if(n.originalSize!==r.originalSize)throw new Error("inconsistent source and destination gpu data size");var a=l(n.originalSize),o=this.backend.getCommandEncoder();this.backend.endComputePass(),o.copyBufferToBuffer(n.gpuData.buffer,0,r.gpuData.buffer,0,a)},e.prototype.create=function(e,t){void 0===t&&(t=GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST);var n=l(e),r=this.backend.device.createBuffer({size:n,usage:t}),a={id:f++,type:s.GpuDataType.default,buffer:r};return this.storageCache.set(a.id,{gpuData:a,originalSize:e}),(0,u.LOG_DEBUG)("verbose",(function(){return"[WebGPU] GpuDataManager.create(size=".concat(e,") => id=").concat(a.id)})),a},e.prototype.get=function(e){var t;return null===(t=this.storageCache.get(e))||void 0===t?void 0:t.gpuData},e.prototype.release=function(e){var t=this.storageCache.get(e);if(!t)throw new Error("releasing data does not exist");return(0,u.LOG_DEBUG)("verbose",(function(){return"[WebGPU] GpuDataManager.release(id=".concat(e,"), gpuDataId=").concat(t.gpuData.id)})),this.storageCache.delete(e),this.buffersPending.push(t.gpuData.buffer),this.downloadCache.get(e)&&this.downloadCache.delete(e),t.originalSize},e.prototype.download=function(e){return r(this,void 0,void 0,(function(){var t,n,r,o,i,c;return a(this,(function(a){if(t=this.downloadCache.get(e))return[2,t.data];if(!(n=this.storageCache.get(e)))throw new Error("data does not exist");return r=this.backend.getCommandEncoder(),this.backend.endComputePass(),o=l(n.originalSize),i=this.backend.device.createBuffer({size:o,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),r.copyBufferToBuffer(n.gpuData.buffer,0,i,0,o),this.backend.flush(),c=new Promise((function(e){i.mapAsync(GPUMapMode.READ).then((function(){var t=i.getMappedRange().slice(0);i.destroy(),e(t)}))})),this.downloadCache.set(e,{data:c}),[2,c]}))}))},e.prototype.refreshPendingBuffers=function(){var e,t,n,r;try{for(var a=o(this.buffersForUploadingPending),i=a.next();!i.done;i=a.next())i.value.destroy()}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}try{for(var c=o(this.buffersPending),u=c.next();!u.done;u=c.next())u.value.destroy()}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}},e}();t.createGpuDataManager=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new(p.bind.apply(p,c([void 0],i(e),!1)))}},510:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.WEBGPU_OP_RESOLVE_RULES=void 0;var i=o(n(504)),c=n(770),u=n(271),s=n(522),l=o(n(262)),f=n(31),p=n(625),d=o(n(302));t.WEBGPU_OP_RESOLVE_RULES=new Map([["Abs",[d.abs]],["Acos",[d.acos]],["Acosh",[d.acosh]],["Add",[i.add]],["Asin",[d.asin]],["Asinh",[d.asinh]],["Atan",[d.atan]],["Atanh",[d.atanh]],["AveragePool",[l.averagePool,l.parseAveragePoolAttributes]],["Ceil",[d.ceil]],["ClipV10",[d.clipV10]],["Clip",[d.clip]],["Conv",[c.conv,c.parseConvAttributes]],["Cos",[d.cos]],["Cosh",[d.cosh]],["Div",[i.div]],["Elu",[d.elu,d.parseAlphaAttributes]],["Erf",[d.erf]],["Exp",[d.exp]],["Floor",[d.floor]],["Gemm",[u.gemm,u.parseGemmAttributes]],["GlobalAveragePool",[l.globalAveragePool,l.parseGlobalAveragePoolAttributes]],["GlobalMaxPool",[l.globalMaxPool,l.parseGlobalMaxPoolAttributes]],["LeakyRelu",[d.leakyRelu,d.parseAlphaAttributes]],["MatMul",[s.matMul]],["MaxPool",[l.maxPool,l.parseMaxPoolAttributes]],["Mul",[i.mul]],["Neg",[d.neg]],["Pow",[i.pow]],["Reciprocal",[d.reciprocal]],["ReduceMin",[f.reduceMin,f.parseReduceAttributes]],["ReduceMean",[f.reduceMean,f.parseReduceAttributes]],["ReduceMax",[f.reduceMax,f.parseReduceAttributes]],["ReduceSum",[f.reduceSum,f.parseReduceAttributes]],["ReduceProd",[f.reduceProd,f.parseReduceAttributes]],["ReduceL1",[f.reduceL1,f.parseReduceAttributes]],["ReduceL2",[f.reduceL2,f.parseReduceAttributes]],["ReduceLogSum",[f.reduceLogSum,f.parseReduceAttributes]],["ReduceLogSumExp",[f.reduceLogSumExp,f.parseReduceAttributes]],["ReduceSumSquare",[f.reduceSumSquare,f.parseReduceAttributes]],["Relu",[d.relu]],["Sigmoid",[d.sigmoid]],["Sin",[d.sin]],["Sinh",[d.sinh]],["Sqrt",[d.sqrt]],["Sub",[i.sub]],["Tan",[d.tan]],["Tanh",[d.tanh]],["ThresholdedRelu",[d.thresholdedRelu,d.parseAlphaAttributes]],["Transpose",[p.transpose,p.parseTransposeAttributes]]])},427:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.biasActivationSnippet=t.activationFnSnippet=t.typeSnippet=void 0,t.typeSnippet=function(e){switch(e){case 1:return"f32";case 2:return"vec2<f32>";case 3:return"vec3<f32>";case 4:return"vec4<f32>";default:throw new Error("".concat(e,"-component is not supported."))}},t.activationFnSnippet=function(e,t,n,r){return void 0===t&&(t=!1),void 0===n&&(n=!1),void 0===r&&(r=3),""},t.biasActivationSnippet=function(e,t){return"\\n      ".concat(e?"value = value + getBiasByOutputCoords(coords);":"","\\n      ").concat(t?"value = activation(value, coords);":"","\\n      ")}},456:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.createConv2DMatMulProgramInfo=void 0;var a=n(955),o=n(952),i=n(163),c=n(427),u=n(85),s=n(158);t.createConv2DMatMulProgramInfo=function(e,t,n,l,f,p,d,h,g){var m="NHWC"===n.format,v=m?e[0].dims[3]:e[0].dims[1],y=l[0],b=m?l[2]:l[3],w=m?l[1]:l[2],_=m?l[3]:l[1],S=((v%4==0||v%3==0)&&m||b%4==0&&!m)&&_%4==0,A=m?_:b*w,O=m?b*w:_,x=S?[8,8,1]:[A<=4?4:16,A>4&&O<=4?4:16,1],E=S?[4,4,1]:[A<=4?1:2,A>4&&O<=4?1:2,1],C=[Math.ceil(A/x[0]/E[0]),Math.ceil(O/x[1]/E[1]),Math.ceil(y/x[2]/E[1])];(0,a.LOG_DEBUG)("verbose",(function(){return"[conv2d_mm_webgpu] dispatch = ".concat(C)}));var P=S?m&&v%4!=0?3:4:E[0],T=x[1]*E[1],M=x[0]*E[0],R=Math.max(x[0]*P,x[1]),k=f%T==0,I=p%M==0,D=d%R==0,U=S?[P,4,4]:[1,1,1],G=["@group(0) @binding(0) var<storage, read> x: array<".concat(S&&4===P?"vec4<f32>":"f32",">;"),"@group(0) @binding(1) var<storage, read> w: array<".concat(S?"vec4<f32>":"f32",">;")],j="\\n      fn setOutputAtIndex(flatIndex : i32, value : ".concat(S?"vec4<f32>":"f32",") {\\n        result[flatIndex] = ").concat(S?"vec4<f32>":"f32","(value);\\n      }\\n      fn setOutputAtCoords(d0 : i32, d1 : i32, d2 : i32, d3 : i32, value : ").concat(S?"vec4<f32>":"f32",") {\\n        let flatIndex = getOutputIndexFromCoords(vec4<i32>(d0, d1, d2, d3));\\n        setOutputAtIndex(flatIndex ").concat(S?"/ 4":"",", value);\\n      }");return h&&(G.push("@group(0) @binding(2) var<storage, read> bias: array<".concat(S?"vec4<f32>":"f32",">;")),j+="\\n        fn getBiasByOutputCoords(coords : vec4<i32>) -> ".concat(S?"vec4<f32>":"f32"," {\\n          return bias[coords.").concat(m?"w":"y").concat(S?"/ 4":"","];\\n        }")),r(r({},t),{outputs:[{dims:l,dataType:e[0].dataType,gpuDataType:i.GpuDataType.default}],dispatchGroup:function(){return{x:C[0],y:C[1],z:C[2]}},getShaderSource:function(){return"\\n        ".concat(u.utilFunctions,"\\n        //struct Uniforms { xShape : vec4<i32>, wShape : vec4<i32>, outShape : vec4<i32>,\\n        //  outShapeStrides: vec3<i32>, filterDims : vec2<i32>, pad : vec2<i32>, stride : vec2<i32>,\\n        //  dilation : vec2<i32>, dimAOuter : i32, dimBOuter : i32, dimInner : i32 };\\n        ").concat(G.join(""),"\\n        @group(0) @binding(").concat(G.length,") var<storage, read_write> result: array<").concat(S?"vec4<f32>":"f32",">;\\n        //@group(0) @binding(").concat(G.length+1,") var<uniform> uniforms: Uniforms;\\n\\n        const xShape : vec4<i32> = vec4<i32>(").concat(e[0].dims.join(","),");\\n        const wShape : vec4<i32> = vec4<i32>(").concat(e[1].dims.join(","),");\\n        const outShape : vec4<i32> = vec4<i32>(").concat(l.join(","),");\\n        const outShapeStrides : vec3<i32> = vec3<i32>(").concat(o.ShapeUtil.computeStrides(l).slice(0,3).join(","),");\\n        const filterDims : vec2<i32> = vec2<i32>(").concat(n.kernelShape[0],", ").concat(n.kernelShape[1],");\\n        const pad : vec2<i32> = vec2<i32>(").concat(n.pads[0],", ").concat(n.pads[1],");\\n        const stride : vec2<i32> = vec2<i32>(").concat(n.strides[0],", ").concat(n.strides[1],");\\n        const dilation : vec2<i32> = vec2<i32>(").concat(n.dilations[0],", ").concat(n.dilations[1],");\\n        const dimAOuter : i32 = ").concat(f,";\\n        const dimBOuter : i32 = ").concat(p,";\\n        const dimInner : i32 = ").concat(d,";\\n        ").concat(j,"\\n        ").concat(function(e,t,n,r,a,o,i,u,s,l){void 0===a&&(a=!1),void 0===i&&(i=!1),void 0===u&&(u=4),void 0===s&&(s=4),void 0===l&&(l=4);var f=e?"\\n    let coord = vec4<i32>(batch, xRow, xCol, xCh);\\n    ":"\\n    let coord = vec4<i32>(batch, xCh, xRow, xCol);\\n    ",p=e?"\\n    let coords = vec4<i32>(\\n      batch,\\n      row / outWidth,\\n      row % outWidth,\\n      col);\\n    ":"\\n    let coords = vec4<i32>(\\n      batch,\\n      row,\\n      col / outWidth,\\n      col % outWidth);\\n    ",d=e?"xShape[1]":"xShape[2]",h=e?"xShape[2]":"xShape[3]",g=e?"row":"col",m=e?"col":"row",v="\\n    let inChannels = wShape[2];\\n    let outWidth = ".concat(e?"outShape[2]":"outShape[3]",";\\n    let outRow = ").concat(g," / outWidth;\\n    let outCol = ").concat(g," % outWidth;\\n\\n    let WRow = ").concat(m," / (filterDims[1] * inChannels);\\n    let WCol = ").concat(m," / inChannels % filterDims[1];\\n    let xRow = outRow * stride[0] + dilation[0] * WRow - pad[0];\\n    let xCol = outCol * stride[1] + dilation[1] * WCol - pad[1];\\n    let xCh = ").concat(m," % inChannels;\\n    var resData = ").concat((0,c.typeSnippet)(u),"(0.0);\\n    // The bounds checking is always needed since we use it to pad zero for\\n    // the \'same\' padding type.\\n    if (xRow >= 0 && xRow < ").concat(d," && xCol >= 0 && xCol < ").concat(h,") {\\n      ").concat(f,"\\n      let xIndex = getIndexFromCoords4D(coord, xShape);\\n      ").concat(function(e){switch(e){case 1:return"resData = x[xIndex];";case 3:return"resData = vec3<f32>(x[xIndex], x[xIndex + 1], x[xIndex + 2]);";case 4:return"resData = x[xIndex / 4];";default:throw new Error("innerElementSize ".concat(e," is not supported."))}}(u),"\\n    }\\n    return resData;"),y=e?t&&r?"\\n    let col = colIn * ".concat(u,";\\n    ").concat(v):"\\n    let col = colIn * ".concat(u,";\\n    if (row < dimAOuter && col < dimInner) {\\n      ").concat(v,"\\n    }\\n    return ").concat((0,c.typeSnippet)(u),"(0.0);"):r&&n?"\\n    let col = colIn * ".concat(u,";\\n    ").concat(v):"\\n    let col = colIn * ".concat(u,";\\n    if (row < dimInner && col < dimBOuter) {\\n      ").concat(v,"\\n    }\\n    return ").concat((0,c.typeSnippet)(u),"(0.0);"),b="".concat(function(e){switch(e){case 1:return"return w[row * wShape[3] + colIn];";case 4:return"return w[row * wShape[3] / 4 + colIn];";default:throw new Error("innerElementSize ".concat(e," is not supported."))}}(s)),w=(0,c.typeSnippet)(l),_=e?(0,c.typeSnippet)(u):(0,c.typeSnippet)(s),S=e?(0,c.typeSnippet)(s):(0,c.typeSnippet)(u);return"\\n    ".concat((0,c.activationFnSnippet)(o,i,4===l,4),"\\n    fn mm_readA(batch: i32, row : i32, colIn : i32) -> ").concat(_," {\\n      ").concat(e?y:b,"\\n    }\\n\\n    fn mm_readB(batch: i32, row : i32, colIn : i32) -> ").concat(S," {\\n      ").concat(e?b:y,"\\n    }\\n\\n    fn mm_write(batch: i32, row : i32, colIn : i32, valueIn : ").concat(w,") {\\n      let col = colIn * ").concat(l,";\\n      if (row < dimAOuter && col < dimBOuter)\\n      {\\n      var value = valueIn;\\n      let outWidth = ").concat(e?"outShape[2]":"outShape[3]",";\\n      ").concat(p,"\\n      ").concat((0,c.biasActivationSnippet)(a,o),"\\n      setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);\\n      }\\n    }")}(m,k,I,D,h,void 0,!1,U[0],U[1],U[2]),"\\n            ").concat(S?(0,s.makeMatMulPackedVec4Source)(E,x,!m,R):(0,s.makeMatMulPackedSource)(E,x,!m,R,!1,void 0,g))}})}},85:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.utilFunctions=void 0,t.utilFunctions="\\nfn getIndexFromCoords4D(coords : vec4<i32>, shape : vec4<i32>) -> i32 {\\n  return dot(coords, vec4<i32>(\\n      shape.y * shape.z * shape.w, shape.z * shape.w, shape.w, 1));\\n}\\nfn getOutputIndexFromCoords(coords : vec4<i32>) -> i32 {\\n  return dot(coords, vec4<i32>(\\n    outShapeStrides.x, outShapeStrides.y, outShapeStrides.z, 1));\\n}\\n"},158:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeMatMulPackedSource=t.makeMatMulPackedVec4Source=void 0,t.makeMatMulPackedVec4Source=function(e,t,n,r,a,o,i){void 0===n&&(n=!1),void 0===r&&(r=32),void 0===a&&(a=!1),void 0===o&&(o=32),void 0===i&&(i=!1);var c,u=t[1]*e[1],s=t[0]*e[0],l=n?u:r,f=n?r:u,p=l/t[0],d=r/t[1];if((!n||4!==p||4!==e[1])&&(n||3!==p&&4!==p)||l%t[0]!=0||r%t[1]!=0||4!==e[0])throw new Error("If transposeA ".concat(n," is true, innerElementSize ").concat(p," and workPerThread[1] ").concat(e[1]," must be 4.\\n      Otherwise, innerElementSize ").concat(p," must be 3 or 4.\\n  tileAWidth ").concat(l," must be divisible by workgroupSize[0]").concat(t[0],". tileInner ").concat(r," must be divisible by workgroupSize[1] ").concat(t[1],". colPerThread ").concat(e[0]," must be 4."));return"\\nvar<workgroup> mm_Asub : array<array<vec".concat(p,"<f32>, ").concat(l/p,">, ").concat(f,">;\\nvar<workgroup> mm_Bsub : array<array<vec4<f32>, ").concat(s/e[0],">, ").concat(r,">;\\n\\nconst rowPerThread = ").concat(e[1],";\\nconst colPerThread = ").concat(e[0],";\\nconst innerElementSize = ").concat(p,";\\nconst tileInner = ").concat(r,";\\n\\n@compute @workgroup_size(").concat(t[0],", ").concat(t[1],", ").concat(t[2],")\\nfn main(@builtin(local_invocation_id) localId : vec3<u32>,\\n        @builtin(global_invocation_id) globalId : vec3<u32>,\\n        @builtin(workgroup_id) workgroupId : vec3<u32>) {\\n  let localRow = i32(localId.y);\\n  let tileRow = ").concat(i?"0":"localRow * rowPerThread",";\\n  let tileCol = i32(localId.x);\\n\\n  let globalRow = ").concat(i?"0":"i32(globalId.y) * rowPerThread",";\\n  let globalCol = i32(globalId.x);\\n  let batch = ").concat(a?"0":"i32(globalId.z)",";\\n  let globalRowStart = i32(workgroupId.y) * ").concat(u,";\\n\\n  let numTiles = ").concat(a?"".concat(Math.ceil(o/r)):"(dimInner - 1) / tileInner + 1",";\\n  var kStart = ").concat(a?"i32(globalId.z) * ".concat(o):"0",";\\n\\n  var acc: array<vec4<f32>, rowPerThread>;\\n\\n  // Loop over shared dimension.\\n  let tileRowB = localRow * ").concat(d,";\\n  for (var t = 0; t < numTiles; t = t + 1) {\\n      // Load one tile of A into local memory.\\n      for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\\n          let inputRow = tileRow + innerRow;\\n          let inputCol = tileCol;\\n          ").concat((c=n,c?"\\n        mm_Asub[inputRow][inputCol] = mm_readA(batch,\\n          kStart + inputRow,\\n          globalRowStart / innerElementSize + inputCol);\\n        ":"\\n        mm_Asub[inputRow][inputCol] = mm_readA(batch,\\n          globalRow + innerRow,\\n          kStart / innerElementSize + inputCol);\\n        "),"\\n      }\\n\\n      // Load one tile of B into local memory.\\n      for (var innerRow = 0; innerRow < ").concat(d,"; innerRow = innerRow + 1) {\\n          let inputRow = tileRowB + innerRow;\\n          let inputCol = tileCol;\\n          mm_Bsub[inputRow][inputCol] = mm_readB(batch, kStart + inputRow, globalCol);\\n      }\\n      kStart = kStart + tileInner;\\n      workgroupBarrier();\\n\\n      // Compute acc values for a single thread.\\n      for (var k = 0; k < tileInner / innerElementSize; k = k + 1) {\\n          let BCached0 = mm_Bsub[k * innerElementSize][tileCol];\\n          let BCached1 = mm_Bsub[k * innerElementSize + 1][tileCol];\\n          let BCached2 = mm_Bsub[k * innerElementSize + 2][tileCol];\\n          ").concat(3===p?"":"let BCached3 = mm_Bsub[k * innerElementSize + 3][tileCol];","\\n\\n          ").concat(function(e,t){return e?"\\n        let ACached0 = mm_Asub[k * innerElementSize][localRow];\\n        let ACached1 = mm_Asub[k * innerElementSize + 1][localRow];\\n        let ACached2 = mm_Asub[k * innerElementSize + 2][localRow];\\n        ".concat(3===t?"":"let ACached3 = mm_Asub[k * innerElementSize + 3][localRow];","\\n        for (var i = 0; i < rowPerThread; i = i + 1) {\\n          acc[i] = BCached0 * ACached0[i] + acc[i];\\n          acc[i] = BCached1 * ACached1[i] + acc[i];\\n          acc[i] = BCached2 * ACached2[i] + acc[i];\\n          ").concat(3===t?"":"acc[i] = BCached3 * ACached3[i] + acc[i];","\\n        }"):"\\n        for (var i = 0; i < rowPerThread; i = i + 1) {\\n          let ACached = mm_Asub[tileRow + i][k];\\n          acc[i] = BCached0 * ACached.x + acc[i];\\n          acc[i] = BCached1 * ACached.y + acc[i];\\n          acc[i] = BCached2 * ACached.z + acc[i];\\n          ".concat(3===t?"":"acc[i] = BCached3 * ACached.w + acc[i];","\\n        }")}(n,p),"\\n      }\\n\\n      workgroupBarrier();\\n  }\\n\\n  for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\\n      mm_write(batch, globalRow + innerRow, globalCol, acc[innerRow]);\\n  }\\n}")};var n=function(e){return e?"\\n            mm_Asub[inputRow][inputCol] = mm_readA(batch,\\n              kStart + inputRow,\\n              globalRowStart + inputCol);\\n            ":"\\n            mm_Asub[inputRow][inputCol] = mm_readA(batch,\\n              globalRowStart + inputRow,\\n              kStart + inputCol);\\n            "};t.makeMatMulPackedSource=function(e,t,r,a,o,i,c){void 0===r&&(r=!1),void 0===a&&(a=32),void 0===o&&(o=!1),void 0===i&&(i=32),void 0===c&&(c=!1);var u=e[1]*t[1],s=e[0]*t[0],l=r?u:a,f=r?a:u;if(f%t[1]!=0||l%t[0]!=0||a%t[1]!=0)throw new Error("tileAHight ".concat(f," must be divisible by workgroupSize[1]").concat(t[1],", tileAWidth ").concat(l," must be divisible by workgroupSize[0]").concat(t[0],", tileInner ").concat(a," must be divisible by workgroupSize[1]").concat(t[1]));var p=f/t[1],d=l/t[0],h=a/t[1],g=c?"\\n    let localRow = i32(localId.y);\\n    let localCol = i32(localId.x);\\n    let globalRowStart = i32(workgroupId.y) * ".concat(u,";\\n    let globalColStart = i32(workgroupId.x) * ").concat(s,";\\n\\n    // Loop over shared dimension.\\n    for (var t = 0; t < numTiles; t = t + 1) {\\n      // Load one tile of A into local memory.\\n      for (var inputRow = localRow; inputRow < ").concat(f,"; inputRow = inputRow + ").concat(t[1],") {\\n        for (var inputCol = localCol; inputCol < ").concat(l,"; inputCol = inputCol + ").concat(t[0],") {\\n          ").concat(n(r),"\\n        }\\n      }\\n      // Load one tile of B into local memory.\\n      for (var inputRow = localRow; inputRow < ").concat(a,"; inputRow = inputRow + ").concat(t[1],") {\\n            for (var inputCol = localCol; inputCol < ").concat(s,"; inputCol = inputCol + ").concat(t[0],") {\\n          mm_Bsub[inputRow][inputCol] = mm_readB(batch,\\n            kStart + inputRow,\\n            globalColStart + inputCol);\\n        }\\n      }\\n      kStart = kStart + tileInner;\\n      workgroupBarrier();\\n\\n      // Compute acc values for a single thread.\\n      var BCached : array<f32, colPerThread>;\\n      for (var k = 0; k < tileInner; k = k + 1) {\\n        for (var inner = 0; inner < colPerThread; inner = inner + 1) {\\n          BCached[inner] = mm_Bsub[k][localCol + inner * ").concat(t[0],"];\\n        }\\n        for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\\n          let ACached = ").concat(r?"mm_Asub[k][localRow + innerRow * ".concat(t[1],"];"):"mm_Asub[localRow + innerRow * ".concat(t[1],"][k];"),"\\n          for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\\n            acc[innerRow][innerCol] = acc[innerRow][innerCol] +\\n                ACached * BCached[innerCol];\\n          }\\n        }\\n      }\\n      workgroupBarrier();\\n    }\\n    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\\n      let gRow = globalRowStart + localRow + innerRow * ").concat(t[1],";\\n      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\\n        let gCol = globalColStart + localCol + innerCol * ").concat(t[0],";\\n        mm_write(batch, gRow, gCol, acc[innerRow][innerCol]);\\n      }\\n    }\\n    "):"\\nlet tileRow = i32(localId.y) * rowPerThread;\\nlet tileCol = i32(localId.x) * colPerThread;\\n\\nlet globalRow = i32(globalId.y) * rowPerThread;\\nlet globalCol = i32(globalId.x) * colPerThread;\\nlet globalRowStart = i32(workgroupId.y) * ".concat(u,";\\n\\nlet tileRowA = i32(localId.y) * ").concat(p,";\\nlet tileColA = i32(localId.x) * ").concat(d,";\\nlet tileRowB = i32(localId.y) * ").concat(h,";\\n// Loop over shared dimension.\\nfor (var t = 0; t < numTiles; t = t + 1) {\\n  // Load one tile of A into local memory.\\n  for (var innerRow = 0; innerRow < ").concat(p,"; innerRow = innerRow + 1) {\\n    for (var innerCol = 0; innerCol < ").concat(d,"; innerCol = innerCol + 1) {\\n      let inputRow = tileRowA + innerRow;\\n      let inputCol = tileColA + innerCol;\\n      ").concat(n(r),"\\n    }\\n  }\\n\\n  // Load one tile of B into local memory.\\n  for (var innerRow = 0; innerRow < ").concat(h,"; innerRow = innerRow + 1) {\\n    for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\\n      let inputRow = tileRowB + innerRow;\\n      let inputCol = tileCol + innerCol;\\n      mm_Bsub[inputRow][inputCol] = mm_readB(batch,\\n        kStart + inputRow,\\n        globalCol + innerCol);\\n    }\\n  }\\n  kStart = kStart + tileInner;\\n  workgroupBarrier();\\n\\n  // Compute acc values for a single thread.\\n  var BCached : array<f32, colPerThread>;\\n  for (var k = 0; k < tileInner; k = k + 1) {\\n    for (var inner = 0; inner < colPerThread; inner = inner + 1) {\\n      BCached[inner] = mm_Bsub[k][tileCol + inner];\\n    }\\n\\n    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\\n      ").concat(function(e){return e?"let ACached = mm_Asub[k][tileRow + innerRow];":"let ACached = mm_Asub[tileRow + innerRow][k];"}(r),"\\n      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\\n        acc[innerRow][innerCol] = acc[innerRow][innerCol] + ACached * BCached[innerCol];\\n      }\\n    }\\n  }\\n\\n  workgroupBarrier();\\n}\\n\\nfor (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\\n  for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\\n    mm_write(batch, globalRow + innerRow, globalCol + innerCol,\\n        acc[innerRow][innerCol]);\\n  }\\n}\\n");return"\\n  var<workgroup> mm_Asub : array<array<f32, ".concat(l,">, ").concat(f,">;\\n  var<workgroup> mm_Bsub : array<array<f32, ").concat(s,">, ").concat(a,">;\\n  const rowPerThread = ").concat(e[1],";\\n  const colPerThread = ").concat(e[0],";\\n  const tileInner = ").concat(a,";\\n\\n@compute @workgroup_size(").concat(t[0],", ").concat(t[1],", ").concat(t[2],")\\nfn main(@builtin(local_invocation_id) localId : vec3<u32>,\\n        @builtin(global_invocation_id) globalId : vec3<u32>,\\n        @builtin(workgroup_id) workgroupId : vec3<u32>) {\\n    let batch = ").concat(o?"0":"i32(globalId.z)",";\\n    let numTiles = ").concat(o?"".concat(Math.ceil(i/a)):"(dimInner - 1) / tileInner + 1",";\\n    var kStart = ").concat(o?"i32(globalId.z) * ".concat(i):"0",";\\n\\n    var acc : array<array<f32, colPerThread>, rowPerThread>;\\n\\n    // Without this initialization strange values show up in acc.\\n    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\\n      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\\n        acc[innerRow][innerCol] = 0.0;\\n      }\\n    }\\n    ").concat(g,"\\n  }\\n")}},504:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.sub=t.pow=t.mul=t.div=t.add=void 0;var a=n(952),o=n(163),i=n(75),c=function(e,t,n,c,u){var s={name:t,inputTypes:[o.GpuDataType.default,o.GpuDataType.default],cacheHint:u};return r(r({},s),{get:function(){return function(e,t,n,c,u,s){var l,f;void 0===s&&(s=t.dataType);var p=!a.ShapeUtil.areEqual(t.dims,n.dims),d=t.dims,h=a.ShapeUtil.size(t.dims),g=!1;if(p){var m=a.BroadcastUtil.calcShape(t.dims,n.dims,!1);if(!m)throw new Error("Can\'t perform binary op on the given tensors");d=m,h=a.ShapeUtil.size(d);for(var v=1,y=0;y<d.length;y++){var b=null!==(l=t.dims[t.dims.length-y])&&void 0!==l?l:1;if(b!==(null!==(f=n.dims[n.dims.length-y])&&void 0!==f?f:1))break;v*=b}v%4==0&&(g=!0)}else g=!0;return r(r({},e),{getShaderSource:function(e){return function(e,t,n,r,o,c,u,s,l,f,p){void 0===l&&(l="f32"),void 0===f&&(f="f32"),void 0===p&&(p="f32");var d,h,g=a.ShapeUtil.size(r),m=Math.ceil(g/4);"string"==typeof u?d=h=function(e,t){return"".concat(u,"((").concat(e,"),(").concat(t,"))")}:"function"==typeof u?d=h=u:(d=u.scalar,h=u.vector);var v,y="",b=(0,i.createIndicesHelper)("output",r);if(c){var w=function(e){for(var t=a.ShapeUtil.computeStrides(e),n=[],o=e.length-1;o>=0;o--){var i=0===r.length?"0u":1===r.length?"(*outputIndices)":"(*outputIndices)[".concat(o+r.length-e.length,"]");n.push("".concat(t[o],"u * (").concat(i," % ").concat(e[o],"u)"))}return n.length>0?n.join("+"):"0u"};y="\\n  ".concat(b.o2iImpl,"\\n\\n  fn calcOffsetA(outputIndices: ptr<function, ").concat(b.iType,">) -> u32 {\\n    return ").concat(w(t),";\\n  }\\n\\n  fn calcOffsetB(outputIndices: ptr<function, ").concat(b.iType,">) -> u32 {\\n    return ").concat(w(n),";\\n  }\\n  ")}if(o)v=c?"\\n      ".concat(b.indicesVariableDeclaration("outputIndices"),"\\n      ").concat(b.o2iCall("global_idx * 4u","outputIndices"),"\\n      let offsetA = calcOffsetA(&outputIndices);\\n      let offsetB = calcOffsetB(&outputIndices);\\n      outputData[global_idx] = ").concat(h("aData[offsetA / 4u]","bData[offsetB / 4u]"),";"):"outputData[global_idx] = ".concat(h("aData[global_idx]","bData[global_idx]"),";");else{if(!c)throw new Error("no necessary to use scalar implementation for element-wise binary op implementation.");var _=function(e){var t="aData[indexA".concat(e,"][componentA").concat(e,"]"),n="bData[indexB".concat(e,"][componentB").concat(e,"]");return"\\n      ".concat(b.o2iCall("global_idx * 4u + ".concat(e,"u"),"outputIndices"),"\\n      let offsetA").concat(e," = calcOffsetA(&outputIndices);\\n      let offsetB").concat(e," = calcOffsetB(&outputIndices);\\n      let indexA").concat(e," = offsetA").concat(e," / 4u;\\n      let indexB").concat(e," = offsetB").concat(e," / 4u;\\n      let componentA").concat(e," = offsetA").concat(e," % 4u;\\n      let componentB").concat(e," = offsetB").concat(e," % 4u;\\n      outputData[global_idx][").concat(e,"] = ").concat(d(t,n),";")};v="\\n      ".concat(b.indicesVariableDeclaration("outputIndices"),"\\n      ").concat(_(0),"\\n      ").concat(_(1),"\\n      ").concat(_(2),"\\n      ").concat(_(3))}return"\\n  @group(0) @binding(0) var<storage, read> aData : array<vec4<".concat(l,">>;\\n  @group(0) @binding(1) var<storage, read> bData : array<vec4<").concat(f,">>;\\n  @group(0) @binding(2) var<storage, read_write> outputData : array<vec4<").concat(p,">>;\\n\\n  ").concat(null!=s?s:"","\\n  ").concat(y,"\\n\\n  ").concat(e.mainStart(),"\\n    ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(m),"\\n    ").concat(v,"\\n  }")}(e,t.dims,n.dims,d,g,p,c,u)},outputs:[{dims:d,dataType:s,gpuDataType:o.GpuDataType.default}],dispatchGroup:function(){return{x:Math.ceil(h/64/(g?4:1))}}})}(s,e[0],e[1],n,c)}})};t.add=function(e){e.compute(c(e.inputs,"Add",(function(e,t){return"".concat(e,"+").concat(t)})))},t.div=function(e){e.compute(c(e.inputs,"Div",(function(e,t){return"".concat(e,"/").concat(t)})))},t.mul=function(e){e.compute(c(e.inputs,"Mul",(function(e,t){return"".concat(e,"*").concat(t)})))},t.pow=function(e){e.compute(c(e.inputs,"Pow",{scalar:function(e,t){return"pow_f32(".concat(e,",").concat(t,")")},vector:function(e,t){return"pow_vf32(".concat(e,",").concat(t,")")}},"\\n    fn pow_f32(a : f32, b : f32) -> f32 {\\n      if (b == 0.0) {\\n        return 1.0;\\n      } else if (a < 0.0 && b != floor(b)) {\\n        return pow(a, b); // NaN\\n      }\\n      return select(sign(a), 1.0, round(abs(b) % 2.0) != 1.0) * pow(abs(a), b);\\n    }\\n    fn pow_vf32(a : vec4<f32>, b : vec4<f32>) -> vec4<f32> {\\n      // TODO: implement vectorized pow\\n      return vec4<f32>(pow_f32(a.x, b.x), pow_f32(a.y, b.y), pow_f32(a.z, b.z), pow_f32(a.w, b.w));\\n    }\\n      "))},t.sub=function(e){e.compute(c(e.inputs,"Sub",(function(e,t){return"".concat(e,"-").concat(t)})))}},75:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createShaderHelper=t.createIndicesHelper=t.WORKGROUP_SIZE=void 0;var r=n(952);t.WORKGROUP_SIZE=64,t.createIndicesHelper=function(e,t){for(var n=t.length<2?"u32":"array<u32, ".concat(t.length,">"),a=r.ShapeUtil.computeStrides(t),o="",i=0;i<t.length-1;i++)o+="\\n    let dim".concat(i," = current / ").concat(a[i],"u;\\n    let rest").concat(i," = current % ").concat(a[i],"u;\\n    (*indices)[").concat(i,"] = dim").concat(i,";\\n    current = rest").concat(i,";\\n    ");o+="(*indices)[".concat(t.length-1,"] = current;");var c=t.length<2?"":"\\n  fn ih_o2i_".concat(e,"(offset: u32, indices: ptr<function, ").concat(n,">) {\\n    var current = offset;\\n    ").concat(o,"\\n  }"),u=[];if(0===t.length)u.push("0u");else if(t.length<2)u.push("(*indices)");else for(i=t.length-1;i>=0;i--)u.push("".concat(a[i],"u * ((*indices)[").concat(i,"])"));return{o2iImpl:c,o2iCall:function(n,r){return t.length<2?"".concat(r,"=").concat(n,";"):"ih_o2i_".concat(e,"(").concat(n,", &").concat(r,");")},i2oImpl:t.length<2?"":"\\n  fn ih_i2o_".concat(e,"(indices: ptr<function, ").concat(n,">) -> u32 {\\n    return ").concat(u.join("+"),";\\n  }"),i2oExpression:function(n,r){return t.length<2?"(".concat(r?"*":"").concat(n,")"):"ih_i2o_".concat(e,"(").concat(r?"":"&").concat(n,")")},indicesVariableDeclaration:function(e,t){return"var ".concat(e,":").concat(n).concat(t?"=".concat(n,"(").concat(t.join(","),")"):"",";")},iType:n}};var a=function(){function e(e){this.normalizedDispatchGroup=e}return e.prototype.guardAgainstOutOfBoundsWorkgroupSizes=function(e){var t="number"==typeof e?"".concat(e,"u"):e;return"if (global_idx >= ".concat(t,") { return; }")},e.prototype.mainStart=function(e){void 0===e&&(e=t.WORKGROUP_SIZE);var n="number"==typeof e?e:e[0],r="number"==typeof e?1:e[1],a="number"==typeof e?1:e[2],o=1===this.normalizedDispatchGroup[1]&&1===this.normalizedDispatchGroup[2],i=o?"@builtin(global_invocation_id) global_id : vec3<u32>":"@builtin(local_invocation_index) local_index : u32,\\n    @builtin(workgroup_id) workgroup_id : vec3<u32>",c=o?"let global_idx = global_id.x;":"let global_idx = (workgroup_id.z * ".concat(this.normalizedDispatchGroup[0]*this.normalizedDispatchGroup[1],"u +\\n          workgroup_id.y * ").concat(this.normalizedDispatchGroup[0],"u + workgroup_id.x) * ").concat(n*r*a,"u + local_index;");return"@compute @workgroup_size(".concat(n,", ").concat(r,", ").concat(a,")\\n  fn main(").concat(i,") {\\n    ").concat(c,"\\n  ")},e}();t.createShaderHelper=function(e){return new a(e)}},192:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.createGroupedConvProgramInfoLoader=void 0;var a=n(952),o=n(163),i=n(75),c=n(770),u=n(997);t.createGroupedConvProgramInfoLoader=function(e,t,n){var s,l,f=(s=e.length>2,l=t.cacheKey,{name:"GroupedConv",inputTypes:s?[o.GpuDataType.default,o.GpuDataType.default,o.GpuDataType.default]:[o.GpuDataType.default,o.GpuDataType.default],cacheHint:l});return r(r({},f),{get:function(){return function(e,t,n,s){var l=e.length>2,f=l?"value += b[output_channel];":"",p=e[0].dims,d=e[1].dims,h=d[0]/n.group,g="f32",m=(0,u.getActicationSnippet)(n),v=m.activationFunction,y=m.applyActivation,b=["@group(0) @binding(0) var<storage, read> x : array<".concat(g,">;"),"@group(0) @binding(1) var<storage, read> w : array<".concat(g,">;")];l&&b.push("@group(0) @binding(2) var<storage, read> b : array<".concat(g,">;"));var w="NHWC"===n.format,_=(0,c.calculateOutputShape)(p,d,n.dilations,n.pads,n.strides,w),S=a.ShapeUtil.size(_),A=(0,i.createIndicesHelper)("output",_),O=(0,i.createIndicesHelper)("x",p),x=(0,i.createIndicesHelper)("w",d);return r(r({},t),{outputs:[{dims:s?s(_):_,dataType:e[0].dataType,gpuDataType:o.GpuDataType.default}],getShaderSource:function(e){return"\\n  const strides: vec2<u32> = vec2(".concat(n.strides[0],"u, ").concat(n.strides[1],"u);\\n  const pads: vec2<u32> = vec2(").concat(n.pads[0],"u, ").concat(n.pads[1],"u);\\n\\n  ").concat(b.join("\\n"),"\\n  @group(0) @binding(").concat(b.length,") var<storage, read_write> output : array<").concat(g,">;\\n\\n  ").concat(v,"\\n  ").concat(A.o2iImpl,"\\n  ").concat(O.i2oImpl,"\\n  ").concat(x.i2oImpl,"\\n\\n  ").concat(e.mainStart(),"\\n    ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(S),"\\n\\n    ").concat(A.indicesVariableDeclaration("outputIndices"),"\\n    ").concat(A.o2iCall("global_idx","outputIndices"),"\\n    let batch: u32 = outputIndices[0];\\n    let output_channel: u32 = outputIndices[").concat(w?3:1,"];\\n    let xRCCorner: vec2<u32> = vec2<u32>(outputIndices[").concat(w?1:2,"], outputIndices[").concat(w?2:3,"]) * strides - pads;\\n    let group_id: u32 = output_channel / ").concat(h,"u;\\n\\n    var value: ").concat(g," = ").concat(g,"(0);\\n    for (var wInChannel: u32 = 0u; wInChannel < ").concat(d[1],"u; wInChannel++) {\\n      let input_channel = group_id * ").concat(d[1],"u + wInChannel;\\n      for (var wHeight: u32 = 0u; wHeight < ").concat(d[2],"u; wHeight++) {\\n        let xHeight = xRCCorner.x + wHeight * ").concat(n.dilations[0],"u;\\n\\n        if (xHeight < 0u || xHeight >= ").concat(p[w?1:2],"u) {\\n          continue;\\n        }\\n\\n        for (var wWidth: u32 = 0u; wWidth < ").concat(d[3],"u; wWidth++) {\\n          let xWidth = xRCCorner.y + wWidth * ").concat(n.dilations[1],"u;\\n          if (xWidth < 0u || xWidth >= ").concat(p[w?2:3],"u) {\\n            continue;\\n          }\\n\\n          ").concat(O.indicesVariableDeclaration("xIndices",w?["batch","xHeight","xWidth","input_channel"]:["batch","input_channel","xHeight","xWidth"]),"\\n          let xVal = x[").concat(O.i2oExpression("xIndices"),"];\\n          ").concat(x.indicesVariableDeclaration("wIndices",["output_channel","wInChannel","wHeight","wWidth"]),"\\n          let wVal = w[").concat(x.i2oExpression("wIndices"),"];\\n          value += xVal*wVal;\\n        }\\n      }\\n    }\\n    ").concat(f,"\\n    ").concat(y,"\\n    output[global_idx] = value;\\n  }")},dispatchGroup:function(){return{x:Math.ceil(S/64)}}})}(e,f,t,n)}})}},770:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.conv=t.parseConvAttributes=t.calculateOutputShape=void 0;var a=n(952),o=n(387),i=n(192),c=n(822),u=n(997),s=n(625);t.calculateOutputShape=function(e,t,n,r,a,o){var i=e[0],c=e.slice(o?1:2,o?3:4),u=c.length,s=t[0],l=t.slice(2).map((function(e,t){return e+(e-1)*(n[t]-1)})),f=c.map((function(e,t){return e+r[t]+r[t+u]})).map((function(e,t){return Math.floor((e-l[t]+a[t])/a[t])}));return f.splice(0,0,i),f.splice(o?3:1,0,s),f};var l=(0,o.createAttributeWithCacheKey)({perm:[2,3,1,0]}),f=function(e,t){for(var n=e.kernelShape.slice(),r=2;r<t[1].dims.length;++r)0===n[r-2]&&(n[r-2]=t[1].dims[r]);var o=e.pads.slice();a.PoolConvUtil.adjustPadsBasedOnAutoPad(t[0].dims,e.strides,e.dilations,n,o,"NHWC"===e.format,e.autoPad);var i=Object.assign({},e);return Object.assign(i,{kernelShape:n,pads:o,cacheKey:e.cacheKey}),i};t.parseConvAttributes=function(e){var t=(0,u.parseInternalActivationAttributes)(e),n=e.format,a=["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][e.auto_pad],i=e.dilations,c=e.group,s=e.kernel_shape,l=e.pads,f=e.strides,p=e.w_is_const();return(0,o.createAttributeWithCacheKey)(r({autoPad:a,format:n,dilations:i,group:c,kernelShape:s,pads:l,strides:f,wIsConst:p},t))},t.conv=function(e,n){!function(e,t){if(!e||2!==e.length&&3!==e.length)throw new Error("Conv requires 2 or 3 inputs");if(4!==e[0].dims.length&&3!==e[0].dims.length)throw new Error("currently only support conv 1D and 2D");if(e[0].dims.length!==e[1].dims.length)throw new Error("filter does not have same dimension as input");if(e[0].dims["NHWC"===t.format?e[0].dims.length-1:1]!==e[1].dims[1]*t.group)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(3===e.length&&(1!==e[2].dims.length||e[1].dims[0]!==e[2].dims[0]))throw new Error("invalid bias");var n=e[0].dims.length-2;if(t.dilations.length!==n)throw new Error("dilations should be ".concat(n,"D"));if(t.strides.length!==n)throw new Error("strides should be ".concat(n,"D"));if(t.pads.length!==2*n)throw new Error("pads should be ".concat(2*n,"D"));if(0!==t.kernelShape.length&&t.kernelShape.length!==e[1].dims.length-2)throw new Error("invalid kernel shape");if(1!==e[0].dataType||1!==e[1].dataType)throw new Error("Conv input(X,W) should be float tensor");if(3===e.length&&1!==e[2].dataType)throw new Error("Conv input(bias) should be float tensor")}(e.inputs,n),3===e.inputs[0].dims.length?function(e,t){var n="NHWC"===t.format,a=[e.inputs[0].reshape(n?[e.inputs[0].dims[0],1,e.inputs[0].dims[1],e.inputs[0].dims[2]]:[e.inputs[0].dims[0],e.inputs[0].dims[1],1,e.inputs[0].dims[2]]),e.inputs[1].reshape([e.inputs[1].dims[0],e.inputs[1].dims[1],1,e.inputs[1].dims[2]])];3===e.inputs.length&&a.push(e.inputs[2]);var o=[0,t.pads[0],0,t.pads[1]],c=[1].concat(t.strides),u=[1].concat(t.dilations),s=[1].concat(t.kernelShape),l=f(r(r({},t),{pads:o,strides:c,dilations:u,kernelShape:s}),a);e.compute((0,i.createGroupedConvProgramInfoLoader)(a,l,(function(e){return n?[e[0],e[2],e[3]]:[]})))}(e,n):function(e,n,a){var o,u=f(a,n),p=3===n.length,d="NHWC"===a.format,h=n[0].dims[d?1:2],g=n[0].dims[d?2:3],m=n[0].dims[d?3:1],v=n[1].dims[2],y=n[1].dims[3],b=(0,t.calculateOutputShape)(n[0].dims,n[1].dims,a.dilations,u.pads,a.strides,d),w=b[d?1:2],_=b[d?2:3],S=b[d?3:1];if(d&&v===h&&y===g&&"VALID"===a.autoPad||1===v&&1===y&&1===a.dilations[0]&&1===a.dilations[1]&&1===a.strides[0]&&1===a.strides[1]&&("SAME_UPPER"===a.autoPad||"SAME_LOWER"===a.autoPad||"VALID"===a.autoPad))e.compute((0,i.createGroupedConvProgramInfoLoader)(n,u));else if(d&&1===a.group){var A=d?w*_:S,O=d?S:w*_,x=v*y*m,E=null!==(o=e.customData.wT)&&void 0!==o?o:e.compute(r(r({},s.transposeProgramMetadata),{cacheHint:l.cacheKey,get:function(){return(0,s.createTransposeProgramInfo)(n[1],l.perm)}}),{inputs:[1],outputs:[a.wIsConst?-2:-1]})[0];a.wIsConst&&!e.customData.wT&&(e.customData.wT=E);var C=[n[0],E];p&&(d||1!==n[2].dims.length?C.push(n[2]):C.push(n[2].reshape([n[2].dims[0],1,1]))),e.compute((0,c.createConv2DMatMulProgramInfoLoader)(C,u,b,A,O,x,p,!0),{inputs:C})}else e.compute((0,i.createGroupedConvProgramInfoLoader)(n,u))}(e,e.inputs,n)}},822:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.createConv2DMatMulProgramInfoLoader=void 0;var a=n(163),o=n(456);t.createConv2DMatMulProgramInfoLoader=function(e,t,n,i,c,u,s,l){var f=function(e,t){return{name:"Conv2DMatMul",inputTypes:e?[a.GpuDataType.default,a.GpuDataType.default,a.GpuDataType.default]:[a.GpuDataType.default,a.GpuDataType.default],cacheHint:t}}(s,t.cacheKey);return r(r({},f),{get:function(){return(0,o.createConv2DMatMulProgramInfo)(e,f,t,n,i,c,u,s,l)}})}},997:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i};Object.defineProperty(t,"__esModule",{value:!0}),t.parseInternalActivationAttributes=t.getActicationSnippet=void 0;var a=n(952);t.getActicationSnippet=function(e){switch(e.activation){case"Relu":return{activationFunction:"",applyActivation:"value = max(value, 0.0);"};case"Sigmoid":return{activationFunction:"",applyActivation:"value = (1.0 / (1.0 + exp(-value)));"};case"Clip":return{activationFunction:"const clip_min_=f32(".concat(e.clipMin,");const clip_max_=f32(").concat(e.clipMax,");"),applyActivation:"value = clamp(value, clip_min_, clip_max_);"};default:return{activationFunction:"",applyActivation:""}}},t.parseInternalActivationAttributes=function(e){var t=(null==e?void 0:e.activation)||"";if("Clip"===t){var n=r((null==e?void 0:e.activation_params)||[a.MIN_CLIP,a.MAX_CLIP],2),o=n[0],i=n[1];return{activation:t,clipMax:i,clipMin:o,activationCacheKey:"".concat(t,":").concat(o,",").concat(i)}}return{activation:t,activationCacheKey:t}}},271:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)},a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i};Object.defineProperty(t,"__esModule",{value:!0}),t.parseGemmAttributes=t.gemm=void 0;var o=n(952),i=n(387),c=n(163);t.gemm=function(e,t){!function(e){if(!e)throw new Error("Input is missing");if(e.length<2||e.length>3)throw new Error("Invaid input number.");if(3===e.length&&e[2].dims.length>2)throw new Error("Invalid input shape of C");if(1!==e[0].dataType||1!==e[1].dataType||3===e.length&&1!==e[2].dataType)throw new Error("Invalid input type.");if(e[0].dataType!==e[1].dataType||3===e.length&&e[0].dataType!==e[2].dataType)throw new Error("Input types are mismatched")}(e.inputs),e.compute(function(e,t){var n={name:"Gemm",inputTypes:3===e.length?[c.GpuDataType.default,c.GpuDataType.default,c.GpuDataType.default]:[c.GpuDataType.default,c.GpuDataType.default],cacheHint:t.cacheKey};return r(r({},n),{get:function(){return function(e,t,n){var i=t[0].dims.slice(),u=t[1].dims.slice(),s=a(o.GemmUtil.getShapeOfGemmResult(i,n.transA,u,n.transB,3===t.length?t[2].dims:void 0),3),l=s[0],f=s[1],p=s[2],d=[l,f];if(!d)throw new Error("Can\'t use gemm on the given tensors");var h=o.ShapeUtil.size(d),g="";n.transA&&n.transB?g="value += a[k * M + m] * b[n * K + k];":n.transA&&!n.transB?g="value += a[k * M + m] * b[k * N + n];":!n.transA&&n.transB?g="value += a[m * K + k] * b[n * K + k];":n.transA||n.transB||(g="value += a[m * K + k] * b[k * N + n];");var m="f32",v=1===n.alpha?"":"value *= alpha;",y=3===t.length?"value += beta * c[".concat(function(e,t,n){if(0===n.length)return"0u";var r=1===n.length&&1!==e||2===n.length&&n[0]!==e,a=n[n.length-1]!==t,o="0u";return r||(o+="+ m * ".concat(n[n.length-1],"u")),a||(o+="+n"),o}(l,f,t[2].dims),"];"):"",b=["@group(0) @binding(0) var<storage, read> a : array<".concat(m,">;"),"@group(0) @binding(1) var<storage, read> b : array<".concat(m,">;")];return 3===t.length&&b.push("@group(0) @binding(2) var<storage, read> c : array<".concat(m,">;")),r(r({},e),{outputs:[{dims:d,dataType:t[0].dataType,gpuDataType:c.GpuDataType.default}],getShaderSource:function(e){return"\\n  const M: u32 = ".concat(l,"u;\\n  const N: u32 = ").concat(f,"u;\\n  const K: u32 = ").concat(p,"u;\\n  const alpha = ").concat(m,"(").concat(n.alpha,");\\n  const beta = ").concat(m,"(").concat(n.beta,");\\n\\n  ").concat(b.join("\\n"),"\\n  @group(0) @binding(").concat(t.length,") var<storage, read_write> output : array<").concat(m,">;\\n\\n  ").concat(e.mainStart(),"\\n    ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(h),"\\n\\n    let m = global_id.x / N;\\n    let n = global_id.x % N;\\n\\n    var value = ").concat(m,"(0);\\n    for (var k: u32 = 0u; k<").concat(p,"u; k++) {\\n      ").concat(g,"\\n    }\\n\\n    ").concat(v,"\\n    ").concat(y,"\\n    output[global_id.x] = value;\\n\\n  }")},dispatchGroup:function(){return{x:Math.ceil(h/64)}}})}(n,e,t)}})}(e.inputs,t))},t.parseGemmAttributes=function(e){return(0,i.createAttributeWithCacheKey)(e)}},522:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.matMul=t.createMatmulProgramInfoLoader=void 0;var a=n(952),o=n(163),i=n(997);t.createMatmulProgramInfoLoader=function(e,t){var n,c,u=(n=e.length>2,c=t.activationCacheKey,{name:"MatMul",inputTypes:n?[o.GpuDataType.default,o.GpuDataType.default,o.GpuDataType.default]:[o.GpuDataType.default,o.GpuDataType.default],cacheHint:c});return r(r({},u),{get:function(){return function(e,t,n){var c=t[0].dims,u=t[1].dims,s=a.BroadcastUtil.calcShape(c,u,!0);if(!s)throw new Error("Can\'t use matmul on the given tensors");var l=a.ShapeUtil.size(s),f="f32",p=(0,i.getActicationSnippet)(n),d=p.activationFunction,h=p.applyActivation,g=s[s.length-2],m=c[c.length-1],v=s[s.length-1];return r(r({},e),{outputs:[{dims:s,dataType:t[0].dataType,gpuDataType:o.GpuDataType.default}],getShaderSource:function(e){return"\\n  const M: u32 = ".concat(g,"u;\\n  const N: u32 = ").concat(v,"u;\\n  const K: u32 = ").concat(m,"u;\\n\\n  @group(0) @binding(0) var<storage, read> a : array<").concat(f,">;\\n  @group(0) @binding(1) var<storage, read> b : array<").concat(f,">;\\n  @group(0) @binding(2) var<storage, read_write> output : array<").concat(f,">;\\n\\n  ").concat(d,"\\n\\n  ").concat(e.mainStart(),"\\n    ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(l),"\\n\\n    let stack = global_idx / (M * N);\\n    let mn = global_idx % (M * N);\\n    let n = global_idx % N;\\n    let m = mn / N;\\n\\n    let offsetA = stack * (M * K);\\n    let offsetB = stack * (K * N);\\n\\n    var value = ").concat(f,"(0);\\n    for (var k: u32 = 0u; k<").concat(m,"u; k++) {\\n      value += a[offsetA + m * K + k] * b[offsetB + k * N + n];\\n    }\\n    ").concat(h,"\\n    output[global_idx] = value;\\n  }")},dispatchGroup:function(){return{x:Math.ceil(l/64)}}})}(u,e,t)}})},t.matMul=function(e){!function(e){if(!e||2!==e.length)throw new Error("MatMul requires 2 inputs.");if(e[0].dims[e[0].dims.length-1]!==e[1].dims[e[1].dims.length-2])throw new Error("shared dimension does not match.");if(1!==e[0].dataType||1!==e[1].dataType)throw new Error("inputs should be float type")}(e.inputs),e.compute((0,t.createMatmulProgramInfoLoader)(e.inputs,{activation:"",activationCacheKey:""}))}},262:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)},a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i};Object.defineProperty(t,"__esModule",{value:!0}),t.globalMaxPool=t.parseGlobalMaxPoolAttributes=t.parseMaxPoolAttributes=t.maxPool=t.globalAveragePool=t.parseGlobalAveragePoolAttributes=t.averagePool=t.parseAveragePoolAttributes=void 0;var o=n(952),i=n(387),c=n(163),u=n(75),s=function(e){if(!e||1!==e.length)throw new Error("Pool ops requires 1 input.");if(4!==e[0].dims.length)throw new Error("Pool ops supports 2-D inputs only for now.");if(1!==e[0].dataType)throw new Error("Invalid input type.")},l=function(e,t,n){var r="NHWC"===t.format,a=r?[e[0].dims[0],e[0].dims[3],e[0].dims[1],e[0].dims[2]]:e[0].dims.slice(),i=Object.hasOwnProperty.call(t,"dilations"),c=t.kernelShape.slice(),u=t.strides.slice(),s=i?t.dilations.slice():[],l=t.pads.slice();o.PoolConvUtil.adjustPoolAttributes(n,a,c,u,s,l);var f=o.PoolConvUtil.computePoolOutputShape(n,a,u,s,c,l,t.autoPad),p=Object.assign({},t);return i?Object.assign(p,{kernelShape:c,strides:u,pads:l,dilations:s,cacheKey:t.cacheKey}):Object.assign(p,{kernelShape:c,strides:u,pads:l,cacheKey:t.cacheKey}),[p,r?[f[0],f[2],f[3],f[1]]:f]},f=function(e,t,n,r,a,i,c,s){var l="NHWC"===r.format,f=t.length,p=o.ShapeUtil.size(n),d=(0,u.createIndicesHelper)("output",n),h=(0,u.createIndicesHelper)("x",t);if(r.kernelShape.length<=2){var g,m=r.kernelShape[r.kernelShape.length-1],v=r.strides[r.strides.length-1],y=r.pads[r.pads.length/2-1],b=f-(l?2:1),w="",_="";if(g=y+r.pads[r.pads.length-1]!==0?"\\n              for (var i: u32 = 0u; i < ".concat(m,"u; i++) {\\n                xIndices[").concat(b,"] = indices[").concat(b,"] * ").concat(v," - ").concat(y," + i;\\n                if (xIndices[").concat(b,"] < 0 || xIndices[").concat(b,"] >= ").concat(t[b],") {\\n                  pad++;\\n                  continue;\\n                }\\n                let x_val = x[").concat(h.i2oExpression("xIndices"),"];\\n                ").concat(a,"\\n              }"):"\\n              for (var i: u32 = 0u; i < ".concat(m,"u; i++) {\\n                xIndices[").concat(b,"] = indices[").concat(b,"] * ").concat(v," - ").concat(y," + i;\\n                let x_val = x[").concat(h.i2oExpression("xIndices"),"];\\n                ").concat(a,"\\n              }"),2===r.kernelShape.length){var S=r.kernelShape[r.kernelShape.length-2],A=r.strides[r.strides.length-2],O=r.pads[r.pads.length/2-2],x=r.pads[r.pads.length-2],E=f-(l?3:2),C=t[E];w=O+x!==0?"\\n                for (var j: u32 = 0u; j < ".concat(S,"u; j++) {\\n                  xIndices[").concat(E,"] = indices[").concat(E,"] * ").concat(A," - ").concat(O," + j;\\n                  if (xIndices[").concat(E,"] < 0 || xIndices[").concat(E,"] >= ").concat(C,") {\\n                    pad+= ").concat(m,";\\n                    continue;\\n                  }\\n              "):"\\n                for (var j: u32 = 0u; j < ".concat(S,"u; j++) {\\n                  xIndices[").concat(E,"] = indices[").concat(E,"] * ").concat(A," - ").concat(O," + j;\\n                "),_="\\n              }\\n            "}return"\\n            @group(0) @binding(0) var<storage, read> x : array<".concat(c,">;\\n            @group(0) @binding(1) var<storage, read_write> output : array<").concat(c,">;\\n\\n            ").concat(d.o2iImpl,"\\n            ").concat(h.i2oImpl,"\\n\\n            ").concat(e.mainStart(),"\\n              ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(p),"\\n\\n              ").concat(d.indicesVariableDeclaration("indices"),"\\n              ").concat(d.o2iCall("global_idx","indices"),"\\n              ").concat(d.indicesVariableDeclaration("xIndices"),"\\n              ").concat(d.o2iCall("global_idx","xIndices"),"\\n\\n              var value: ").concat(c," = ").concat(c,"(").concat(s,");\\n              var pad = 0;\\n              ").concat(w,"\\n              ").concat(g,"\\n              ").concat(_,"\\n              ").concat(i,"\\n\\n              output[global_idx] = value;\\n            }")}if(l)throw new Error("Pooling with kernelShape.length > 2 is not supported for NHWC format.");var P,T=o.ShapeUtil.size(r.kernelShape),M=o.ShapeUtil.computeStrides(r.kernelShape),R=M.length,k=r.pads.length;return P=r.pads.reduce((function(e,t){return e+t}))?"\\n                if (xIndices[j] >= inputDims[j]) {\\n                  pad++;\\n                  isPad = true;\\n                  break;\\n                }\\n              }\\n              if (!isPad) {\\n                let x_val = x[".concat(h.i2oExpression("xIndices"),"];\\n                ").concat(a,"\\n              }"):"\\n              }\\n              let x_val = x[".concat(h.i2oExpression("xIndices"),"];\\n              ").concat(a,"\\n            "),"\\n            @group(0) @binding(0) var<storage, read> x : array<".concat(c,">;\\n            @group(0) @binding(1) var<storage, read_write> output : array<").concat(c,">;\\n\\n            ").concat(d.o2iImpl,"\\n            ").concat(h.i2oImpl,"\\n\\n            const pads = array<u32, ").concat(k,">(").concat(r.pads.map((function(e){return"".concat(e,"u")})).join(","),");\\n            const inputDims = array<u32, ").concat(f,">(").concat(t.map((function(e){return"".concat(e,"u")})).join(","),");\\n            const kernelStrides = array<u32, ").concat(R,">(").concat(M.map((function(e){return"".concat(e,"u")})).join(","),");\\n            const strides = array<u32, ").concat(R,">(").concat(r.strides.map((function(e){return"".concat(e,"u")})).join(","),");\\n\\n            ").concat(e.mainStart(),"\\n              ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(p),"\\n\\n              ").concat(d.indicesVariableDeclaration("indices"),"\\n              ").concat(d.o2iCall("global_idx","indices"),"\\n              ").concat(d.indicesVariableDeclaration("xIndices"),"\\n              ").concat(d.o2iCall("global_idx","xIndices"),"\\n\\n              var offsets: array<u32, ").concat(R,">;\\n\\n              var value = ").concat(c,"(").concat(s,");\\n              var pad = 0;\\n              var isPad = false;\\n\\n              for (var i: u32 = 0u; i < ").concat(T,"u; i++) {\\n                var offset = i;\\n                for (var j = 0u; j < ").concat(R-1,"u; j++) {\\n                  offsets[j] = offset / kernelStrides[j];\\n                  offset -= offsets[j] * kernelStrides[j];\\n                }\\n                offsets[").concat(R-1,"] = offset;\\n\\n                isPad = false;\\n                for (var j = ").concat(f-R,"u; j < ").concat(f,"u; j++) {\\n                  xIndices[j] = indices[j] * strides[j - ").concat(f-R,"u]\\n                    + offsets[j - ").concat(f-R,"u] - pads[j - 2u];\\n                  ").concat(P,"\\n              }\\n              ").concat(i,"\\n\\n              output[global_idx] = value;\\n            }")},p=function(e){return{format:e.format,autoPad:["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][e.auto_pad],ceilMode:e.ceil_mode,kernelShape:e.kernel_shape,strides:e.strides,pads:e.pads}},d=function(e,t,n,i){var u=a(l(e,i,n),2),s=u[0],p=u[1],d=o.ShapeUtil.size(s.kernelShape),h="f32",g="";return s.countIncludePad?g+="value /= ".concat(h,"(").concat(d,");"):g+="value /= ".concat(h,"(").concat(d," - pad);"),r(r({},t),{outputs:[{dims:p,dataType:e[0].dataType,gpuDataType:c.GpuDataType.default}],getShaderSource:function(t){return f(t,e[0].dims,p,s,"value += x_val;",g,h,"0.0")},dispatchGroup:function(){return{x:Math.ceil(o.ShapeUtil.size(p)/64)}}})};t.parseAveragePoolAttributes=function(e){var t=0!==e.count_include_pad,n=p(e);if(0!==n.ceilMode)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return(0,i.createAttributeWithCacheKey)(r({countIncludePad:t},n))},t.averagePool=function(e,t){s(e.inputs);var n={name:"AveragePool",inputTypes:[c.GpuDataType.default],cacheHint:t.cacheKey};e.compute(r(r({},n),{get:function(){return d(e.inputs,n,!1,t)}}))};var h={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""};t.parseGlobalAveragePoolAttributes=function(e){var t=e.format;return r(r({format:t},h),{cacheKey:t})},t.globalAveragePool=function(e,t){s(e.inputs);var n={name:"GlobalAveragePool",inputTypes:[c.GpuDataType.default],cacheHint:t.cacheKey};e.compute(r(r({},n),{get:function(){return d(e.inputs,n,!0,t)}}))};var g=function(e,t,n,i){var u=a(l(e,i,n),2),s=u[0],p=u[1];return r(r({},t),{outputs:[{dims:p,dataType:e[0].dataType,gpuDataType:c.GpuDataType.default}],getShaderSource:function(t){return f(t,e[0].dims,p,s,"\\n      value = max(x_val, value);\\n    ","","f32","-1e5")},dispatchGroup:function(){return{x:Math.ceil(o.ShapeUtil.size(p)/64)}}})};t.maxPool=function(e,t){s(e.inputs);var n={name:"MaxPool",inputTypes:[c.GpuDataType.default],cacheHint:t.cacheKey};e.compute(r(r({},n),{get:function(){return g(e.inputs,n,!1,t)}}))},t.parseMaxPoolAttributes=function(e){var t=e.storage_order,n=e.dilations,a=p(e);if(0!==t)throw new Error("column major storage order is not yet supported for MaxPool");if(0!==a.ceilMode)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return(0,i.createAttributeWithCacheKey)(r({storageOrder:t,dilations:n},a))},t.parseGlobalMaxPoolAttributes=function(e){var t=e.format;return r(r({format:t},h),{cacheKey:t})},t.globalMaxPool=function(e,t){s(e.inputs);var n={name:"GlobalMaxPool",inputTypes:[c.GpuDataType.default],cacheHint:t.cacheKey};e.compute(r(r({},n),{get:function(){return g(e.inputs,n,!0,t)}}))}},31:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.parseReduceAttributes=t.reduceSumSquare=t.reduceSum=t.reduceProd=t.reduceMin=t.reduceMean=t.reduceMax=t.reduceLogSumExp=t.reduceL2=t.reduceL1=t.reduceLogSum=void 0;var a=n(952),o=n(387),i=n(163),c=n(75),u=function(e){if(!e||0===e.length||e.length>2)throw new Error("Reduce op requires 1 or 2 inputs.");if(2===e.length&&1!==e[1].dims.length)throw new Error("Invalid axes input dims.");if(1!==e[0].dataType)throw new Error("Invalid input type.")},s=function(){return["","","value = _A[inputIdx];",""]},l=function(e,t,n,u){var l=1===e.length?n:function(e,t){var n=[];return e[1].dims[0]>0&&e[1].getBigInt64Array().forEach((function(e){return n.push(Number(e))})),(0,o.createAttributeWithCacheKey)({axes:n,keepDims:t.keepDims,noopWithEmptyAxes:t.noopWithEmptyAxes})}(e,n),f={name:t,inputTypes:[i.GpuDataType.default],cacheHint:l.cacheKey};return r(r({},f),{get:function(){return function(e,t,n,o){for(var u=[],s=t[0].dims,l=[],f=a.ShapeUtil.normalizeAxes(n.axes,t[0].dims.length),p=t[0].dims.length-(n.keepDims?0:f.length),d=o(t,f),h=(0,c.createIndicesHelper)("input",s),g=""===d[1]?"":"let inputIdx = ".concat(h.i2oExpression("inputIndices"),";"),m="\\n          let inputIdx = ".concat(h.i2oExpression("inputIndices"),";\\n          ").concat(d[2],";"),v=!n.noopWithEmptyAxes&&0===n.axes.length,y=0;y<t[0].dims.length;y++)v||f.indexOf(y)>=0?(n.keepDims&&u.push(1),m="for(var j".concat(y,": u32 = 0; j").concat(y," < ").concat(t[0].dims[y],"; j").concat(y,"++) {\\n                            inputIndices[").concat(y,"] = j").concat(y,";\\n                            ").concat(m,"\\n                          }")):(p>1?l.push("inputIndices[".concat(y,"] = outputIndices[").concat(u.length,"];")):l.push("inputIndices[".concat(y,"] = outputIndices;")),u.push(t[0].dims[y]));var b=(0,c.createIndicesHelper)("output",u),w=a.ShapeUtil.size(u),_="f32";return r(r({},e),{getShaderSource:function(e){return"\\n          @group(0) @binding(0) var<storage, read> _A : array<".concat(_,">;\\n          @group(0) @binding(1) var<storage, read_write> output : array<").concat(_,">;\\n\\n          ").concat(b.o2iImpl,"\\n          ").concat(h.i2oImpl,"\\n\\n          ").concat(e.mainStart(),"\\n          ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(w),"\\n          ").concat(h.indicesVariableDeclaration("inputIndices"),"\\n          ").concat(b.indicesVariableDeclaration("outputIndices"),"\\n          ").concat(b.o2iCall("global_idx","outputIndices"),"\\n\\n          var value = ").concat(_,"(0);\\n\\n          ").concat(l.join("\\n"),"\\n          ").concat(d[0],"       // init ops for reduce max/min\\n          ").concat(g,"\\n          ").concat(d[1],"\\n          ").concat(m,"\\n          ").concat(d[3],"       // final computation for reduce mean\\n          output[global_idx] = value;\\n        }")},outputs:[{dims:u,dataType:t[0].dataType,gpuDataType:i.GpuDataType.default}],dispatchGroup:function(){return{x:Math.ceil(w/64)}}})}(f,[e[0]],l,l.noopWithEmptyAxes&&0===l.axes.length?s:u)}})};t.reduceLogSum=function(e,t){u(e.inputs),e.compute(l(e.inputs,"ReduceLogSum",t,(function(){return["value = 0.0;","","value += _A[inputIdx];","value = log(value);"]})),{inputs:[0]})},t.reduceL1=function(e,t){u(e.inputs),e.compute(l(e.inputs,"ReduceL1",t,(function(){return["value = 0.0;","","value += abs(_A[inputIdx]);",""]})),{inputs:[0]})},t.reduceL2=function(e,t){u(e.inputs),e.compute(l(e.inputs,"ReduceL2",t,(function(){return["var t = f32(0); value = 0.0;","","t = _A[inputIdx]; value += (t * t);","value = sqrt(value);"]})),{inputs:[0]})},t.reduceLogSumExp=function(e,t){u(e.inputs),e.compute(l(e.inputs,"ReduceLogSumExp",t,(function(){return["value = 0.0;","","value += exp(_A[inputIdx]);","value = log(value);"]})),{inputs:[0]})},t.reduceMax=function(e,t){u(e.inputs),e.compute(l(e.inputs,"ReduceMax",t,(function(e,t){for(var n=[],r=0;r<e[0].dims.length;r++)(t.indexOf(r)>=0||0===t.length)&&n.push("inputIndices[".concat(r,"] = 0;"));return["".concat(n.join("\\n")),"value = _A[inputIdx];","value = max(value, _A[inputIdx]);",""]})),{inputs:[0]})},t.reduceMean=function(e,t){u(e.inputs),e.compute(l(e.inputs,"ReduceMean",t,(function(e,t){for(var n=1,r=0;r<e[0].dims.length;r++)(t.indexOf(r)>=0||0===t.length)&&(n*=e[0].dims[r]);return["value = 0.0;","","value += _A[inputIdx];","value = value / ".concat(n,".;")]})),{inputs:[0]})},t.reduceMin=function(e,t){u(e.inputs),e.compute(l(e.inputs,"ReduceMin",t,(function(e,t){for(var n=[],r=0;r<e[0].dims.length;r++)(t.indexOf(r)>=0||0===t.length)&&n.push("inputIndices[".concat(r,"] = 0;"));return["".concat(n.join("\\n")),"value = _A[inputIdx];","value = min(value, _A[inputIdx]);",""]})),{inputs:[0]})},t.reduceProd=function(e,t){u(e.inputs),e.compute(l(e.inputs,"ReduceProd",t,(function(){return["value = 1.0;","","value *= _A[inputIdx];",""]})),{inputs:[0]})},t.reduceSum=function(e,t){u(e.inputs),e.compute(l(e.inputs,"ReduceSum",t,(function(){return["value = 0.0;","","value += _A[inputIdx];",""]})),{inputs:[0]})},t.reduceSumSquare=function(e,t){u(e.inputs),e.compute(l(e.inputs,"ReduceSumSquare",t,(function(){return["var t = f32(0); value = 0.0;","","t = _A[inputIdx]; value += t * t;",""]})),{inputs:[0]})},t.parseReduceAttributes=function(e){return(0,o.createAttributeWithCacheKey)(e)}},625:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)},a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i},o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,a=0,o=t.length;a<o;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.parseTransposeAttributes=t.transpose=t.createTransposeProgramInfo=t.transposeProgramMetadata=void 0;var i=n(952),c=n(387),u=n(163),s=n(75);t.transposeProgramMetadata={name:"Transpose",inputTypes:[u.GpuDataType.default]};var l=function(e,t){return t&&t.length!==e.length?o([],a(e.keys()),!1).reverse():t};t.createTransposeProgramInfo=function(e,n){var a=e.dims,o=l(a,n),c=function(e,t){return i.ShapeUtil.sortBasedOnPerm(e,l(e,t))}(a,o),f=a.length,p=i.ShapeUtil.size(c),d=(0,s.createIndicesHelper)("output",c),h=(0,s.createIndicesHelper)("a",a);return r(r({},t.transposeProgramMetadata),{outputs:[{dims:c,dataType:e.dataType,gpuDataType:u.GpuDataType.default}],getShaderSource:function(e){return"\\n  @group(0) @binding(0) var<storage, read> a : array<".concat("f32",">;\\n  @group(0) @binding(1) var<storage, read_write> output : array<").concat("f32",">;\\n\\n  ").concat(function(e,t){var n=[];n.push("fn perm(a: ptr<function, array<u32, ".concat(t,">>, i: ptr<function, array<u32, ").concat(t,">>) {"));for(var r=0;r<t;++r)n.push("\\t(*a)[".concat(e[r],"]=(*i)[").concat(r,"];"));return n.push("\\t}"),n.join("\\n")}(o,f),"\\n  ").concat(d.o2iImpl,"\\n  ").concat(h.i2oImpl,"\\n\\n  ").concat(e.mainStart(),"\\n    ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(p),"\\n\\n    ").concat(d.indicesVariableDeclaration("indices"),"\\n    ").concat(d.o2iCall("global_idx","indices"),"\\n    ").concat(h.indicesVariableDeclaration("aIndices"),"\\n    perm(&aIndices, &indices);\\n\\n    output[global_idx] = a[").concat(h.i2oExpression("aIndices"),"];\\n  }")},dispatchGroup:function(){return{x:Math.ceil(p/64)}}})},t.transpose=function(e,n){!function(e){if(!e||1!==e.length)throw new Error("Transpose requires 1 input.");if(1!==e[0].dataType)throw new Error("input should be float tensor")}(e.inputs),e.compute(r(r({},t.transposeProgramMetadata),{cacheHint:n.cacheKey,get:function(){return(0,t.createTransposeProgramInfo)(e.inputs[0],n.perm)}}))},t.parseTransposeAttributes=function(e){return(0,c.createAttributeWithCacheKey)({perm:e.perm})}},302:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.thresholdedRelu=t.tanh=t.tan=t.sqrt=t.sinh=t.sin=t.sigmoid=t.relu=t.reciprocal=t.neg=t.leakyRelu=t.floor=t.exp=t.erf=t.elu=t.parseAlphaAttributes=t.cosh=t.cos=t.ceil=t.clip=t.clipV10=t.atanh=t.atan=t.asinh=t.asin=t.acosh=t.acos=t.abs=void 0;var a=n(952),o=n(387),i=n(163),c=function(e,t,n,o,c){var u={name:t,inputTypes:[i.GpuDataType.default],cacheHint:c};return r(r({},u),{get:function(){return function(e,t,n,o){return r(r({},e),{getShaderSource:function(e){return function(e,t,n,r){var a,o=Math.ceil(t/4);return a="string"==typeof n?"".concat(n,"(a)"):n("a"),"\\n  @group(0) @binding(0) var<storage, read> inputData : array<vec4<f32>>;\\n  @group(0) @binding(1) var<storage, read_write> outputData : array<vec4<f32>>;\\n\\n  ".concat(null!=r?r:"","\\n\\n  ").concat(e.mainStart(),"\\n    ").concat(e.guardAgainstOutOfBoundsWorkgroupSizes(o),"\\n\\n    let a = inputData[global_idx];\\n    outputData[global_idx] = ").concat(a,";\\n  }")}(e,a.ShapeUtil.size(t.dims),n,o)},outputs:[{dims:t.dims,dataType:t.dataType,gpuDataType:i.GpuDataType.default}],dispatchGroup:function(e){return{x:Math.ceil(a.ShapeUtil.size(e[0].dims)/64/4)}}})}(u,e,n,o)}})};t.abs=function(e){e.compute(c(e.inputs[0],"Abs","abs"))},t.acos=function(e){e.compute(c(e.inputs[0],"Acos","acos"))},t.acosh=function(e){e.compute(c(e.inputs[0],"Acosh","acosh"))},t.asin=function(e){e.compute(c(e.inputs[0],"Asin","asin"))},t.asinh=function(e){e.compute(c(e.inputs[0],"Asinh","asinh"))},t.atan=function(e){e.compute(c(e.inputs[0],"Atan","atan"))},t.atanh=function(e){e.compute(c(e.inputs[0],"Atanh","atanh"))},t.clipV10=function(e,t){e.compute(c(e.inputs[0],"Clip",(function(e){return"clamp(".concat(e,", clip_min_, clip_max_)")}),"\\n    const clip_min_: vec4<f32> = vec4(f32(".concat(t.min,"));\\n    const clip_max_: vec4<f32> = vec4(f32(").concat(t.max,"));\\n"),t.cacheKey),{inputs:[0]})},t.clip=function(e){var n,r,i,c=(r=(n=e.inputs).length>=2?n[1].getFloat32Array()[0]:a.MIN_CLIP,i=n.length>=3?n[2].getFloat32Array()[0]:a.MAX_CLIP,(0,o.createAttributeWithCacheKey)({min:r,max:i}));(0,t.clipV10)(e,c)},t.ceil=function(e){e.compute(c(e.inputs[0],"Ceil","ceil"))},t.cos=function(e){e.compute(c(e.inputs[0],"Cos","cos"))},t.cosh=function(e){e.compute(c(e.inputs[0],"Cosh","cosh"))},t.parseAlphaAttributes=function(e){return(0,o.createAttributeWithCacheKey)(e)},t.elu=function(e,t){e.compute(c(e.inputs[0],"Elu",(function(e){return"elu_vf32(".concat(e,")")}),"\\n  const elu_alpha_: f32 = f32(".concat(t.alpha,");\\n\\n  fn elu_f32(a: f32) -> f32 {\\n  return select((exp(a) - 1.0) * elu_alpha_, a, a >= 0.0);\\n  }\\n\\n  fn elu_vf32(v: vec4<f32>) -> vec4<f32> {\\n  return vec4(elu_f32(v.x), elu_f32(v.y), elu_f32(v.z), elu_f32(v.w));\\n  }"),t.cacheKey))},t.erf=function(e){e.compute(c(e.inputs[0],"Erf",(function(e){return"erf_vf32(".concat(e,")")}),"\\n  const r0: f32 = 0.3275911;\\n  const r1: f32 = 0.254829592;\\n  const r2: f32 = -0.284496736;\\n  const r3: f32 = 1.421413741;\\n  const r4: f32 = -1.453152027;\\n  const r5: f32 = 1.061405429;\\n\\n  fn erf_vf32(v: vec4<f32>) -> vec4<f32> {\\n    let absv = abs(v);\\n    let x = 1.0 / (1.0 + r0 * absv);\\n    return sign(v) * (1.0 - ((((r5 * x + r4) * x + r3) * x + r2) * x + r1) * x * exp(-absv * absv));\\n  }"))},t.exp=function(e){e.compute(c(e.inputs[0],"Exp","exp"))},t.floor=function(e){e.compute(c(e.inputs[0],"Floor","floor"))},t.leakyRelu=function(e,t){e.compute(c(e.inputs[0],"LeakyRelu",(function(e){return"select(leaky_relu_alpha_ * ".concat(e,", ").concat(e,", ").concat(e," >= vec4<f32>(0.0))")}),"const leaky_relu_alpha_: f32 = f32(".concat(t.alpha,");"),t.cacheKey))},t.neg=function(e){e.compute(c(e.inputs[0],"Neg",(function(e){return"-".concat(e)})))},t.reciprocal=function(e){e.compute(c(e.inputs[0],"Reciprocal",(function(e){return"1.0/".concat(e)})))},t.relu=function(e){e.compute(c(e.inputs[0],"Relu",(function(e){return"select(vec4<f32>(0.0), ".concat(e,", ").concat(e," > vec4<f32>(0.0))")})))},t.sigmoid=function(e){e.compute(c(e.inputs[0],"Sigmoid",(function(e){return"(1.0 / (1.0 + exp(-".concat(e,")))")})))},t.sin=function(e){e.compute(c(e.inputs[0],"Sin","sin"))},t.sinh=function(e){e.compute(c(e.inputs[0],"Sinh","sinh"))},t.sqrt=function(e){e.compute(c(e.inputs[0],"Sqrt","sqrt"))},t.tan=function(e){e.compute(c(e.inputs[0],"Tan","tan"))},t.tanh=function(e){e.compute(c(e.inputs[0],"Tanh","tanh"))},t.thresholdedRelu=function(e,t){return e.compute(c(e.inputs[0],"ThresholdedRelu",(function(e){return"select(vec4<f32>(0.0), ".concat(e,", ").concat(e," > thresholded_relu_alpha_)")}),"const thresholded_relu_alpha_: vec4<f32> = vec4<f32>(".concat(t.alpha,");"),t.cacheKey)),0}},305:function(e,t,n){"use strict";var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i},o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,a=0,o=t.length;a<o;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.ProgramManager=void 0;var i=n(955),c=n(75),u=function(){function e(e){this.backend=e,this.repo=new Map,this.attributesBound=!1}return e.prototype.getArtifact=function(e){return this.repo.get(e)},e.prototype.setArtifact=function(e,t){this.repo.set(e,t)},e.prototype.run=function(e,t,n,i){var c,u,s,l,f=this,p=this.backend.device,d=this.backend.getComputePassEncoder();this.backend.profilingEnabled&&d.writeTimestamp(this.backend.profilingQuerySet,0),d.setPipeline(e.computePipeline);var h=[];try{for(var g=r(t),m=g.next();!m.done;m=g.next()){var v=m.value;h.push({binding:h.length,resource:{buffer:v.buffer}})}}catch(e){c={error:e}}finally{try{m&&!m.done&&(u=g.return)&&u.call(g)}finally{if(c)throw c.error}}try{for(var y=r(n),b=y.next();!b.done;b=y.next()){var w=b.value;h.push({binding:h.length,resource:{buffer:w.buffer}})}}catch(e){s={error:e}}finally{try{b&&!b.done&&(l=y.return)&&l.call(y)}finally{if(s)throw s.error}}var _=p.createBindGroup({layout:e.computePipeline.getBindGroupLayout(0),entries:h});if(d.setBindGroup(0,_),d.dispatchWorkgroups.apply(d,o([],a(i),!1)),this.backend.pendingDispatchNumber++,this.backend.profilingEnabled){d.writeTimestamp(this.backend.profilingQuerySet,1);var S=this.backend.gpuDataManager.create(16,GPUBufferUsage.COPY_SRC|GPUBufferUsage.QUERY_RESOLVE),A=this.backend.gpuDataManager.create(16,GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST);this.backend.endComputePass(),this.backend.getCommandEncoder().resolveQuerySet(this.backend.profilingQuerySet,0,2,S.buffer,0),this.backend.getCommandEncoder().copyBufferToBuffer(S.buffer,0,A.buffer,0,16),this.backend.flush();var O=this.backend.currentKernelId,x=this.backend.kernels.get(O)[0];A.buffer.mapAsync(GPUMapMode.READ).then((function(){var e=new BigUint64Array(A.buffer.getMappedRange()),t=e[0],n=e[1];A.buffer.unmap(),void 0===f.backend.profilingTimeBase&&(f.backend.profilingTimeBase=t);var r=Number(t-f.backend.profilingTimeBase),a=Number(n-f.backend.profilingTimeBase);if(!Number.isSafeInteger(r)||!Number.isSafeInteger(a))throw new RangeError("incorrect timestamp range");f.backend.gpuDataManager.release(S.id),f.backend.gpuDataManager.release(A.id),console.log(\'[profiling] kernel "\'.concat(O,"|").concat(x,\'" execution time: \').concat(a-r," ns"))}))}this.backend.pendingDispatchNumber>=16&&this.backend.flush()},e.prototype.dispose=function(){},e.prototype.build=function(e,t){var n=this.backend.device,r=e.getShaderSource((0,c.createShaderHelper)(t)),a=n.createShaderModule({code:r});return(0,i.LOG_DEBUG)("verbose",(function(){return"[WebGPU] shader code: ".concat(r)})),{programInfo:e,computePipeline:n.createComputePipeline({compute:{module:a,entryPoint:"main"},layout:"auto"})}},e.prototype.normalizeDispatchGroupSize=function(e){var t="number"==typeof e?e:e.x,n="number"==typeof e?1:e.y||1,r="number"==typeof e?1:e.z||1,a=this.backend.device.limits.maxComputeWorkgroupsPerDimension;if(t<=a&&n<=a&&r<=a)return[t,n,r];var o=t*n*r,i=Math.ceil(Math.sqrt(o));if(i>a){if((i=Math.ceil(Math.cbrt(o)))>a)throw new Error("Total dispatch size exceeds WebGPU maximum.");return[i,i,i]}return[i,i,1]},e}();t.ProgramManager=u},163:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.GpuDataType=void 0,(n=t.GpuDataType||(t.GpuDataType={}))[n.default=0]="default",n[n.upload=1]="upload",n[n.profile=2]="profile"},918:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setRunOptions=void 0;var r=n(263),a=n(497);t.setRunOptions=function(e){var t=(0,r.getInstance)(),n=0,o=[],i=e||{};try{if(void 0===(null==e?void 0:e.logSeverityLevel))i.logSeverityLevel=2;else if("number"!=typeof e.logSeverityLevel||!Number.isInteger(e.logSeverityLevel)||e.logSeverityLevel<0||e.logSeverityLevel>4)throw new Error("log serverity level is not valid: ".concat(e.logSeverityLevel));if(void 0===(null==e?void 0:e.logVerbosityLevel))i.logVerbosityLevel=0;else if("number"!=typeof e.logVerbosityLevel||!Number.isInteger(e.logVerbosityLevel))throw new Error("log verbosity level is not valid: ".concat(e.logVerbosityLevel));void 0===(null==e?void 0:e.terminate)&&(i.terminate=!1);var c=0;return void 0!==(null==e?void 0:e.tag)&&(c=(0,a.allocWasmString)(e.tag,o)),0===(n=t._OrtCreateRunOptions(i.logSeverityLevel,i.logVerbosityLevel,!!i.terminate,c))&&(0,a.checkLastError)("Can\'t create run options."),void 0!==(null==e?void 0:e.extra)&&(0,a.iterateExtraOptions)(e.extra,"",new WeakSet,(function(e,r){var i=(0,a.allocWasmString)(e,o),c=(0,a.allocWasmString)(r,o);0!==t._OrtAddRunConfigEntry(n,i,c)&&(0,a.checkLastError)("Can\'t set a run config entry: ".concat(e," - ").concat(r,"."))})),[n,o]}catch(e){throw 0!==n&&t._OrtReleaseRunOptions(n),o.forEach((function(e){return t._free(e)})),e}}},622:function(e,t,n){"use strict";var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.setSessionOptions=void 0;var a=n(263),o=n(497);t.setSessionOptions=function(e){var t,n,i,c,u=(0,a.getInstance)(),s=0,l=[],f=e||{};!function(e){e.extra||(e.extra={}),e.extra.session||(e.extra.session={});var t=e.extra.session;t.use_ort_model_bytes_directly||(t.use_ort_model_bytes_directly="1"),e.executionProviders&&e.executionProviders.some((function(e){return"webgpu"===("string"==typeof e?e:e.name)}))&&(e.enableMemPattern=!1)}(f);try{var p=function(e){switch(e){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error("unsupported graph optimization level: ".concat(e))}}(null!==(t=f.graphOptimizationLevel)&&void 0!==t?t:"all"),d=function(e){switch(e){case"sequential":return 0;case"parallel":return 1;default:throw new Error("unsupported execution mode: ".concat(e))}}(null!==(n=f.executionMode)&&void 0!==n?n:"sequential"),h="string"==typeof f.logId?(0,o.allocWasmString)(f.logId,l):0,g=null!==(i=f.logSeverityLevel)&&void 0!==i?i:2;if(!Number.isInteger(g)||g<0||g>4)throw new Error("log serverity level is not valid: ".concat(g));var m=null!==(c=f.logVerbosityLevel)&&void 0!==c?c:0;if(!Number.isInteger(m)||m<0||m>4)throw new Error("log verbosity level is not valid: ".concat(m));var v="string"==typeof f.optimizedModelFilePath?(0,o.allocWasmString)(f.optimizedModelFilePath,l):0;return 0===(s=u._OrtCreateSessionOptions(p,!!f.enableCpuMemArena,!!f.enableMemPattern,d,!!f.enableProfiling,0,h,g,m,v))&&(0,o.checkLastError)("Can\'t create session options."),f.executionProviders&&function(e,t,n){var i,c;try{for(var u=r(t),s=u.next();!s.done;s=u.next()){var l=s.value,f="string"==typeof l?l:l.name;switch(f){case"xnnpack":f="XNNPACK";break;case"webnn":if(f="WEBNN","string"!=typeof l){var p=l;if(null==p?void 0:p.deviceType){var d=(0,o.allocWasmString)("deviceType",n),h=(0,o.allocWasmString)(p.deviceType,n);0!==(0,a.getInstance)()._OrtAddSessionConfigEntry(e,d,h)&&(0,o.checkLastError)("Can\'t set a session config entry: \'deviceType\' - ".concat(p.deviceType,"."))}(null==p?void 0:p.powerPreference)&&(d=(0,o.allocWasmString)("powerPreference",n),h=(0,o.allocWasmString)(p.powerPreference,n),0!==(0,a.getInstance)()._OrtAddSessionConfigEntry(e,d,h)&&(0,o.checkLastError)("Can\'t set a session config entry: \'powerPreference\' - ".concat(p.powerPreference,".")))}break;case"webgpu":f="JS";break;case"wasm":case"cpu":continue;default:throw new Error("not supported execution provider: ".concat(f))}var g=(0,o.allocWasmString)(f,n);0!==(0,a.getInstance)()._OrtAppendExecutionProvider(e,g)&&(0,o.checkLastError)("Can\'t append execution provider: ".concat(f,"."))}}catch(e){i={error:e}}finally{try{s&&!s.done&&(c=u.return)&&c.call(u)}finally{if(i)throw i.error}}}(s,f.executionProviders,l),void 0!==f.extra&&(0,o.iterateExtraOptions)(f.extra,"",new WeakSet,(function(e,t){var n=(0,o.allocWasmString)(e,l),r=(0,o.allocWasmString)(t,l);0!==u._OrtAddSessionConfigEntry(s,n,r)&&(0,o.checkLastError)("Can\'t set a session config entry: ".concat(e," - ").concat(t,"."))})),[s,l]}catch(e){throw 0!==s&&u._OrtReleaseSessionOptions(s),l.forEach((function(e){return u._free(e)})),e}}},917:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logLevelStringToEnum=t.tensorTypeToTypedArrayConstructor=t.getTensorElementSize=t.tensorDataTypeEnumToString=t.tensorDataTypeStringToEnum=void 0,t.tensorDataTypeStringToEnum=function(e){switch(e){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error("unsupported data type: ".concat(e))}},t.tensorDataTypeEnumToString=function(e){switch(e){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error("unsupported data type: ".concat(e))}},t.getTensorElementSize=function(e){return[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][e]},t.tensorTypeToTypedArrayConstructor=function(e){switch(e){case"float16":case"uint16":return Uint16Array;case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error("unsupported type: ".concat(e))}},t.logLevelStringToEnum=function(e){switch(e){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error("unsupported logging level: ".concat(e))}}},259:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function c(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}u((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(c){return function(u){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&c[0]?r.return:c[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,c[1])).done)return a;switch(r=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){i.label=c[1];break}if(6===c[0]&&i.label<a[1]){i.label=a[1],a=c;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(c);break}a[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],r=0}finally{n=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,u])}}},o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.extractTransferableBuffers=t.endProfiling=t.run=t.releaseSession=t.createSession=t.createSessionFinalize=t.createSessionAllocate=t.initRuntime=void 0;var c=n(675),u=n(918),s=n(622),l=n(917),f=n(263),p=n(497);t.initRuntime=function(e){return r(void 0,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return n=e.wasm.numThreads,r=(0,l.logLevelStringToEnum)(e.logLevel),0!==(0,f.getInstance)()._OrtInit(n,r)&&(0,p.checkLastError)("Can\'t initialize onnxruntime."),[4,(0,c.init)((0,f.getInstance)(),e)];case 1:return t.sent(),[2]}var n,r}))}))};var d=new Map;t.createSessionAllocate=function(e){var t=(0,f.getInstance)(),n=t._malloc(e.byteLength);if(0===n)throw new Error("Can\'t create a session. failed to allocate a buffer of size ".concat(e.byteLength,"."));return t.HEAPU8.set(e,n),[n,e.byteLength]},t.createSessionFinalize=function(e,t){var n,r=(0,f.getInstance)(),a=0,i=0,c=[],u=[],l=[];try{i=(n=o((0,s.setSessionOptions)(t),2))[0],c=n[1],0===(a=r._OrtCreateSession(e[0],e[1],i))&&(0,p.checkLastError)("Can\'t create a session.");for(var h=o(function(e){var t=(0,f.getInstance)(),n=t.stackSave();try{var r=t.stackAlloc(8);return 0!==t._OrtGetInputOutputCount(e,r,r+4)&&(0,p.checkLastError)("Can\'t get session input/output count."),[t.HEAP32[r/4],t.HEAP32[r/4+1]]}finally{t.stackRestore(n)}}(a),2),g=h[0],m=h[1],v=[],y=[],b=0;b<g;b++){var w=r._OrtGetInputName(a,b);0===w&&(0,p.checkLastError)("Can\'t get an input name."),u.push(w),v.push(r.UTF8ToString(w))}for(b=0;b<m;b++){var _=r._OrtGetOutputName(a,b);0===_&&(0,p.checkLastError)("Can\'t get an output name."),l.push(_),y.push(r.UTF8ToString(_))}return d.set(a,[a,u,l]),[a,v,y]}catch(e){throw u.forEach((function(e){return r._OrtFree(e)})),l.forEach((function(e){return r._OrtFree(e)})),0!==a&&r._OrtReleaseSession(a),e}finally{r._free(e[0]),0!==i&&r._OrtReleaseSessionOptions(i),c.forEach((function(e){return r._free(e)}))}},t.createSession=function(e,n){var r=(0,t.createSessionAllocate)(e);return(0,t.createSessionFinalize)(r,n)},t.releaseSession=function(e){var t=(0,f.getInstance)(),n=d.get(e);if(!n)throw new Error("cannot release session. invalid session id: ".concat(e));var r=o(n,3),a=r[0],i=r[1],c=r[2];i.forEach((function(e){return t._OrtFree(e)})),c.forEach((function(e){return t._OrtFree(e)})),t._OrtReleaseSession(a),d.delete(e)},t.run=function(e,t,n,i,c){return r(void 0,void 0,void 0,(function(){var r,s,h,g,m,v,y,b,w,_,S,A,O,x,E,C,P,T,M,R,k,I,D,U,G,j,B,L,W,z,F,H,N,K,Y,V,q,J,X,Q,Z,$,ee,te,ne,re;return a(this,(function(a){switch(a.label){case 0:if(r=(0,f.getInstance)(),!(s=d.get(e)))throw new Error("cannot run inference. invalid session id: ".concat(e));h=o(s,3),g=h[0],m=h[1],v=h[2],y=t.length,b=i.length,w=0,_=[],S=[],A=[],a.label=1;case 1:for(a.trys.push([1,,7,8]),re=o((0,u.setRunOptions)(c),2),w=re[0],_=re[1],O=function(e){var t=n[e][0],a=n[e][1],o=n[e][2],i=void 0,c=void 0;if(Array.isArray(o)){c=4*o.length,i=r._malloc(c),A.push(i);for(var u=i/4,s=0;s<o.length;s++){if("string"!=typeof o[s])throw new TypeError("tensor data at index ".concat(s," is not a string"));r.HEAPU32[u++]=(0,p.allocWasmString)(o[s],A)}}else c=o.byteLength,i=r._malloc(c),A.push(i),r.HEAPU8.set(new Uint8Array(o.buffer,o.byteOffset,c),i);var f=r.stackSave(),d=r.stackAlloc(4*a.length);try{var h=d/4;a.forEach((function(e){return r.HEAP32[h++]=e}));var g=r._OrtCreateTensor((0,l.tensorDataTypeStringToEnum)(t),i,c,d,a.length);0===g&&(0,p.checkLastError)("Can\'t create tensor for input[".concat(e,"].")),S.push(g)}finally{r.stackRestore(f)}},j=0;j<y;j++)O(j);x=r.stackSave(),E=r.stackAlloc(4*y),C=r.stackAlloc(4*y),P=r.stackAlloc(4*b),T=r.stackAlloc(4*b),a.label=2;case 2:for(a.trys.push([2,,5,6]),M=E/4,R=C/4,k=P/4,I=T/4,j=0;j<y;j++)r.HEAPU32[M++]=S[j],r.HEAPU32[R++]=m[t[j]];for(j=0;j<b;j++)r.HEAPU32[k++]=0,r.HEAPU32[I++]=v[i[j]];return D=r._OrtRun(g,C,E,y,T,b,P,w),(U=r.jsepRunPromise)&&void 0!==U.then?[4,U]:[3,4];case 3:D=a.sent(),a.label=4;case 4:for(G=[],0!==D&&(0,p.checkLastError)("failed to call OrtRun()."),j=0;j<b;j++){B=r.HEAPU32[P/4+j],L=r.stackSave(),W=r.stackAlloc(16),z=void 0,F=0;try{for(0!==(D=r._OrtGetTensorData(B,W,W+4,W+8,W+12))&&(0,p.checkLastError)("Can\'t access output tensor data on index ".concat(j,".")),H=W/4,N=r.HEAPU32[H++],F=r.HEAPU32[H++],K=r.HEAPU32[H++],Y=r.HEAPU32[H++],V=[],q=0;q<Y;q++)V.push(r.HEAPU32[K/4+q]);if(r._OrtFree(K),J=0===V.length?1:V.reduce((function(e,t){return e*t})),"string"===(z=(0,l.tensorDataTypeEnumToString)(N))){for(X=[],Q=F/4,Z=0;Z<J;Z++)$=r.HEAPU32[Q++],ee=Z===J-1?void 0:r.HEAPU32[Q]-$,X.push(r.UTF8ToString($,ee));G.push([z,V,X])}else te=(0,l.tensorTypeToTypedArrayConstructor)(z),ne=new te(J),new Uint8Array(ne.buffer,ne.byteOffset,ne.byteLength).set(r.HEAPU8.subarray(F,F+ne.byteLength)),G.push([z,V,ne])}finally{r.stackRestore(L),"string"===z&&F&&r._free(F),r._OrtReleaseTensor(B)}}return[2,G];case 5:return r.stackRestore(x),[7];case 6:return[3,8];case 7:return S.forEach((function(e){return r._OrtReleaseTensor(e)})),A.forEach((function(e){return r._free(e)})),0!==w&&r._OrtReleaseRunOptions(w),_.forEach((function(e){return r._free(e)})),[7];case 8:return[2]}}))}))},t.endProfiling=function(e){var t=(0,f.getInstance)(),n=d.get(e);if(!n)throw new Error("invalid session id");var r=n[0],a=t._OrtEndProfiling(r);0===a&&(0,p.checkLastError)("Can\'t get an profile file name."),t._OrtFree(a)},t.extractTransferableBuffers=function(e){var t,n,r=[];try{for(var a=i(e),o=a.next();!o.done;o=a.next()){var c=o.value[2];!Array.isArray(c)&&c.buffer&&r.push(c.buffer)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return r}},263:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function c(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}u((r=r.apply(e,t||[])).next())}))},c=this&&this.__generator||function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(c){return function(u){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(a=2&c[0]?r.return:c[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,c[1])).done)return a;switch(r=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){i.label=c[1];break}if(6===c[0]&&i.label<a[1]){i.label=a[1],a=c;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(c);break}a[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],r=0}finally{n=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.dispose=t.getInstance=t.initializeWebAssembly=void 0;var u,s=o(n(449)),l=n(932),f=n(474),p=!1,d=!1,h=!1;t.initializeWebAssembly=function(e){return i(void 0,void 0,void 0,(function(){var t,r,a,o,i,g,m,v,y,b,w;return c(this,(function(c){switch(c.label){case 0:if(p)return[2,Promise.resolve()];if(d)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(h)throw new Error("previous call to \'initializeWebAssembly()\' failed.");return d=!0,t=e.initTimeout,r=e.numThreads,a=e.simd,o=r>1&&function(){try{return"undefined"!=typeof SharedArrayBuffer&&("undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch(e){return!1}}(),i=a&&function(){try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch(e){return!1}}(),g=e.wasmPaths,m="string"==typeof g?g:void 0,v=function(e,t){return t?e?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":e?"ort-wasm-simd.wasm":"ort-wasm.wasm"}(i,o),y="object"==typeof g?g[v]:void 0,b=!1,w=[],t>0&&w.push(new Promise((function(e){setTimeout((function(){b=!0,e()}),t)}))),w.push(new Promise((function(e,t){var r=o?f:l,a={locateFile:function(e,t){return o&&e.endsWith(".worker.js")&&"undefined"!=typeof Blob?URL.createObjectURL(new Blob([n(154)],{type:"text/javascript"})):e.endsWith(".wasm")?y||(null!=m?m:t)+v:t+e}};if(o)if("undefined"==typeof Blob)a.mainScriptUrlOrBlob=s.join(__dirname,"ort-wasm-threaded.js");else{var i="var ortWasmThreaded=(function(){var _scriptDir;return ".concat(r.toString(),"})();");a.mainScriptUrlOrBlob=new Blob([i],{type:"text/javascript"})}r(a).then((function(t){d=!1,p=!0,u=t,e()}),(function(e){d=!1,h=!0,t(e)}))}))),[4,Promise.race(w)];case 1:if(c.sent(),b)throw new Error("WebAssembly backend initializing failed due to timeout: ".concat(t,"ms"));return[2]}}))}))},t.getInstance=function(){if(p&&u)return u;throw new Error("WebAssembly is not initialized yet.")},t.dispose=function(){var e;!p||d||h||(d=!0,null===(e=u.PThread)||void 0===e||e.terminateAllThreads(),u=void 0,d=!1,p=!1,h=!0)}},497:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return i};Object.defineProperty(t,"__esModule",{value:!0}),t.checkLastError=t.iterateExtraOptions=t.allocWasmString=void 0;var a=n(263);t.allocWasmString=function(e,t){var n=(0,a.getInstance)(),r=n.lengthBytesUTF8(e)+1,o=n._malloc(r);return n.stringToUTF8(e,o,r),t.push(o),o},t.iterateExtraOptions=function(e,n,a,o){if("object"==typeof e&&null!==e){if(a.has(e))throw new Error("Circular reference in options");a.add(e)}Object.entries(e).forEach((function(e){var i=r(e,2),c=i[0],u=i[1],s=n?n+c:c;if("object"==typeof u)(0,t.iterateExtraOptions)(u,s+".",a,o);else if("string"==typeof u||"number"==typeof u)o(s,u.toString());else{if("boolean"!=typeof u)throw new Error("Can\'t handle extra config type: ".concat(typeof u));o(s,u?"1":"0")}}))},t.checkLastError=function(e){var t=(0,a.getInstance)(),n=t.stackSave();try{var r=t.stackAlloc(8);t._OrtGetLastError(r,r+4);var o=t.HEAP32[r/4],i=t.HEAPU32[r/4+1],c=i?t.UTF8ToString(i):"";throw new Error("".concat(e," ERROR_CODE: ").concat(o,", ERROR_MESSAGE: ").concat(c))}finally{t.stackRestore(n)}}},474:function(e,t,n){var _scriptDir,r=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,"undefined"!=typeof __filename&&(_scriptDir=_scriptDir||__filename),function(e={}){function t(){return M.buffer!=I.buffer&&L(),I}function r(){return M.buffer!=I.buffer&&L(),D}function a(){return M.buffer!=I.buffer&&L(),U}function o(){return M.buffer!=I.buffer&&L(),G}function i(){return M.buffer!=I.buffer&&L(),j}var c,u,s;c||(c=void 0!==e?e:{}),c.ready=new Promise(((e,t)=>{u=e,s=t}));var l,f,p,d=Object.assign({},c),h="./this.program",g=(e,t)=>{throw t},m="object"==typeof window,v="function"==typeof importScripts,y="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,b=c.ENVIRONMENT_IS_PTHREAD||!1,w="";function _(e){return c.locateFile?c.locateFile(e,w):w+e}if(y){var S=n(384),A=n(908);let t;w=v?A.dirname(w)+"/":__dirname+"/",l=(e,t)=>(e=e.startsWith("file://")?new URL(e):A.normalize(e),S.readFileSync(e,t?void 0:"utf8")),p=e=>((e=l(e,!0)).buffer||(e=new Uint8Array(e)),e),f=(e,t,n,r=!0)=>{e=e.startsWith("file://")?new URL(e):A.normalize(e),S.readFile(e,r?void 0:"utf8",((e,a)=>{e?n(e):t(r?a.buffer:a)}))},!c.thisProgram&&1<process.argv.length&&(h=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),g=(e,t)=>{throw process.exitCode=e,t},c.inspect=()=>"[Emscripten Module object]";try{t=n(925)}catch(e){throw console.error(\'The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?\'),e}global.Worker=t.Worker}else(m||v)&&(v?w=self.location.href:"undefined"!=typeof document&&document.currentScript&&(w=document.currentScript.src),_scriptDir&&(w=_scriptDir),w=0!==w.indexOf("blob:")?w.substr(0,w.replace(/[?#].*/,"").lastIndexOf("/")+1):"",y||(l=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},v&&(p=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),f=(e,t,n)=>{var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)}));y&&"undefined"==typeof performance&&(global.performance=n(953).performance);var O=console.log.bind(console),x=console.warn.bind(console);y&&(O=(...e)=>S.writeSync(1,e.join(" ")+"\\n"),x=(...e)=>S.writeSync(2,e.join(" ")+"\\n"));var E,C=c.print||O,P=c.printErr||x;Object.assign(c,d),d=null,c.thisProgram&&(h=c.thisProgram),c.quit&&(g=c.quit),c.wasmBinary&&(E=c.wasmBinary);var T=c.noExitRuntime||!0;"object"!=typeof WebAssembly&&Z("no native wasm support detected");var M,R,k,I,D,U,G,j,B=!1;function L(){var e=M.buffer;c.HEAP8=I=new Int8Array(e),c.HEAP16=new Int16Array(e),c.HEAP32=U=new Int32Array(e),c.HEAPU8=D=new Uint8Array(e),c.HEAPU16=new Uint16Array(e),c.HEAPU32=G=new Uint32Array(e),c.HEAPF32=new Float32Array(e),c.HEAPF64=j=new Float64Array(e)}var W=c.INITIAL_MEMORY||16777216;if(5242880<=W||Z("INITIAL_MEMORY should be larger than STACK_SIZE, was "+W+"! (STACK_SIZE=5242880)"),b)M=c.wasmMemory;else if(c.wasmMemory)M=c.wasmMemory;else if(!((M=new WebAssembly.Memory({initial:W/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw P("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),y&&P("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");L(),W=M.buffer.byteLength;var z,F=[],H=[],N=[],K=0;function Y(){return T||0<K}function V(){var e=c.preRun.shift();F.unshift(e)}var q,J=0,X=null,Q=null;function Z(e){throw c.onAbort&&c.onAbort(e),P(e="Aborted("+e+")"),B=!0,k=1,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),s(e),e}function $(e){return e.startsWith("data:application/octet-stream;base64,")}function ee(e){try{if(e==q&&E)return new Uint8Array(E);if(p)return p(e);throw"both async and sync fetching of the wasm failed"}catch(e){Z(e)}}function te(e,t,n){return function(e){if(!E&&(m||v)){if("function"==typeof fetch&&!e.startsWith("file://"))return fetch(e,{credentials:"same-origin"}).then((t=>{if(!t.ok)throw"failed to load wasm binary file at \'"+e+"\'";return t.arrayBuffer()})).catch((()=>ee(e)));if(f)return new Promise(((t,n)=>{f(e,(e=>t(new Uint8Array(e))),n)}))}return Promise.resolve().then((()=>ee(e)))}(e).then((e=>WebAssembly.instantiate(e,t))).then((e=>e)).then(n,(e=>{P("failed to asynchronously prepare wasm: "+e),Z(e)}))}function ne(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function re(e){e.terminate(),e.onmessage=()=>{}}function ae(e){(e=pe.Ha[e])||Z(),pe.hb(e)}function oe(e){var t=pe.bb();if(!t)return 6;pe.Ka.push(t),pe.Ha[e.Ja]=t,t.Ja=e.Ja;var n={cmd:"run",start_routine:e.ib,arg:e.$a,pthread_ptr:e.Ja};return y&&t.unref(),t.postMessage(n,e.ob),0}$(q="ort-wasm-threaded.wasm")||(q=_(q));var ie="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function ce(e,t,n){var r=(t>>>=0)+n;for(n=t;e[n]&&!(n>=r);)++n;if(16<n-t&&e.buffer&&ie)return ie.decode(e.buffer instanceof SharedArrayBuffer?e.slice(t,n):e.subarray(t,n));for(r="";t<n;){var a=e[t++];if(128&a){var o=63&e[t++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|o);else{var i=63&e[t++];65536>(a=224==(240&a)?(15&a)<<12|o<<6|i:(7&a)<<18|o<<12|i<<6|63&e[t++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function ue(e,t){return(e>>>=0)?ce(r(),e,t):""}function se(e){if(b)return Ye(1,1,e);k=e,Y()||(pe.jb(),c.onExit&&c.onExit(e),B=!0),g(e,new ne(e))}function le(e){if(k=e,b)throw he(e),"unwind";se(e)}function fe(e){e instanceof ne||"unwind"==e||g(1,e)}var pe={Na:[],Ka:[],Va:[],Ha:{},Ra:function(){b&&pe.cb()},rb:function(){},cb:function(){pe.receiveObjectTransfer=pe.gb,pe.threadInitTLS=pe.Ua,pe.setExitStatus=pe.Ta,T=!1},Ta:function(e){k=e},tb:["$terminateWorker"],jb:function(){for(var e of pe.Ka)re(e);for(e of pe.Na)re(e);pe.Na=[],pe.Ka=[],pe.Ha=[]},hb:function(e){var t=e.Ja;delete pe.Ha[t],pe.Na.push(e),pe.Ka.splice(pe.Ka.indexOf(e),1),e.Ja=0,ht(t)},gb:function(){},Ua:function(){pe.Va.forEach((e=>e()))},fb:e=>new Promise((t=>{e.onmessage=n=>{var r=(n=n.data).cmd;if(e.Ja&&(pe.ab=e.Ja),n.targetThread&&n.targetThread!=lt()){var a=pe.Ha[n.sb];a?a.postMessage(n,n.transferList):P(\'Internal error! Worker sent a message "\'+r+\'" to target pthread \'+n.targetThread+", but that thread no longer exists!")}else"checkMailbox"===r?Ge():"spawnThread"===r?oe(n):"cleanupThread"===r?ae(n.thread):"killThread"===r?(n=n.thread,r=pe.Ha[n],delete pe.Ha[n],re(r),ht(n),pe.Ka.splice(pe.Ka.indexOf(r),1),r.Ja=0):"cancelThread"===r?pe.Ha[n.thread].postMessage({cmd:"cancel"}):"loaded"===r?(e.loaded=!0,t(e)):"print"===r?C("Thread "+n.threadId+": "+n.text):"printErr"===r?P("Thread "+n.threadId+": "+n.text):"alert"===r?alert("Thread "+n.threadId+": "+n.text):"setimmediate"===n.target?e.postMessage(n):"callHandler"===r?c[n.handler](...n.args):r&&P("worker sent an unknown command "+r);pe.ab=void 0},e.onerror=e=>{throw P("worker sent an error! "+e.filename+":"+e.lineno+": "+e.message),e},y&&(e.on("message",(function(t){e.onmessage({data:t})})),e.on("error",(function(t){e.onerror(t)})));var n,r=[];for(n of["onExit","onAbort","print","printErr"])c.hasOwnProperty(n)&&r.push(n);e.postMessage({cmd:"load",handlers:r,urlOrBlob:c.mainScriptUrlOrBlob||_scriptDir,wasmMemory:M,wasmModule:R})})),eb:function(e){e()},Za:function(){var e=_("ort-wasm-threaded.worker.js");e=new Worker(e),pe.Na.push(e)},bb:function(){return 0==pe.Na.length&&(pe.Za(),pe.fb(pe.Na[0])),pe.Na.pop()}};function de(e){for(;0<e.length;)e.shift()(c)}function he(e){if(b)return Ye(2,0,e);le(e)}c.PThread=pe,c.establishStackSpace=function(){var e=lt(),t=a()[e+52>>2>>>0];yt(t,t-(e=a()[e+56>>2>>>0])),wt(t)};var ge=[];function me(e){this.Qa=e-24,this.Ya=function(e){o()[this.Qa+4>>2>>>0]=e},this.Xa=function(e){o()[this.Qa+8>>2>>>0]=e},this.Ra=function(e,t){this.Wa(),this.Ya(e),this.Xa(t)},this.Wa=function(){o()[this.Qa+16>>2>>>0]=0}}function ve(e,t,n,r){return b?Ye(3,1,e,t,n,r):ye(e,t,n,r)}function ye(e,t,n,r){if("undefined"==typeof SharedArrayBuffer)return P("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var a=[];return b&&0===a.length?ve(e,t,n,r):(e={ib:n,Ja:e,$a:r,ob:a},b?(e.qb="spawnThread",postMessage(e,a),0):oe(e))}function be(e,t,n){return b?Ye(4,1,e,t,n):0}function we(e,t){if(b)return Ye(5,1,e,t)}function _e(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);127>=r?t++:2047>=r?t+=2:55296<=r&&57343>=r?(t+=4,++n):t+=3}return t}function Se(e,t,n,r){if(!(0<r))return 0;var a=n>>>=0;r=n+r-1;for(var o=0;o<e.length;++o){var i=e.charCodeAt(o);if(55296<=i&&57343>=i&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++o)),127>=i){if(n>=r)break;t[n++>>>0]=i}else{if(2047>=i){if(n+1>=r)break;t[n++>>>0]=192|i>>6}else{if(65535>=i){if(n+2>=r)break;t[n++>>>0]=224|i>>12}else{if(n+3>=r)break;t[n++>>>0]=240|i>>18,t[n++>>>0]=128|i>>12&63}t[n++>>>0]=128|i>>6&63}t[n++>>>0]=128|63&i}}return t[n>>>0]=0,n-a}function Ae(e,t,n){return Se(e,r(),t,n)}function Oe(e,t){if(b)return Ye(6,1,e,t)}function xe(e,t,n){if(b)return Ye(7,1,e,t,n)}function Ee(e,t,n){return b?Ye(8,1,e,t,n):0}function Ce(e,t){if(b)return Ye(9,1,e,t)}function Pe(e,t,n){if(b)return Ye(10,1,e,t,n)}function Te(e,t,n,r){if(b)return Ye(11,1,e,t,n,r)}function Me(e,t,n,r){if(b)return Ye(12,1,e,t,n,r)}function Re(e,t,n,r){if(b)return Ye(13,1,e,t,n,r)}function ke(e){if(b)return Ye(14,1,e)}function Ie(e,t){if(b)return Ye(15,1,e,t)}function De(e,t,n){if(b)return Ye(16,1,e,t,n)}function Ue(e){"function"==typeof Atomics.pb&&(Atomics.pb(a(),e>>2,e).value.then(Ge),e+=128,Atomics.store(a(),e>>2,1))}function Ge(){var e=lt();e&&(Ue(e),function(e){if(!B)try{if(vt(),!Y())try{b?mt(k):le(k)}catch(e){fe(e)}}catch(e){fe(e)}}())}function je(e){return o()[e>>>2]+4294967296*a()[e+4>>>2]}function Be(e){return 0==e%4&&(0!=e%100||0==e%400)}c.invokeEntryPoint=function(e,t){var n=ge[e];n||(e>=ge.length&&(ge.length=e+1),ge[e]=n=z.get(e)),e=n(t),Y()?pe.Ta(e):mt(e)},c.__emscripten_thread_mailbox_await=Ue,c.checkMailbox=Ge;var Le,We=[0,31,60,91,121,152,182,213,244,274,305,335],ze=[0,31,59,90,120,151,181,212,243,273,304,334];function Fe(e){return(Be(e.getFullYear())?We:ze)[e.getMonth()]+e.getDate()-1}function He(e,t,n,r,a,o,i){return b?Ye(17,1,e,t,n,r,a,o,i):-52}function Ne(e,t,n,r,a,o){if(b)return Ye(18,1,e,t,n,r,a,o)}function Ke(e){var t=_e(e)+1,n=ft(t);return n&&Ae(e,n,t),n}function Ye(e,t){var n=arguments.length-2,r=arguments;return function(e){var t=bt();return e=e(),wt(t),e}((()=>{for(var a=_t(8*n),o=a>>3,c=0;c<n;c++){var u=r[2+c];i()[o+c>>>0]=u}return dt(e,n,a,t)}))}Le=y?()=>{var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:()=>performance.timeOrigin+performance.now();var Ve,qe=[],Je={};function Xe(){if(!Ve){var e,t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:h||"./this.program"};for(e in Je)void 0===Je[e]?delete t[e]:t[e]=Je[e];var n=[];for(e in t)n.push(e+"="+t[e]);Ve=n}return Ve}function Qe(e,n){if(b)return Ye(19,1,e,n);var r=0;return Xe().forEach((function(a,i){var c=n+r;for(i=o()[e+4*i>>2>>>0]=c,c=0;c<a.length;++c)t()[i++>>0>>>0]=a.charCodeAt(c);t()[i>>0>>>0]=0,r+=a.length+1})),0}function Ze(e,t){if(b)return Ye(20,1,e,t);var n=Xe();o()[e>>2>>>0]=n.length;var r=0;return n.forEach((function(e){r+=e.length+1})),o()[t>>2>>>0]=r,0}function $e(e){return b?Ye(21,1,e):52}function et(e,t,n,r){return b?Ye(22,1,e,t,n,r):52}function tt(e,t,n,r,a){return b?Ye(23,1,e,t,n,r,a):70}var nt=[null,[],[]];function rt(e,t,n,a){if(b)return Ye(24,1,e,t,n,a);for(var i=0,c=0;c<n;c++){var u=o()[t>>2>>>0],s=o()[t+4>>2>>>0];t+=8;for(var l=0;l<s;l++){var f=r()[u+l>>>0],p=nt[e];0===f||10===f?((1===e?C:P)(ce(p,0)),p.length=0):p.push(f)}i+=s}return o()[a>>2>>>0]=i,0}function at(e){return(at=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues)return e=>(e.set(crypto.getRandomValues(new Uint8Array(e.byteLength))),e);if(y)try{var e=n(760);if(e.randomFillSync)return t=>e.randomFillSync(t);var t=e.randomBytes;return e=>(e.set(t(e.byteLength)),e)}catch(e){}Z("initRandomDevice")}())(e)}var ot=[31,29,31,30,31,30,31,31,30,31,30,31],it=[31,28,31,30,31,30,31,31,30,31,30,31];function ct(e,n,r,o){function i(e,t,n){for(e="number"==typeof e?e.toString():e||"";e.length<t;)e=n[0]+e;return e}function c(e,t){return i(e,t,"0")}function u(e,t){function n(e){return 0>e?-1:0<e?1:0}var r;return 0===(r=n(e.getFullYear()-t.getFullYear()))&&0===(r=n(e.getMonth()-t.getMonth()))&&(r=n(e.getDate()-t.getDate())),r}function s(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function l(e){var t=e.La;for(e=new Date(new Date(e.Ma+1900,0,1).getTime());0<t;){var n=e.getMonth(),r=(Be(e.getFullYear())?ot:it)[n];if(!(t>r-e.getDate())){e.setDate(e.getDate()+t);break}t-=r-e.getDate()+1,e.setDate(1),11>n?e.setMonth(n+1):(e.setMonth(0),e.setFullYear(e.getFullYear()+1))}return n=new Date(e.getFullYear()+1,0,4),t=s(new Date(e.getFullYear(),0,4)),n=s(n),0>=u(t,e)?0>=u(n,e)?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1}var f=a()[o+40>>2>>>0];for(var p in o={mb:a()[o>>2>>>0],lb:a()[o+4>>2>>>0],Oa:a()[o+8>>2>>>0],Sa:a()[o+12>>2>>>0],Pa:a()[o+16>>2>>>0],Ma:a()[o+20>>2>>>0],Ia:a()[o+24>>2>>>0],La:a()[o+28>>2>>>0],ub:a()[o+32>>2>>>0],kb:a()[o+36>>2>>>0],nb:f?ue(f):""},r=ue(r),f={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})r=r.replace(new RegExp(p,"g"),f[p]);var d="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),h="January February March April May June July August September October November December".split(" ");for(p in f={"%a":function(e){return d[e.Ia].substring(0,3)},"%A":function(e){return d[e.Ia]},"%b":function(e){return h[e.Pa].substring(0,3)},"%B":function(e){return h[e.Pa]},"%C":function(e){return c((e.Ma+1900)/100|0,2)},"%d":function(e){return c(e.Sa,2)},"%e":function(e){return i(e.Sa,2," ")},"%g":function(e){return l(e).toString().substring(2)},"%G":function(e){return l(e)},"%H":function(e){return c(e.Oa,2)},"%I":function(e){return 0==(e=e.Oa)?e=12:12<e&&(e-=12),c(e,2)},"%j":function(e){for(var t=0,n=0;n<=e.Pa-1;t+=(Be(e.Ma+1900)?ot:it)[n++]);return c(e.Sa+t,3)},"%m":function(e){return c(e.Pa+1,2)},"%M":function(e){return c(e.lb,2)},"%n":function(){return"\\n"},"%p":function(e){return 0<=e.Oa&&12>e.Oa?"AM":"PM"},"%S":function(e){return c(e.mb,2)},"%t":function(){return"\\t"},"%u":function(e){return e.Ia||7},"%U":function(e){return c(Math.floor((e.La+7-e.Ia)/7),2)},"%V":function(e){var t=Math.floor((e.La+7-(e.Ia+6)%7)/7);if(2>=(e.Ia+371-e.La-2)%7&&t++,t)53==t&&(4==(n=(e.Ia+371-e.La)%7)||3==n&&Be(e.Ma)||(t=1));else{t=52;var n=(e.Ia+7-e.La-1)%7;(4==n||5==n&&Be(e.Ma%400-1))&&t++}return c(t,2)},"%w":function(e){return e.Ia},"%W":function(e){return c(Math.floor((e.La+7-(e.Ia+6)%7)/7),2)},"%y":function(e){return(e.Ma+1900).toString().substring(2)},"%Y":function(e){return e.Ma+1900},"%z":function(e){var t=0<=(e=e.kb);return e=Math.abs(e)/60,(t?"+":"-")+String("0000"+(e/60*100+e%60)).slice(-4)},"%Z":function(e){return e.nb},"%%":function(){return"%"}},r=r.replace(/%%/g,"\\0\\0"),f)r.includes(p)&&(r=r.replace(new RegExp(p,"g"),f[p](o)));return p=function(e){var t=Array(_e(e)+1);return Se(e,t,0,t.length),t}(r=r.replace(/\\0\\0/g,"%")),p.length>n?0:(function(e,n){t().set(e,n>>>0)}(p,e),p.length-1)}pe.Ra();var ut=[null,se,he,ve,be,we,Oe,xe,Ee,Ce,Pe,Te,Me,Re,ke,Ie,De,He,Ne,Qe,Ze,$e,et,tt,rt],st={b:function(e,t,n){throw new me(e).Ra(t,n),e},p:function(){Z("To use dlopen, you need enable dynamic linking, see https://emscripten.org/docs/compiling/Dynamic-Linking.html")},N:function(e){pt(e,!v,1,!m),pe.Ua()},k:function(e){b?postMessage({cmd:"cleanupThread",thread:e}):ae(e)},C:ye,h:be,U:we,y:Oe,B:xe,V:Ee,R:Ce,J:Pe,Q:Te,o:Me,A:Re,w:ke,T:Ie,x:De,D:function(){return 131072},Y:function(){return!0},u:function(e,t){e==t?setTimeout((()=>Ge())):b?postMessage({targetThread:e,cmd:"checkMailbox"}):(e=pe.Ha[e])&&e.postMessage({cmd:"checkMailbox"})},L:function(){return-1},M:Ue,X:function(e){y&&pe.Ha[e].ref()},G:function(e,t){e=new Date(1e3*je(e)),a()[t>>2>>>0]=e.getUTCSeconds(),a()[t+4>>2>>>0]=e.getUTCMinutes(),a()[t+8>>2>>>0]=e.getUTCHours(),a()[t+12>>2>>>0]=e.getUTCDate(),a()[t+16>>2>>>0]=e.getUTCMonth(),a()[t+20>>2>>>0]=e.getUTCFullYear()-1900,a()[t+24>>2>>>0]=e.getUTCDay(),e=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,a()[t+28>>2>>>0]=e},H:function(e,t){e=new Date(1e3*je(e)),a()[t>>2>>>0]=e.getSeconds(),a()[t+4>>2>>>0]=e.getMinutes(),a()[t+8>>2>>>0]=e.getHours(),a()[t+12>>2>>>0]=e.getDate(),a()[t+16>>2>>>0]=e.getMonth(),a()[t+20>>2>>>0]=e.getFullYear()-1900,a()[t+24>>2>>>0]=e.getDay();var n=0|Fe(e);a()[t+28>>2>>>0]=n,a()[t+36>>2>>>0]=-60*e.getTimezoneOffset(),n=new Date(e.getFullYear(),6,1).getTimezoneOffset();var r=new Date(e.getFullYear(),0,1).getTimezoneOffset();e=0|(n!=r&&e.getTimezoneOffset()==Math.min(r,n)),a()[t+32>>2>>>0]=e},I:function(e){var t=new Date(a()[e+20>>2>>>0]+1900,a()[e+16>>2>>>0],a()[e+12>>2>>>0],a()[e+8>>2>>>0],a()[e+4>>2>>>0],a()[e>>2>>>0],0),n=a()[e+32>>2>>>0],r=t.getTimezoneOffset(),o=new Date(t.getFullYear(),6,1).getTimezoneOffset(),i=new Date(t.getFullYear(),0,1).getTimezoneOffset(),c=Math.min(i,o);return 0>n?a()[e+32>>2>>>0]=Number(o!=i&&c==r):0<n!=(c==r)&&(o=Math.max(i,o),t.setTime(t.getTime()+6e4*((0<n?c:o)-r))),a()[e+24>>2>>>0]=t.getDay(),n=0|Fe(t),a()[e+28>>2>>>0]=n,a()[e>>2>>>0]=t.getSeconds(),a()[e+4>>2>>>0]=t.getMinutes(),a()[e+8>>2>>>0]=t.getHours(),a()[e+12>>2>>>0]=t.getDate(),a()[e+16>>2>>>0]=t.getMonth(),a()[e+20>>2>>>0]=t.getYear(),t.getTime()/1e3|0},E:He,F:Ne,t:function(e,t,n){function r(e){return(e=e.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?e[1]:"GMT"}var i=(new Date).getFullYear(),c=new Date(i,0,1),u=new Date(i,6,1);i=c.getTimezoneOffset();var s=u.getTimezoneOffset(),l=Math.max(i,s);o()[e>>2>>>0]=60*l,a()[t>>2>>>0]=Number(i!=s),e=r(c),t=r(u),e=Ke(e),t=Ke(t),s<i?(o()[n>>2>>>0]=e,o()[n+4>>2>>>0]=t):(o()[n>>2>>>0]=t,o()[n+4>>2>>>0]=e)},c:function(){Z("")},S:function(){Z("To use dlopen, you need enable dynamic linking, see https://emscripten.org/docs/compiling/Dynamic-Linking.html")},l:function(){},i:function(){return Date.now()},W:function(){throw K+=1,"unwind"},v:function(){return 4294901760},e:Le,f:function(){return y?n(993).cpus().length:navigator.hardwareConcurrency},K:function(e,t,n){qe.length=t,n>>=3;for(var r=0;r<t;r++)qe[r]=i()[n+r>>>0];return ut[e].apply(null,qe)},s:function(e){var t=r().length;if((e>>>=0)<=t||4294901760<e)return!1;for(var n=1;4>=n;n*=2){var a=t*(1+.2/n);a=Math.min(a,e+100663296);var o=Math,i=o.min;a=Math.max(e,a),a+=(65536-a%65536)%65536;e:{var c=M.buffer;try{M.grow(i.call(o,4294901760,a)-c.byteLength+65535>>>16),L();var u=1;break e}catch(e){}u=void 0}if(u)return!0}return!1},O:Qe,P:Ze,j:le,g:$e,n:et,q:tt,m:rt,r:function(e,t){return at(r().subarray(e>>>0,e+t>>>0)),0},a:M||c.wasmMemory,z:ct,d:function(e,t,n,r){return ct(e,t,n,r)}};!function(){function e(e,t){return e=e.exports,c.asm=e,pe.Va.push(c.asm.va),z=c.asm.wa,H.unshift(c.asm.Z),R=t,pe.eb((()=>{if(J--,c.monitorRunDependencies&&c.monitorRunDependencies(J),0==J&&(null!==X&&(clearInterval(X),X=null),Q)){var e=Q;Q=null,e()}})),e}var t={a:st};if(J++,c.monitorRunDependencies&&c.monitorRunDependencies(J),c.instantiateWasm)try{return c.instantiateWasm(t,e)}catch(e){P("Module.instantiateWasm callback failed with error: "+e),s(e)}(function(e,t){var n=q;return E||"function"!=typeof WebAssembly.instantiateStreaming||$(n)||n.startsWith("file://")||y||"function"!=typeof fetch?te(n,e,t):fetch(n,{credentials:"same-origin"}).then((r=>WebAssembly.instantiateStreaming(r,e).then(t,(function(r){return P("wasm streaming compile failed: "+r),P("falling back to ArrayBuffer instantiation"),te(n,e,t)}))))})(t,(function(t){e(t.instance,t.module)})).catch(s)}(),c._OrtInit=function(){return(c._OrtInit=c.asm._).apply(null,arguments)},c._OrtGetLastError=function(){return(c._OrtGetLastError=c.asm.$).apply(null,arguments)},c._OrtCreateSessionOptions=function(){return(c._OrtCreateSessionOptions=c.asm.aa).apply(null,arguments)},c._OrtAppendExecutionProvider=function(){return(c._OrtAppendExecutionProvider=c.asm.ba).apply(null,arguments)},c._OrtAddSessionConfigEntry=function(){return(c._OrtAddSessionConfigEntry=c.asm.ca).apply(null,arguments)},c._OrtReleaseSessionOptions=function(){return(c._OrtReleaseSessionOptions=c.asm.da).apply(null,arguments)},c._OrtCreateSession=function(){return(c._OrtCreateSession=c.asm.ea).apply(null,arguments)},c._OrtReleaseSession=function(){return(c._OrtReleaseSession=c.asm.fa).apply(null,arguments)},c._OrtGetInputOutputCount=function(){return(c._OrtGetInputOutputCount=c.asm.ga).apply(null,arguments)},c._OrtGetInputName=function(){return(c._OrtGetInputName=c.asm.ha).apply(null,arguments)},c._OrtGetOutputName=function(){return(c._OrtGetOutputName=c.asm.ia).apply(null,arguments)},c._OrtFree=function(){return(c._OrtFree=c.asm.ja).apply(null,arguments)},c._OrtCreateTensor=function(){return(c._OrtCreateTensor=c.asm.ka).apply(null,arguments)},c._OrtGetTensorData=function(){return(c._OrtGetTensorData=c.asm.la).apply(null,arguments)},c._OrtReleaseTensor=function(){return(c._OrtReleaseTensor=c.asm.ma).apply(null,arguments)},c._OrtCreateRunOptions=function(){return(c._OrtCreateRunOptions=c.asm.na).apply(null,arguments)},c._OrtAddRunConfigEntry=function(){return(c._OrtAddRunConfigEntry=c.asm.oa).apply(null,arguments)},c._OrtReleaseRunOptions=function(){return(c._OrtReleaseRunOptions=c.asm.pa).apply(null,arguments)},c._OrtRun=function(){return(c._OrtRun=c.asm.qa).apply(null,arguments)},c._OrtEndProfiling=function(){return(c._OrtEndProfiling=c.asm.ra).apply(null,arguments)};var lt=c._pthread_self=function(){return(lt=c._pthread_self=c.asm.sa).apply(null,arguments)},ft=c._malloc=function(){return(ft=c._malloc=c.asm.ta).apply(null,arguments)};c._free=function(){return(c._free=c.asm.ua).apply(null,arguments)},c.__emscripten_tls_init=function(){return(c.__emscripten_tls_init=c.asm.va).apply(null,arguments)};var pt=c.__emscripten_thread_init=function(){return(pt=c.__emscripten_thread_init=c.asm.xa).apply(null,arguments)};function dt(){return(dt=c.asm.za).apply(null,arguments)}function ht(){return(ht=c.asm.Aa).apply(null,arguments)}c.__emscripten_thread_crashed=function(){return(c.__emscripten_thread_crashed=c.asm.ya).apply(null,arguments)};var gt,mt=c.__emscripten_thread_exit=function(){return(mt=c.__emscripten_thread_exit=c.asm.Ba).apply(null,arguments)},vt=c.__emscripten_check_mailbox=function(){return(vt=c.__emscripten_check_mailbox=c.asm.Ca).apply(null,arguments)};function yt(){return(yt=c.asm.Da).apply(null,arguments)}function bt(){return(bt=c.asm.Ea).apply(null,arguments)}function wt(){return(wt=c.asm.Fa).apply(null,arguments)}function _t(){return(_t=c.asm.Ga).apply(null,arguments)}function St(){function e(){if(!gt&&(gt=!0,c.calledRun=!0,!B)&&(b||de(H),u(c),c.onRuntimeInitialized&&c.onRuntimeInitialized(),!b)){if(c.postRun)for("function"==typeof c.postRun&&(c.postRun=[c.postRun]);c.postRun.length;){var e=c.postRun.shift();N.unshift(e)}de(N)}}if(!(0<J))if(b)u(c),b||de(H),startWorker(c);else{if(c.preRun)for("function"==typeof c.preRun&&(c.preRun=[c.preRun]);c.preRun.length;)V();de(F),0<J||(c.setStatus?(c.setStatus("Running..."),setTimeout((function(){setTimeout((function(){c.setStatus("")}),1),e()}),1)):e())}}if(c.keepRuntimeAlive=Y,c.wasmMemory=M,c.stackAlloc=_t,c.stackSave=bt,c.stackRestore=wt,c.UTF8ToString=ue,c.stringToUTF8=Ae,c.lengthBytesUTF8=_e,c.ExitStatus=ne,c.PThread=pe,Q=function e(){gt||St(),gt||(Q=e)},c.preInit)for("function"==typeof c.preInit&&(c.preInit=[c.preInit]);0<c.preInit.length;)c.preInit.pop()();return St(),e.ready});e.exports=r},932:function(e,t,n){var _scriptDir,r=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,"undefined"!=typeof __filename&&(_scriptDir=_scriptDir||__filename),function(e={}){var t,r,a;t||(t=void 0!==e?e:{}),t.ready=new Promise(((e,t)=>{r=e,a=t}));var o,i,c,u=Object.assign({},t),s="./this.program",l=(e,t)=>{throw t},f="object"==typeof window,p="function"==typeof importScripts,d="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,h="";if(d){var g=n(384),m=n(908);h=p?m.dirname(h)+"/":__dirname+"/",o=(e,t)=>(e=e.startsWith("file://")?new URL(e):m.normalize(e),g.readFileSync(e,t?void 0:"utf8")),c=e=>((e=o(e,!0)).buffer||(e=new Uint8Array(e)),e),i=(e,t,n,r=!0)=>{e=e.startsWith("file://")?new URL(e):m.normalize(e),g.readFile(e,r?void 0:"utf8",((e,a)=>{e?n(e):t(r?a.buffer:a)}))},!t.thisProgram&&1<process.argv.length&&(s=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),l=(e,t)=>{throw process.exitCode=e,t},t.inspect=()=>"[Emscripten Module object]"}else(f||p)&&(p?h=self.location.href:"undefined"!=typeof document&&document.currentScript&&(h=document.currentScript.src),_scriptDir&&(h=_scriptDir),h=0!==h.indexOf("blob:")?h.substr(0,h.replace(/[?#].*/,"").lastIndexOf("/")+1):"",o=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},p&&(c=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),i=(e,t,n)=>{var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)});var v,y=t.print||console.log.bind(console),b=t.printErr||console.warn.bind(console);Object.assign(t,u),u=null,t.thisProgram&&(s=t.thisProgram),t.quit&&(l=t.quit),t.wasmBinary&&(v=t.wasmBinary);var w=t.noExitRuntime||!0;"object"!=typeof WebAssembly&&G("no native wasm support detected");var _,S,A,O,x,E=!1;function C(){var e=_.buffer;t.HEAP8=S=new Int8Array(e),t.HEAP16=new Int16Array(e),t.HEAP32=O=new Int32Array(e),t.HEAPU8=A=new Uint8Array(e),t.HEAPU16=new Uint16Array(e),t.HEAPU32=x=new Uint32Array(e),t.HEAPF32=new Float32Array(e),t.HEAPF64=new Float64Array(e)}var P=[],T=[],M=[];function R(){var e=t.preRun.shift();P.unshift(e)}var k,I=0,D=null,U=null;function G(e){throw t.onAbort&&t.onAbort(e),b(e="Aborted("+e+")"),E=!0,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),a(e),e}function j(e){return e.startsWith("data:application/octet-stream;base64,")}if(!j(k="ort-wasm.wasm")){var B=k;k=t.locateFile?t.locateFile(B,h):h+B}function L(e){try{if(e==k&&v)return new Uint8Array(v);if(c)return c(e);throw"both async and sync fetching of the wasm failed"}catch(e){G(e)}}function W(e,t,n){return function(e){if(!v&&(f||p)){if("function"==typeof fetch&&!e.startsWith("file://"))return fetch(e,{credentials:"same-origin"}).then((t=>{if(!t.ok)throw"failed to load wasm binary file at \'"+e+"\'";return t.arrayBuffer()})).catch((()=>L(e)));if(i)return new Promise(((t,n)=>{i(e,(e=>t(new Uint8Array(e))),n)}))}return Promise.resolve().then((()=>L(e)))}(e).then((e=>WebAssembly.instantiate(e,t))).then((e=>e)).then(n,(e=>{b("failed to asynchronously prepare wasm: "+e),G(e)}))}function z(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function F(e){for(;0<e.length;)e.shift()(t)}function H(e){this.ra=e-24,this.wa=function(e){x[this.ra+4>>2>>>0]=e},this.va=function(e){x[this.ra+8>>2>>>0]=e},this.ta=function(e,t){this.ua(),this.wa(e),this.va(t)},this.ua=function(){x[this.ra+16>>2>>>0]=0}}var N="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function K(e,t,n){var r=(t>>>=0)+n;for(n=t;e[n]&&!(n>=r);)++n;if(16<n-t&&e.buffer&&N)return N.decode(e.subarray(t,n));for(r="";t<n;){var a=e[t++];if(128&a){var o=63&e[t++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|o);else{var i=63&e[t++];65536>(a=224==(240&a)?(15&a)<<12|o<<6|i:(7&a)<<18|o<<12|i<<6|63&e[t++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function Y(e,t){return(e>>>=0)?K(A,e,t):""}function V(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);127>=r?t++:2047>=r?t+=2:55296<=r&&57343>=r?(t+=4,++n):t+=3}return t}function q(e,t,n,r){if(!(0<r))return 0;var a=n>>>=0;r=n+r-1;for(var o=0;o<e.length;++o){var i=e.charCodeAt(o);if(55296<=i&&57343>=i&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++o)),127>=i){if(n>=r)break;t[n++>>>0]=i}else{if(2047>=i){if(n+1>=r)break;t[n++>>>0]=192|i>>6}else{if(65535>=i){if(n+2>=r)break;t[n++>>>0]=224|i>>12}else{if(n+3>=r)break;t[n++>>>0]=240|i>>18,t[n++>>>0]=128|i>>12&63}t[n++>>>0]=128|i>>6&63}t[n++>>>0]=128|63&i}}return t[n>>>0]=0,n-a}function J(e,t,n){return q(e,A,t,n)}function X(e){return 0==e%4&&(0!=e%100||0==e%400)}var Q=[0,31,60,91,121,152,182,213,244,274,305,335],Z=[0,31,59,90,120,151,181,212,243,273,304,334];function $(e){return(X(e.getFullYear())?Q:Z)[e.getMonth()]+e.getDate()-1}function ee(e){var t=V(e)+1,n=fe(t);return n&&J(e,n,t),n}var te={};function ne(){if(!re){var e,t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:s||"./this.program"};for(e in te)void 0===te[e]?delete t[e]:t[e]=te[e];var n=[];for(e in t)n.push(e+"="+t[e]);re=n}return re}var re,ae=[null,[],[]];function oe(e){return(oe=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues)return e=>crypto.getRandomValues(e);if(d)try{var e=n(760);if(e.randomFillSync)return t=>e.randomFillSync(t);var t=e.randomBytes;return e=>(e.set(t(e.byteLength)),e)}catch(e){}G("initRandomDevice")}())(e)}var ie=[31,29,31,30,31,30,31,31,30,31,30,31],ce=[31,28,31,30,31,30,31,31,30,31,30,31];function ue(e,t,n,r){function a(e,t,n){for(e="number"==typeof e?e.toString():e||"";e.length<t;)e=n[0]+e;return e}function o(e,t){return a(e,t,"0")}function i(e,t){function n(e){return 0>e?-1:0<e?1:0}var r;return 0===(r=n(e.getFullYear()-t.getFullYear()))&&0===(r=n(e.getMonth()-t.getMonth()))&&(r=n(e.getDate()-t.getDate())),r}function c(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function u(e){var t=e.na;for(e=new Date(new Date(e.oa+1900,0,1).getTime());0<t;){var n=e.getMonth(),r=(X(e.getFullYear())?ie:ce)[n];if(!(t>r-e.getDate())){e.setDate(e.getDate()+t);break}t-=r-e.getDate()+1,e.setDate(1),11>n?e.setMonth(n+1):(e.setMonth(0),e.setFullYear(e.getFullYear()+1))}return n=new Date(e.getFullYear()+1,0,4),t=c(new Date(e.getFullYear(),0,4)),n=c(n),0>=i(t,e)?0>=i(n,e)?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1}var s=O[r+40>>2>>>0];for(var l in r={za:O[r>>2>>>0],ya:O[r+4>>2>>>0],pa:O[r+8>>2>>>0],sa:O[r+12>>2>>>0],qa:O[r+16>>2>>>0],oa:O[r+20>>2>>>0],ja:O[r+24>>2>>>0],na:O[r+28>>2>>>0],Ba:O[r+32>>2>>>0],xa:O[r+36>>2>>>0],Aa:s?Y(s):""},n=Y(n),s={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})n=n.replace(new RegExp(l,"g"),s[l]);var f="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),p="January February March April May June July August September October November December".split(" ");for(l in s={"%a":function(e){return f[e.ja].substring(0,3)},"%A":function(e){return f[e.ja]},"%b":function(e){return p[e.qa].substring(0,3)},"%B":function(e){return p[e.qa]},"%C":function(e){return o((e.oa+1900)/100|0,2)},"%d":function(e){return o(e.sa,2)},"%e":function(e){return a(e.sa,2," ")},"%g":function(e){return u(e).toString().substring(2)},"%G":function(e){return u(e)},"%H":function(e){return o(e.pa,2)},"%I":function(e){return 0==(e=e.pa)?e=12:12<e&&(e-=12),o(e,2)},"%j":function(e){for(var t=0,n=0;n<=e.qa-1;t+=(X(e.oa+1900)?ie:ce)[n++]);return o(e.sa+t,3)},"%m":function(e){return o(e.qa+1,2)},"%M":function(e){return o(e.ya,2)},"%n":function(){return"\\n"},"%p":function(e){return 0<=e.pa&&12>e.pa?"AM":"PM"},"%S":function(e){return o(e.za,2)},"%t":function(){return"\\t"},"%u":function(e){return e.ja||7},"%U":function(e){return o(Math.floor((e.na+7-e.ja)/7),2)},"%V":function(e){var t=Math.floor((e.na+7-(e.ja+6)%7)/7);if(2>=(e.ja+371-e.na-2)%7&&t++,t)53==t&&(4==(n=(e.ja+371-e.na)%7)||3==n&&X(e.oa)||(t=1));else{t=52;var n=(e.ja+7-e.na-1)%7;(4==n||5==n&&X(e.oa%400-1))&&t++}return o(t,2)},"%w":function(e){return e.ja},"%W":function(e){return o(Math.floor((e.na+7-(e.ja+6)%7)/7),2)},"%y":function(e){return(e.oa+1900).toString().substring(2)},"%Y":function(e){return e.oa+1900},"%z":function(e){var t=0<=(e=e.xa);return e=Math.abs(e)/60,(t?"+":"-")+String("0000"+(e/60*100+e%60)).slice(-4)},"%Z":function(e){return e.Aa},"%%":function(){return"%"}},n=n.replace(/%%/g,"\\0\\0"),s)n.includes(l)&&(n=n.replace(new RegExp(l,"g"),s[l](r)));return l=function(e){var t=Array(V(e)+1);return q(e,t,0,t.length),t}(n=n.replace(/\\0\\0/g,"%")),l.length>t?0:(S.set(l,e>>>0),l.length-1)}var se={a:function(e,t,n){throw new H(e).ta(t,n),e},l:function(){G("To use dlopen, you need enable dynamic linking, see https://emscripten.org/docs/compiling/Dynamic-Linking.html")},f:function(){return 0},K:function(){},u:function(){},x:function(){},M:function(){return 0},I:function(){},D:function(){},H:function(){},j:function(){},w:function(){},s:function(){},J:function(){},t:function(){},k:function(){return!0},A:function(e,t){e=new Date(1e3*(x[e>>>2]+4294967296*O[e+4>>>2])),O[t>>2>>>0]=e.getUTCSeconds(),O[t+4>>2>>>0]=e.getUTCMinutes(),O[t+8>>2>>>0]=e.getUTCHours(),O[t+12>>2>>>0]=e.getUTCDate(),O[t+16>>2>>>0]=e.getUTCMonth(),O[t+20>>2>>>0]=e.getUTCFullYear()-1900,O[t+24>>2>>>0]=e.getUTCDay(),O[t+28>>2>>>0]=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},B:function(e,t){e=new Date(1e3*(x[e>>>2]+4294967296*O[e+4>>>2])),O[t>>2>>>0]=e.getSeconds(),O[t+4>>2>>>0]=e.getMinutes(),O[t+8>>2>>>0]=e.getHours(),O[t+12>>2>>>0]=e.getDate(),O[t+16>>2>>>0]=e.getMonth(),O[t+20>>2>>>0]=e.getFullYear()-1900,O[t+24>>2>>>0]=e.getDay(),O[t+28>>2>>>0]=0|$(e),O[t+36>>2>>>0]=-60*e.getTimezoneOffset();var n=new Date(e.getFullYear(),6,1).getTimezoneOffset(),r=new Date(e.getFullYear(),0,1).getTimezoneOffset();O[t+32>>2>>>0]=0|(n!=r&&e.getTimezoneOffset()==Math.min(r,n))},C:function(e){var t=new Date(O[e+20>>2>>>0]+1900,O[e+16>>2>>>0],O[e+12>>2>>>0],O[e+8>>2>>>0],O[e+4>>2>>>0],O[e>>2>>>0],0),n=O[e+32>>2>>>0],r=t.getTimezoneOffset(),a=new Date(t.getFullYear(),6,1).getTimezoneOffset(),o=new Date(t.getFullYear(),0,1).getTimezoneOffset(),i=Math.min(o,a);return 0>n?O[e+32>>2>>>0]=Number(a!=o&&i==r):0<n!=(i==r)&&(a=Math.max(o,a),t.setTime(t.getTime()+6e4*((0<n?i:a)-r))),O[e+24>>2>>>0]=t.getDay(),O[e+28>>2>>>0]=0|$(t),O[e>>2>>>0]=t.getSeconds(),O[e+4>>2>>>0]=t.getMinutes(),O[e+8>>2>>>0]=t.getHours(),O[e+12>>2>>>0]=t.getDate(),O[e+16>>2>>>0]=t.getMonth(),O[e+20>>2>>>0]=t.getYear(),t.getTime()/1e3|0},y:function(){return-52},z:function(){},q:function(e,t,n){function r(e){return(e=e.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?e[1]:"GMT"}var a=(new Date).getFullYear(),o=new Date(a,0,1),i=new Date(a,6,1);a=o.getTimezoneOffset();var c=i.getTimezoneOffset();x[e>>2>>>0]=60*Math.max(a,c),O[t>>2>>>0]=Number(a!=c),e=r(o),t=r(i),e=ee(e),t=ee(t),c<a?(x[n>>2>>>0]=e,x[n+4>>2>>>0]=t):(x[n>>2>>>0]=t,x[n+4>>2>>>0]=e)},d:function(){G("")},G:function(){G("To use dlopen, you need enable dynamic linking, see https://emscripten.org/docs/compiling/Dynamic-Linking.html")},g:function(){return Date.now()},r:function(){return 4294901760},b:d?()=>{var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:()=>performance.now(),L:function(e,t,n){A.copyWithin(e>>>0,t>>>0,t+n>>>0)},p:function(e){var t=A.length;if(4294901760<(e>>>=0))return!1;for(var n=1;4>=n;n*=2){var r=t*(1+.2/n);r=Math.min(r,e+100663296);var a=Math,o=a.min;r=Math.max(e,r),r+=(65536-r%65536)%65536;e:{var i=_.buffer;try{_.grow(o.call(a,4294901760,r)-i.byteLength+65535>>>16),C();var c=1;break e}catch(e){}c=void 0}if(c)return!0}return!1},E:function(e,t){var n=0;return ne().forEach((function(r,a){var o=t+n;for(a=x[e+4*a>>2>>>0]=o,o=0;o<r.length;++o)S[a++>>0>>>0]=r.charCodeAt(o);S[a>>0>>>0]=0,n+=r.length+1})),0},F:function(e,t){var n=ne();x[e>>2>>>0]=n.length;var r=0;return n.forEach((function(e){r+=e.length+1})),x[t>>2>>>0]=r,0},m:function(e){w||(t.onExit&&t.onExit(e),E=!0),l(e,new z(e))},e:function(){return 52},i:function(){return 52},n:function(){return 70},h:function(e,t,n,r){for(var a=0,o=0;o<n;o++){var i=x[t>>2>>>0],c=x[t+4>>2>>>0];t+=8;for(var u=0;u<c;u++){var s=A[i+u>>>0],l=ae[e];0===s||10===s?((1===e?y:b)(K(l,0)),l.length=0):l.push(s)}a+=c}return x[r>>2>>>0]=a,0},o:function(e,t){return oe(A.subarray(e>>>0,e+t>>>0)),0},v:ue,c:function(e,t,n,r){return ue(e,t,n,r)}};!function(){function e(e){if(e=e.exports,t.asm=e,_=t.asm.N,C(),T.unshift(t.asm.O),I--,t.monitorRunDependencies&&t.monitorRunDependencies(I),0==I&&(null!==D&&(clearInterval(D),D=null),U)){var n=U;U=null,n()}return e}var n={a:se};if(I++,t.monitorRunDependencies&&t.monitorRunDependencies(I),t.instantiateWasm)try{return t.instantiateWasm(n,e)}catch(e){b("Module.instantiateWasm callback failed with error: "+e),a(e)}(function(e,t){var n=k;return v||"function"!=typeof WebAssembly.instantiateStreaming||j(n)||n.startsWith("file://")||d||"function"!=typeof fetch?W(n,e,t):fetch(n,{credentials:"same-origin"}).then((r=>WebAssembly.instantiateStreaming(r,e).then(t,(function(r){return b("wasm streaming compile failed: "+r),b("falling back to ArrayBuffer instantiation"),W(n,e,t)}))))})(n,(function(t){e(t.instance)})).catch(a)}(),t._OrtInit=function(){return(t._OrtInit=t.asm.P).apply(null,arguments)},t._OrtGetLastError=function(){return(t._OrtGetLastError=t.asm.Q).apply(null,arguments)},t._OrtCreateSessionOptions=function(){return(t._OrtCreateSessionOptions=t.asm.R).apply(null,arguments)},t._OrtAppendExecutionProvider=function(){return(t._OrtAppendExecutionProvider=t.asm.S).apply(null,arguments)},t._OrtAddSessionConfigEntry=function(){return(t._OrtAddSessionConfigEntry=t.asm.T).apply(null,arguments)},t._OrtReleaseSessionOptions=function(){return(t._OrtReleaseSessionOptions=t.asm.U).apply(null,arguments)},t._OrtCreateSession=function(){return(t._OrtCreateSession=t.asm.V).apply(null,arguments)},t._OrtReleaseSession=function(){return(t._OrtReleaseSession=t.asm.W).apply(null,arguments)},t._OrtGetInputOutputCount=function(){return(t._OrtGetInputOutputCount=t.asm.X).apply(null,arguments)},t._OrtGetInputName=function(){return(t._OrtGetInputName=t.asm.Y).apply(null,arguments)},t._OrtGetOutputName=function(){return(t._OrtGetOutputName=t.asm.Z).apply(null,arguments)},t._OrtFree=function(){return(t._OrtFree=t.asm._).apply(null,arguments)},t._OrtCreateTensor=function(){return(t._OrtCreateTensor=t.asm.$).apply(null,arguments)},t._OrtGetTensorData=function(){return(t._OrtGetTensorData=t.asm.aa).apply(null,arguments)},t._OrtReleaseTensor=function(){return(t._OrtReleaseTensor=t.asm.ba).apply(null,arguments)},t._OrtCreateRunOptions=function(){return(t._OrtCreateRunOptions=t.asm.ca).apply(null,arguments)},t._OrtAddRunConfigEntry=function(){return(t._OrtAddRunConfigEntry=t.asm.da).apply(null,arguments)},t._OrtReleaseRunOptions=function(){return(t._OrtReleaseRunOptions=t.asm.ea).apply(null,arguments)},t._OrtRun=function(){return(t._OrtRun=t.asm.fa).apply(null,arguments)},t._OrtEndProfiling=function(){return(t._OrtEndProfiling=t.asm.ga).apply(null,arguments)};var le,fe=t._malloc=function(){return(fe=t._malloc=t.asm.ha).apply(null,arguments)};function pe(){return(pe=t.asm.ka).apply(null,arguments)}function de(){return(de=t.asm.la).apply(null,arguments)}function he(){return(he=t.asm.ma).apply(null,arguments)}function ge(){function e(){if(!le&&(le=!0,t.calledRun=!0,!E)){if(F(T),r(t),t.onRuntimeInitialized&&t.onRuntimeInitialized(),t.postRun)for("function"==typeof t.postRun&&(t.postRun=[t.postRun]);t.postRun.length;){var e=t.postRun.shift();M.unshift(e)}F(M)}}if(!(0<I)){if(t.preRun)for("function"==typeof t.preRun&&(t.preRun=[t.preRun]);t.preRun.length;)R();F(P),0<I||(t.setStatus?(t.setStatus("Running..."),setTimeout((function(){setTimeout((function(){t.setStatus("")}),1),e()}),1)):e())}}if(t._free=function(){return(t._free=t.asm.ia).apply(null,arguments)},t.stackAlloc=he,t.stackSave=pe,t.stackRestore=de,t.UTF8ToString=Y,t.stringToUTF8=J,t.lengthBytesUTF8=V,U=function e(){le||ge(),le||(U=e)},t.preInit)for("function"==typeof t.preInit&&(t.preInit=[t.preInit]);0<t.preInit.length;)t.preInit.pop()();return ge(),e.ready});e.exports=r},154:function(e){"use strict";e.exports=\'"use strict";var e={},a="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(a){var r=require("worker_threads"),t=r.parentPort;t.on("message",(e=>onmessage({data:e})));var s=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:function(e){(0,eval)(s.readFileSync(e,"utf8")+"//# sourceURL="+e)},postMessage:function(e){t.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var o=!1,n=function(){var e=Array.prototype.slice.call(arguments).join(" ");a?s.writeSync(2,e+"\\\\n"):console.error(e)};self.alert=function(){var a=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:a,threadId:e._pthread_self()})},e.instantiateWasm=(a,r)=>{var t=e.wasmModule;return e.wasmModule=null,r(new WebAssembly.Instance(t,a))},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=function a(r){try{if("load"===r.data.cmd){let s=[];self.onmessage=e=>s.push(e),self.startWorker=r=>{e=r,postMessage({cmd:"loaded"});for(let e of s)a(e);self.onmessage=a},e.wasmModule=r.data.wasmModule;for(const a of r.data.handlers)e[a]=function(){postMessage({cmd:"callHandler",handler:a,args:[...arguments]})};if(e.wasmMemory=r.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof r.data.urlOrBlob)importScripts(r.data.urlOrBlob);else{var t=URL.createObjectURL(r.data.urlOrBlob);importScripts(t),URL.revokeObjectURL(t)}ortWasmThreaded(e)}else if("run"===r.data.cmd){e.__emscripten_thread_init(r.data.pthread_ptr,0,0,1),e.__emscripten_thread_mailbox_await(r.data.pthread_ptr),e.establishStackSpace(),e.PThread.receiveObjectTransfer(r.data),e.PThread.threadInitTLS(),o||(o=!0);try{e.invokeEntryPoint(r.data.start_routine,r.data.arg)}catch(e){if("unwind"!=e)throw e}}else"cancel"===r.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===r.data.target||("checkMailbox"===r.data.cmd?o&&e.checkMailbox():r.data.cmd&&(n("worker.js received unknown command "+r.data.cmd),n(r.data)))}catch(a){throw e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),a}};\\n\'},760:function(){},384:function(){},993:function(){},908:function(){},953:function(){},925:function(){},449:function(){}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}!function(){"use strict";var e=n(259),t=n(263);self.onmessage=function(n){switch(n.data.type){case"init-wasm":try{(0,t.initializeWebAssembly)(n.data.in).then((function(){return postMessage({type:"init-wasm"})}),(function(e){return postMessage({type:"init-wasm",err:e})}))}catch(e){postMessage({type:"init-wasm",err:e})}break;case"init-ort":try{(0,e.initRuntime)(n.data.in).then((function(){return postMessage({type:"init-ort"})}),(function(e){return postMessage({type:"init-ort",err:e})})),postMessage({type:"init-ort"})}catch(e){postMessage({type:"init-ort",err:e})}break;case"create_allocate":try{var r=n.data.in.model,a=(0,e.createSessionAllocate)(r);postMessage({type:"create_allocate",out:a})}catch(e){postMessage({type:"create_allocate",err:e})}break;case"create_finalize":try{var o=n.data.in,i=(a=o.modeldata,o.options),c=(0,e.createSessionFinalize)(a,i);postMessage({type:"create_finalize",out:c})}catch(e){postMessage({type:"create_finalize",err:e})}break;case"create":try{var u=n.data.in;r=u.model,i=u.options,c=(0,e.createSession)(r,i),postMessage({type:"create",out:c})}catch(e){postMessage({type:"create",err:e})}break;case"release":try{var s=n.data.in;(0,e.releaseSession)(s),postMessage({type:"release"})}catch(e){postMessage({type:"release",err:e})}break;case"run":try{var l=n.data.in,f=l.sessionId,p=l.inputIndices,d=l.inputs,h=l.outputIndices;i=l.options,(0,e.run)(f,p,d,h,i).then((function(t){postMessage({type:"run",out:t},(0,e.extractTransferableBuffers)(t))}),(function(e){postMessage({type:"run",err:e})}))}catch(e){postMessage({type:"run",err:e})}break;case"end-profiling":try{s=n.data.in,(0,e.endProfiling)(s),postMessage({type:"end-profiling"})}catch(e){postMessage({type:"end-profiling",err:e})}}}}()}();\n',"Worker",void 0,void 0)}},6614:function(t){"use strict";t.exports=function(t,e,n,r){var o=self||window;try{try{var a;try{a=new o.Blob([t])}catch(e){(a=new(o.BlobBuilder||o.WebKitBlobBuilder||o.MozBlobBuilder||o.MSBlobBuilder)).append(t),a=a.getBlob()}var i=o.URL||o.webkitURL,s=i.createObjectURL(a),u=new o[e](s,n);return i.revokeObjectURL(s),u}catch(r){return new o[e]("data:application/javascript,".concat(encodeURIComponent(t)),n)}}catch(t){if(!r)throw Error("Inline worker is not supported");return new o[e](r,n)}}},3474:function(t,e,n){var _scriptDir,r=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,"undefined"!=typeof __filename&&(_scriptDir=_scriptDir||__filename),function(t={}){function e(){return D.buffer!=R.buffer&&U(),R}function r(){return D.buffer!=R.buffer&&U(),M}function o(){return D.buffer!=R.buffer&&U(),L}function a(){return D.buffer!=R.buffer&&U(),F}function i(){return D.buffer!=R.buffer&&U(),N}var s,u,c;s||(s=void 0!==t?t:{}),s.ready=new Promise(((t,e)=>{u=t,c=e}));var l,f,p,d=Object.assign({},s),h="./this.program",g=(t,e)=>{throw e},m="object"==typeof window,y="function"==typeof importScripts,b="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,v=s.ENVIRONMENT_IS_PTHREAD||!1,w="";function _(t){return s.locateFile?s.locateFile(t,w):w+t}if(b){var x=n(1384),T=n(908);let e;w=y?T.dirname(w)+"/":__dirname+"/",l=(t,e)=>(t=t.startsWith("file://")?new URL(t):T.normalize(t),x.readFileSync(t,e?void 0:"utf8")),p=t=>((t=l(t,!0)).buffer||(t=new Uint8Array(t)),t),f=(t,e,n,r=!0)=>{t=t.startsWith("file://")?new URL(t):T.normalize(t),x.readFile(t,r?void 0:"utf8",((t,o)=>{t?n(t):e(r?o.buffer:o)}))},!s.thisProgram&&1<process.argv.length&&(h=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),g=(t,e)=>{throw process.exitCode=t,e},s.inspect=()=>"[Emscripten Module object]";try{e=n(9925)}catch(t){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),t}global.Worker=e.Worker}else(m||y)&&(y?w=self.location.href:"undefined"!=typeof document&&document.currentScript&&(w=document.currentScript.src),_scriptDir&&(w=_scriptDir),w=0!==w.indexOf("blob:")?w.substr(0,w.replace(/[?#].*/,"").lastIndexOf("/")+1):"",b||(l=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},y&&(p=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),f=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)}));b&&"undefined"==typeof performance&&(global.performance=n(6953).performance);var S=console.log.bind(console),A=console.warn.bind(console);b&&(S=(...t)=>x.writeSync(1,t.join(" ")+"\n"),A=(...t)=>x.writeSync(2,t.join(" ")+"\n"));var O,E=s.print||S,P=s.printErr||A;Object.assign(s,d),d=null,s.thisProgram&&(h=s.thisProgram),s.quit&&(g=s.quit),s.wasmBinary&&(O=s.wasmBinary);var I=s.noExitRuntime||!0;"object"!=typeof WebAssembly&&Q("no native wasm support detected");var D,k,C,R,M,L,F,N,j=!1;function U(){var t=D.buffer;s.HEAP8=R=new Int8Array(t),s.HEAP16=new Int16Array(t),s.HEAP32=L=new Int32Array(t),s.HEAPU8=M=new Uint8Array(t),s.HEAPU16=new Uint16Array(t),s.HEAPU32=F=new Uint32Array(t),s.HEAPF32=new Float32Array(t),s.HEAPF64=N=new Float64Array(t)}var B=s.INITIAL_MEMORY||16777216;if(5242880<=B||Q("INITIAL_MEMORY should be larger than STACK_SIZE, was "+B+"! (STACK_SIZE=5242880)"),v)D=s.wasmMemory;else if(s.wasmMemory)D=s.wasmMemory;else if(!((D=new WebAssembly.Memory({initial:B/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw P("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),b&&P("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");U(),B=D.buffer.byteLength;var G,z=[],V=[],W=[],H=0;function q(){return I||0<H}function K(){var t=s.preRun.shift();z.unshift(t)}var Y,X=0,Z=null,J=null;function Q(t){throw s.onAbort&&s.onAbort(t),P(t="Aborted("+t+")"),j=!0,C=1,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),c(t),t}function $(t){return t.startsWith("data:application/octet-stream;base64,")}function tt(t){try{if(t==Y&&O)return new Uint8Array(O);if(p)return p(t);throw"both async and sync fetching of the wasm failed"}catch(t){Q(t)}}function et(t,e,n){return function(t){if(!O&&(m||y)){if("function"==typeof fetch&&!t.startsWith("file://"))return fetch(t,{credentials:"same-origin"}).then((e=>{if(!e.ok)throw"failed to load wasm binary file at '"+t+"'";return e.arrayBuffer()})).catch((()=>tt(t)));if(f)return new Promise(((e,n)=>{f(t,(t=>e(new Uint8Array(t))),n)}))}return Promise.resolve().then((()=>tt(t)))}(t).then((t=>WebAssembly.instantiate(t,e))).then((t=>t)).then(n,(t=>{P("failed to asynchronously prepare wasm: "+t),Q(t)}))}function nt(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function rt(t){t.terminate(),t.onmessage=()=>{}}function ot(t){(t=pt.Ha[t])||Q(),pt.hb(t)}function at(t){var e=pt.bb();if(!e)return 6;pt.Ka.push(e),pt.Ha[t.Ja]=e,e.Ja=t.Ja;var n={cmd:"run",start_routine:t.ib,arg:t.$a,pthread_ptr:t.Ja};return b&&e.unref(),e.postMessage(n,t.ob),0}$(Y="ort-wasm-threaded.wasm")||(Y=_(Y));var it="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function st(t,e,n){var r=(e>>>=0)+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&it)return it.decode(t.buffer instanceof SharedArrayBuffer?t.slice(e,n):t.subarray(e,n));for(r="";e<n;){var o=t[e++];if(128&o){var a=63&t[e++];if(192==(224&o))r+=String.fromCharCode((31&o)<<6|a);else{var i=63&t[e++];65536>(o=224==(240&o)?(15&o)<<12|a<<6|i:(7&o)<<18|a<<12|i<<6|63&t[e++])?r+=String.fromCharCode(o):(o-=65536,r+=String.fromCharCode(55296|o>>10,56320|1023&o))}}else r+=String.fromCharCode(o)}return r}function ut(t,e){return(t>>>=0)?st(r(),t,e):""}function ct(t){if(v)return qt(1,1,t);C=t,q()||(pt.jb(),s.onExit&&s.onExit(t),j=!0),g(t,new nt(t))}function lt(t){if(C=t,v)throw ht(t),"unwind";ct(t)}function ft(t){t instanceof nt||"unwind"==t||g(1,t)}var pt={Na:[],Ka:[],Va:[],Ha:{},Ra:function(){v&&pt.cb()},rb:function(){},cb:function(){pt.receiveObjectTransfer=pt.gb,pt.threadInitTLS=pt.Ua,pt.setExitStatus=pt.Ta,I=!1},Ta:function(t){C=t},tb:["$terminateWorker"],jb:function(){for(var t of pt.Ka)rt(t);for(t of pt.Na)rt(t);pt.Na=[],pt.Ka=[],pt.Ha=[]},hb:function(t){var e=t.Ja;delete pt.Ha[e],pt.Na.push(t),pt.Ka.splice(pt.Ka.indexOf(t),1),t.Ja=0,he(e)},gb:function(){},Ua:function(){pt.Va.forEach((t=>t()))},fb:t=>new Promise((e=>{t.onmessage=n=>{var r=(n=n.data).cmd;if(t.Ja&&(pt.ab=t.Ja),n.targetThread&&n.targetThread!=le()){var o=pt.Ha[n.sb];o?o.postMessage(n,n.transferList):P('Internal error! Worker sent a message "'+r+'" to target pthread '+n.targetThread+", but that thread no longer exists!")}else"checkMailbox"===r?Ft():"spawnThread"===r?at(n):"cleanupThread"===r?ot(n.thread):"killThread"===r?(n=n.thread,r=pt.Ha[n],delete pt.Ha[n],rt(r),he(n),pt.Ka.splice(pt.Ka.indexOf(r),1),r.Ja=0):"cancelThread"===r?pt.Ha[n.thread].postMessage({cmd:"cancel"}):"loaded"===r?(t.loaded=!0,e(t)):"print"===r?E("Thread "+n.threadId+": "+n.text):"printErr"===r?P("Thread "+n.threadId+": "+n.text):"alert"===r?alert("Thread "+n.threadId+": "+n.text):"setimmediate"===n.target?t.postMessage(n):"callHandler"===r?s[n.handler](...n.args):r&&P("worker sent an unknown command "+r);pt.ab=void 0},t.onerror=t=>{throw P("worker sent an error! "+t.filename+":"+t.lineno+": "+t.message),t},b&&(t.on("message",(function(e){t.onmessage({data:e})})),t.on("error",(function(e){t.onerror(e)})));var n,r=[];for(n of["onExit","onAbort","print","printErr"])s.hasOwnProperty(n)&&r.push(n);t.postMessage({cmd:"load",handlers:r,urlOrBlob:s.mainScriptUrlOrBlob||_scriptDir,wasmMemory:D,wasmModule:k})})),eb:function(t){t()},Za:function(){var t=_("ort-wasm-threaded.worker.js");t=new Worker(t),pt.Na.push(t)},bb:function(){return 0==pt.Na.length&&(pt.Za(),pt.fb(pt.Na[0])),pt.Na.pop()}};function dt(t){for(;0<t.length;)t.shift()(s)}function ht(t){if(v)return qt(2,0,t);lt(t)}s.PThread=pt,s.establishStackSpace=function(){var t=le(),e=o()[t+52>>2>>>0];be(e,e-(t=o()[t+56>>2>>>0])),we(e)};var gt=[];function mt(t){this.Qa=t-24,this.Ya=function(t){a()[this.Qa+4>>2>>>0]=t},this.Xa=function(t){a()[this.Qa+8>>2>>>0]=t},this.Ra=function(t,e){this.Wa(),this.Ya(t),this.Xa(e)},this.Wa=function(){a()[this.Qa+16>>2>>>0]=0}}function yt(t,e,n,r){return v?qt(3,1,t,e,n,r):bt(t,e,n,r)}function bt(t,e,n,r){if("undefined"==typeof SharedArrayBuffer)return P("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var o=[];return v&&0===o.length?yt(t,e,n,r):(t={ib:n,Ja:t,$a:r,ob:o},v?(t.qb="spawnThread",postMessage(t,o),0):at(t))}function vt(t,e,n){return v?qt(4,1,t,e,n):0}function wt(t,e){if(v)return qt(5,1,t,e)}function _t(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e}function xt(t,e,n,r){if(!(0<r))return 0;var o=n>>>=0;r=n+r-1;for(var a=0;a<t.length;++a){var i=t.charCodeAt(a);if(55296<=i&&57343>=i&&(i=65536+((1023&i)<<10)|1023&t.charCodeAt(++a)),127>=i){if(n>=r)break;e[n++>>>0]=i}else{if(2047>=i){if(n+1>=r)break;e[n++>>>0]=192|i>>6}else{if(65535>=i){if(n+2>=r)break;e[n++>>>0]=224|i>>12}else{if(n+3>=r)break;e[n++>>>0]=240|i>>18,e[n++>>>0]=128|i>>12&63}e[n++>>>0]=128|i>>6&63}e[n++>>>0]=128|63&i}}return e[n>>>0]=0,n-o}function Tt(t,e,n){return xt(t,r(),e,n)}function St(t,e){if(v)return qt(6,1,t,e)}function At(t,e,n){if(v)return qt(7,1,t,e,n)}function Ot(t,e,n){return v?qt(8,1,t,e,n):0}function Et(t,e){if(v)return qt(9,1,t,e)}function Pt(t,e,n){if(v)return qt(10,1,t,e,n)}function It(t,e,n,r){if(v)return qt(11,1,t,e,n,r)}function Dt(t,e,n,r){if(v)return qt(12,1,t,e,n,r)}function kt(t,e,n,r){if(v)return qt(13,1,t,e,n,r)}function Ct(t){if(v)return qt(14,1,t)}function Rt(t,e){if(v)return qt(15,1,t,e)}function Mt(t,e,n){if(v)return qt(16,1,t,e,n)}function Lt(t){"function"==typeof Atomics.pb&&(Atomics.pb(o(),t>>2,t).value.then(Ft),t+=128,Atomics.store(o(),t>>2,1))}function Ft(){var t=le();t&&(Lt(t),function(t){if(!j)try{if(ye(),!q())try{v?me(C):lt(C)}catch(t){ft(t)}}catch(t){ft(t)}}())}function Nt(t){return a()[t>>>2]+4294967296*o()[t+4>>>2]}function jt(t){return 0==t%4&&(0!=t%100||0==t%400)}s.invokeEntryPoint=function(t,e){var n=gt[t];n||(t>=gt.length&&(gt.length=t+1),gt[t]=n=G.get(t)),t=n(e),q()?pt.Ta(t):me(t)},s.__emscripten_thread_mailbox_await=Lt,s.checkMailbox=Ft;var Ut,Bt=[0,31,60,91,121,152,182,213,244,274,305,335],Gt=[0,31,59,90,120,151,181,212,243,273,304,334];function zt(t){return(jt(t.getFullYear())?Bt:Gt)[t.getMonth()]+t.getDate()-1}function Vt(t,e,n,r,o,a,i){return v?qt(17,1,t,e,n,r,o,a,i):-52}function Wt(t,e,n,r,o,a){if(v)return qt(18,1,t,e,n,r,o,a)}function Ht(t){var e=_t(t)+1,n=fe(e);return n&&Tt(t,n,e),n}function qt(t,e){var n=arguments.length-2,r=arguments;return function(t){var e=ve();return t=t(),we(e),t}((()=>{for(var o=_e(8*n),a=o>>3,s=0;s<n;s++){var u=r[2+s];i()[a+s>>>0]=u}return de(t,n,o,e)}))}Ut=b?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.timeOrigin+performance.now();var Kt,Yt=[],Xt={};function Zt(){if(!Kt){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:h||"./this.program"};for(t in Xt)void 0===Xt[t]?delete e[t]:e[t]=Xt[t];var n=[];for(t in e)n.push(t+"="+e[t]);Kt=n}return Kt}function Jt(t,n){if(v)return qt(19,1,t,n);var r=0;return Zt().forEach((function(o,i){var s=n+r;for(i=a()[t+4*i>>2>>>0]=s,s=0;s<o.length;++s)e()[i++>>0>>>0]=o.charCodeAt(s);e()[i>>0>>>0]=0,r+=o.length+1})),0}function Qt(t,e){if(v)return qt(20,1,t,e);var n=Zt();a()[t>>2>>>0]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),a()[e>>2>>>0]=r,0}function $t(t){return v?qt(21,1,t):52}function te(t,e,n,r){return v?qt(22,1,t,e,n,r):52}function ee(t,e,n,r,o){return v?qt(23,1,t,e,n,r,o):70}var ne=[null,[],[]];function re(t,e,n,o){if(v)return qt(24,1,t,e,n,o);for(var i=0,s=0;s<n;s++){var u=a()[e>>2>>>0],c=a()[e+4>>2>>>0];e+=8;for(var l=0;l<c;l++){var f=r()[u+l>>>0],p=ne[t];0===f||10===f?((1===t?E:P)(st(p,0)),p.length=0):p.push(f)}i+=c}return a()[o>>2>>>0]=i,0}function oe(t){return(oe=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues)return t=>(t.set(crypto.getRandomValues(new Uint8Array(t.byteLength))),t);if(b)try{var t=n(760);if(t.randomFillSync)return e=>t.randomFillSync(e);var e=t.randomBytes;return t=>(t.set(e(t.byteLength)),t)}catch(t){}Q("initRandomDevice")}())(t)}var ae=[31,29,31,30,31,30,31,31,30,31,30,31],ie=[31,28,31,30,31,30,31,31,30,31,30,31];function se(t,n,r,a){function i(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function s(t,e){return i(t,e,"0")}function u(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function c(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function l(t){var e=t.La;for(t=new Date(new Date(t.Ma+1900,0,1).getTime());0<e;){var n=t.getMonth(),r=(jt(t.getFullYear())?ae:ie)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=c(new Date(t.getFullYear(),0,4)),n=c(n),0>=u(e,t)?0>=u(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var f=o()[a+40>>2>>>0];for(var p in a={mb:o()[a>>2>>>0],lb:o()[a+4>>2>>>0],Oa:o()[a+8>>2>>>0],Sa:o()[a+12>>2>>>0],Pa:o()[a+16>>2>>>0],Ma:o()[a+20>>2>>>0],Ia:o()[a+24>>2>>>0],La:o()[a+28>>2>>>0],ub:o()[a+32>>2>>>0],kb:o()[a+36>>2>>>0],nb:f?ut(f):""},r=ut(r),f={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})r=r.replace(new RegExp(p,"g"),f[p]);var d="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),h="January February March April May June July August September October November December".split(" ");for(p in f={"%a":function(t){return d[t.Ia].substring(0,3)},"%A":function(t){return d[t.Ia]},"%b":function(t){return h[t.Pa].substring(0,3)},"%B":function(t){return h[t.Pa]},"%C":function(t){return s((t.Ma+1900)/100|0,2)},"%d":function(t){return s(t.Sa,2)},"%e":function(t){return i(t.Sa,2," ")},"%g":function(t){return l(t).toString().substring(2)},"%G":function(t){return l(t)},"%H":function(t){return s(t.Oa,2)},"%I":function(t){return 0==(t=t.Oa)?t=12:12<t&&(t-=12),s(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.Pa-1;e+=(jt(t.Ma+1900)?ae:ie)[n++]);return s(t.Sa+e,3)},"%m":function(t){return s(t.Pa+1,2)},"%M":function(t){return s(t.lb,2)},"%n":function(){return"\n"},"%p":function(t){return 0<=t.Oa&&12>t.Oa?"AM":"PM"},"%S":function(t){return s(t.mb,2)},"%t":function(){return"\t"},"%u":function(t){return t.Ia||7},"%U":function(t){return s(Math.floor((t.La+7-t.Ia)/7),2)},"%V":function(t){var e=Math.floor((t.La+7-(t.Ia+6)%7)/7);if(2>=(t.Ia+371-t.La-2)%7&&e++,e)53==e&&(4==(n=(t.Ia+371-t.La)%7)||3==n&&jt(t.Ma)||(e=1));else{e=52;var n=(t.Ia+7-t.La-1)%7;(4==n||5==n&&jt(t.Ma%400-1))&&e++}return s(e,2)},"%w":function(t){return t.Ia},"%W":function(t){return s(Math.floor((t.La+7-(t.Ia+6)%7)/7),2)},"%y":function(t){return(t.Ma+1900).toString().substring(2)},"%Y":function(t){return t.Ma+1900},"%z":function(t){var e=0<=(t=t.kb);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.nb},"%%":function(){return"%"}},r=r.replace(/%%/g,"\0\0"),f)r.includes(p)&&(r=r.replace(new RegExp(p,"g"),f[p](a)));return p=function(t){var e=Array(_t(t)+1);return xt(t,e,0,e.length),e}(r=r.replace(/\0\0/g,"%")),p.length>n?0:(function(t,n){e().set(t,n>>>0)}(p,t),p.length-1)}pt.Ra();var ue=[null,ct,ht,yt,vt,wt,St,At,Ot,Et,Pt,It,Dt,kt,Ct,Rt,Mt,Vt,Wt,Jt,Qt,$t,te,ee,re],ce={b:function(t,e,n){throw new mt(t).Ra(e,n),t},p:function(){Q("To use dlopen, you need enable dynamic linking, see https://emscripten.org/docs/compiling/Dynamic-Linking.html")},N:function(t){pe(t,!y,1,!m),pt.Ua()},k:function(t){v?postMessage({cmd:"cleanupThread",thread:t}):ot(t)},C:bt,h:vt,U:wt,y:St,B:At,V:Ot,R:Et,J:Pt,Q:It,o:Dt,A:kt,w:Ct,T:Rt,x:Mt,D:function(){return 131072},Y:function(){return!0},u:function(t,e){t==e?setTimeout((()=>Ft())):v?postMessage({targetThread:t,cmd:"checkMailbox"}):(t=pt.Ha[t])&&t.postMessage({cmd:"checkMailbox"})},L:function(){return-1},M:Lt,X:function(t){b&&pt.Ha[t].ref()},G:function(t,e){t=new Date(1e3*Nt(t)),o()[e>>2>>>0]=t.getUTCSeconds(),o()[e+4>>2>>>0]=t.getUTCMinutes(),o()[e+8>>2>>>0]=t.getUTCHours(),o()[e+12>>2>>>0]=t.getUTCDate(),o()[e+16>>2>>>0]=t.getUTCMonth(),o()[e+20>>2>>>0]=t.getUTCFullYear()-1900,o()[e+24>>2>>>0]=t.getUTCDay(),t=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,o()[e+28>>2>>>0]=t},H:function(t,e){t=new Date(1e3*Nt(t)),o()[e>>2>>>0]=t.getSeconds(),o()[e+4>>2>>>0]=t.getMinutes(),o()[e+8>>2>>>0]=t.getHours(),o()[e+12>>2>>>0]=t.getDate(),o()[e+16>>2>>>0]=t.getMonth(),o()[e+20>>2>>>0]=t.getFullYear()-1900,o()[e+24>>2>>>0]=t.getDay();var n=0|zt(t);o()[e+28>>2>>>0]=n,o()[e+36>>2>>>0]=-60*t.getTimezoneOffset(),n=new Date(t.getFullYear(),6,1).getTimezoneOffset();var r=new Date(t.getFullYear(),0,1).getTimezoneOffset();t=0|(n!=r&&t.getTimezoneOffset()==Math.min(r,n)),o()[e+32>>2>>>0]=t},I:function(t){var e=new Date(o()[t+20>>2>>>0]+1900,o()[t+16>>2>>>0],o()[t+12>>2>>>0],o()[t+8>>2>>>0],o()[t+4>>2>>>0],o()[t>>2>>>0],0),n=o()[t+32>>2>>>0],r=e.getTimezoneOffset(),a=new Date(e.getFullYear(),6,1).getTimezoneOffset(),i=new Date(e.getFullYear(),0,1).getTimezoneOffset(),s=Math.min(i,a);return 0>n?o()[t+32>>2>>>0]=Number(a!=i&&s==r):0<n!=(s==r)&&(a=Math.max(i,a),e.setTime(e.getTime()+6e4*((0<n?s:a)-r))),o()[t+24>>2>>>0]=e.getDay(),n=0|zt(e),o()[t+28>>2>>>0]=n,o()[t>>2>>>0]=e.getSeconds(),o()[t+4>>2>>>0]=e.getMinutes(),o()[t+8>>2>>>0]=e.getHours(),o()[t+12>>2>>>0]=e.getDate(),o()[t+16>>2>>>0]=e.getMonth(),o()[t+20>>2>>>0]=e.getYear(),e.getTime()/1e3|0},E:Vt,F:Wt,t:function(t,e,n){function r(t){return(t=t.toTimeString().match(/\(([A-Za-z ]+)\)$/))?t[1]:"GMT"}var i=(new Date).getFullYear(),s=new Date(i,0,1),u=new Date(i,6,1);i=s.getTimezoneOffset();var c=u.getTimezoneOffset(),l=Math.max(i,c);a()[t>>2>>>0]=60*l,o()[e>>2>>>0]=Number(i!=c),t=r(s),e=r(u),t=Ht(t),e=Ht(e),c<i?(a()[n>>2>>>0]=t,a()[n+4>>2>>>0]=e):(a()[n>>2>>>0]=e,a()[n+4>>2>>>0]=t)},c:function(){Q("")},S:function(){Q("To use dlopen, you need enable dynamic linking, see https://emscripten.org/docs/compiling/Dynamic-Linking.html")},l:function(){},i:function(){return Date.now()},W:function(){throw H+=1,"unwind"},v:function(){return 4294901760},e:Ut,f:function(){return b?n(3993).cpus().length:navigator.hardwareConcurrency},K:function(t,e,n){Yt.length=e,n>>=3;for(var r=0;r<e;r++)Yt[r]=i()[n+r>>>0];return ue[t].apply(null,Yt)},s:function(t){var e=r().length;if((t>>>=0)<=e||4294901760<t)return!1;for(var n=1;4>=n;n*=2){var o=e*(1+.2/n);o=Math.min(o,t+100663296);var a=Math,i=a.min;o=Math.max(t,o),o+=(65536-o%65536)%65536;t:{var s=D.buffer;try{D.grow(i.call(a,4294901760,o)-s.byteLength+65535>>>16),U();var u=1;break t}catch(t){}u=void 0}if(u)return!0}return!1},O:Jt,P:Qt,j:lt,g:$t,n:te,q:ee,m:re,r:function(t,e){return oe(r().subarray(t>>>0,t+e>>>0)),0},a:D||s.wasmMemory,z:se,d:function(t,e,n,r){return se(t,e,n,r)}};!function(){function t(t,e){return t=t.exports,s.asm=t,pt.Va.push(s.asm.va),G=s.asm.wa,V.unshift(s.asm.Z),k=e,pt.eb((()=>{if(X--,s.monitorRunDependencies&&s.monitorRunDependencies(X),0==X&&(null!==Z&&(clearInterval(Z),Z=null),J)){var t=J;J=null,t()}})),t}var e={a:ce};if(X++,s.monitorRunDependencies&&s.monitorRunDependencies(X),s.instantiateWasm)try{return s.instantiateWasm(e,t)}catch(t){P("Module.instantiateWasm callback failed with error: "+t),c(t)}(function(t,e){var n=Y;return O||"function"!=typeof WebAssembly.instantiateStreaming||$(n)||n.startsWith("file://")||b||"function"!=typeof fetch?et(n,t,e):fetch(n,{credentials:"same-origin"}).then((r=>WebAssembly.instantiateStreaming(r,t).then(e,(function(r){return P("wasm streaming compile failed: "+r),P("falling back to ArrayBuffer instantiation"),et(n,t,e)}))))})(e,(function(e){t(e.instance,e.module)})).catch(c)}(),s._OrtInit=function(){return(s._OrtInit=s.asm._).apply(null,arguments)},s._OrtGetLastError=function(){return(s._OrtGetLastError=s.asm.$).apply(null,arguments)},s._OrtCreateSessionOptions=function(){return(s._OrtCreateSessionOptions=s.asm.aa).apply(null,arguments)},s._OrtAppendExecutionProvider=function(){return(s._OrtAppendExecutionProvider=s.asm.ba).apply(null,arguments)},s._OrtAddSessionConfigEntry=function(){return(s._OrtAddSessionConfigEntry=s.asm.ca).apply(null,arguments)},s._OrtReleaseSessionOptions=function(){return(s._OrtReleaseSessionOptions=s.asm.da).apply(null,arguments)},s._OrtCreateSession=function(){return(s._OrtCreateSession=s.asm.ea).apply(null,arguments)},s._OrtReleaseSession=function(){return(s._OrtReleaseSession=s.asm.fa).apply(null,arguments)},s._OrtGetInputOutputCount=function(){return(s._OrtGetInputOutputCount=s.asm.ga).apply(null,arguments)},s._OrtGetInputName=function(){return(s._OrtGetInputName=s.asm.ha).apply(null,arguments)},s._OrtGetOutputName=function(){return(s._OrtGetOutputName=s.asm.ia).apply(null,arguments)},s._OrtFree=function(){return(s._OrtFree=s.asm.ja).apply(null,arguments)},s._OrtCreateTensor=function(){return(s._OrtCreateTensor=s.asm.ka).apply(null,arguments)},s._OrtGetTensorData=function(){return(s._OrtGetTensorData=s.asm.la).apply(null,arguments)},s._OrtReleaseTensor=function(){return(s._OrtReleaseTensor=s.asm.ma).apply(null,arguments)},s._OrtCreateRunOptions=function(){return(s._OrtCreateRunOptions=s.asm.na).apply(null,arguments)},s._OrtAddRunConfigEntry=function(){return(s._OrtAddRunConfigEntry=s.asm.oa).apply(null,arguments)},s._OrtReleaseRunOptions=function(){return(s._OrtReleaseRunOptions=s.asm.pa).apply(null,arguments)},s._OrtRun=function(){return(s._OrtRun=s.asm.qa).apply(null,arguments)},s._OrtEndProfiling=function(){return(s._OrtEndProfiling=s.asm.ra).apply(null,arguments)};var le=s._pthread_self=function(){return(le=s._pthread_self=s.asm.sa).apply(null,arguments)},fe=s._malloc=function(){return(fe=s._malloc=s.asm.ta).apply(null,arguments)};s._free=function(){return(s._free=s.asm.ua).apply(null,arguments)},s.__emscripten_tls_init=function(){return(s.__emscripten_tls_init=s.asm.va).apply(null,arguments)};var pe=s.__emscripten_thread_init=function(){return(pe=s.__emscripten_thread_init=s.asm.xa).apply(null,arguments)};function de(){return(de=s.asm.za).apply(null,arguments)}function he(){return(he=s.asm.Aa).apply(null,arguments)}s.__emscripten_thread_crashed=function(){return(s.__emscripten_thread_crashed=s.asm.ya).apply(null,arguments)};var ge,me=s.__emscripten_thread_exit=function(){return(me=s.__emscripten_thread_exit=s.asm.Ba).apply(null,arguments)},ye=s.__emscripten_check_mailbox=function(){return(ye=s.__emscripten_check_mailbox=s.asm.Ca).apply(null,arguments)};function be(){return(be=s.asm.Da).apply(null,arguments)}function ve(){return(ve=s.asm.Ea).apply(null,arguments)}function we(){return(we=s.asm.Fa).apply(null,arguments)}function _e(){return(_e=s.asm.Ga).apply(null,arguments)}function xe(){function t(){if(!ge&&(ge=!0,s.calledRun=!0,!j)&&(v||dt(V),u(s),s.onRuntimeInitialized&&s.onRuntimeInitialized(),!v)){if(s.postRun)for("function"==typeof s.postRun&&(s.postRun=[s.postRun]);s.postRun.length;){var t=s.postRun.shift();W.unshift(t)}dt(W)}}if(!(0<X))if(v)u(s),v||dt(V),startWorker(s);else{if(s.preRun)for("function"==typeof s.preRun&&(s.preRun=[s.preRun]);s.preRun.length;)K();dt(z),0<X||(s.setStatus?(s.setStatus("Running..."),setTimeout((function(){setTimeout((function(){s.setStatus("")}),1),t()}),1)):t())}}if(s.keepRuntimeAlive=q,s.wasmMemory=D,s.stackAlloc=_e,s.stackSave=ve,s.stackRestore=we,s.UTF8ToString=ut,s.stringToUTF8=Tt,s.lengthBytesUTF8=_t,s.ExitStatus=nt,s.PThread=pt,J=function t(){ge||xe(),ge||(J=t)},s.preInit)for("function"==typeof s.preInit&&(s.preInit=[s.preInit]);0<s.preInit.length;)s.preInit.pop()();return xe(),t.ready});t.exports=r},932:function(t,e,n){var _scriptDir,r=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,"undefined"!=typeof __filename&&(_scriptDir=_scriptDir||__filename),function(t={}){var e,r,o;e||(e=void 0!==t?t:{}),e.ready=new Promise(((t,e)=>{r=t,o=e}));var a,i,s,u=Object.assign({},e),c="./this.program",l=(t,e)=>{throw e},f="object"==typeof window,p="function"==typeof importScripts,d="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,h="";if(d){var g=n(1384),m=n(908);h=p?m.dirname(h)+"/":__dirname+"/",a=(t,e)=>(t=t.startsWith("file://")?new URL(t):m.normalize(t),g.readFileSync(t,e?void 0:"utf8")),s=t=>((t=a(t,!0)).buffer||(t=new Uint8Array(t)),t),i=(t,e,n,r=!0)=>{t=t.startsWith("file://")?new URL(t):m.normalize(t),g.readFile(t,r?void 0:"utf8",((t,o)=>{t?n(t):e(r?o.buffer:o)}))},!e.thisProgram&&1<process.argv.length&&(c=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),l=(t,e)=>{throw process.exitCode=t,e},e.inspect=()=>"[Emscripten Module object]"}else(f||p)&&(p?h=self.location.href:"undefined"!=typeof document&&document.currentScript&&(h=document.currentScript.src),_scriptDir&&(h=_scriptDir),h=0!==h.indexOf("blob:")?h.substr(0,h.replace(/[?#].*/,"").lastIndexOf("/")+1):"",a=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},p&&(s=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),i=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)});var y,b=e.print||console.log.bind(console),v=e.printErr||console.warn.bind(console);Object.assign(e,u),u=null,e.thisProgram&&(c=e.thisProgram),e.quit&&(l=e.quit),e.wasmBinary&&(y=e.wasmBinary);var w=e.noExitRuntime||!0;"object"!=typeof WebAssembly&&F("no native wasm support detected");var _,x,T,S,A,O=!1;function E(){var t=_.buffer;e.HEAP8=x=new Int8Array(t),e.HEAP16=new Int16Array(t),e.HEAP32=S=new Int32Array(t),e.HEAPU8=T=new Uint8Array(t),e.HEAPU16=new Uint16Array(t),e.HEAPU32=A=new Uint32Array(t),e.HEAPF32=new Float32Array(t),e.HEAPF64=new Float64Array(t)}var P=[],I=[],D=[];function k(){var t=e.preRun.shift();P.unshift(t)}var C,R=0,M=null,L=null;function F(t){throw e.onAbort&&e.onAbort(t),v(t="Aborted("+t+")"),O=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),o(t),t}function N(t){return t.startsWith("data:application/octet-stream;base64,")}if(!N(C="ort-wasm.wasm")){var j=C;C=e.locateFile?e.locateFile(j,h):h+j}function U(t){try{if(t==C&&y)return new Uint8Array(y);if(s)return s(t);throw"both async and sync fetching of the wasm failed"}catch(t){F(t)}}function B(t,e,n){return function(t){if(!y&&(f||p)){if("function"==typeof fetch&&!t.startsWith("file://"))return fetch(t,{credentials:"same-origin"}).then((e=>{if(!e.ok)throw"failed to load wasm binary file at '"+t+"'";return e.arrayBuffer()})).catch((()=>U(t)));if(i)return new Promise(((e,n)=>{i(t,(t=>e(new Uint8Array(t))),n)}))}return Promise.resolve().then((()=>U(t)))}(t).then((t=>WebAssembly.instantiate(t,e))).then((t=>t)).then(n,(t=>{v("failed to asynchronously prepare wasm: "+t),F(t)}))}function G(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function z(t){for(;0<t.length;)t.shift()(e)}function V(t){this.ra=t-24,this.wa=function(t){A[this.ra+4>>2>>>0]=t},this.va=function(t){A[this.ra+8>>2>>>0]=t},this.ta=function(t,e){this.ua(),this.wa(t),this.va(e)},this.ua=function(){A[this.ra+16>>2>>>0]=0}}var W="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function H(t,e,n){var r=(e>>>=0)+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&W)return W.decode(t.subarray(e,n));for(r="";e<n;){var o=t[e++];if(128&o){var a=63&t[e++];if(192==(224&o))r+=String.fromCharCode((31&o)<<6|a);else{var i=63&t[e++];65536>(o=224==(240&o)?(15&o)<<12|a<<6|i:(7&o)<<18|a<<12|i<<6|63&t[e++])?r+=String.fromCharCode(o):(o-=65536,r+=String.fromCharCode(55296|o>>10,56320|1023&o))}}else r+=String.fromCharCode(o)}return r}function q(t,e){return(t>>>=0)?H(T,t,e):""}function K(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e}function Y(t,e,n,r){if(!(0<r))return 0;var o=n>>>=0;r=n+r-1;for(var a=0;a<t.length;++a){var i=t.charCodeAt(a);if(55296<=i&&57343>=i&&(i=65536+((1023&i)<<10)|1023&t.charCodeAt(++a)),127>=i){if(n>=r)break;e[n++>>>0]=i}else{if(2047>=i){if(n+1>=r)break;e[n++>>>0]=192|i>>6}else{if(65535>=i){if(n+2>=r)break;e[n++>>>0]=224|i>>12}else{if(n+3>=r)break;e[n++>>>0]=240|i>>18,e[n++>>>0]=128|i>>12&63}e[n++>>>0]=128|i>>6&63}e[n++>>>0]=128|63&i}}return e[n>>>0]=0,n-o}function X(t,e,n){return Y(t,T,e,n)}function Z(t){return 0==t%4&&(0!=t%100||0==t%400)}var J=[0,31,60,91,121,152,182,213,244,274,305,335],Q=[0,31,59,90,120,151,181,212,243,273,304,334];function $(t){return(Z(t.getFullYear())?J:Q)[t.getMonth()]+t.getDate()-1}function tt(t){var e=K(t)+1,n=ft(e);return n&&X(t,n,e),n}var et={};function nt(){if(!rt){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:c||"./this.program"};for(t in et)void 0===et[t]?delete e[t]:e[t]=et[t];var n=[];for(t in e)n.push(t+"="+e[t]);rt=n}return rt}var rt,ot=[null,[],[]];function at(t){return(at=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues)return t=>crypto.getRandomValues(t);if(d)try{var t=n(760);if(t.randomFillSync)return e=>t.randomFillSync(e);var e=t.randomBytes;return t=>(t.set(e(t.byteLength)),t)}catch(t){}F("initRandomDevice")}())(t)}var it=[31,29,31,30,31,30,31,31,30,31,30,31],st=[31,28,31,30,31,30,31,31,30,31,30,31];function ut(t,e,n,r){function o(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function a(t,e){return o(t,e,"0")}function i(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function s(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function u(t){var e=t.na;for(t=new Date(new Date(t.oa+1900,0,1).getTime());0<e;){var n=t.getMonth(),r=(Z(t.getFullYear())?it:st)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=s(new Date(t.getFullYear(),0,4)),n=s(n),0>=i(e,t)?0>=i(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var c=S[r+40>>2>>>0];for(var l in r={za:S[r>>2>>>0],ya:S[r+4>>2>>>0],pa:S[r+8>>2>>>0],sa:S[r+12>>2>>>0],qa:S[r+16>>2>>>0],oa:S[r+20>>2>>>0],ja:S[r+24>>2>>>0],na:S[r+28>>2>>>0],Ba:S[r+32>>2>>>0],xa:S[r+36>>2>>>0],Aa:c?q(c):""},n=q(n),c={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})n=n.replace(new RegExp(l,"g"),c[l]);var f="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),p="January February March April May June July August September October November December".split(" ");for(l in c={"%a":function(t){return f[t.ja].substring(0,3)},"%A":function(t){return f[t.ja]},"%b":function(t){return p[t.qa].substring(0,3)},"%B":function(t){return p[t.qa]},"%C":function(t){return a((t.oa+1900)/100|0,2)},"%d":function(t){return a(t.sa,2)},"%e":function(t){return o(t.sa,2," ")},"%g":function(t){return u(t).toString().substring(2)},"%G":function(t){return u(t)},"%H":function(t){return a(t.pa,2)},"%I":function(t){return 0==(t=t.pa)?t=12:12<t&&(t-=12),a(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.qa-1;e+=(Z(t.oa+1900)?it:st)[n++]);return a(t.sa+e,3)},"%m":function(t){return a(t.qa+1,2)},"%M":function(t){return a(t.ya,2)},"%n":function(){return"\n"},"%p":function(t){return 0<=t.pa&&12>t.pa?"AM":"PM"},"%S":function(t){return a(t.za,2)},"%t":function(){return"\t"},"%u":function(t){return t.ja||7},"%U":function(t){return a(Math.floor((t.na+7-t.ja)/7),2)},"%V":function(t){var e=Math.floor((t.na+7-(t.ja+6)%7)/7);if(2>=(t.ja+371-t.na-2)%7&&e++,e)53==e&&(4==(n=(t.ja+371-t.na)%7)||3==n&&Z(t.oa)||(e=1));else{e=52;var n=(t.ja+7-t.na-1)%7;(4==n||5==n&&Z(t.oa%400-1))&&e++}return a(e,2)},"%w":function(t){return t.ja},"%W":function(t){return a(Math.floor((t.na+7-(t.ja+6)%7)/7),2)},"%y":function(t){return(t.oa+1900).toString().substring(2)},"%Y":function(t){return t.oa+1900},"%z":function(t){var e=0<=(t=t.xa);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.Aa},"%%":function(){return"%"}},n=n.replace(/%%/g,"\0\0"),c)n.includes(l)&&(n=n.replace(new RegExp(l,"g"),c[l](r)));return l=function(t){var e=Array(K(t)+1);return Y(t,e,0,e.length),e}(n=n.replace(/\0\0/g,"%")),l.length>e?0:(x.set(l,t>>>0),l.length-1)}var ct={a:function(t,e,n){throw new V(t).ta(e,n),t},l:function(){F("To use dlopen, you need enable dynamic linking, see https://emscripten.org/docs/compiling/Dynamic-Linking.html")},f:function(){return 0},K:function(){},u:function(){},x:function(){},M:function(){return 0},I:function(){},D:function(){},H:function(){},j:function(){},w:function(){},s:function(){},J:function(){},t:function(){},k:function(){return!0},A:function(t,e){t=new Date(1e3*(A[t>>>2]+4294967296*S[t+4>>>2])),S[e>>2>>>0]=t.getUTCSeconds(),S[e+4>>2>>>0]=t.getUTCMinutes(),S[e+8>>2>>>0]=t.getUTCHours(),S[e+12>>2>>>0]=t.getUTCDate(),S[e+16>>2>>>0]=t.getUTCMonth(),S[e+20>>2>>>0]=t.getUTCFullYear()-1900,S[e+24>>2>>>0]=t.getUTCDay(),S[e+28>>2>>>0]=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},B:function(t,e){t=new Date(1e3*(A[t>>>2]+4294967296*S[t+4>>>2])),S[e>>2>>>0]=t.getSeconds(),S[e+4>>2>>>0]=t.getMinutes(),S[e+8>>2>>>0]=t.getHours(),S[e+12>>2>>>0]=t.getDate(),S[e+16>>2>>>0]=t.getMonth(),S[e+20>>2>>>0]=t.getFullYear()-1900,S[e+24>>2>>>0]=t.getDay(),S[e+28>>2>>>0]=0|$(t),S[e+36>>2>>>0]=-60*t.getTimezoneOffset();var n=new Date(t.getFullYear(),6,1).getTimezoneOffset(),r=new Date(t.getFullYear(),0,1).getTimezoneOffset();S[e+32>>2>>>0]=0|(n!=r&&t.getTimezoneOffset()==Math.min(r,n))},C:function(t){var e=new Date(S[t+20>>2>>>0]+1900,S[t+16>>2>>>0],S[t+12>>2>>>0],S[t+8>>2>>>0],S[t+4>>2>>>0],S[t>>2>>>0],0),n=S[t+32>>2>>>0],r=e.getTimezoneOffset(),o=new Date(e.getFullYear(),6,1).getTimezoneOffset(),a=new Date(e.getFullYear(),0,1).getTimezoneOffset(),i=Math.min(a,o);return 0>n?S[t+32>>2>>>0]=Number(o!=a&&i==r):0<n!=(i==r)&&(o=Math.max(a,o),e.setTime(e.getTime()+6e4*((0<n?i:o)-r))),S[t+24>>2>>>0]=e.getDay(),S[t+28>>2>>>0]=0|$(e),S[t>>2>>>0]=e.getSeconds(),S[t+4>>2>>>0]=e.getMinutes(),S[t+8>>2>>>0]=e.getHours(),S[t+12>>2>>>0]=e.getDate(),S[t+16>>2>>>0]=e.getMonth(),S[t+20>>2>>>0]=e.getYear(),e.getTime()/1e3|0},y:function(){return-52},z:function(){},q:function(t,e,n){function r(t){return(t=t.toTimeString().match(/\(([A-Za-z ]+)\)$/))?t[1]:"GMT"}var o=(new Date).getFullYear(),a=new Date(o,0,1),i=new Date(o,6,1);o=a.getTimezoneOffset();var s=i.getTimezoneOffset();A[t>>2>>>0]=60*Math.max(o,s),S[e>>2>>>0]=Number(o!=s),t=r(a),e=r(i),t=tt(t),e=tt(e),s<o?(A[n>>2>>>0]=t,A[n+4>>2>>>0]=e):(A[n>>2>>>0]=e,A[n+4>>2>>>0]=t)},d:function(){F("")},G:function(){F("To use dlopen, you need enable dynamic linking, see https://emscripten.org/docs/compiling/Dynamic-Linking.html")},g:function(){return Date.now()},r:function(){return 4294901760},b:d?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now(),L:function(t,e,n){T.copyWithin(t>>>0,e>>>0,e+n>>>0)},p:function(t){var e=T.length;if(4294901760<(t>>>=0))return!1;for(var n=1;4>=n;n*=2){var r=e*(1+.2/n);r=Math.min(r,t+100663296);var o=Math,a=o.min;r=Math.max(t,r),r+=(65536-r%65536)%65536;t:{var i=_.buffer;try{_.grow(a.call(o,4294901760,r)-i.byteLength+65535>>>16),E();var s=1;break t}catch(t){}s=void 0}if(s)return!0}return!1},E:function(t,e){var n=0;return nt().forEach((function(r,o){var a=e+n;for(o=A[t+4*o>>2>>>0]=a,a=0;a<r.length;++a)x[o++>>0>>>0]=r.charCodeAt(a);x[o>>0>>>0]=0,n+=r.length+1})),0},F:function(t,e){var n=nt();A[t>>2>>>0]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),A[e>>2>>>0]=r,0},m:function(t){w||(e.onExit&&e.onExit(t),O=!0),l(t,new G(t))},e:function(){return 52},i:function(){return 52},n:function(){return 70},h:function(t,e,n,r){for(var o=0,a=0;a<n;a++){var i=A[e>>2>>>0],s=A[e+4>>2>>>0];e+=8;for(var u=0;u<s;u++){var c=T[i+u>>>0],l=ot[t];0===c||10===c?((1===t?b:v)(H(l,0)),l.length=0):l.push(c)}o+=s}return A[r>>2>>>0]=o,0},o:function(t,e){return at(T.subarray(t>>>0,t+e>>>0)),0},v:ut,c:function(t,e,n,r){return ut(t,e,n,r)}};!function(){function t(t){if(t=t.exports,e.asm=t,_=e.asm.N,E(),I.unshift(e.asm.O),R--,e.monitorRunDependencies&&e.monitorRunDependencies(R),0==R&&(null!==M&&(clearInterval(M),M=null),L)){var n=L;L=null,n()}return t}var n={a:ct};if(R++,e.monitorRunDependencies&&e.monitorRunDependencies(R),e.instantiateWasm)try{return e.instantiateWasm(n,t)}catch(t){v("Module.instantiateWasm callback failed with error: "+t),o(t)}(function(t,e){var n=C;return y||"function"!=typeof WebAssembly.instantiateStreaming||N(n)||n.startsWith("file://")||d||"function"!=typeof fetch?B(n,t,e):fetch(n,{credentials:"same-origin"}).then((r=>WebAssembly.instantiateStreaming(r,t).then(e,(function(r){return v("wasm streaming compile failed: "+r),v("falling back to ArrayBuffer instantiation"),B(n,t,e)}))))})(n,(function(e){t(e.instance)})).catch(o)}(),e._OrtInit=function(){return(e._OrtInit=e.asm.P).apply(null,arguments)},e._OrtGetLastError=function(){return(e._OrtGetLastError=e.asm.Q).apply(null,arguments)},e._OrtCreateSessionOptions=function(){return(e._OrtCreateSessionOptions=e.asm.R).apply(null,arguments)},e._OrtAppendExecutionProvider=function(){return(e._OrtAppendExecutionProvider=e.asm.S).apply(null,arguments)},e._OrtAddSessionConfigEntry=function(){return(e._OrtAddSessionConfigEntry=e.asm.T).apply(null,arguments)},e._OrtReleaseSessionOptions=function(){return(e._OrtReleaseSessionOptions=e.asm.U).apply(null,arguments)},e._OrtCreateSession=function(){return(e._OrtCreateSession=e.asm.V).apply(null,arguments)},e._OrtReleaseSession=function(){return(e._OrtReleaseSession=e.asm.W).apply(null,arguments)},e._OrtGetInputOutputCount=function(){return(e._OrtGetInputOutputCount=e.asm.X).apply(null,arguments)},e._OrtGetInputName=function(){return(e._OrtGetInputName=e.asm.Y).apply(null,arguments)},e._OrtGetOutputName=function(){return(e._OrtGetOutputName=e.asm.Z).apply(null,arguments)},e._OrtFree=function(){return(e._OrtFree=e.asm._).apply(null,arguments)},e._OrtCreateTensor=function(){return(e._OrtCreateTensor=e.asm.$).apply(null,arguments)},e._OrtGetTensorData=function(){return(e._OrtGetTensorData=e.asm.aa).apply(null,arguments)},e._OrtReleaseTensor=function(){return(e._OrtReleaseTensor=e.asm.ba).apply(null,arguments)},e._OrtCreateRunOptions=function(){return(e._OrtCreateRunOptions=e.asm.ca).apply(null,arguments)},e._OrtAddRunConfigEntry=function(){return(e._OrtAddRunConfigEntry=e.asm.da).apply(null,arguments)},e._OrtReleaseRunOptions=function(){return(e._OrtReleaseRunOptions=e.asm.ea).apply(null,arguments)},e._OrtRun=function(){return(e._OrtRun=e.asm.fa).apply(null,arguments)},e._OrtEndProfiling=function(){return(e._OrtEndProfiling=e.asm.ga).apply(null,arguments)};var lt,ft=e._malloc=function(){return(ft=e._malloc=e.asm.ha).apply(null,arguments)};function pt(){return(pt=e.asm.ka).apply(null,arguments)}function dt(){return(dt=e.asm.la).apply(null,arguments)}function ht(){return(ht=e.asm.ma).apply(null,arguments)}function gt(){function t(){if(!lt&&(lt=!0,e.calledRun=!0,!O)){if(z(I),r(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;){var t=e.postRun.shift();D.unshift(t)}z(D)}}if(!(0<R)){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)k();z(P),0<R||(e.setStatus?(e.setStatus("Running..."),setTimeout((function(){setTimeout((function(){e.setStatus("")}),1),t()}),1)):t())}}if(e._free=function(){return(e._free=e.asm.ia).apply(null,arguments)},e.stackAlloc=ht,e.stackSave=pt,e.stackRestore=dt,e.UTF8ToString=q,e.stringToUTF8=X,e.lengthBytesUTF8=K,L=function t(){lt||gt(),lt||(L=t)},e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);0<e.preInit.length;)e.preInit.pop()();return gt(),t.ready});t.exports=r},4537:function(t){"use strict";t.exports=function(t,e){for(var n=new Array(arguments.length-1),r=0,o=2,a=!0;o<arguments.length;)n[r++]=arguments[o++];return new Promise((function(o,i){n[r]=function(t){if(a)if(a=!1,t)i(t);else{for(var e=new Array(arguments.length-1),n=0;n<e.length;)e[n++]=arguments[n];o.apply(null,e)}};try{t.apply(e||null,n)}catch(t){a&&(a=!1,i(t))}}))}},7419:function(t,e){"use strict";var n=e;n.length=function(t){var e=t.length;if(!e)return 0;for(var n=0;--e%4>1&&"="===t.charAt(e);)++n;return Math.ceil(3*t.length)/4-n};for(var r=new Array(64),o=new Array(123),a=0;a<64;)o[r[a]=a<26?a+65:a<52?a+71:a<62?a-4:a-59|43]=a++;n.encode=function(t,e,n){for(var o,a=null,i=[],s=0,u=0;e<n;){var c=t[e++];switch(u){case 0:i[s++]=r[c>>2],o=(3&c)<<4,u=1;break;case 1:i[s++]=r[o|c>>4],o=(15&c)<<2,u=2;break;case 2:i[s++]=r[o|c>>6],i[s++]=r[63&c],u=0}s>8191&&((a||(a=[])).push(String.fromCharCode.apply(String,i)),s=0)}return u&&(i[s++]=r[o],i[s++]=61,1===u&&(i[s++]=61)),a?(s&&a.push(String.fromCharCode.apply(String,i.slice(0,s))),a.join("")):String.fromCharCode.apply(String,i.slice(0,s))};var i="invalid encoding";n.decode=function(t,e,n){for(var r,a=n,s=0,u=0;u<t.length;){var c=t.charCodeAt(u++);if(61===c&&s>1)break;if(void 0===(c=o[c]))throw Error(i);switch(s){case 0:r=c,s=1;break;case 1:e[n++]=r<<2|(48&c)>>4,r=c,s=2;break;case 2:e[n++]=(15&r)<<4|(60&c)>>2,r=c,s=3;break;case 3:e[n++]=(3&r)<<6|c,s=0}}if(1===s)throw Error(i);return n-a},n.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}},9211:function(t){"use strict";function e(){this._listeners={}}t.exports=e,e.prototype.on=function(t,e,n){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:e,ctx:n||this}),this},e.prototype.off=function(t,e){if(void 0===t)this._listeners={};else if(void 0===e)this._listeners[t]=[];else for(var n=this._listeners[t],r=0;r<n.length;)n[r].fn===e?n.splice(r,1):++r;return this},e.prototype.emit=function(t){var e=this._listeners[t];if(e){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<e.length;)e[r].fn.apply(e[r++].ctx,n)}return this}},945:function(t){"use strict";function e(t){return"undefined"!=typeof Float32Array?function(){var e=new Float32Array([-0]),n=new Uint8Array(e.buffer),r=128===n[3];function o(t,r,o){e[0]=t,r[o]=n[0],r[o+1]=n[1],r[o+2]=n[2],r[o+3]=n[3]}function a(t,r,o){e[0]=t,r[o]=n[3],r[o+1]=n[2],r[o+2]=n[1],r[o+3]=n[0]}function i(t,r){return n[0]=t[r],n[1]=t[r+1],n[2]=t[r+2],n[3]=t[r+3],e[0]}function s(t,r){return n[3]=t[r],n[2]=t[r+1],n[1]=t[r+2],n[0]=t[r+3],e[0]}t.writeFloatLE=r?o:a,t.writeFloatBE=r?a:o,t.readFloatLE=r?i:s,t.readFloatBE=r?s:i}():function(){function e(t,e,n,r){var o=e<0?1:0;if(o&&(e=-e),0===e)t(1/e>0?0:2147483648,n,r);else if(isNaN(e))t(2143289344,n,r);else if(e>34028234663852886e22)t((o<<31|2139095040)>>>0,n,r);else if(e<11754943508222875e-54)t((o<<31|Math.round(e/1401298464324817e-60))>>>0,n,r);else{var a=Math.floor(Math.log(e)/Math.LN2);t((o<<31|a+127<<23|8388607&Math.round(e*Math.pow(2,-a)*8388608))>>>0,n,r)}}function i(t,e,n){var r=t(e,n),o=2*(r>>31)+1,a=r>>>23&255,i=8388607&r;return 255===a?i?NaN:o*(1/0):0===a?1401298464324817e-60*o*i:o*Math.pow(2,a-150)*(i+8388608)}t.writeFloatLE=e.bind(null,n),t.writeFloatBE=e.bind(null,r),t.readFloatLE=i.bind(null,o),t.readFloatBE=i.bind(null,a)}(),"undefined"!=typeof Float64Array?function(){var e=new Float64Array([-0]),n=new Uint8Array(e.buffer),r=128===n[7];function o(t,r,o){e[0]=t,r[o]=n[0],r[o+1]=n[1],r[o+2]=n[2],r[o+3]=n[3],r[o+4]=n[4],r[o+5]=n[5],r[o+6]=n[6],r[o+7]=n[7]}function a(t,r,o){e[0]=t,r[o]=n[7],r[o+1]=n[6],r[o+2]=n[5],r[o+3]=n[4],r[o+4]=n[3],r[o+5]=n[2],r[o+6]=n[1],r[o+7]=n[0]}function i(t,r){return n[0]=t[r],n[1]=t[r+1],n[2]=t[r+2],n[3]=t[r+3],n[4]=t[r+4],n[5]=t[r+5],n[6]=t[r+6],n[7]=t[r+7],e[0]}function s(t,r){return n[7]=t[r],n[6]=t[r+1],n[5]=t[r+2],n[4]=t[r+3],n[3]=t[r+4],n[2]=t[r+5],n[1]=t[r+6],n[0]=t[r+7],e[0]}t.writeDoubleLE=r?o:a,t.writeDoubleBE=r?a:o,t.readDoubleLE=r?i:s,t.readDoubleBE=r?s:i}():function(){function e(t,e,n,r,o,a){var i=r<0?1:0;if(i&&(r=-r),0===r)t(0,o,a+e),t(1/r>0?0:2147483648,o,a+n);else if(isNaN(r))t(0,o,a+e),t(2146959360,o,a+n);else if(r>17976931348623157e292)t(0,o,a+e),t((i<<31|2146435072)>>>0,o,a+n);else{var s;if(r<22250738585072014e-324)t((s=r/5e-324)>>>0,o,a+e),t((i<<31|s/4294967296)>>>0,o,a+n);else{var u=Math.floor(Math.log(r)/Math.LN2);1024===u&&(u=1023),t(4503599627370496*(s=r*Math.pow(2,-u))>>>0,o,a+e),t((i<<31|u+1023<<20|1048576*s&1048575)>>>0,o,a+n)}}}function i(t,e,n,r,o){var a=t(r,o+e),i=t(r,o+n),s=2*(i>>31)+1,u=i>>>20&2047,c=4294967296*(1048575&i)+a;return 2047===u?c?NaN:s*(1/0):0===u?5e-324*s*c:s*Math.pow(2,u-1075)*(c+4503599627370496)}t.writeDoubleLE=e.bind(null,n,0,4),t.writeDoubleBE=e.bind(null,r,4,0),t.readDoubleLE=i.bind(null,o,0,4),t.readDoubleBE=i.bind(null,a,4,0)}(),t}function n(t,e,n){e[n]=255&t,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24}function r(t,e,n){e[n]=t>>>24,e[n+1]=t>>>16&255,e[n+2]=t>>>8&255,e[n+3]=255&t}function o(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function a(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}t.exports=e(e)},7199:function(module){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}module.exports=inquire},6662:function(t){"use strict";t.exports=function(t,e,n){var r=n||8192,o=r>>>1,a=null,i=r;return function(n){if(n<1||n>o)return t(n);i+n>r&&(a=t(r),i=0);var s=e.call(a,i,i+=n);return 7&i&&(i=1+(7|i)),s}}},4997:function(t,e){"use strict";var n=e;n.length=function(t){for(var e=0,n=0,r=0;r<t.length;++r)(n=t.charCodeAt(r))<128?e+=1:n<2048?e+=2:55296==(64512&n)&&56320==(64512&t.charCodeAt(r+1))?(++r,e+=4):e+=3;return e},n.read=function(t,e,n){if(n-e<1)return"";for(var r,o=null,a=[],i=0;e<n;)(r=t[e++])<128?a[i++]=r:r>191&&r<224?a[i++]=(31&r)<<6|63&t[e++]:r>239&&r<365?(r=((7&r)<<18|(63&t[e++])<<12|(63&t[e++])<<6|63&t[e++])-65536,a[i++]=55296+(r>>10),a[i++]=56320+(1023&r)):a[i++]=(15&r)<<12|(63&t[e++])<<6|63&t[e++],i>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,a)),i=0);return o?(i&&o.push(String.fromCharCode.apply(String,a.slice(0,i))),o.join("")):String.fromCharCode.apply(String,a.slice(0,i))},n.write=function(t,e,n){for(var r,o,a=n,i=0;i<t.length;++i)(r=t.charCodeAt(i))<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296==(64512&r)&&56320==(64512&(o=t.charCodeAt(i+1)))?(r=65536+((1023&r)<<10)+(1023&o),++i,e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128);return n-a}},3442:function(t,e){"use strict";e.__esModule=!0;var n=function(){function t(e){if(!e)throw new TypeError("Invalid argument; `value` has no value.");this.value=t.EMPTY,e&&t.isGuid(e)&&(this.value=e)}return t.isGuid=function(e){var n=e.toString();return e&&(e instanceof t||t.validator.test(n))},t.create=function(){return new t([t.gen(2),t.gen(1),t.gen(1),t.gen(1),t.gen(3)].join("-"))},t.createEmpty=function(){return new t("emptyguid")},t.parse=function(e){return new t(e)},t.raw=function(){return[t.gen(2),t.gen(1),t.gen(1),t.gen(1),t.gen(3)].join("-")},t.gen=function(t){for(var e="",n=0;n<t;n++)e+=(65536*(1+Math.random())|0).toString(16).substring(1);return e},t.prototype.equals=function(e){return t.isGuid(e)&&this.value===e.toString()},t.prototype.isEmpty=function(){return this.value===t.EMPTY},t.prototype.toString=function(){return this.value},t.prototype.toJSON=function(){return{value:this.value}},t.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),t.EMPTY="00000000-0000-0000-0000-000000000000",t}();e.Guid=n},3720:function(t){t.exports=n;var e=null;try{e=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(t){}function n(t,e,n){this.low=0|t,this.high=0|e,this.unsigned=!!n}function r(t){return!0===(t&&t.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var o={},a={};function i(t,e){var n,r,i;return e?(i=0<=(t>>>=0)&&t<256)&&(r=a[t])?r:(n=u(t,(0|t)<0?-1:0,!0),i&&(a[t]=n),n):(i=-128<=(t|=0)&&t<128)&&(r=o[t])?r:(n=u(t,t<0?-1:0,!1),i&&(o[t]=n),n)}function s(t,e){if(isNaN(t))return e?y:m;if(e){if(t<0)return y;if(t>=d)return x}else{if(t<=-h)return T;if(t+1>=h)return _}return t<0?s(-t,e).neg():u(t%p|0,t/p|0,e)}function u(t,e,r){return new n(t,e,r)}n.fromInt=i,n.fromNumber=s,n.fromBits=u;var c=Math.pow;function l(t,e,n){if(0===t.length)throw Error("empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return m;if("number"==typeof e?(n=e,e=!1):e=!!e,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return l(t.substring(1),e,n).neg();for(var o=s(c(n,8)),a=m,i=0;i<t.length;i+=8){var u=Math.min(8,t.length-i),f=parseInt(t.substring(i,i+u),n);if(u<8){var p=s(c(n,u));a=a.mul(p).add(s(f))}else a=(a=a.mul(o)).add(s(f))}return a.unsigned=e,a}function f(t,e){return"number"==typeof t?s(t,e):"string"==typeof t?l(t,e):u(t.low,t.high,"boolean"==typeof e?e:t.unsigned)}n.fromString=l,n.fromValue=f;var p=4294967296,d=p*p,h=d/2,g=i(1<<24),m=i(0);n.ZERO=m;var y=i(0,!0);n.UZERO=y;var b=i(1);n.ONE=b;var v=i(1,!0);n.UONE=v;var w=i(-1);n.NEG_ONE=w;var _=u(-1,2147483647,!1);n.MAX_VALUE=_;var x=u(-1,-1,!0);n.MAX_UNSIGNED_VALUE=x;var T=u(0,-2147483648,!1);n.MIN_VALUE=T;var S=n.prototype;S.toInt=function(){return this.unsigned?this.low>>>0:this.low},S.toNumber=function(){return this.unsigned?(this.high>>>0)*p+(this.low>>>0):this.high*p+(this.low>>>0)},S.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(T)){var e=s(t),n=this.div(e),r=n.mul(e).sub(this);return n.toString(t)+r.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var o=s(c(t,6),this.unsigned),a=this,i="";;){var u=a.div(o),l=(a.sub(u.mul(o)).toInt()>>>0).toString(t);if((a=u).isZero())return l+i;for(;l.length<6;)l="0"+l;i=""+l+i}},S.getHighBits=function(){return this.high},S.getHighBitsUnsigned=function(){return this.high>>>0},S.getLowBits=function(){return this.low},S.getLowBitsUnsigned=function(){return this.low>>>0},S.getNumBitsAbs=function(){if(this.isNegative())return this.eq(T)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,e=31;e>0&&0==(t&1<<e);e--);return 0!=this.high?e+33:e+1},S.isZero=function(){return 0===this.high&&0===this.low},S.eqz=S.isZero,S.isNegative=function(){return!this.unsigned&&this.high<0},S.isPositive=function(){return this.unsigned||this.high>=0},S.isOdd=function(){return 1==(1&this.low)},S.isEven=function(){return 0==(1&this.low)},S.equals=function(t){return r(t)||(t=f(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&this.high===t.high&&this.low===t.low},S.eq=S.equals,S.notEquals=function(t){return!this.eq(t)},S.neq=S.notEquals,S.ne=S.notEquals,S.lessThan=function(t){return this.comp(t)<0},S.lt=S.lessThan,S.lessThanOrEqual=function(t){return this.comp(t)<=0},S.lte=S.lessThanOrEqual,S.le=S.lessThanOrEqual,S.greaterThan=function(t){return this.comp(t)>0},S.gt=S.greaterThan,S.greaterThanOrEqual=function(t){return this.comp(t)>=0},S.gte=S.greaterThanOrEqual,S.ge=S.greaterThanOrEqual,S.compare=function(t){if(r(t)||(t=f(t)),this.eq(t))return 0;var e=this.isNegative(),n=t.isNegative();return e&&!n?-1:!e&&n?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},S.comp=S.compare,S.negate=function(){return!this.unsigned&&this.eq(T)?T:this.not().add(b)},S.neg=S.negate,S.add=function(t){r(t)||(t=f(t));var e=this.high>>>16,n=65535&this.high,o=this.low>>>16,a=65535&this.low,i=t.high>>>16,s=65535&t.high,c=t.low>>>16,l=0,p=0,d=0,h=0;return d+=(h+=a+(65535&t.low))>>>16,p+=(d+=o+c)>>>16,l+=(p+=n+s)>>>16,l+=e+i,u((d&=65535)<<16|(h&=65535),(l&=65535)<<16|(p&=65535),this.unsigned)},S.subtract=function(t){return r(t)||(t=f(t)),this.add(t.neg())},S.sub=S.subtract,S.multiply=function(t){if(this.isZero())return m;if(r(t)||(t=f(t)),e)return u(e.mul(this.low,this.high,t.low,t.high),e.get_high(),this.unsigned);if(t.isZero())return m;if(this.eq(T))return t.isOdd()?T:m;if(t.eq(T))return this.isOdd()?T:m;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(g)&&t.lt(g))return s(this.toNumber()*t.toNumber(),this.unsigned);var n=this.high>>>16,o=65535&this.high,a=this.low>>>16,i=65535&this.low,c=t.high>>>16,l=65535&t.high,p=t.low>>>16,d=65535&t.low,h=0,y=0,b=0,v=0;return b+=(v+=i*d)>>>16,y+=(b+=a*d)>>>16,b&=65535,y+=(b+=i*p)>>>16,h+=(y+=o*d)>>>16,y&=65535,h+=(y+=a*p)>>>16,y&=65535,h+=(y+=i*l)>>>16,h+=n*d+o*p+a*l+i*c,u((b&=65535)<<16|(v&=65535),(h&=65535)<<16|(y&=65535),this.unsigned)},S.mul=S.multiply,S.divide=function(t){if(r(t)||(t=f(t)),t.isZero())throw Error("division by zero");var n,o,a;if(e)return this.unsigned||-2147483648!==this.high||-1!==t.low||-1!==t.high?u((this.unsigned?e.div_u:e.div_s)(this.low,this.high,t.low,t.high),e.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?y:m;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return y;if(t.gt(this.shru(1)))return v;a=y}else{if(this.eq(T))return t.eq(b)||t.eq(w)?T:t.eq(T)?b:(n=this.shr(1).div(t).shl(1)).eq(m)?t.isNegative()?b:w:(o=this.sub(t.mul(n)),a=n.add(o.div(t)));if(t.eq(T))return this.unsigned?y:m;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();a=m}for(o=this;o.gte(t);){n=Math.max(1,Math.floor(o.toNumber()/t.toNumber()));for(var i=Math.ceil(Math.log(n)/Math.LN2),l=i<=48?1:c(2,i-48),p=s(n),d=p.mul(t);d.isNegative()||d.gt(o);)d=(p=s(n-=l,this.unsigned)).mul(t);p.isZero()&&(p=b),a=a.add(p),o=o.sub(d)}return a},S.div=S.divide,S.modulo=function(t){return r(t)||(t=f(t)),e?u((this.unsigned?e.rem_u:e.rem_s)(this.low,this.high,t.low,t.high),e.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},S.mod=S.modulo,S.rem=S.modulo,S.not=function(){return u(~this.low,~this.high,this.unsigned)},S.and=function(t){return r(t)||(t=f(t)),u(this.low&t.low,this.high&t.high,this.unsigned)},S.or=function(t){return r(t)||(t=f(t)),u(this.low|t.low,this.high|t.high,this.unsigned)},S.xor=function(t){return r(t)||(t=f(t)),u(this.low^t.low,this.high^t.high,this.unsigned)},S.shiftLeft=function(t){return r(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?u(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):u(0,this.low<<t-32,this.unsigned)},S.shl=S.shiftLeft,S.shiftRight=function(t){return r(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?u(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):u(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},S.shr=S.shiftRight,S.shiftRightUnsigned=function(t){if(r(t)&&(t=t.toInt()),0==(t&=63))return this;var e=this.high;return t<32?u(this.low>>>t|e<<32-t,e>>>t,this.unsigned):u(32===t?e:e>>>t-32,0,this.unsigned)},S.shru=S.shiftRightUnsigned,S.shr_u=S.shiftRightUnsigned,S.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},S.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},S.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},S.toBytesLE=function(){var t=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},S.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,e>>>24,e>>>16&255,e>>>8&255,255&e]},n.fromBytes=function(t,e,r){return r?n.fromBytesLE(t,e):n.fromBytesBE(t,e)},n.fromBytesLE=function(t,e){return new n(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)},n.fromBytesBE=function(t,e){return new n(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)}},1446:function(t,e,n){"use strict";var r,o,a,i=n(2100),s=i.Reader,u=i.Writer,c=i.util,l=i.roots.default||(i.roots.default={});l.onnx=((a={}).Version=(r={},(o=Object.create(r))[r[0]="_START_VERSION"]=0,o[r[1]="IR_VERSION_2017_10_10"]=1,o[r[2]="IR_VERSION_2017_10_30"]=2,o[r[3]="IR_VERSION_2017_11_3"]=3,o[r[4]="IR_VERSION_2019_1_22"]=4,o[r[5]="IR_VERSION"]=5,o),a.AttributeProto=function(){function t(t){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.name="",t.prototype.refAttrName="",t.prototype.docString="",t.prototype.type=0,t.prototype.f=0,t.prototype.i=c.Long?c.Long.fromBits(0,0,!1):0,t.prototype.s=c.newBuffer([]),t.prototype.t=null,t.prototype.g=null,t.prototype.floats=c.emptyArray,t.prototype.ints=c.emptyArray,t.prototype.strings=c.emptyArray,t.prototype.tensors=c.emptyArray,t.prototype.graphs=c.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=u.create()),null!=t.name&&t.hasOwnProperty("name")&&e.uint32(10).string(t.name),null!=t.f&&t.hasOwnProperty("f")&&e.uint32(21).float(t.f),null!=t.i&&t.hasOwnProperty("i")&&e.uint32(24).int64(t.i),null!=t.s&&t.hasOwnProperty("s")&&e.uint32(34).bytes(t.s),null!=t.t&&t.hasOwnProperty("t")&&l.onnx.TensorProto.encode(t.t,e.uint32(42).fork()).ldelim(),null!=t.g&&t.hasOwnProperty("g")&&l.onnx.GraphProto.encode(t.g,e.uint32(50).fork()).ldelim(),null!=t.floats&&t.floats.length){e.uint32(58).fork();for(var n=0;n<t.floats.length;++n)e.float(t.floats[n]);e.ldelim()}if(null!=t.ints&&t.ints.length){for(e.uint32(66).fork(),n=0;n<t.ints.length;++n)e.int64(t.ints[n]);e.ldelim()}if(null!=t.strings&&t.strings.length)for(n=0;n<t.strings.length;++n)e.uint32(74).bytes(t.strings[n]);if(null!=t.tensors&&t.tensors.length)for(n=0;n<t.tensors.length;++n)l.onnx.TensorProto.encode(t.tensors[n],e.uint32(82).fork()).ldelim();if(null!=t.graphs&&t.graphs.length)for(n=0;n<t.graphs.length;++n)l.onnx.GraphProto.encode(t.graphs[n],e.uint32(90).fork()).ldelim();return null!=t.docString&&t.hasOwnProperty("docString")&&e.uint32(106).string(t.docString),null!=t.type&&t.hasOwnProperty("type")&&e.uint32(160).int32(t.type),null!=t.refAttrName&&t.hasOwnProperty("refAttrName")&&e.uint32(170).string(t.refAttrName),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof s||(t=s.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.AttributeProto;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.name=t.string();break;case 21:r.refAttrName=t.string();break;case 13:r.docString=t.string();break;case 20:r.type=t.int32();break;case 2:r.f=t.float();break;case 3:r.i=t.int64();break;case 4:r.s=t.bytes();break;case 5:r.t=l.onnx.TensorProto.decode(t,t.uint32());break;case 6:r.g=l.onnx.GraphProto.decode(t,t.uint32());break;case 7:if(r.floats&&r.floats.length||(r.floats=[]),2==(7&o))for(var a=t.uint32()+t.pos;t.pos<a;)r.floats.push(t.float());else r.floats.push(t.float());break;case 8:if(r.ints&&r.ints.length||(r.ints=[]),2==(7&o))for(a=t.uint32()+t.pos;t.pos<a;)r.ints.push(t.int64());else r.ints.push(t.int64());break;case 9:r.strings&&r.strings.length||(r.strings=[]),r.strings.push(t.bytes());break;case 10:r.tensors&&r.tensors.length||(r.tensors=[]),r.tensors.push(l.onnx.TensorProto.decode(t,t.uint32()));break;case 11:r.graphs&&r.graphs.length||(r.graphs=[]),r.graphs.push(l.onnx.GraphProto.decode(t,t.uint32()));break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof s||(t=new s(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.name&&t.hasOwnProperty("name")&&!c.isString(t.name))return"name: string expected";if(null!=t.refAttrName&&t.hasOwnProperty("refAttrName")&&!c.isString(t.refAttrName))return"refAttrName: string expected";if(null!=t.docString&&t.hasOwnProperty("docString")&&!c.isString(t.docString))return"docString: string expected";if(null!=t.type&&t.hasOwnProperty("type"))switch(t.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:}if(null!=t.f&&t.hasOwnProperty("f")&&"number"!=typeof t.f)return"f: number expected";if(null!=t.i&&t.hasOwnProperty("i")&&!(c.isInteger(t.i)||t.i&&c.isInteger(t.i.low)&&c.isInteger(t.i.high)))return"i: integer|Long expected";if(null!=t.s&&t.hasOwnProperty("s")&&!(t.s&&"number"==typeof t.s.length||c.isString(t.s)))return"s: buffer expected";if(null!=t.t&&t.hasOwnProperty("t")&&(n=l.onnx.TensorProto.verify(t.t)))return"t."+n;if(null!=t.g&&t.hasOwnProperty("g")&&(n=l.onnx.GraphProto.verify(t.g)))return"g."+n;if(null!=t.floats&&t.hasOwnProperty("floats")){if(!Array.isArray(t.floats))return"floats: array expected";for(var e=0;e<t.floats.length;++e)if("number"!=typeof t.floats[e])return"floats: number[] expected"}if(null!=t.ints&&t.hasOwnProperty("ints")){if(!Array.isArray(t.ints))return"ints: array expected";for(e=0;e<t.ints.length;++e)if(!(c.isInteger(t.ints[e])||t.ints[e]&&c.isInteger(t.ints[e].low)&&c.isInteger(t.ints[e].high)))return"ints: integer|Long[] expected"}if(null!=t.strings&&t.hasOwnProperty("strings")){if(!Array.isArray(t.strings))return"strings: array expected";for(e=0;e<t.strings.length;++e)if(!(t.strings[e]&&"number"==typeof t.strings[e].length||c.isString(t.strings[e])))return"strings: buffer[] expected"}if(null!=t.tensors&&t.hasOwnProperty("tensors")){if(!Array.isArray(t.tensors))return"tensors: array expected";for(e=0;e<t.tensors.length;++e)if(n=l.onnx.TensorProto.verify(t.tensors[e]))return"tensors."+n}if(null!=t.graphs&&t.hasOwnProperty("graphs")){if(!Array.isArray(t.graphs))return"graphs: array expected";for(e=0;e<t.graphs.length;++e){var n;if(n=l.onnx.GraphProto.verify(t.graphs[e]))return"graphs."+n}}return null},t.fromObject=function(t){if(t instanceof l.onnx.AttributeProto)return t;var e=new l.onnx.AttributeProto;switch(null!=t.name&&(e.name=String(t.name)),null!=t.refAttrName&&(e.refAttrName=String(t.refAttrName)),null!=t.docString&&(e.docString=String(t.docString)),t.type){case"UNDEFINED":case 0:e.type=0;break;case"FLOAT":case 1:e.type=1;break;case"INT":case 2:e.type=2;break;case"STRING":case 3:e.type=3;break;case"TENSOR":case 4:e.type=4;break;case"GRAPH":case 5:e.type=5;break;case"FLOATS":case 6:e.type=6;break;case"INTS":case 7:e.type=7;break;case"STRINGS":case 8:e.type=8;break;case"TENSORS":case 9:e.type=9;break;case"GRAPHS":case 10:e.type=10}if(null!=t.f&&(e.f=Number(t.f)),null!=t.i&&(c.Long?(e.i=c.Long.fromValue(t.i)).unsigned=!1:"string"==typeof t.i?e.i=parseInt(t.i,10):"number"==typeof t.i?e.i=t.i:"object"==typeof t.i&&(e.i=new c.LongBits(t.i.low>>>0,t.i.high>>>0).toNumber())),null!=t.s&&("string"==typeof t.s?c.base64.decode(t.s,e.s=c.newBuffer(c.base64.length(t.s)),0):t.s.length&&(e.s=t.s)),null!=t.t){if("object"!=typeof t.t)throw TypeError(".onnx.AttributeProto.t: object expected");e.t=l.onnx.TensorProto.fromObject(t.t)}if(null!=t.g){if("object"!=typeof t.g)throw TypeError(".onnx.AttributeProto.g: object expected");e.g=l.onnx.GraphProto.fromObject(t.g)}if(t.floats){if(!Array.isArray(t.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");e.floats=[];for(var n=0;n<t.floats.length;++n)e.floats[n]=Number(t.floats[n])}if(t.ints){if(!Array.isArray(t.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");for(e.ints=[],n=0;n<t.ints.length;++n)c.Long?(e.ints[n]=c.Long.fromValue(t.ints[n])).unsigned=!1:"string"==typeof t.ints[n]?e.ints[n]=parseInt(t.ints[n],10):"number"==typeof t.ints[n]?e.ints[n]=t.ints[n]:"object"==typeof t.ints[n]&&(e.ints[n]=new c.LongBits(t.ints[n].low>>>0,t.ints[n].high>>>0).toNumber())}if(t.strings){if(!Array.isArray(t.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");for(e.strings=[],n=0;n<t.strings.length;++n)"string"==typeof t.strings[n]?c.base64.decode(t.strings[n],e.strings[n]=c.newBuffer(c.base64.length(t.strings[n])),0):t.strings[n].length&&(e.strings[n]=t.strings[n])}if(t.tensors){if(!Array.isArray(t.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");for(e.tensors=[],n=0;n<t.tensors.length;++n){if("object"!=typeof t.tensors[n])throw TypeError(".onnx.AttributeProto.tensors: object expected");e.tensors[n]=l.onnx.TensorProto.fromObject(t.tensors[n])}}if(t.graphs){if(!Array.isArray(t.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");for(e.graphs=[],n=0;n<t.graphs.length;++n){if("object"!=typeof t.graphs[n])throw TypeError(".onnx.AttributeProto.graphs: object expected");e.graphs[n]=l.onnx.GraphProto.fromObject(t.graphs[n])}}return e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.floats=[],n.ints=[],n.strings=[],n.tensors=[],n.graphs=[]),e.defaults){if(n.name="",n.f=0,c.Long){var r=new c.Long(0,0,!1);n.i=e.longs===String?r.toString():e.longs===Number?r.toNumber():r}else n.i=e.longs===String?"0":0;e.bytes===String?n.s="":(n.s=[],e.bytes!==Array&&(n.s=c.newBuffer(n.s))),n.t=null,n.g=null,n.docString="",n.type=e.enums===String?"UNDEFINED":0,n.refAttrName=""}if(null!=t.name&&t.hasOwnProperty("name")&&(n.name=t.name),null!=t.f&&t.hasOwnProperty("f")&&(n.f=e.json&&!isFinite(t.f)?String(t.f):t.f),null!=t.i&&t.hasOwnProperty("i")&&("number"==typeof t.i?n.i=e.longs===String?String(t.i):t.i:n.i=e.longs===String?c.Long.prototype.toString.call(t.i):e.longs===Number?new c.LongBits(t.i.low>>>0,t.i.high>>>0).toNumber():t.i),null!=t.s&&t.hasOwnProperty("s")&&(n.s=e.bytes===String?c.base64.encode(t.s,0,t.s.length):e.bytes===Array?Array.prototype.slice.call(t.s):t.s),null!=t.t&&t.hasOwnProperty("t")&&(n.t=l.onnx.TensorProto.toObject(t.t,e)),null!=t.g&&t.hasOwnProperty("g")&&(n.g=l.onnx.GraphProto.toObject(t.g,e)),t.floats&&t.floats.length){n.floats=[];for(var o=0;o<t.floats.length;++o)n.floats[o]=e.json&&!isFinite(t.floats[o])?String(t.floats[o]):t.floats[o]}if(t.ints&&t.ints.length)for(n.ints=[],o=0;o<t.ints.length;++o)"number"==typeof t.ints[o]?n.ints[o]=e.longs===String?String(t.ints[o]):t.ints[o]:n.ints[o]=e.longs===String?c.Long.prototype.toString.call(t.ints[o]):e.longs===Number?new c.LongBits(t.ints[o].low>>>0,t.ints[o].high>>>0).toNumber():t.ints[o];if(t.strings&&t.strings.length)for(n.strings=[],o=0;o<t.strings.length;++o)n.strings[o]=e.bytes===String?c.base64.encode(t.strings[o],0,t.strings[o].length):e.bytes===Array?Array.prototype.slice.call(t.strings[o]):t.strings[o];if(t.tensors&&t.tensors.length)for(n.tensors=[],o=0;o<t.tensors.length;++o)n.tensors[o]=l.onnx.TensorProto.toObject(t.tensors[o],e);if(t.graphs&&t.graphs.length)for(n.graphs=[],o=0;o<t.graphs.length;++o)n.graphs[o]=l.onnx.GraphProto.toObject(t.graphs[o],e);return null!=t.docString&&t.hasOwnProperty("docString")&&(n.docString=t.docString),null!=t.type&&t.hasOwnProperty("type")&&(n.type=e.enums===String?l.onnx.AttributeProto.AttributeType[t.type]:t.type),null!=t.refAttrName&&t.hasOwnProperty("refAttrName")&&(n.refAttrName=t.refAttrName),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t.AttributeType=function(){var t={},e=Object.create(t);return e[t[0]="UNDEFINED"]=0,e[t[1]="FLOAT"]=1,e[t[2]="INT"]=2,e[t[3]="STRING"]=3,e[t[4]="TENSOR"]=4,e[t[5]="GRAPH"]=5,e[t[6]="FLOATS"]=6,e[t[7]="INTS"]=7,e[t[8]="STRINGS"]=8,e[t[9]="TENSORS"]=9,e[t[10]="GRAPHS"]=10,e}(),t}(),a.ValueInfoProto=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.name="",t.prototype.type=null,t.prototype.docString="",t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=u.create()),null!=t.name&&t.hasOwnProperty("name")&&e.uint32(10).string(t.name),null!=t.type&&t.hasOwnProperty("type")&&l.onnx.TypeProto.encode(t.type,e.uint32(18).fork()).ldelim(),null!=t.docString&&t.hasOwnProperty("docString")&&e.uint32(26).string(t.docString),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof s||(t=s.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.ValueInfoProto;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.name=t.string();break;case 2:r.type=l.onnx.TypeProto.decode(t,t.uint32());break;case 3:r.docString=t.string();break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof s||(t=new s(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.name&&t.hasOwnProperty("name")&&!c.isString(t.name))return"name: string expected";if(null!=t.type&&t.hasOwnProperty("type")){var e=l.onnx.TypeProto.verify(t.type);if(e)return"type."+e}return null!=t.docString&&t.hasOwnProperty("docString")&&!c.isString(t.docString)?"docString: string expected":null},t.fromObject=function(t){if(t instanceof l.onnx.ValueInfoProto)return t;var e=new l.onnx.ValueInfoProto;if(null!=t.name&&(e.name=String(t.name)),null!=t.type){if("object"!=typeof t.type)throw TypeError(".onnx.ValueInfoProto.type: object expected");e.type=l.onnx.TypeProto.fromObject(t.type)}return null!=t.docString&&(e.docString=String(t.docString)),e},t.toObject=function(t,e){e||(e={});var n={};return e.defaults&&(n.name="",n.type=null,n.docString=""),null!=t.name&&t.hasOwnProperty("name")&&(n.name=t.name),null!=t.type&&t.hasOwnProperty("type")&&(n.type=l.onnx.TypeProto.toObject(t.type,e)),null!=t.docString&&t.hasOwnProperty("docString")&&(n.docString=t.docString),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t}(),a.NodeProto=function(){function t(t){if(this.input=[],this.output=[],this.attribute=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.input=c.emptyArray,t.prototype.output=c.emptyArray,t.prototype.name="",t.prototype.opType="",t.prototype.domain="",t.prototype.attribute=c.emptyArray,t.prototype.docString="",t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=u.create()),null!=t.input&&t.input.length)for(var n=0;n<t.input.length;++n)e.uint32(10).string(t.input[n]);if(null!=t.output&&t.output.length)for(n=0;n<t.output.length;++n)e.uint32(18).string(t.output[n]);if(null!=t.name&&t.hasOwnProperty("name")&&e.uint32(26).string(t.name),null!=t.opType&&t.hasOwnProperty("opType")&&e.uint32(34).string(t.opType),null!=t.attribute&&t.attribute.length)for(n=0;n<t.attribute.length;++n)l.onnx.AttributeProto.encode(t.attribute[n],e.uint32(42).fork()).ldelim();return null!=t.docString&&t.hasOwnProperty("docString")&&e.uint32(50).string(t.docString),null!=t.domain&&t.hasOwnProperty("domain")&&e.uint32(58).string(t.domain),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof s||(t=s.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.NodeProto;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.input&&r.input.length||(r.input=[]),r.input.push(t.string());break;case 2:r.output&&r.output.length||(r.output=[]),r.output.push(t.string());break;case 3:r.name=t.string();break;case 4:r.opType=t.string();break;case 7:r.domain=t.string();break;case 5:r.attribute&&r.attribute.length||(r.attribute=[]),r.attribute.push(l.onnx.AttributeProto.decode(t,t.uint32()));break;case 6:r.docString=t.string();break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof s||(t=new s(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.input&&t.hasOwnProperty("input")){if(!Array.isArray(t.input))return"input: array expected";for(var e=0;e<t.input.length;++e)if(!c.isString(t.input[e]))return"input: string[] expected"}if(null!=t.output&&t.hasOwnProperty("output")){if(!Array.isArray(t.output))return"output: array expected";for(e=0;e<t.output.length;++e)if(!c.isString(t.output[e]))return"output: string[] expected"}if(null!=t.name&&t.hasOwnProperty("name")&&!c.isString(t.name))return"name: string expected";if(null!=t.opType&&t.hasOwnProperty("opType")&&!c.isString(t.opType))return"opType: string expected";if(null!=t.domain&&t.hasOwnProperty("domain")&&!c.isString(t.domain))return"domain: string expected";if(null!=t.attribute&&t.hasOwnProperty("attribute")){if(!Array.isArray(t.attribute))return"attribute: array expected";for(e=0;e<t.attribute.length;++e){var n=l.onnx.AttributeProto.verify(t.attribute[e]);if(n)return"attribute."+n}}return null!=t.docString&&t.hasOwnProperty("docString")&&!c.isString(t.docString)?"docString: string expected":null},t.fromObject=function(t){if(t instanceof l.onnx.NodeProto)return t;var e=new l.onnx.NodeProto;if(t.input){if(!Array.isArray(t.input))throw TypeError(".onnx.NodeProto.input: array expected");e.input=[];for(var n=0;n<t.input.length;++n)e.input[n]=String(t.input[n])}if(t.output){if(!Array.isArray(t.output))throw TypeError(".onnx.NodeProto.output: array expected");for(e.output=[],n=0;n<t.output.length;++n)e.output[n]=String(t.output[n])}if(null!=t.name&&(e.name=String(t.name)),null!=t.opType&&(e.opType=String(t.opType)),null!=t.domain&&(e.domain=String(t.domain)),t.attribute){if(!Array.isArray(t.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");for(e.attribute=[],n=0;n<t.attribute.length;++n){if("object"!=typeof t.attribute[n])throw TypeError(".onnx.NodeProto.attribute: object expected");e.attribute[n]=l.onnx.AttributeProto.fromObject(t.attribute[n])}}return null!=t.docString&&(e.docString=String(t.docString)),e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.input=[],n.output=[],n.attribute=[]),e.defaults&&(n.name="",n.opType="",n.docString="",n.domain=""),t.input&&t.input.length){n.input=[];for(var r=0;r<t.input.length;++r)n.input[r]=t.input[r]}if(t.output&&t.output.length)for(n.output=[],r=0;r<t.output.length;++r)n.output[r]=t.output[r];if(null!=t.name&&t.hasOwnProperty("name")&&(n.name=t.name),null!=t.opType&&t.hasOwnProperty("opType")&&(n.opType=t.opType),t.attribute&&t.attribute.length)for(n.attribute=[],r=0;r<t.attribute.length;++r)n.attribute[r]=l.onnx.AttributeProto.toObject(t.attribute[r],e);return null!=t.docString&&t.hasOwnProperty("docString")&&(n.docString=t.docString),null!=t.domain&&t.hasOwnProperty("domain")&&(n.domain=t.domain),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t}(),a.ModelProto=function(){function t(t){if(this.opsetImport=[],this.metadataProps=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.irVersion=c.Long?c.Long.fromBits(0,0,!1):0,t.prototype.opsetImport=c.emptyArray,t.prototype.producerName="",t.prototype.producerVersion="",t.prototype.domain="",t.prototype.modelVersion=c.Long?c.Long.fromBits(0,0,!1):0,t.prototype.docString="",t.prototype.graph=null,t.prototype.metadataProps=c.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=u.create()),null!=t.irVersion&&t.hasOwnProperty("irVersion")&&e.uint32(8).int64(t.irVersion),null!=t.producerName&&t.hasOwnProperty("producerName")&&e.uint32(18).string(t.producerName),null!=t.producerVersion&&t.hasOwnProperty("producerVersion")&&e.uint32(26).string(t.producerVersion),null!=t.domain&&t.hasOwnProperty("domain")&&e.uint32(34).string(t.domain),null!=t.modelVersion&&t.hasOwnProperty("modelVersion")&&e.uint32(40).int64(t.modelVersion),null!=t.docString&&t.hasOwnProperty("docString")&&e.uint32(50).string(t.docString),null!=t.graph&&t.hasOwnProperty("graph")&&l.onnx.GraphProto.encode(t.graph,e.uint32(58).fork()).ldelim(),null!=t.opsetImport&&t.opsetImport.length)for(var n=0;n<t.opsetImport.length;++n)l.onnx.OperatorSetIdProto.encode(t.opsetImport[n],e.uint32(66).fork()).ldelim();if(null!=t.metadataProps&&t.metadataProps.length)for(n=0;n<t.metadataProps.length;++n)l.onnx.StringStringEntryProto.encode(t.metadataProps[n],e.uint32(114).fork()).ldelim();return e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof s||(t=s.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.ModelProto;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.irVersion=t.int64();break;case 8:r.opsetImport&&r.opsetImport.length||(r.opsetImport=[]),r.opsetImport.push(l.onnx.OperatorSetIdProto.decode(t,t.uint32()));break;case 2:r.producerName=t.string();break;case 3:r.producerVersion=t.string();break;case 4:r.domain=t.string();break;case 5:r.modelVersion=t.int64();break;case 6:r.docString=t.string();break;case 7:r.graph=l.onnx.GraphProto.decode(t,t.uint32());break;case 14:r.metadataProps&&r.metadataProps.length||(r.metadataProps=[]),r.metadataProps.push(l.onnx.StringStringEntryProto.decode(t,t.uint32()));break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof s||(t=new s(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.irVersion&&t.hasOwnProperty("irVersion")&&!(c.isInteger(t.irVersion)||t.irVersion&&c.isInteger(t.irVersion.low)&&c.isInteger(t.irVersion.high)))return"irVersion: integer|Long expected";if(null!=t.opsetImport&&t.hasOwnProperty("opsetImport")){if(!Array.isArray(t.opsetImport))return"opsetImport: array expected";for(var e=0;e<t.opsetImport.length;++e)if(n=l.onnx.OperatorSetIdProto.verify(t.opsetImport[e]))return"opsetImport."+n}if(null!=t.producerName&&t.hasOwnProperty("producerName")&&!c.isString(t.producerName))return"producerName: string expected";if(null!=t.producerVersion&&t.hasOwnProperty("producerVersion")&&!c.isString(t.producerVersion))return"producerVersion: string expected";if(null!=t.domain&&t.hasOwnProperty("domain")&&!c.isString(t.domain))return"domain: string expected";if(null!=t.modelVersion&&t.hasOwnProperty("modelVersion")&&!(c.isInteger(t.modelVersion)||t.modelVersion&&c.isInteger(t.modelVersion.low)&&c.isInteger(t.modelVersion.high)))return"modelVersion: integer|Long expected";if(null!=t.docString&&t.hasOwnProperty("docString")&&!c.isString(t.docString))return"docString: string expected";if(null!=t.graph&&t.hasOwnProperty("graph")&&(n=l.onnx.GraphProto.verify(t.graph)))return"graph."+n;if(null!=t.metadataProps&&t.hasOwnProperty("metadataProps")){if(!Array.isArray(t.metadataProps))return"metadataProps: array expected";for(e=0;e<t.metadataProps.length;++e){var n;if(n=l.onnx.StringStringEntryProto.verify(t.metadataProps[e]))return"metadataProps."+n}}return null},t.fromObject=function(t){if(t instanceof l.onnx.ModelProto)return t;var e=new l.onnx.ModelProto;if(null!=t.irVersion&&(c.Long?(e.irVersion=c.Long.fromValue(t.irVersion)).unsigned=!1:"string"==typeof t.irVersion?e.irVersion=parseInt(t.irVersion,10):"number"==typeof t.irVersion?e.irVersion=t.irVersion:"object"==typeof t.irVersion&&(e.irVersion=new c.LongBits(t.irVersion.low>>>0,t.irVersion.high>>>0).toNumber())),t.opsetImport){if(!Array.isArray(t.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");e.opsetImport=[];for(var n=0;n<t.opsetImport.length;++n){if("object"!=typeof t.opsetImport[n])throw TypeError(".onnx.ModelProto.opsetImport: object expected");e.opsetImport[n]=l.onnx.OperatorSetIdProto.fromObject(t.opsetImport[n])}}if(null!=t.producerName&&(e.producerName=String(t.producerName)),null!=t.producerVersion&&(e.producerVersion=String(t.producerVersion)),null!=t.domain&&(e.domain=String(t.domain)),null!=t.modelVersion&&(c.Long?(e.modelVersion=c.Long.fromValue(t.modelVersion)).unsigned=!1:"string"==typeof t.modelVersion?e.modelVersion=parseInt(t.modelVersion,10):"number"==typeof t.modelVersion?e.modelVersion=t.modelVersion:"object"==typeof t.modelVersion&&(e.modelVersion=new c.LongBits(t.modelVersion.low>>>0,t.modelVersion.high>>>0).toNumber())),null!=t.docString&&(e.docString=String(t.docString)),null!=t.graph){if("object"!=typeof t.graph)throw TypeError(".onnx.ModelProto.graph: object expected");e.graph=l.onnx.GraphProto.fromObject(t.graph)}if(t.metadataProps){if(!Array.isArray(t.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");for(e.metadataProps=[],n=0;n<t.metadataProps.length;++n){if("object"!=typeof t.metadataProps[n])throw TypeError(".onnx.ModelProto.metadataProps: object expected");e.metadataProps[n]=l.onnx.StringStringEntryProto.fromObject(t.metadataProps[n])}}return e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.opsetImport=[],n.metadataProps=[]),e.defaults){if(c.Long){var r=new c.Long(0,0,!1);n.irVersion=e.longs===String?r.toString():e.longs===Number?r.toNumber():r}else n.irVersion=e.longs===String?"0":0;n.producerName="",n.producerVersion="",n.domain="",c.Long?(r=new c.Long(0,0,!1),n.modelVersion=e.longs===String?r.toString():e.longs===Number?r.toNumber():r):n.modelVersion=e.longs===String?"0":0,n.docString="",n.graph=null}if(null!=t.irVersion&&t.hasOwnProperty("irVersion")&&("number"==typeof t.irVersion?n.irVersion=e.longs===String?String(t.irVersion):t.irVersion:n.irVersion=e.longs===String?c.Long.prototype.toString.call(t.irVersion):e.longs===Number?new c.LongBits(t.irVersion.low>>>0,t.irVersion.high>>>0).toNumber():t.irVersion),null!=t.producerName&&t.hasOwnProperty("producerName")&&(n.producerName=t.producerName),null!=t.producerVersion&&t.hasOwnProperty("producerVersion")&&(n.producerVersion=t.producerVersion),null!=t.domain&&t.hasOwnProperty("domain")&&(n.domain=t.domain),null!=t.modelVersion&&t.hasOwnProperty("modelVersion")&&("number"==typeof t.modelVersion?n.modelVersion=e.longs===String?String(t.modelVersion):t.modelVersion:n.modelVersion=e.longs===String?c.Long.prototype.toString.call(t.modelVersion):e.longs===Number?new c.LongBits(t.modelVersion.low>>>0,t.modelVersion.high>>>0).toNumber():t.modelVersion),null!=t.docString&&t.hasOwnProperty("docString")&&(n.docString=t.docString),null!=t.graph&&t.hasOwnProperty("graph")&&(n.graph=l.onnx.GraphProto.toObject(t.graph,e)),t.opsetImport&&t.opsetImport.length){n.opsetImport=[];for(var o=0;o<t.opsetImport.length;++o)n.opsetImport[o]=l.onnx.OperatorSetIdProto.toObject(t.opsetImport[o],e)}if(t.metadataProps&&t.metadataProps.length)for(n.metadataProps=[],o=0;o<t.metadataProps.length;++o)n.metadataProps[o]=l.onnx.StringStringEntryProto.toObject(t.metadataProps[o],e);return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t}(),a.StringStringEntryProto=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.key="",t.prototype.value="",t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=u.create()),null!=t.key&&t.hasOwnProperty("key")&&e.uint32(10).string(t.key),null!=t.value&&t.hasOwnProperty("value")&&e.uint32(18).string(t.value),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof s||(t=s.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.StringStringEntryProto;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.key=t.string();break;case 2:r.value=t.string();break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof s||(t=new s(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.key&&t.hasOwnProperty("key")&&!c.isString(t.key)?"key: string expected":null!=t.value&&t.hasOwnProperty("value")&&!c.isString(t.value)?"value: string expected":null},t.fromObject=function(t){if(t instanceof l.onnx.StringStringEntryProto)return t;var e=new l.onnx.StringStringEntryProto;return null!=t.key&&(e.key=String(t.key)),null!=t.value&&(e.value=String(t.value)),e},t.toObject=function(t,e){e||(e={});var n={};return e.defaults&&(n.key="",n.value=""),null!=t.key&&t.hasOwnProperty("key")&&(n.key=t.key),null!=t.value&&t.hasOwnProperty("value")&&(n.value=t.value),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t}(),a.TensorAnnotation=function(){function t(t){if(this.quantParameterTensorNames=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.tensorName="",t.prototype.quantParameterTensorNames=c.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=u.create()),null!=t.tensorName&&t.hasOwnProperty("tensorName")&&e.uint32(10).string(t.tensorName),null!=t.quantParameterTensorNames&&t.quantParameterTensorNames.length)for(var n=0;n<t.quantParameterTensorNames.length;++n)l.onnx.StringStringEntryProto.encode(t.quantParameterTensorNames[n],e.uint32(18).fork()).ldelim();return e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof s||(t=s.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.TensorAnnotation;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.tensorName=t.string();break;case 2:r.quantParameterTensorNames&&r.quantParameterTensorNames.length||(r.quantParameterTensorNames=[]),r.quantParameterTensorNames.push(l.onnx.StringStringEntryProto.decode(t,t.uint32()));break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof s||(t=new s(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.tensorName&&t.hasOwnProperty("tensorName")&&!c.isString(t.tensorName))return"tensorName: string expected";if(null!=t.quantParameterTensorNames&&t.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(t.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var e=0;e<t.quantParameterTensorNames.length;++e){var n=l.onnx.StringStringEntryProto.verify(t.quantParameterTensorNames[e]);if(n)return"quantParameterTensorNames."+n}}return null},t.fromObject=function(t){if(t instanceof l.onnx.TensorAnnotation)return t;var e=new l.onnx.TensorAnnotation;if(null!=t.tensorName&&(e.tensorName=String(t.tensorName)),t.quantParameterTensorNames){if(!Array.isArray(t.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");e.quantParameterTensorNames=[];for(var n=0;n<t.quantParameterTensorNames.length;++n){if("object"!=typeof t.quantParameterTensorNames[n])throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");e.quantParameterTensorNames[n]=l.onnx.StringStringEntryProto.fromObject(t.quantParameterTensorNames[n])}}return e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.quantParameterTensorNames=[]),e.defaults&&(n.tensorName=""),null!=t.tensorName&&t.hasOwnProperty("tensorName")&&(n.tensorName=t.tensorName),t.quantParameterTensorNames&&t.quantParameterTensorNames.length){n.quantParameterTensorNames=[];for(var r=0;r<t.quantParameterTensorNames.length;++r)n.quantParameterTensorNames[r]=l.onnx.StringStringEntryProto.toObject(t.quantParameterTensorNames[r],e)}return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t}(),a.GraphProto=function(){function t(t){if(this.node=[],this.initializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.node=c.emptyArray,t.prototype.name="",t.prototype.initializer=c.emptyArray,t.prototype.docString="",t.prototype.input=c.emptyArray,t.prototype.output=c.emptyArray,t.prototype.valueInfo=c.emptyArray,t.prototype.quantizationAnnotation=c.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=u.create()),null!=t.node&&t.node.length)for(var n=0;n<t.node.length;++n)l.onnx.NodeProto.encode(t.node[n],e.uint32(10).fork()).ldelim();if(null!=t.name&&t.hasOwnProperty("name")&&e.uint32(18).string(t.name),null!=t.initializer&&t.initializer.length)for(n=0;n<t.initializer.length;++n)l.onnx.TensorProto.encode(t.initializer[n],e.uint32(42).fork()).ldelim();if(null!=t.docString&&t.hasOwnProperty("docString")&&e.uint32(82).string(t.docString),null!=t.input&&t.input.length)for(n=0;n<t.input.length;++n)l.onnx.ValueInfoProto.encode(t.input[n],e.uint32(90).fork()).ldelim();if(null!=t.output&&t.output.length)for(n=0;n<t.output.length;++n)l.onnx.ValueInfoProto.encode(t.output[n],e.uint32(98).fork()).ldelim();if(null!=t.valueInfo&&t.valueInfo.length)for(n=0;n<t.valueInfo.length;++n)l.onnx.ValueInfoProto.encode(t.valueInfo[n],e.uint32(106).fork()).ldelim();if(null!=t.quantizationAnnotation&&t.quantizationAnnotation.length)for(n=0;n<t.quantizationAnnotation.length;++n)l.onnx.TensorAnnotation.encode(t.quantizationAnnotation[n],e.uint32(114).fork()).ldelim();return e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof s||(t=s.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.GraphProto;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.node&&r.node.length||(r.node=[]),r.node.push(l.onnx.NodeProto.decode(t,t.uint32()));break;case 2:r.name=t.string();break;case 5:r.initializer&&r.initializer.length||(r.initializer=[]),r.initializer.push(l.onnx.TensorProto.decode(t,t.uint32()));break;case 10:r.docString=t.string();break;case 11:r.input&&r.input.length||(r.input=[]),r.input.push(l.onnx.ValueInfoProto.decode(t,t.uint32()));break;case 12:r.output&&r.output.length||(r.output=[]),r.output.push(l.onnx.ValueInfoProto.decode(t,t.uint32()));break;case 13:r.valueInfo&&r.valueInfo.length||(r.valueInfo=[]),r.valueInfo.push(l.onnx.ValueInfoProto.decode(t,t.uint32()));break;case 14:r.quantizationAnnotation&&r.quantizationAnnotation.length||(r.quantizationAnnotation=[]),r.quantizationAnnotation.push(l.onnx.TensorAnnotation.decode(t,t.uint32()));break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof s||(t=new s(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.node&&t.hasOwnProperty("node")){if(!Array.isArray(t.node))return"node: array expected";for(var e=0;e<t.node.length;++e)if(n=l.onnx.NodeProto.verify(t.node[e]))return"node."+n}if(null!=t.name&&t.hasOwnProperty("name")&&!c.isString(t.name))return"name: string expected";if(null!=t.initializer&&t.hasOwnProperty("initializer")){if(!Array.isArray(t.initializer))return"initializer: array expected";for(e=0;e<t.initializer.length;++e)if(n=l.onnx.TensorProto.verify(t.initializer[e]))return"initializer."+n}if(null!=t.docString&&t.hasOwnProperty("docString")&&!c.isString(t.docString))return"docString: string expected";if(null!=t.input&&t.hasOwnProperty("input")){if(!Array.isArray(t.input))return"input: array expected";for(e=0;e<t.input.length;++e)if(n=l.onnx.ValueInfoProto.verify(t.input[e]))return"input."+n}if(null!=t.output&&t.hasOwnProperty("output")){if(!Array.isArray(t.output))return"output: array expected";for(e=0;e<t.output.length;++e)if(n=l.onnx.ValueInfoProto.verify(t.output[e]))return"output."+n}if(null!=t.valueInfo&&t.hasOwnProperty("valueInfo")){if(!Array.isArray(t.valueInfo))return"valueInfo: array expected";for(e=0;e<t.valueInfo.length;++e)if(n=l.onnx.ValueInfoProto.verify(t.valueInfo[e]))return"valueInfo."+n}if(null!=t.quantizationAnnotation&&t.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(t.quantizationAnnotation))return"quantizationAnnotation: array expected";for(e=0;e<t.quantizationAnnotation.length;++e){var n;if(n=l.onnx.TensorAnnotation.verify(t.quantizationAnnotation[e]))return"quantizationAnnotation."+n}}return null},t.fromObject=function(t){if(t instanceof l.onnx.GraphProto)return t;var e=new l.onnx.GraphProto;if(t.node){if(!Array.isArray(t.node))throw TypeError(".onnx.GraphProto.node: array expected");e.node=[];for(var n=0;n<t.node.length;++n){if("object"!=typeof t.node[n])throw TypeError(".onnx.GraphProto.node: object expected");e.node[n]=l.onnx.NodeProto.fromObject(t.node[n])}}if(null!=t.name&&(e.name=String(t.name)),t.initializer){if(!Array.isArray(t.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");for(e.initializer=[],n=0;n<t.initializer.length;++n){if("object"!=typeof t.initializer[n])throw TypeError(".onnx.GraphProto.initializer: object expected");e.initializer[n]=l.onnx.TensorProto.fromObject(t.initializer[n])}}if(null!=t.docString&&(e.docString=String(t.docString)),t.input){if(!Array.isArray(t.input))throw TypeError(".onnx.GraphProto.input: array expected");for(e.input=[],n=0;n<t.input.length;++n){if("object"!=typeof t.input[n])throw TypeError(".onnx.GraphProto.input: object expected");e.input[n]=l.onnx.ValueInfoProto.fromObject(t.input[n])}}if(t.output){if(!Array.isArray(t.output))throw TypeError(".onnx.GraphProto.output: array expected");for(e.output=[],n=0;n<t.output.length;++n){if("object"!=typeof t.output[n])throw TypeError(".onnx.GraphProto.output: object expected");e.output[n]=l.onnx.ValueInfoProto.fromObject(t.output[n])}}if(t.valueInfo){if(!Array.isArray(t.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");for(e.valueInfo=[],n=0;n<t.valueInfo.length;++n){if("object"!=typeof t.valueInfo[n])throw TypeError(".onnx.GraphProto.valueInfo: object expected");e.valueInfo[n]=l.onnx.ValueInfoProto.fromObject(t.valueInfo[n])}}if(t.quantizationAnnotation){if(!Array.isArray(t.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");for(e.quantizationAnnotation=[],n=0;n<t.quantizationAnnotation.length;++n){if("object"!=typeof t.quantizationAnnotation[n])throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");e.quantizationAnnotation[n]=l.onnx.TensorAnnotation.fromObject(t.quantizationAnnotation[n])}}return e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.node=[],n.initializer=[],n.input=[],n.output=[],n.valueInfo=[],n.quantizationAnnotation=[]),e.defaults&&(n.name="",n.docString=""),t.node&&t.node.length){n.node=[];for(var r=0;r<t.node.length;++r)n.node[r]=l.onnx.NodeProto.toObject(t.node[r],e)}if(null!=t.name&&t.hasOwnProperty("name")&&(n.name=t.name),t.initializer&&t.initializer.length)for(n.initializer=[],r=0;r<t.initializer.length;++r)n.initializer[r]=l.onnx.TensorProto.toObject(t.initializer[r],e);if(null!=t.docString&&t.hasOwnProperty("docString")&&(n.docString=t.docString),t.input&&t.input.length)for(n.input=[],r=0;r<t.input.length;++r)n.input[r]=l.onnx.ValueInfoProto.toObject(t.input[r],e);if(t.output&&t.output.length)for(n.output=[],r=0;r<t.output.length;++r)n.output[r]=l.onnx.ValueInfoProto.toObject(t.output[r],e);if(t.valueInfo&&t.valueInfo.length)for(n.valueInfo=[],r=0;r<t.valueInfo.length;++r)n.valueInfo[r]=l.onnx.ValueInfoProto.toObject(t.valueInfo[r],e);if(t.quantizationAnnotation&&t.quantizationAnnotation.length)for(n.quantizationAnnotation=[],r=0;r<t.quantizationAnnotation.length;++r)n.quantizationAnnotation[r]=l.onnx.TensorAnnotation.toObject(t.quantizationAnnotation[r],e);return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t}(),a.TensorProto=function(){function t(t){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.dims=c.emptyArray,t.prototype.dataType=0,t.prototype.segment=null,t.prototype.floatData=c.emptyArray,t.prototype.int32Data=c.emptyArray,t.prototype.stringData=c.emptyArray,t.prototype.int64Data=c.emptyArray,t.prototype.name="",t.prototype.docString="",t.prototype.rawData=c.newBuffer([]),t.prototype.externalData=c.emptyArray,t.prototype.dataLocation=0,t.prototype.doubleData=c.emptyArray,t.prototype.uint64Data=c.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=u.create()),null!=t.dims&&t.dims.length){e.uint32(10).fork();for(var n=0;n<t.dims.length;++n)e.int64(t.dims[n]);e.ldelim()}if(null!=t.dataType&&t.hasOwnProperty("dataType")&&e.uint32(16).int32(t.dataType),null!=t.segment&&t.hasOwnProperty("segment")&&l.onnx.TensorProto.Segment.encode(t.segment,e.uint32(26).fork()).ldelim(),null!=t.floatData&&t.floatData.length){for(e.uint32(34).fork(),n=0;n<t.floatData.length;++n)e.float(t.floatData[n]);e.ldelim()}if(null!=t.int32Data&&t.int32Data.length){for(e.uint32(42).fork(),n=0;n<t.int32Data.length;++n)e.int32(t.int32Data[n]);e.ldelim()}if(null!=t.stringData&&t.stringData.length)for(n=0;n<t.stringData.length;++n)e.uint32(50).bytes(t.stringData[n]);if(null!=t.int64Data&&t.int64Data.length){for(e.uint32(58).fork(),n=0;n<t.int64Data.length;++n)e.int64(t.int64Data[n]);e.ldelim()}if(null!=t.name&&t.hasOwnProperty("name")&&e.uint32(66).string(t.name),null!=t.rawData&&t.hasOwnProperty("rawData")&&e.uint32(74).bytes(t.rawData),null!=t.doubleData&&t.doubleData.length){for(e.uint32(82).fork(),n=0;n<t.doubleData.length;++n)e.double(t.doubleData[n]);e.ldelim()}if(null!=t.uint64Data&&t.uint64Data.length){for(e.uint32(90).fork(),n=0;n<t.uint64Data.length;++n)e.uint64(t.uint64Data[n]);e.ldelim()}if(null!=t.docString&&t.hasOwnProperty("docString")&&e.uint32(98).string(t.docString),null!=t.externalData&&t.externalData.length)for(n=0;n<t.externalData.length;++n)l.onnx.StringStringEntryProto.encode(t.externalData[n],e.uint32(106).fork()).ldelim();return null!=t.dataLocation&&t.hasOwnProperty("dataLocation")&&e.uint32(112).int32(t.dataLocation),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof s||(t=s.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.TensorProto;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:if(r.dims&&r.dims.length||(r.dims=[]),2==(7&o))for(var a=t.uint32()+t.pos;t.pos<a;)r.dims.push(t.int64());else r.dims.push(t.int64());break;case 2:r.dataType=t.int32();break;case 3:r.segment=l.onnx.TensorProto.Segment.decode(t,t.uint32());break;case 4:if(r.floatData&&r.floatData.length||(r.floatData=[]),2==(7&o))for(a=t.uint32()+t.pos;t.pos<a;)r.floatData.push(t.float());else r.floatData.push(t.float());break;case 5:if(r.int32Data&&r.int32Data.length||(r.int32Data=[]),2==(7&o))for(a=t.uint32()+t.pos;t.pos<a;)r.int32Data.push(t.int32());else r.int32Data.push(t.int32());break;case 6:r.stringData&&r.stringData.length||(r.stringData=[]),r.stringData.push(t.bytes());break;case 7:if(r.int64Data&&r.int64Data.length||(r.int64Data=[]),2==(7&o))for(a=t.uint32()+t.pos;t.pos<a;)r.int64Data.push(t.int64());else r.int64Data.push(t.int64());break;case 8:r.name=t.string();break;case 12:r.docString=t.string();break;case 9:r.rawData=t.bytes();break;case 13:r.externalData&&r.externalData.length||(r.externalData=[]),r.externalData.push(l.onnx.StringStringEntryProto.decode(t,t.uint32()));break;case 14:r.dataLocation=t.int32();break;case 10:if(r.doubleData&&r.doubleData.length||(r.doubleData=[]),2==(7&o))for(a=t.uint32()+t.pos;t.pos<a;)r.doubleData.push(t.double());else r.doubleData.push(t.double());break;case 11:if(r.uint64Data&&r.uint64Data.length||(r.uint64Data=[]),2==(7&o))for(a=t.uint32()+t.pos;t.pos<a;)r.uint64Data.push(t.uint64());else r.uint64Data.push(t.uint64());break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof s||(t=new s(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.dims&&t.hasOwnProperty("dims")){if(!Array.isArray(t.dims))return"dims: array expected";for(var e=0;e<t.dims.length;++e)if(!(c.isInteger(t.dims[e])||t.dims[e]&&c.isInteger(t.dims[e].low)&&c.isInteger(t.dims[e].high)))return"dims: integer|Long[] expected"}if(null!=t.dataType&&t.hasOwnProperty("dataType")&&!c.isInteger(t.dataType))return"dataType: integer expected";if(null!=t.segment&&t.hasOwnProperty("segment")&&(n=l.onnx.TensorProto.Segment.verify(t.segment)))return"segment."+n;if(null!=t.floatData&&t.hasOwnProperty("floatData")){if(!Array.isArray(t.floatData))return"floatData: array expected";for(e=0;e<t.floatData.length;++e)if("number"!=typeof t.floatData[e])return"floatData: number[] expected"}if(null!=t.int32Data&&t.hasOwnProperty("int32Data")){if(!Array.isArray(t.int32Data))return"int32Data: array expected";for(e=0;e<t.int32Data.length;++e)if(!c.isInteger(t.int32Data[e]))return"int32Data: integer[] expected"}if(null!=t.stringData&&t.hasOwnProperty("stringData")){if(!Array.isArray(t.stringData))return"stringData: array expected";for(e=0;e<t.stringData.length;++e)if(!(t.stringData[e]&&"number"==typeof t.stringData[e].length||c.isString(t.stringData[e])))return"stringData: buffer[] expected"}if(null!=t.int64Data&&t.hasOwnProperty("int64Data")){if(!Array.isArray(t.int64Data))return"int64Data: array expected";for(e=0;e<t.int64Data.length;++e)if(!(c.isInteger(t.int64Data[e])||t.int64Data[e]&&c.isInteger(t.int64Data[e].low)&&c.isInteger(t.int64Data[e].high)))return"int64Data: integer|Long[] expected"}if(null!=t.name&&t.hasOwnProperty("name")&&!c.isString(t.name))return"name: string expected";if(null!=t.docString&&t.hasOwnProperty("docString")&&!c.isString(t.docString))return"docString: string expected";if(null!=t.rawData&&t.hasOwnProperty("rawData")&&!(t.rawData&&"number"==typeof t.rawData.length||c.isString(t.rawData)))return"rawData: buffer expected";if(null!=t.externalData&&t.hasOwnProperty("externalData")){if(!Array.isArray(t.externalData))return"externalData: array expected";for(e=0;e<t.externalData.length;++e){var n;if(n=l.onnx.StringStringEntryProto.verify(t.externalData[e]))return"externalData."+n}}if(null!=t.dataLocation&&t.hasOwnProperty("dataLocation"))switch(t.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:}if(null!=t.doubleData&&t.hasOwnProperty("doubleData")){if(!Array.isArray(t.doubleData))return"doubleData: array expected";for(e=0;e<t.doubleData.length;++e)if("number"!=typeof t.doubleData[e])return"doubleData: number[] expected"}if(null!=t.uint64Data&&t.hasOwnProperty("uint64Data")){if(!Array.isArray(t.uint64Data))return"uint64Data: array expected";for(e=0;e<t.uint64Data.length;++e)if(!(c.isInteger(t.uint64Data[e])||t.uint64Data[e]&&c.isInteger(t.uint64Data[e].low)&&c.isInteger(t.uint64Data[e].high)))return"uint64Data: integer|Long[] expected"}return null},t.fromObject=function(t){if(t instanceof l.onnx.TensorProto)return t;var e=new l.onnx.TensorProto;if(t.dims){if(!Array.isArray(t.dims))throw TypeError(".onnx.TensorProto.dims: array expected");e.dims=[];for(var n=0;n<t.dims.length;++n)c.Long?(e.dims[n]=c.Long.fromValue(t.dims[n])).unsigned=!1:"string"==typeof t.dims[n]?e.dims[n]=parseInt(t.dims[n],10):"number"==typeof t.dims[n]?e.dims[n]=t.dims[n]:"object"==typeof t.dims[n]&&(e.dims[n]=new c.LongBits(t.dims[n].low>>>0,t.dims[n].high>>>0).toNumber())}if(null!=t.dataType&&(e.dataType=0|t.dataType),null!=t.segment){if("object"!=typeof t.segment)throw TypeError(".onnx.TensorProto.segment: object expected");e.segment=l.onnx.TensorProto.Segment.fromObject(t.segment)}if(t.floatData){if(!Array.isArray(t.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");for(e.floatData=[],n=0;n<t.floatData.length;++n)e.floatData[n]=Number(t.floatData[n])}if(t.int32Data){if(!Array.isArray(t.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");for(e.int32Data=[],n=0;n<t.int32Data.length;++n)e.int32Data[n]=0|t.int32Data[n]}if(t.stringData){if(!Array.isArray(t.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");for(e.stringData=[],n=0;n<t.stringData.length;++n)"string"==typeof t.stringData[n]?c.base64.decode(t.stringData[n],e.stringData[n]=c.newBuffer(c.base64.length(t.stringData[n])),0):t.stringData[n].length&&(e.stringData[n]=t.stringData[n])}if(t.int64Data){if(!Array.isArray(t.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");for(e.int64Data=[],n=0;n<t.int64Data.length;++n)c.Long?(e.int64Data[n]=c.Long.fromValue(t.int64Data[n])).unsigned=!1:"string"==typeof t.int64Data[n]?e.int64Data[n]=parseInt(t.int64Data[n],10):"number"==typeof t.int64Data[n]?e.int64Data[n]=t.int64Data[n]:"object"==typeof t.int64Data[n]&&(e.int64Data[n]=new c.LongBits(t.int64Data[n].low>>>0,t.int64Data[n].high>>>0).toNumber())}if(null!=t.name&&(e.name=String(t.name)),null!=t.docString&&(e.docString=String(t.docString)),null!=t.rawData&&("string"==typeof t.rawData?c.base64.decode(t.rawData,e.rawData=c.newBuffer(c.base64.length(t.rawData)),0):t.rawData.length&&(e.rawData=t.rawData)),t.externalData){if(!Array.isArray(t.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");for(e.externalData=[],n=0;n<t.externalData.length;++n){if("object"!=typeof t.externalData[n])throw TypeError(".onnx.TensorProto.externalData: object expected");e.externalData[n]=l.onnx.StringStringEntryProto.fromObject(t.externalData[n])}}switch(t.dataLocation){case"DEFAULT":case 0:e.dataLocation=0;break;case"EXTERNAL":case 1:e.dataLocation=1}if(t.doubleData){if(!Array.isArray(t.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");for(e.doubleData=[],n=0;n<t.doubleData.length;++n)e.doubleData[n]=Number(t.doubleData[n])}if(t.uint64Data){if(!Array.isArray(t.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");for(e.uint64Data=[],n=0;n<t.uint64Data.length;++n)c.Long?(e.uint64Data[n]=c.Long.fromValue(t.uint64Data[n])).unsigned=!0:"string"==typeof t.uint64Data[n]?e.uint64Data[n]=parseInt(t.uint64Data[n],10):"number"==typeof t.uint64Data[n]?e.uint64Data[n]=t.uint64Data[n]:"object"==typeof t.uint64Data[n]&&(e.uint64Data[n]=new c.LongBits(t.uint64Data[n].low>>>0,t.uint64Data[n].high>>>0).toNumber(!0))}return e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.dims=[],n.floatData=[],n.int32Data=[],n.stringData=[],n.int64Data=[],n.doubleData=[],n.uint64Data=[],n.externalData=[]),e.defaults&&(n.dataType=0,n.segment=null,n.name="",e.bytes===String?n.rawData="":(n.rawData=[],e.bytes!==Array&&(n.rawData=c.newBuffer(n.rawData))),n.docString="",n.dataLocation=e.enums===String?"DEFAULT":0),t.dims&&t.dims.length){n.dims=[];for(var r=0;r<t.dims.length;++r)"number"==typeof t.dims[r]?n.dims[r]=e.longs===String?String(t.dims[r]):t.dims[r]:n.dims[r]=e.longs===String?c.Long.prototype.toString.call(t.dims[r]):e.longs===Number?new c.LongBits(t.dims[r].low>>>0,t.dims[r].high>>>0).toNumber():t.dims[r]}if(null!=t.dataType&&t.hasOwnProperty("dataType")&&(n.dataType=t.dataType),null!=t.segment&&t.hasOwnProperty("segment")&&(n.segment=l.onnx.TensorProto.Segment.toObject(t.segment,e)),t.floatData&&t.floatData.length)for(n.floatData=[],r=0;r<t.floatData.length;++r)n.floatData[r]=e.json&&!isFinite(t.floatData[r])?String(t.floatData[r]):t.floatData[r];if(t.int32Data&&t.int32Data.length)for(n.int32Data=[],r=0;r<t.int32Data.length;++r)n.int32Data[r]=t.int32Data[r];if(t.stringData&&t.stringData.length)for(n.stringData=[],r=0;r<t.stringData.length;++r)n.stringData[r]=e.bytes===String?c.base64.encode(t.stringData[r],0,t.stringData[r].length):e.bytes===Array?Array.prototype.slice.call(t.stringData[r]):t.stringData[r];if(t.int64Data&&t.int64Data.length)for(n.int64Data=[],r=0;r<t.int64Data.length;++r)"number"==typeof t.int64Data[r]?n.int64Data[r]=e.longs===String?String(t.int64Data[r]):t.int64Data[r]:n.int64Data[r]=e.longs===String?c.Long.prototype.toString.call(t.int64Data[r]):e.longs===Number?new c.LongBits(t.int64Data[r].low>>>0,t.int64Data[r].high>>>0).toNumber():t.int64Data[r];if(null!=t.name&&t.hasOwnProperty("name")&&(n.name=t.name),null!=t.rawData&&t.hasOwnProperty("rawData")&&(n.rawData=e.bytes===String?c.base64.encode(t.rawData,0,t.rawData.length):e.bytes===Array?Array.prototype.slice.call(t.rawData):t.rawData),t.doubleData&&t.doubleData.length)for(n.doubleData=[],r=0;r<t.doubleData.length;++r)n.doubleData[r]=e.json&&!isFinite(t.doubleData[r])?String(t.doubleData[r]):t.doubleData[r];if(t.uint64Data&&t.uint64Data.length)for(n.uint64Data=[],r=0;r<t.uint64Data.length;++r)"number"==typeof t.uint64Data[r]?n.uint64Data[r]=e.longs===String?String(t.uint64Data[r]):t.uint64Data[r]:n.uint64Data[r]=e.longs===String?c.Long.prototype.toString.call(t.uint64Data[r]):e.longs===Number?new c.LongBits(t.uint64Data[r].low>>>0,t.uint64Data[r].high>>>0).toNumber(!0):t.uint64Data[r];if(null!=t.docString&&t.hasOwnProperty("docString")&&(n.docString=t.docString),t.externalData&&t.externalData.length)for(n.externalData=[],r=0;r<t.externalData.length;++r)n.externalData[r]=l.onnx.StringStringEntryProto.toObject(t.externalData[r],e);return null!=t.dataLocation&&t.hasOwnProperty("dataLocation")&&(n.dataLocation=e.enums===String?l.onnx.TensorProto.DataLocation[t.dataLocation]:t.dataLocation),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t.DataType=function(){var t={},e=Object.create(t);return e[t[0]="UNDEFINED"]=0,e[t[1]="FLOAT"]=1,e[t[2]="UINT8"]=2,e[t[3]="INT8"]=3,e[t[4]="UINT16"]=4,e[t[5]="INT16"]=5,e[t[6]="INT32"]=6,e[t[7]="INT64"]=7,e[t[8]="STRING"]=8,e[t[9]="BOOL"]=9,e[t[10]="FLOAT16"]=10,e[t[11]="DOUBLE"]=11,e[t[12]="UINT32"]=12,e[t[13]="UINT64"]=13,e[t[14]="COMPLEX64"]=14,e[t[15]="COMPLEX128"]=15,e[t[16]="BFLOAT16"]=16,e}(),t.Segment=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.begin=c.Long?c.Long.fromBits(0,0,!1):0,t.prototype.end=c.Long?c.Long.fromBits(0,0,!1):0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=u.create()),null!=t.begin&&t.hasOwnProperty("begin")&&e.uint32(8).int64(t.begin),null!=t.end&&t.hasOwnProperty("end")&&e.uint32(16).int64(t.end),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof s||(t=s.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.TensorProto.Segment;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.begin=t.int64();break;case 2:r.end=t.int64();break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof s||(t=new s(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.begin&&t.hasOwnProperty("begin")&&!(c.isInteger(t.begin)||t.begin&&c.isInteger(t.begin.low)&&c.isInteger(t.begin.high))?"begin: integer|Long expected":null!=t.end&&t.hasOwnProperty("end")&&!(c.isInteger(t.end)||t.end&&c.isInteger(t.end.low)&&c.isInteger(t.end.high))?"end: integer|Long expected":null},t.fromObject=function(t){if(t instanceof l.onnx.TensorProto.Segment)return t;var e=new l.onnx.TensorProto.Segment;return null!=t.begin&&(c.Long?(e.begin=c.Long.fromValue(t.begin)).unsigned=!1:"string"==typeof t.begin?e.begin=parseInt(t.begin,10):"number"==typeof t.begin?e.begin=t.begin:"object"==typeof t.begin&&(e.begin=new c.LongBits(t.begin.low>>>0,t.begin.high>>>0).toNumber())),null!=t.end&&(c.Long?(e.end=c.Long.fromValue(t.end)).unsigned=!1:"string"==typeof t.end?e.end=parseInt(t.end,10):"number"==typeof t.end?e.end=t.end:"object"==typeof t.end&&(e.end=new c.LongBits(t.end.low>>>0,t.end.high>>>0).toNumber())),e},t.toObject=function(t,e){e||(e={});var n={};if(e.defaults){if(c.Long){var r=new c.Long(0,0,!1);n.begin=e.longs===String?r.toString():e.longs===Number?r.toNumber():r}else n.begin=e.longs===String?"0":0;c.Long?(r=new c.Long(0,0,!1),n.end=e.longs===String?r.toString():e.longs===Number?r.toNumber():r):n.end=e.longs===String?"0":0}return null!=t.begin&&t.hasOwnProperty("begin")&&("number"==typeof t.begin?n.begin=e.longs===String?String(t.begin):t.begin:n.begin=e.longs===String?c.Long.prototype.toString.call(t.begin):e.longs===Number?new c.LongBits(t.begin.low>>>0,t.begin.high>>>0).toNumber():t.begin),null!=t.end&&t.hasOwnProperty("end")&&("number"==typeof t.end?n.end=e.longs===String?String(t.end):t.end:n.end=e.longs===String?c.Long.prototype.toString.call(t.end):e.longs===Number?new c.LongBits(t.end.low>>>0,t.end.high>>>0).toNumber():t.end),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t}(),t.DataLocation=function(){var t={},e=Object.create(t);return e[t[0]="DEFAULT"]=0,e[t[1]="EXTERNAL"]=1,e}(),t}(),a.TensorShapeProto=function(){function t(t){if(this.dim=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.dim=c.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=u.create()),null!=t.dim&&t.dim.length)for(var n=0;n<t.dim.length;++n)l.onnx.TensorShapeProto.Dimension.encode(t.dim[n],e.uint32(10).fork()).ldelim();return e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof s||(t=s.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.TensorShapeProto;t.pos<n;){var o=t.uint32();o>>>3==1?(r.dim&&r.dim.length||(r.dim=[]),r.dim.push(l.onnx.TensorShapeProto.Dimension.decode(t,t.uint32()))):t.skipType(7&o)}return r},t.decodeDelimited=function(t){return t instanceof s||(t=new s(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.dim&&t.hasOwnProperty("dim")){if(!Array.isArray(t.dim))return"dim: array expected";for(var e=0;e<t.dim.length;++e){var n=l.onnx.TensorShapeProto.Dimension.verify(t.dim[e]);if(n)return"dim."+n}}return null},t.fromObject=function(t){if(t instanceof l.onnx.TensorShapeProto)return t;var e=new l.onnx.TensorShapeProto;if(t.dim){if(!Array.isArray(t.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");e.dim=[];for(var n=0;n<t.dim.length;++n){if("object"!=typeof t.dim[n])throw TypeError(".onnx.TensorShapeProto.dim: object expected");e.dim[n]=l.onnx.TensorShapeProto.Dimension.fromObject(t.dim[n])}}return e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.dim=[]),t.dim&&t.dim.length){n.dim=[];for(var r=0;r<t.dim.length;++r)n.dim[r]=l.onnx.TensorShapeProto.Dimension.toObject(t.dim[r],e)}return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t.Dimension=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}var e;return t.prototype.dimValue=c.Long?c.Long.fromBits(0,0,!1):0,t.prototype.dimParam="",t.prototype.denotation="",Object.defineProperty(t.prototype,"value",{get:c.oneOfGetter(e=["dimValue","dimParam"]),set:c.oneOfSetter(e)}),t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=u.create()),null!=t.dimValue&&t.hasOwnProperty("dimValue")&&e.uint32(8).int64(t.dimValue),null!=t.dimParam&&t.hasOwnProperty("dimParam")&&e.uint32(18).string(t.dimParam),null!=t.denotation&&t.hasOwnProperty("denotation")&&e.uint32(26).string(t.denotation),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof s||(t=s.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.TensorShapeProto.Dimension;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.dimValue=t.int64();break;case 2:r.dimParam=t.string();break;case 3:r.denotation=t.string();break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof s||(t=new s(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";var e={};if(null!=t.dimValue&&t.hasOwnProperty("dimValue")&&(e.value=1,!(c.isInteger(t.dimValue)||t.dimValue&&c.isInteger(t.dimValue.low)&&c.isInteger(t.dimValue.high))))return"dimValue: integer|Long expected";if(null!=t.dimParam&&t.hasOwnProperty("dimParam")){if(1===e.value)return"value: multiple values";if(e.value=1,!c.isString(t.dimParam))return"dimParam: string expected"}return null!=t.denotation&&t.hasOwnProperty("denotation")&&!c.isString(t.denotation)?"denotation: string expected":null},t.fromObject=function(t){if(t instanceof l.onnx.TensorShapeProto.Dimension)return t;var e=new l.onnx.TensorShapeProto.Dimension;return null!=t.dimValue&&(c.Long?(e.dimValue=c.Long.fromValue(t.dimValue)).unsigned=!1:"string"==typeof t.dimValue?e.dimValue=parseInt(t.dimValue,10):"number"==typeof t.dimValue?e.dimValue=t.dimValue:"object"==typeof t.dimValue&&(e.dimValue=new c.LongBits(t.dimValue.low>>>0,t.dimValue.high>>>0).toNumber())),null!=t.dimParam&&(e.dimParam=String(t.dimParam)),null!=t.denotation&&(e.denotation=String(t.denotation)),e},t.toObject=function(t,e){e||(e={});var n={};return e.defaults&&(n.denotation=""),null!=t.dimValue&&t.hasOwnProperty("dimValue")&&("number"==typeof t.dimValue?n.dimValue=e.longs===String?String(t.dimValue):t.dimValue:n.dimValue=e.longs===String?c.Long.prototype.toString.call(t.dimValue):e.longs===Number?new c.LongBits(t.dimValue.low>>>0,t.dimValue.high>>>0).toNumber():t.dimValue,e.oneofs&&(n.value="dimValue")),null!=t.dimParam&&t.hasOwnProperty("dimParam")&&(n.dimParam=t.dimParam,e.oneofs&&(n.value="dimParam")),null!=t.denotation&&t.hasOwnProperty("denotation")&&(n.denotation=t.denotation),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t}(),t}(),a.TypeProto=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}var e;return t.prototype.tensorType=null,t.prototype.denotation="",Object.defineProperty(t.prototype,"value",{get:c.oneOfGetter(e=["tensorType"]),set:c.oneOfSetter(e)}),t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=u.create()),null!=t.tensorType&&t.hasOwnProperty("tensorType")&&l.onnx.TypeProto.Tensor.encode(t.tensorType,e.uint32(10).fork()).ldelim(),null!=t.denotation&&t.hasOwnProperty("denotation")&&e.uint32(50).string(t.denotation),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof s||(t=s.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.TypeProto;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.tensorType=l.onnx.TypeProto.Tensor.decode(t,t.uint32());break;case 6:r.denotation=t.string();break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof s||(t=new s(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.tensorType&&t.hasOwnProperty("tensorType")){var e=l.onnx.TypeProto.Tensor.verify(t.tensorType);if(e)return"tensorType."+e}return null!=t.denotation&&t.hasOwnProperty("denotation")&&!c.isString(t.denotation)?"denotation: string expected":null},t.fromObject=function(t){if(t instanceof l.onnx.TypeProto)return t;var e=new l.onnx.TypeProto;if(null!=t.tensorType){if("object"!=typeof t.tensorType)throw TypeError(".onnx.TypeProto.tensorType: object expected");e.tensorType=l.onnx.TypeProto.Tensor.fromObject(t.tensorType)}return null!=t.denotation&&(e.denotation=String(t.denotation)),e},t.toObject=function(t,e){e||(e={});var n={};return e.defaults&&(n.denotation=""),null!=t.tensorType&&t.hasOwnProperty("tensorType")&&(n.tensorType=l.onnx.TypeProto.Tensor.toObject(t.tensorType,e),e.oneofs&&(n.value="tensorType")),null!=t.denotation&&t.hasOwnProperty("denotation")&&(n.denotation=t.denotation),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t.Tensor=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.elemType=0,t.prototype.shape=null,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=u.create()),null!=t.elemType&&t.hasOwnProperty("elemType")&&e.uint32(8).int32(t.elemType),null!=t.shape&&t.hasOwnProperty("shape")&&l.onnx.TensorShapeProto.encode(t.shape,e.uint32(18).fork()).ldelim(),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof s||(t=s.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.TypeProto.Tensor;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.elemType=t.int32();break;case 2:r.shape=l.onnx.TensorShapeProto.decode(t,t.uint32());break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof s||(t=new s(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!=typeof t||null===t)return"object expected";if(null!=t.elemType&&t.hasOwnProperty("elemType")&&!c.isInteger(t.elemType))return"elemType: integer expected";if(null!=t.shape&&t.hasOwnProperty("shape")){var e=l.onnx.TensorShapeProto.verify(t.shape);if(e)return"shape."+e}return null},t.fromObject=function(t){if(t instanceof l.onnx.TypeProto.Tensor)return t;var e=new l.onnx.TypeProto.Tensor;if(null!=t.elemType&&(e.elemType=0|t.elemType),null!=t.shape){if("object"!=typeof t.shape)throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");e.shape=l.onnx.TensorShapeProto.fromObject(t.shape)}return e},t.toObject=function(t,e){e||(e={});var n={};return e.defaults&&(n.elemType=0,n.shape=null),null!=t.elemType&&t.hasOwnProperty("elemType")&&(n.elemType=t.elemType),null!=t.shape&&t.hasOwnProperty("shape")&&(n.shape=l.onnx.TensorShapeProto.toObject(t.shape,e)),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t}(),t}(),a.OperatorSetIdProto=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.domain="",t.prototype.version=c.Long?c.Long.fromBits(0,0,!1):0,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=u.create()),null!=t.domain&&t.hasOwnProperty("domain")&&e.uint32(10).string(t.domain),null!=t.version&&t.hasOwnProperty("version")&&e.uint32(16).int64(t.version),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof s||(t=s.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new l.onnx.OperatorSetIdProto;t.pos<n;){var o=t.uint32();switch(o>>>3){case 1:r.domain=t.string();break;case 2:r.version=t.int64();break;default:t.skipType(7&o)}}return r},t.decodeDelimited=function(t){return t instanceof s||(t=new s(t)),this.decode(t,t.uint32())},t.verify=function(t){return"object"!=typeof t||null===t?"object expected":null!=t.domain&&t.hasOwnProperty("domain")&&!c.isString(t.domain)?"domain: string expected":null!=t.version&&t.hasOwnProperty("version")&&!(c.isInteger(t.version)||t.version&&c.isInteger(t.version.low)&&c.isInteger(t.version.high))?"version: integer|Long expected":null},t.fromObject=function(t){if(t instanceof l.onnx.OperatorSetIdProto)return t;var e=new l.onnx.OperatorSetIdProto;return null!=t.domain&&(e.domain=String(t.domain)),null!=t.version&&(c.Long?(e.version=c.Long.fromValue(t.version)).unsigned=!1:"string"==typeof t.version?e.version=parseInt(t.version,10):"number"==typeof t.version?e.version=t.version:"object"==typeof t.version&&(e.version=new c.LongBits(t.version.low>>>0,t.version.high>>>0).toNumber())),e},t.toObject=function(t,e){e||(e={});var n={};if(e.defaults)if(n.domain="",c.Long){var r=new c.Long(0,0,!1);n.version=e.longs===String?r.toString():e.longs===Number?r.toNumber():r}else n.version=e.longs===String?"0":0;return null!=t.domain&&t.hasOwnProperty("domain")&&(n.domain=t.domain),null!=t.version&&t.hasOwnProperty("version")&&("number"==typeof t.version?n.version=e.longs===String?String(t.version):t.version:n.version=e.longs===String?c.Long.prototype.toString.call(t.version):e.longs===Number?new c.LongBits(t.version.low>>>0,t.version.high>>>0).toNumber():t.version),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t}(),a),t.exports=l},2100:function(t,e,n){"use strict";t.exports=n(9482)},9482:function(t,e,n){"use strict";var r=e;function o(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}r.build="minimal",r.Writer=n(1173),r.BufferWriter=n(3155),r.Reader=n(1408),r.BufferReader=n(593),r.util=n(9693),r.rpc=n(5994),r.roots=n(5054),r.configure=o,o()},1408:function(t,e,n){"use strict";t.exports=u;var r,o=n(9693),a=o.LongBits,i=o.utf8;function s(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function u(t){this.buf=t,this.pos=0,this.len=t.length}var c,l="undefined"!=typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new u(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new u(t);throw Error("illegal buffer")},f=function(){return o.Buffer?function(t){return(u.create=function(t){return o.Buffer.isBuffer(t)?new r(t):l(t)})(t)}:l};function p(){var t=new a(0,0),e=0;if(!(this.len-this.pos>4)){for(;e<3;++e){if(this.pos>=this.len)throw s(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*e)>>>0,t}for(;e<4;++e)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(e=0,this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw s(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}function d(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}function h(){if(this.pos+8>this.len)throw s(this,8);return new a(d(this.buf,this.pos+=4),d(this.buf,this.pos+=4))}u.create=f(),u.prototype._slice=o.Array.prototype.subarray||o.Array.prototype.slice,u.prototype.uint32=(c=4294967295,function(){if(c=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return c;if((this.pos+=5)>this.len)throw this.pos=this.len,s(this,10);return c}),u.prototype.int32=function(){return 0|this.uint32()},u.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)|0},u.prototype.bool=function(){return 0!==this.uint32()},u.prototype.fixed32=function(){if(this.pos+4>this.len)throw s(this,4);return d(this.buf,this.pos+=4)},u.prototype.sfixed32=function(){if(this.pos+4>this.len)throw s(this,4);return 0|d(this.buf,this.pos+=4)},u.prototype.float=function(){if(this.pos+4>this.len)throw s(this,4);var t=o.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},u.prototype.double=function(){if(this.pos+8>this.len)throw s(this,4);var t=o.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},u.prototype.bytes=function(){var t=this.uint32(),e=this.pos,n=this.pos+t;if(n>this.len)throw s(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(e,n):e===n?new this.buf.constructor(0):this._slice.call(this.buf,e,n)},u.prototype.string=function(){var t=this.bytes();return i.read(t,0,t.length)},u.prototype.skip=function(t){if("number"==typeof t){if(this.pos+t>this.len)throw s(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw s(this)}while(128&this.buf[this.pos++]);return this},u.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(t=7&this.uint32());)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},u._configure=function(t){r=t,u.create=f(),r._configure();var e=o.Long?"toLong":"toNumber";o.merge(u.prototype,{int64:function(){return p.call(this)[e](!1)},uint64:function(){return p.call(this)[e](!0)},sint64:function(){return p.call(this).zzDecode()[e](!1)},fixed64:function(){return h.call(this)[e](!0)},sfixed64:function(){return h.call(this)[e](!1)}})}},593:function(t,e,n){"use strict";t.exports=a;var r=n(1408);(a.prototype=Object.create(r.prototype)).constructor=a;var o=n(9693);function a(t){r.call(this,t)}a._configure=function(){o.Buffer&&(a.prototype._slice=o.Buffer.prototype.slice)},a.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))},a._configure()},5054:function(t){"use strict";t.exports={}},5994:function(t,e,n){"use strict";e.Service=n(7948)},7948:function(t,e,n){"use strict";t.exports=o;var r=n(9693);function o(t,e,n){if("function"!=typeof t)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(n)}(o.prototype=Object.create(r.EventEmitter.prototype)).constructor=o,o.prototype.rpcCall=function t(e,n,o,a,i){if(!a)throw TypeError("request must be specified");var s=this;if(!i)return r.asPromise(t,s,e,n,o,a);if(s.rpcImpl)try{return s.rpcImpl(e,n[s.requestDelimited?"encodeDelimited":"encode"](a).finish(),(function(t,n){if(t)return s.emit("error",t,e),i(t);if(null!==n){if(!(n instanceof o))try{n=o[s.responseDelimited?"decodeDelimited":"decode"](n)}catch(t){return s.emit("error",t,e),i(t)}return s.emit("data",n,e),i(null,n)}s.end(!0)}))}catch(t){return s.emit("error",t,e),void setTimeout((function(){i(t)}),0)}else setTimeout((function(){i(Error("already ended"))}),0)},o.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},1945:function(t,e,n){"use strict";t.exports=o;var r=n(9693);function o(t,e){this.lo=t>>>0,this.hi=e>>>0}var a=o.zero=new o(0,0);a.toNumber=function(){return 0},a.zzEncode=a.zzDecode=function(){return this},a.length=function(){return 1};var i=o.zeroHash="\0\0\0\0\0\0\0\0";o.fromNumber=function(t){if(0===t)return a;var e=t<0;e&&(t=-t);var n=t>>>0,r=(t-n)/4294967296>>>0;return e&&(r=~r>>>0,n=~n>>>0,++n>4294967295&&(n=0,++r>4294967295&&(r=0))),new o(n,r)},o.from=function(t){if("number"==typeof t)return o.fromNumber(t);if(r.isString(t)){if(!r.Long)return o.fromNumber(parseInt(t,10));t=r.Long.fromString(t)}return t.low||t.high?new o(t.low>>>0,t.high>>>0):a},o.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var e=1+~this.lo>>>0,n=~this.hi>>>0;return e||(n=n+1>>>0),-(e+4294967296*n)}return this.lo+4294967296*this.hi},o.prototype.toLong=function(t){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)}};var s=String.prototype.charCodeAt;o.fromHash=function(t){return t===i?a:new o((s.call(t,0)|s.call(t,1)<<8|s.call(t,2)<<16|s.call(t,3)<<24)>>>0,(s.call(t,4)|s.call(t,5)<<8|s.call(t,6)<<16|s.call(t,7)<<24)>>>0)},o.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},o.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},o.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},o.prototype.length=function(){var t=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===e?t<16384?t<128?1:2:t<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:n<128?9:10}},9693:function(t,e,n){"use strict";var r=e;function o(t,e,n){for(var r=Object.keys(e),o=0;o<r.length;++o)void 0!==t[r[o]]&&n||(t[r[o]]=e[r[o]]);return t}function a(t){function e(t,n){if(!(this instanceof e))return new e(t,n);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&o(this,n)}return(e.prototype=Object.create(Error.prototype)).constructor=e,Object.defineProperty(e.prototype,"name",{get:function(){return t}}),e.prototype.toString=function(){return this.name+": "+this.message},e}r.asPromise=n(4537),r.base64=n(7419),r.EventEmitter=n(9211),r.float=n(945),r.inquire=n(7199),r.utf8=n(4997),r.pool=n(6662),r.LongBits=n(1945),r.isNode=Boolean("undefined"!=typeof global&&global&&global.process&&global.process.versions&&global.process.versions.node),r.global=r.isNode&&global||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},r.isString=function(t){return"string"==typeof t||t instanceof String},r.isObject=function(t){return t&&"object"==typeof t},r.isset=r.isSet=function(t,e){var n=t[e];return!(null==n||!t.hasOwnProperty(e))&&("object"!=typeof n||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},r.Buffer=function(){try{var t=r.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(t){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(t){return"number"==typeof t?r.Buffer?r._Buffer_allocUnsafe(t):new r.Array(t):r.Buffer?r._Buffer_from(t):"undefined"==typeof Uint8Array?t:new Uint8Array(t)},r.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(t){return t?r.LongBits.from(t).toHash():r.LongBits.zeroHash},r.longFromHash=function(t,e){var n=r.LongBits.fromHash(t);return r.Long?r.Long.fromBits(n.lo,n.hi,e):n.toNumber(Boolean(e))},r.merge=o,r.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)},r.newError=a,r.ProtocolError=a("ProtocolError"),r.oneOfGetter=function(t){for(var e={},n=0;n<t.length;++n)e[t[n]]=1;return function(){for(var t=Object.keys(this),n=t.length-1;n>-1;--n)if(1===e[t[n]]&&void 0!==this[t[n]]&&null!==this[t[n]])return t[n]}},r.oneOfSetter=function(t){return function(e){for(var n=0;n<t.length;++n)t[n]!==e&&delete this[t[n]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var t=r.Buffer;t?(r._Buffer_from=t.from!==Uint8Array.from&&t.from||function(e,n){return new t(e,n)},r._Buffer_allocUnsafe=t.allocUnsafe||function(e){return new t(e)}):r._Buffer_from=r._Buffer_allocUnsafe=null}},1173:function(t,e,n){"use strict";t.exports=f;var r,o=n(9693),a=o.LongBits,i=o.base64,s=o.utf8;function u(t,e,n){this.fn=t,this.len=e,this.next=void 0,this.val=n}function c(){}function l(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function f(){this.len=0,this.head=new u(c,0,0),this.tail=this.head,this.states=null}var p=function(){return o.Buffer?function(){return(f.create=function(){return new r})()}:function(){return new f}};function d(t,e,n){e[n]=255&t}function h(t,e){this.len=t,this.next=void 0,this.val=e}function g(t,e,n){for(;t.hi;)e[n++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[n++]=127&t.lo|128,t.lo=t.lo>>>7;e[n++]=t.lo}function m(t,e,n){e[n]=255&t,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24}f.create=p(),f.alloc=function(t){return new o.Array(t)},o.Array!==Array&&(f.alloc=o.pool(f.alloc,o.Array.prototype.subarray)),f.prototype._push=function(t,e,n){return this.tail=this.tail.next=new u(t,e,n),this.len+=e,this},h.prototype=Object.create(u.prototype),h.prototype.fn=function(t,e,n){for(;t>127;)e[n++]=127&t|128,t>>>=7;e[n]=t},f.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new h((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this},f.prototype.int32=function(t){return t<0?this._push(g,10,a.fromNumber(t)):this.uint32(t)},f.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},f.prototype.uint64=function(t){var e=a.from(t);return this._push(g,e.length(),e)},f.prototype.int64=f.prototype.uint64,f.prototype.sint64=function(t){var e=a.from(t).zzEncode();return this._push(g,e.length(),e)},f.prototype.bool=function(t){return this._push(d,1,t?1:0)},f.prototype.fixed32=function(t){return this._push(m,4,t>>>0)},f.prototype.sfixed32=f.prototype.fixed32,f.prototype.fixed64=function(t){var e=a.from(t);return this._push(m,4,e.lo)._push(m,4,e.hi)},f.prototype.sfixed64=f.prototype.fixed64,f.prototype.float=function(t){return this._push(o.float.writeFloatLE,4,t)},f.prototype.double=function(t){return this._push(o.float.writeDoubleLE,8,t)};var y=o.Array.prototype.set?function(t,e,n){e.set(t,n)}:function(t,e,n){for(var r=0;r<t.length;++r)e[n+r]=t[r]};f.prototype.bytes=function(t){var e=t.length>>>0;if(!e)return this._push(d,1,0);if(o.isString(t)){var n=f.alloc(e=i.length(t));i.decode(t,n,0),t=n}return this.uint32(e)._push(y,e,t)},f.prototype.string=function(t){var e=s.length(t);return e?this.uint32(e)._push(s.write,e,t):this._push(d,1,0)},f.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new u(c,0,0),this.len=0,this},f.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new u(c,0,0),this.len=0),this},f.prototype.ldelim=function(){var t=this.head,e=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=t.next,this.tail=e,this.len+=n),this},f.prototype.finish=function(){for(var t=this.head.next,e=this.constructor.alloc(this.len),n=0;t;)t.fn(t.val,e,n),n+=t.len,t=t.next;return e},f._configure=function(t){r=t,f.create=p(),r._configure()}},3155:function(t,e,n){"use strict";t.exports=a;var r=n(1173);(a.prototype=Object.create(r.prototype)).constructor=a;var o=n(9693);function a(){r.call(this)}function i(t,e,n){t.length<40?o.utf8.write(t,e,n):e.utf8Write?e.utf8Write(t,n):e.write(t,n)}a._configure=function(){a.alloc=o._Buffer_allocUnsafe,a.writeBytesBuffer=o.Buffer&&o.Buffer.prototype instanceof Uint8Array&&"set"===o.Buffer.prototype.set.name?function(t,e,n){e.set(t,n)}:function(t,e,n){if(t.copy)t.copy(e,n,0,t.length);else for(var r=0;r<t.length;)e[n++]=t[r++]}},a.prototype.bytes=function(t){o.isString(t)&&(t=o._Buffer_from(t,"base64"));var e=t.length>>>0;return this.uint32(e),e&&this._push(a.writeBytesBuffer,e,t),this},a.prototype.string=function(t){var e=o.Buffer.byteLength(t);return this.uint32(e),e&&this._push(i,e,t),this},a._configure()},4154:function(t){"use strict";t.exports='"use strict";var e={},a="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(a){var r=require("worker_threads"),t=r.parentPort;t.on("message",(e=>onmessage({data:e})));var s=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:function(e){(0,eval)(s.readFileSync(e,"utf8")+"//# sourceURL="+e)},postMessage:function(e){t.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var o=!1,n=function(){var e=Array.prototype.slice.call(arguments).join(" ");a?s.writeSync(2,e+"\\n"):console.error(e)};self.alert=function(){var a=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:a,threadId:e._pthread_self()})},e.instantiateWasm=(a,r)=>{var t=e.wasmModule;return e.wasmModule=null,r(new WebAssembly.Instance(t,a))},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=function a(r){try{if("load"===r.data.cmd){let s=[];self.onmessage=e=>s.push(e),self.startWorker=r=>{e=r,postMessage({cmd:"loaded"});for(let e of s)a(e);self.onmessage=a},e.wasmModule=r.data.wasmModule;for(const a of r.data.handlers)e[a]=function(){postMessage({cmd:"callHandler",handler:a,args:[...arguments]})};if(e.wasmMemory=r.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof r.data.urlOrBlob)importScripts(r.data.urlOrBlob);else{var t=URL.createObjectURL(r.data.urlOrBlob);importScripts(t),URL.revokeObjectURL(t)}ortWasmThreaded(e)}else if("run"===r.data.cmd){e.__emscripten_thread_init(r.data.pthread_ptr,0,0,1),e.__emscripten_thread_mailbox_await(r.data.pthread_ptr),e.establishStackSpace(),e.PThread.receiveObjectTransfer(r.data),e.PThread.threadInitTLS(),o||(o=!0);try{e.invokeEntryPoint(r.data.start_routine,r.data.arg)}catch(e){if("unwind"!=e)throw e}}else"cancel"===r.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===r.data.target||("checkMailbox"===r.data.cmd?o&&e.checkMailbox():r.data.cmd&&(n("worker.js received unknown command "+r.data.cmd),n(r.data)))}catch(a){throw e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),a}};\n'},7067:function(){},1296:function(){},760:function(){},1384:function(){},3993:function(){},908:function(){},6953:function(){},9925:function(){},2806:function(){},6449:function(){},2850:function(){},5381:function(){},685:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.resolveBackend=e.registerBackend=void 0;const n={},r=[];e.registerBackend=(t,e,o)=>{if(!e||"function"!=typeof e.init||"function"!=typeof e.createSessionHandler)throw new TypeError("not a valid backend");{const a=n[t];if(void 0===a)n[t]={backend:e,priority:o};else{if(a.priority>o)return;if(a.priority===o&&a.backend!==e)throw new Error(`cannot register backend "${t}" using priority ${o}`)}if(o>=0){const e=r.indexOf(t);-1!==e&&r.splice(e,1);for(let e=0;e<r.length;e++)if(n[r[e]].priority<=o)return void r.splice(e,0,t);r.push(t)}}},e.resolveBackend=async t=>{const e=0===t.length?r:t,o=[];for(const t of e){const e=n[t];if(e){if(e.initialized)return e.backend;if(e.aborted)continue;const n=!!e.initPromise;try{return n||(e.initPromise=e.backend.init()),await e.initPromise,e.initialized=!0,e.backend}catch(r){n||o.push({name:t,err:r}),e.aborted=!0}finally{delete e.initPromise}}}throw new Error(`no available backend found. ERR: ${o.map((t=>`[${t.name}] ${t.err}`)).join(", ")}`)}},4798:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.registerBackend=void 0;var r=n(685);Object.defineProperty(e,"registerBackend",{enumerable:!0,get:function(){return r.registerBackend}})},3121:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.env=void 0;const r=n(9104);let o="warning";e.env={wasm:{},webgl:{},webgpu:{},versions:{common:r.version},set logLevel(t){if(void 0!==t){if("string"!=typeof t||-1===["verbose","info","warning","error","fatal"].indexOf(t))throw new Error(`Unsupported logging level: ${t}`);o=t}},get logLevel(){return o}},Object.defineProperty(e.env,"logLevel",{enumerable:!0})},2457:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.env=void 0;const r=n(3121);e.env=r.env},2235:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,o)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),o(n(4798),e),o(n(2457),e),o(n(3974),e),o(n(963),e),o(n(7852),e)},8036:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InferenceSession=void 0;const r=n(685),o=n(963);class a{constructor(t){this.handler=t}async run(t,e,n){const r={};let a={};if("object"!=typeof t||null===t||t instanceof o.Tensor||Array.isArray(t))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let i=!0;if("object"==typeof e){if(null===e)throw new TypeError("Unexpected argument[1]: cannot be null.");if(e instanceof o.Tensor)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(e)){if(0===e.length)throw new TypeError("'fetches' cannot be an empty array.");i=!1;for(const t of e){if("string"!=typeof t)throw new TypeError("'fetches' must be a string array or an object.");if(-1===this.outputNames.indexOf(t))throw new RangeError(`'fetches' contains invalid output name: ${t}.`);r[t]=null}if("object"==typeof n&&null!==n)a=n;else if(void 0!==n)throw new TypeError("'options' must be an object.")}else{let t=!1;const s=Object.getOwnPropertyNames(e);for(const n of this.outputNames)if(-1!==s.indexOf(n)){const a=e[n];(null===a||a instanceof o.Tensor)&&(t=!0,i=!1,r[n]=a)}if(t){if("object"==typeof n&&null!==n)a=n;else if(void 0!==n)throw new TypeError("'options' must be an object.")}else a=e}}else if(void 0!==e)throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(const e of this.inputNames)if(void 0===t[e])throw new Error(`input '${e}' is missing in 'feeds'.`);if(i)for(const t of this.outputNames)r[t]=null;const s=await this.handler.run(t,r,a),u={};for(const t in s)Object.hasOwnProperty.call(s,t)&&(u[t]=new o.Tensor(s[t].type,s[t].data,s[t].dims));return u}async release(){return this.handler.dispose()}static async create(t,e,n,o){let i,s={};if("string"==typeof t){if(i=t,"object"==typeof e&&null!==e)s=e;else if(void 0!==e)throw new TypeError("'options' must be an object.")}else if(t instanceof Uint8Array){if(i=t,"object"==typeof e&&null!==e)s=e;else if(void 0!==e)throw new TypeError("'options' must be an object.")}else{if(!(t instanceof ArrayBuffer||"undefined"!=typeof SharedArrayBuffer&&t instanceof SharedArrayBuffer))throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");{const r=t;let a=0,u=t.byteLength;if("object"==typeof e&&null!==e)s=e;else if("number"==typeof e){if(a=e,!Number.isSafeInteger(a))throw new RangeError("'byteOffset' must be an integer.");if(a<0||a>=r.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${r.byteLength}).`);if(u=t.byteLength-a,"number"==typeof n){if(u=n,!Number.isSafeInteger(u))throw new RangeError("'byteLength' must be an integer.");if(u<=0||a+u>r.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${r.byteLength-a}].`);if("object"==typeof o&&null!==o)s=o;else if(void 0!==o)throw new TypeError("'options' must be an object.")}else if(void 0!==n)throw new TypeError("'byteLength' must be a number.")}else if(void 0!==e)throw new TypeError("'options' must be an object.");i=new Uint8Array(r,a,u)}}const u=(s.executionProviders||[]).map((t=>"string"==typeof t?t:t.name)),c=await(0,r.resolveBackend)(u),l=await c.createSessionHandler(i,s);return new a(l)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}e.InferenceSession=a},3974:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InferenceSession=void 0;const r=n(8036);e.InferenceSession=r.InferenceSession},7852:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},2350:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tensorToImageData=e.tensorToDataURL=void 0,e.tensorToDataURL=(t,e)=>{const n=document.createElement("canvas");n.width=t.dims[3],n.height=t.dims[2];const r=n.getContext("2d");if(null!=r){let o,a;void 0!==e?.tensorLayout&&"NHWC"===e.tensorLayout?(o=t.dims[2],a=t.dims[3]):(o=t.dims[3],a=t.dims[2]);const i=void 0!==e?.format?e.format:"RGB",s=e?.norm;let u,c;void 0===s||void 0===s.mean?u=[255,255,255,255]:"number"==typeof s.mean?u=[s.mean,s.mean,s.mean,s.mean]:(u=[s.mean[0],s.mean[1],s.mean[2],0],void 0!==s.mean[3]&&(u[3]=s.mean[3])),void 0===s||void 0===s.bias?c=[0,0,0,0]:"number"==typeof s.bias?c=[s.bias,s.bias,s.bias,s.bias]:(c=[s.bias[0],s.bias[1],s.bias[2],0],void 0!==s.bias[3]&&(c[3]=s.bias[3]));const l=a*o;let f=0,p=l,d=2*l,h=-1;"RGBA"===i?(f=0,p=l,d=2*l,h=3*l):"RGB"===i?(f=0,p=l,d=2*l):"RBG"===i&&(f=0,d=l,p=2*l);for(let e=0;e<a;e++)for(let n=0;n<o;n++){const o=(t.data[f++]-c[0])*u[0],a=(t.data[p++]-c[1])*u[1],i=(t.data[d++]-c[2])*u[2],s=-1===h?255:(t.data[h++]-c[3])*u[3];r.fillStyle="rgba("+o+","+a+","+i+","+s+")",r.fillRect(n,e,1,1)}return n.toDataURL()}throw new Error("Can not access image data")},e.tensorToImageData=(t,e)=>{const n=document.createElement("canvas").getContext("2d");let r;if(null==n)throw new Error("Can not access image data");{let o,a,i;void 0!==e?.tensorLayout&&"NHWC"===e.tensorLayout?(o=t.dims[2],a=t.dims[1],i=t.dims[3]):(o=t.dims[3],a=t.dims[2],i=t.dims[1]);const s=void 0!==e&&void 0!==e.format?e.format:"RGB",u=e?.norm;let c,l;void 0===u||void 0===u.mean?c=[255,255,255,255]:"number"==typeof u.mean?c=[u.mean,u.mean,u.mean,u.mean]:(c=[u.mean[0],u.mean[1],u.mean[2],255],void 0!==u.mean[3]&&(c[3]=u.mean[3])),void 0===u||void 0===u.bias?l=[0,0,0,0]:"number"==typeof u.bias?l=[u.bias,u.bias,u.bias,u.bias]:(l=[u.bias[0],u.bias[1],u.bias[2],0],void 0!==u.bias[3]&&(l[3]=u.bias[3]));const f=a*o;if(void 0!==e&&(void 0!==e.format&&4===i&&"RGBA"!==e.format||3===i&&"RGB"!==e.format&&"BGR"!==e.format))throw new Error("Tensor format doesn't match input tensor dims");const p=4;let d=0,h=1,g=2,m=3,y=0,b=f,v=2*f,w=-1;"RGBA"===s?(y=0,b=f,v=2*f,w=3*f):"RGB"===s?(y=0,b=f,v=2*f):"RBG"===s&&(y=0,v=f,b=2*f),r=n.createImageData(o,a);for(let e=0;e<a*o;d+=p,h+=p,g+=p,m+=p,e++)r.data[d]=(t.data[y++]-l[0])*c[0],r.data[h]=(t.data[b++]-l[1])*c[1],r.data[g]=(t.data[v++]-l[2])*c[2],r.data[m]=-1===w?255:(t.data[w++]-l[3])*c[3]}return r}},4866:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tensorFromImage=e.bufferToTensor=void 0;const r=n(963);e.bufferToTensor=(t,e)=>{if(void 0===t)throw new Error("Image buffer must be defined");if(void 0===e.height||void 0===e.width)throw new Error("Image height and width must be defined");if("NHWC"===e.tensorLayout)throw new Error("NHWC Tensor layout is not supported yet");const{height:n,width:o}=e,a=e.norm??{mean:255,bias:0};let i,s;i="number"==typeof a.mean?[a.mean,a.mean,a.mean,a.mean]:[a.mean[0],a.mean[1],a.mean[2],a.mean[3]??255],s="number"==typeof a.bias?[a.bias,a.bias,a.bias,a.bias]:[a.bias[0],a.bias[1],a.bias[2],a.bias[3]??0];const u=void 0!==e.format?e.format:"RGBA",c=void 0!==e.tensorFormat&&void 0!==e.tensorFormat?e.tensorFormat:"RGB",l=n*o,f="RGBA"===c?new Float32Array(4*l):new Float32Array(3*l);let p=4,d=0,h=1,g=2,m=3,y=0,b=l,v=2*l,w=-1;"RGB"===u&&(p=3,d=0,h=1,g=2,m=-1),"RGBA"===c?w=3*l:"RBG"===c?(y=0,v=l,b=2*l):"BGR"===c&&(v=0,b=l,y=2*l);for(let e=0;e<l;e++,d+=p,g+=p,h+=p,m+=p)f[y++]=(t[d]+s[0])/i[0],f[b++]=(t[h]+s[1])/i[1],f[v++]=(t[g]+s[2])/i[2],-1!==w&&-1!==m&&(f[w++]=(t[m]+s[3])/i[3]);return"RGBA"===c?new r.Tensor("float32",f,[1,4,n,o]):new r.Tensor("float32",f,[1,3,n,o])},e.tensorFromImage=async(t,n)=>{const r="undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement,o="undefined"!=typeof ImageData&&t instanceof ImageData,a="undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap,i="string"==typeof t;let s,u=n??{};if(r){const e=document.createElement("canvas");e.width=t.width,e.height=t.height;const r=e.getContext("2d");if(null==r)throw new Error("Can not access image data");{let e=t.height,o=t.width;if(void 0!==n&&void 0!==n.resizedHeight&&void 0!==n.resizedWidth&&(e=n.resizedHeight,o=n.resizedWidth),void 0!==n){if(u=n,void 0!==n.tensorFormat)throw new Error("Image input config format must be RGBA for HTMLImageElement");u.tensorFormat="RGBA",u.height=e,u.width=o}else u.tensorFormat="RGBA",u.height=e,u.width=o;r.drawImage(t,0,0),s=r.getImageData(0,0,o,e).data}}else{if(!o){if(a){if(void 0===n)throw new Error("Please provide image config with format for Imagebitmap");const r=document.createElement("canvas").getContext("2d");if(null!=r){const n=t.height,o=t.width;return r.drawImage(t,0,0,o,n),s=r.getImageData(0,0,o,n).data,u.height=n,u.width=o,(0,e.bufferToTensor)(s,u)}throw new Error("Can not access image data")}if(i)return new Promise(((n,r)=>{const o=document.createElement("canvas"),a=o.getContext("2d");if(!t||!a)return r();const i=new Image;i.crossOrigin="Anonymous",i.src=t,i.onload=()=>{o.width=i.width,o.height=i.height,a.drawImage(i,0,0,o.width,o.height);const t=a.getImageData(0,0,o.width,o.height);u.height=o.height,u.width=o.width,n((0,e.bufferToTensor)(t.data,u))}}));throw new Error("Input data provided is not supported - aborted tensor creation")}{let e,r;if(void 0!==n&&void 0!==n.resizedWidth&&void 0!==n.resizedHeight?(e=n.resizedHeight,r=n.resizedWidth):(e=t.height,r=t.width),void 0!==n&&(u=n),u.format="RGBA",u.height=e,u.width=r,void 0!==n){const n=document.createElement("canvas");n.width=r,n.height=e;const o=n.getContext("2d");if(null==o)throw new Error("Can not access image data");o.putImageData(t,0,0),s=o.getImageData(0,0,r,e).data}else s=t.data}}if(void 0!==s)return(0,e.bufferToTensor)(s,u);throw new Error("Input data provided is not supported - aborted tensor creation")}},5957:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tensor=void 0;const r=n(2350),o=n(4866),a=n(106),i=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["float16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),s=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]);let u=!1;e.Tensor=class{constructor(t,e,n){let r,o,c;if((()=>{if(!u){u=!0;const t="undefined"!=typeof BigInt64Array&&"function"==typeof BigInt64Array.from,e="undefined"!=typeof BigUint64Array&&"function"==typeof BigUint64Array.from;t&&(i.set("int64",BigInt64Array),s.set(BigInt64Array,"int64")),e&&(i.set("uint64",BigUint64Array),s.set(BigUint64Array,"uint64"))}})(),"string"==typeof t)if(r=t,c=n,"string"===t){if(!Array.isArray(e))throw new TypeError("A string tensor's data must be a string array.");o=e}else{const n=i.get(t);if(void 0===n)throw new TypeError(`Unsupported tensor type: ${t}.`);if(Array.isArray(e)){if("float16"===t)throw new TypeError(`Unsupported tensor type: ${t}.`);o=n.from(e)}else{if(!(e instanceof n))throw new TypeError(`A ${r} tensor's data must be type of ${n}`);o=e}}else if(c=e,Array.isArray(t)){if(0===t.length)throw new TypeError("Tensor type cannot be inferred from an empty array.");const e=typeof t[0];if("string"===e)r="string",o=t;else{if("boolean"!==e)throw new TypeError(`Invalid element type of data array: ${e}.`);r="bool",o=Uint8Array.from(t)}}else{const e=s.get(t.constructor);if(void 0===e)throw new TypeError(`Unsupported type for tensor data: ${t.constructor}.`);r=e,o=t}if(void 0===c)c=[o.length];else if(!Array.isArray(c))throw new TypeError("A tensor's dims must be a number array");const l=(0,a.calculateSize)(c);if(l!==o.length)throw new Error(`Tensor's size(${l}) does not match data length(${o.length}).`);this.dims=c,this.type=r,this.data=o,this.size=l}static async fromImage(t,e){return(0,o.tensorFromImage)(t,e)}toDataURL(t){return(0,r.tensorToDataURL)(this,t)}toImageData(t){return(0,r.tensorToImageData)(this,t)}reshape(t){return(0,a.tensorReshape)(this,t)}}},106:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tensorReshape=e.calculateSize=void 0;const r=n(963);e.calculateSize=t=>{let e=1;for(let n=0;n<t.length;n++){const r=t[n];if("number"!=typeof r||!Number.isSafeInteger(r))throw new TypeError(`dims[${n}] must be an integer, got: ${r}`);if(r<0)throw new RangeError(`dims[${n}] must be a non-negative integer, got: ${r}`);e*=r}return e},e.tensorReshape=(t,e)=>new r.Tensor(t.type,t.data,e)},963:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tensor=void 0;const r=n(5957);e.Tensor=r.Tensor},9104:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.version=void 0,e.version="1.16.0-dev.20230704-d540c7da0f"},5686:function(t,e,n){"use strict";n.r(e),n.d(e,{flatbuffers:function(){return r}});var r={};r.Offset,r.Table,r.SIZEOF_SHORT=2,r.SIZEOF_INT=4,r.FILE_IDENTIFIER_LENGTH=4,r.SIZE_PREFIX_LENGTH=4,r.Encoding={UTF8_BYTES:1,UTF16_STRING:2},r.int32=new Int32Array(2),r.float32=new Float32Array(r.int32.buffer),r.float64=new Float64Array(r.int32.buffer),r.isLittleEndian=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0],r.Long=function(t,e){this.low=0|t,this.high=0|e},r.Long.create=function(t,e){return 0==t&&0==e?r.Long.ZERO:new r.Long(t,e)},r.Long.prototype.toFloat64=function(){return(this.low>>>0)+4294967296*this.high},r.Long.prototype.equals=function(t){return this.low==t.low&&this.high==t.high},r.Long.ZERO=new r.Long(0,0),r.Builder=function(t){if(t)e=t;else var e=1024;this.bb=r.ByteBuffer.allocate(e),this.space=e,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},r.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},r.Builder.prototype.forceDefaults=function(t){this.force_defaults=t},r.Builder.prototype.dataBuffer=function(){return this.bb},r.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},r.Builder.prototype.prep=function(t,e){t>this.minalign&&(this.minalign=t);for(var n=1+~(this.bb.capacity()-this.space+e)&t-1;this.space<n+t+e;){var o=this.bb.capacity();this.bb=r.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-o}this.pad(n)},r.Builder.prototype.pad=function(t){for(var e=0;e<t;e++)this.bb.writeInt8(--this.space,0)},r.Builder.prototype.writeInt8=function(t){this.bb.writeInt8(this.space-=1,t)},r.Builder.prototype.writeInt16=function(t){this.bb.writeInt16(this.space-=2,t)},r.Builder.prototype.writeInt32=function(t){this.bb.writeInt32(this.space-=4,t)},r.Builder.prototype.writeInt64=function(t){this.bb.writeInt64(this.space-=8,t)},r.Builder.prototype.writeFloat32=function(t){this.bb.writeFloat32(this.space-=4,t)},r.Builder.prototype.writeFloat64=function(t){this.bb.writeFloat64(this.space-=8,t)},r.Builder.prototype.addInt8=function(t){this.prep(1,0),this.writeInt8(t)},r.Builder.prototype.addInt16=function(t){this.prep(2,0),this.writeInt16(t)},r.Builder.prototype.addInt32=function(t){this.prep(4,0),this.writeInt32(t)},r.Builder.prototype.addInt64=function(t){this.prep(8,0),this.writeInt64(t)},r.Builder.prototype.addFloat32=function(t){this.prep(4,0),this.writeFloat32(t)},r.Builder.prototype.addFloat64=function(t){this.prep(8,0),this.writeFloat64(t)},r.Builder.prototype.addFieldInt8=function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt8(e),this.slot(t))},r.Builder.prototype.addFieldInt16=function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt16(e),this.slot(t))},r.Builder.prototype.addFieldInt32=function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt32(e),this.slot(t))},r.Builder.prototype.addFieldInt64=function(t,e,n){!this.force_defaults&&e.equals(n)||(this.addInt64(e),this.slot(t))},r.Builder.prototype.addFieldFloat32=function(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat32(e),this.slot(t))},r.Builder.prototype.addFieldFloat64=function(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat64(e),this.slot(t))},r.Builder.prototype.addFieldOffset=function(t,e,n){(this.force_defaults||e!=n)&&(this.addOffset(e),this.slot(t))},r.Builder.prototype.addFieldStruct=function(t,e,n){e!=n&&(this.nested(e),this.slot(t))},r.Builder.prototype.nested=function(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},r.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},r.Builder.prototype.slot=function(t){this.vtable[t]=this.offset()},r.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},r.Builder.growByteBuffer=function(t){var e=t.capacity();if(3221225472&e)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var n=e<<1,o=r.ByteBuffer.allocate(n);return o.setPosition(n-e),o.bytes().set(t.bytes(),n-e),o},r.Builder.prototype.addOffset=function(t){this.prep(r.SIZEOF_INT,0),this.writeInt32(this.offset()-t+r.SIZEOF_INT)},r.Builder.prototype.startObject=function(t){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=t;for(var e=0;e<t;e++)this.vtable[e]=0;this.isNested=!0,this.object_start=this.offset()},r.Builder.prototype.endObject=function(){if(null==this.vtable||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var t=this.offset(),e=this.vtable_in_use-1;e>=0&&0==this.vtable[e];e--);for(var n=e+1;e>=0;e--)this.addInt16(0!=this.vtable[e]?t-this.vtable[e]:0);this.addInt16(t-this.object_start);var o=(n+2)*r.SIZEOF_SHORT;this.addInt16(o);var a=0,i=this.space;t:for(e=0;e<this.vtables.length;e++){var s=this.bb.capacity()-this.vtables[e];if(o==this.bb.readInt16(s)){for(var u=r.SIZEOF_SHORT;u<o;u+=r.SIZEOF_SHORT)if(this.bb.readInt16(i+u)!=this.bb.readInt16(s+u))continue t;a=this.vtables[e];break}}return a?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,a-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t},r.Builder.prototype.finish=function(t,e,n){var o=n?r.SIZE_PREFIX_LENGTH:0;if(e){var a=e;if(this.prep(this.minalign,r.SIZEOF_INT+r.FILE_IDENTIFIER_LENGTH+o),a.length!=r.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+r.FILE_IDENTIFIER_LENGTH);for(var i=r.FILE_IDENTIFIER_LENGTH-1;i>=0;i--)this.writeInt8(a.charCodeAt(i))}this.prep(this.minalign,r.SIZEOF_INT+o),this.addOffset(t),o&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},r.Builder.prototype.finishSizePrefixed=function(t,e){this.finish(t,e,!0)},r.Builder.prototype.requiredField=function(t,e){var n=this.bb.capacity()-t,r=n-this.bb.readInt32(n);if(0==this.bb.readInt16(r+e))throw new Error("FlatBuffers: field "+e+" must be set")},r.Builder.prototype.startVector=function(t,e,n){this.notNested(),this.vector_num_elems=e,this.prep(r.SIZEOF_INT,t*e),this.prep(n,t*e)},r.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},r.Builder.prototype.createString=function(t){if(t instanceof Uint8Array)var e=t;else{e=[];for(var n=0;n<t.length;){var r,o=t.charCodeAt(n++);(r=o<55296||o>=56320?o:(o<<10)+t.charCodeAt(n++)+-56613888)<128?e.push(r):(r<2048?e.push(r>>6&31|192):(r<65536?e.push(r>>12&15|224):e.push(r>>18&7|240,r>>12&63|128),e.push(r>>6&63|128)),e.push(63&r|128))}}this.addInt8(0),this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length),n=0;for(var a=this.space,i=this.bb.bytes();n<e.length;n++)i[a++]=e[n];return this.endVector()},r.Builder.prototype.createLong=function(t,e){return r.Long.create(t,e)},r.ByteBuffer=function(t){this.bytes_=t,this.position_=0},r.ByteBuffer.allocate=function(t){return new r.ByteBuffer(new Uint8Array(t))},r.ByteBuffer.prototype.clear=function(){this.position_=0},r.ByteBuffer.prototype.bytes=function(){return this.bytes_},r.ByteBuffer.prototype.position=function(){return this.position_},r.ByteBuffer.prototype.setPosition=function(t){this.position_=t},r.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},r.ByteBuffer.prototype.readInt8=function(t){return this.readUint8(t)<<24>>24},r.ByteBuffer.prototype.readUint8=function(t){return this.bytes_[t]},r.ByteBuffer.prototype.readInt16=function(t){return this.readUint16(t)<<16>>16},r.ByteBuffer.prototype.readUint16=function(t){return this.bytes_[t]|this.bytes_[t+1]<<8},r.ByteBuffer.prototype.readInt32=function(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24},r.ByteBuffer.prototype.readUint32=function(t){return this.readInt32(t)>>>0},r.ByteBuffer.prototype.readInt64=function(t){return new r.Long(this.readInt32(t),this.readInt32(t+4))},r.ByteBuffer.prototype.readUint64=function(t){return new r.Long(this.readUint32(t),this.readUint32(t+4))},r.ByteBuffer.prototype.readFloat32=function(t){return r.int32[0]=this.readInt32(t),r.float32[0]},r.ByteBuffer.prototype.readFloat64=function(t){return r.int32[r.isLittleEndian?0:1]=this.readInt32(t),r.int32[r.isLittleEndian?1:0]=this.readInt32(t+4),r.float64[0]},r.ByteBuffer.prototype.writeInt8=function(t,e){this.bytes_[t]=e},r.ByteBuffer.prototype.writeUint8=function(t,e){this.bytes_[t]=e},r.ByteBuffer.prototype.writeInt16=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8},r.ByteBuffer.prototype.writeUint16=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8},r.ByteBuffer.prototype.writeInt32=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24},r.ByteBuffer.prototype.writeUint32=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24},r.ByteBuffer.prototype.writeInt64=function(t,e){this.writeInt32(t,e.low),this.writeInt32(t+4,e.high)},r.ByteBuffer.prototype.writeUint64=function(t,e){this.writeUint32(t,e.low),this.writeUint32(t+4,e.high)},r.ByteBuffer.prototype.writeFloat32=function(t,e){r.float32[0]=e,this.writeInt32(t,r.int32[0])},r.ByteBuffer.prototype.writeFloat64=function(t,e){r.float64[0]=e,this.writeInt32(t,r.int32[r.isLittleEndian?0:1]),this.writeInt32(t+4,r.int32[r.isLittleEndian?1:0])},r.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+r.SIZEOF_INT+r.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var t="",e=0;e<r.FILE_IDENTIFIER_LENGTH;e++)t+=String.fromCharCode(this.readInt8(this.position_+r.SIZEOF_INT+e));return t},r.ByteBuffer.prototype.__offset=function(t,e){var n=t-this.readInt32(t);return e<this.readInt16(n)?this.readInt16(n+e):0},r.ByteBuffer.prototype.__union=function(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t},r.ByteBuffer.prototype.__string=function(t,e){t+=this.readInt32(t);var n=this.readInt32(t),o="",a=0;if(t+=r.SIZEOF_INT,e===r.Encoding.UTF8_BYTES)return this.bytes_.subarray(t,t+n);for(;a<n;){var i,s=this.readUint8(t+a++);if(s<192)i=s;else{var u=this.readUint8(t+a++);if(s<224)i=(31&s)<<6|63&u;else{var c=this.readUint8(t+a++);i=s<240?(15&s)<<12|(63&u)<<6|63&c:(7&s)<<18|(63&u)<<12|(63&c)<<6|63&this.readUint8(t+a++)}}i<65536?o+=String.fromCharCode(i):(i-=65536,o+=String.fromCharCode(55296+(i>>10),56320+(1023&i)))}return o},r.ByteBuffer.prototype.__indirect=function(t){return t+this.readInt32(t)},r.ByteBuffer.prototype.__vector=function(t){return t+this.readInt32(t)+r.SIZEOF_INT},r.ByteBuffer.prototype.__vector_len=function(t){return this.readInt32(t+this.readInt32(t))},r.ByteBuffer.prototype.__has_identifier=function(t){if(t.length!=r.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+r.FILE_IDENTIFIER_LENGTH);for(var e=0;e<r.FILE_IDENTIFIER_LENGTH;e++)if(t.charCodeAt(e)!=this.readInt8(this.position_+r.SIZEOF_INT+e))return!1;return!0},r.ByteBuffer.prototype.createLong=function(t,e){return r.Long.create(t,e)}}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var n=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=function(t,e){for(var n in e)__webpack_require__.o(e,n)&&!__webpack_require__.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},__webpack_require__.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},__webpack_require__.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__(1057);return __webpack_exports__}()}));
//# sourceMappingURL=ort.es5.min.js.map